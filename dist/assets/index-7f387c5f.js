(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();function z3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function One(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var xW={exports:{}},WT={},_W={exports:{}},mn={};/**
* @license React
* react.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var NS=Symbol.for("react.element"),kne=Symbol.for("react.portal"),Gne=Symbol.for("react.fragment"),Hne=Symbol.for("react.strict_mode"),zne=Symbol.for("react.profiler"),Vne=Symbol.for("react.provider"),Wne=Symbol.for("react.context"),jne=Symbol.for("react.forward_ref"),Xne=Symbol.for("react.suspense"),Jne=Symbol.for("react.memo"),Kne=Symbol.for("react.lazy"),LG=Symbol.iterator;function Yne(n){return n===null||typeof n!="object"?null:(n=LG&&n[LG]||n["@@iterator"],typeof n=="function"?n:null)}var AW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SW=Object.assign,MW={};function ax(n,e,t){this.props=n,this.context=e,this.refs=MW,this.updater=t||AW}ax.prototype.isReactComponent={};ax.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};ax.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function EW(){}EW.prototype=ax.prototype;function V3(n,e,t){this.props=n,this.context=e,this.refs=MW,this.updater=t||AW}var W3=V3.prototype=new EW;W3.constructor=V3;SW(W3,ax.prototype);W3.isPureReactComponent=!0;var IG=Array.isArray,wW=Object.prototype.hasOwnProperty,j3={current:null},bW={key:!0,ref:!0,__self:!0,__source:!0};function CW(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wW.call(e,r)&&!bW.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:NS,type:n,key:s,ref:o,props:i,_owner:j3.current}}function qne(n,e){return{$$typeof:NS,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function X3(n){return typeof n=="object"&&n!==null&&n.$$typeof===NS}function Qne(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var DG=/\/+/g;function FP(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Qne(""+n.key):e.toString(36)}function bb(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case NS:case kne:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+FP(o,0):r,IG(i)?(t="",n!=null&&(t=n.replace(DG,"$&/")+"/"),bb(i,e,t,"",function(u){return u})):i!=null&&(X3(i)&&(i=qne(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(DG,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",IG(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+FP(s,a);o+=bb(s,e,t,l,i)}else if(l=Yne(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+FP(s,a++),o+=bb(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ZM(n,e,t){if(n==null)return n;var r=[],i=0;return bb(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Zne(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var zs={current:null},Cb={transition:null},$ne={ReactCurrentDispatcher:zs,ReactCurrentBatchConfig:Cb,ReactCurrentOwner:j3};function TW(){throw Error("act(...) is not supported in production builds of React.")}mn.Children={map:ZM,forEach:function(n,e,t){ZM(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ZM(n,function(){e++}),e},toArray:function(n){return ZM(n,function(e){return e})||[]},only:function(n){if(!X3(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};mn.Component=ax;mn.Fragment=Gne;mn.Profiler=zne;mn.PureComponent=V3;mn.StrictMode=Hne;mn.Suspense=Xne;mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$ne;mn.act=TW;mn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=SW({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=j3.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)wW.call(e,l)&&!bW.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:NS,type:n.type,key:i,ref:s,props:r,_owner:o}};mn.createContext=function(n){return n={$$typeof:Wne,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Vne,_context:n},n.Consumer=n};mn.createElement=CW;mn.createFactory=function(n){var e=CW.bind(null,n);return e.type=n,e};mn.createRef=function(){return{current:null}};mn.forwardRef=function(n){return{$$typeof:jne,render:n}};mn.isValidElement=X3;mn.lazy=function(n){return{$$typeof:Kne,_payload:{_status:-1,_result:n},_init:Zne}};mn.memo=function(n,e){return{$$typeof:Jne,type:n,compare:e===void 0?null:e}};mn.startTransition=function(n){var e=Cb.transition;Cb.transition={};try{n()}finally{Cb.transition=e}};mn.unstable_act=TW;mn.useCallback=function(n,e){return zs.current.useCallback(n,e)};mn.useContext=function(n){return zs.current.useContext(n)};mn.useDebugValue=function(){};mn.useDeferredValue=function(n){return zs.current.useDeferredValue(n)};mn.useEffect=function(n,e){return zs.current.useEffect(n,e)};mn.useId=function(){return zs.current.useId()};mn.useImperativeHandle=function(n,e,t){return zs.current.useImperativeHandle(n,e,t)};mn.useInsertionEffect=function(n,e){return zs.current.useInsertionEffect(n,e)};mn.useLayoutEffect=function(n,e){return zs.current.useLayoutEffect(n,e)};mn.useMemo=function(n,e){return zs.current.useMemo(n,e)};mn.useReducer=function(n,e,t){return zs.current.useReducer(n,e,t)};mn.useRef=function(n){return zs.current.useRef(n)};mn.useState=function(n){return zs.current.useState(n)};mn.useSyncExternalStore=function(n,e,t){return zs.current.useSyncExternalStore(n,e,t)};mn.useTransition=function(){return zs.current.useTransition()};mn.version="18.3.1";_W.exports=mn;var we=_W.exports;const Ga=z3(we);/**
* @license React
* react-jsx-runtime.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var ere=we,tre=Symbol.for("react.element"),nre=Symbol.for("react.fragment"),rre=Object.prototype.hasOwnProperty,ire=ere.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sre={key:!0,ref:!0,__self:!0,__source:!0};function RW(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)rre.call(e,r)&&!sre.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:tre,type:n,key:s,ref:o,props:i,_owner:ire.current}}WT.Fragment=nre;WT.jsx=RW;WT.jsxs=RW;xW.exports=WT;var mt=xW.exports,H2={},PW={exports:{}},ta={},BW={exports:{}},LW={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(n){function e(D,V){var G=D.length;D.push(V);e:for(;0<G;){var q=G-1>>>1,re=D[q];if(0<i(re,V))D[q]=V,D[G]=re,G=q;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var V=D[0],G=D.pop();if(G!==V){D[0]=G;e:for(var q=0,re=D.length,Y=re>>>1;q<Y;){var ae=2*(q+1)-1,Se=D[ae],ve=ae+1,W=D[ve];if(0>i(Se,G))ve<re&&0>i(W,Se)?(D[q]=W,D[ve]=G,q=ve):(D[q]=Se,D[ae]=G,q=ae);else if(ve<re&&0>i(W,G))D[q]=W,D[ve]=G,q=ve;else break e}}return V}function i(D,V){var G=D.sortIndex-V.sortIndex;return G!==0?G:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,v=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(D){for(var V=t(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=D)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(u)}}function w(D){if(S=!1,A(D),!v)if(t(l)!==null)v=!0,te(C);else{var V=t(u);V!==null&&O(w,V.startTime-D)}}function C(D,V){v=!1,S&&(S=!1,g(I),I=-1),m=!0;var G=p;try{for(A(V),d=t(l);d!==null&&(!(d.expirationTime>V)||D&&!H());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var re=q(d.expirationTime<=V);V=n.unstable_now(),typeof re=="function"?d.callback=re:d===t(l)&&r(l),A(V)}else r(l);d=t(l)}if(d!==null)var Y=!0;else{var ae=t(u);ae!==null&&O(w,ae.startTime-V),Y=!1}return Y}finally{d=null,p=G,m=!1}}var R=!1,L=null,I=-1,T=5,B=-1;function H(){return!(n.unstable_now()-B<T)}function K(){if(L!==null){var D=n.unstable_now();B=D;var V=!0;try{V=L(!0,D)}finally{V?j():(R=!1,L=null)}}else R=!1}var j;if(typeof _=="function")j=function(){_(K)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,X=z.port2;z.port1.onmessage=K,j=function(){X.postMessage(null)}}else j=function(){M(K,0)};function te(D){L=D,R||(R=!0,j())}function O(D,V){I=M(function(){D(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,te(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var G=p;p=V;try{return D()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=p;p=D;try{return V()}finally{p=G}},n.unstable_scheduleCallback=function(D,V,G){var q=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,D){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,D={id:h++,callback:V,priorityLevel:D,startTime:G,expirationTime:re,sortIndex:-1},G>q?(D.sortIndex=G,e(u,D),t(l)===null&&D===t(u)&&(S?(g(I),I=-1):S=!0,O(w,G-q))):(D.sortIndex=re,e(l,D),v||m||(v=!0,te(C))),D},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(D){var V=p;return function(){var G=p;p=V;try{return D.apply(this,arguments)}finally{p=G}}}})(LW);BW.exports=LW;var ore=BW.exports;/**
* @license React
* react-dom.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var are=we,Yo=ore;function et(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var IW=new Set,EA={};function dg(n,e){Cy(n,e),Cy(n+"Capture",e)}function Cy(n,e){for(EA[n]=e,n=0;n<e.length;n++)IW.add(e[n])}var uh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),z2=Object.prototype.hasOwnProperty,lre=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,FG={},NG={};function cre(n){return z2.call(NG,n)?!0:z2.call(FG,n)?!1:lre.test(n)?NG[n]=!0:(FG[n]=!0,!1)}function ure(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function hre(n,e,t,r){if(e===null||typeof e>"u"||ure(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vs(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ss={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ss[n]=new Vs(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ss[e]=new Vs(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ss[n]=new Vs(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ss[n]=new Vs(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ss[n]=new Vs(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ss[n]=new Vs(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ss[n]=new Vs(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ss[n]=new Vs(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ss[n]=new Vs(n,5,!1,n.toLowerCase(),null,!1,!1)});var J3=/[\-:]([a-z])/g;function K3(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(J3,K3);ss[e]=new Vs(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(J3,K3);ss[e]=new Vs(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(J3,K3);ss[e]=new Vs(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ss[n]=new Vs(n,1,!1,n.toLowerCase(),null,!1,!1)});ss.xlinkHref=new Vs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ss[n]=new Vs(n,1,!1,n.toLowerCase(),null,!0,!0)});function Y3(n,e,t,r){var i=ss.hasOwnProperty(e)?ss[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hre(e,t,i,r)&&(t=null),r||i===null?cre(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Eh=are.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$M=Symbol.for("react.element"),vv=Symbol.for("react.portal"),yv=Symbol.for("react.fragment"),q3=Symbol.for("react.strict_mode"),V2=Symbol.for("react.profiler"),DW=Symbol.for("react.provider"),FW=Symbol.for("react.context"),Q3=Symbol.for("react.forward_ref"),W2=Symbol.for("react.suspense"),j2=Symbol.for("react.suspense_list"),Z3=Symbol.for("react.memo"),ud=Symbol.for("react.lazy"),NW=Symbol.for("react.offscreen"),UG=Symbol.iterator;function P_(n){return n===null||typeof n!="object"?null:(n=UG&&n[UG]||n["@@iterator"],typeof n=="function"?n:null)}var Cr=Object.assign,NP;function E1(n){if(NP===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);NP=e&&e[1]||""}return`
`+NP+n}var UP=!1;function OP(n,e){if(!n||UP)return"";UP=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{UP=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?E1(n):""}function dre(n){switch(n.tag){case 5:return E1(n.type);case 16:return E1("Lazy");case 13:return E1("Suspense");case 19:return E1("SuspenseList");case 0:case 2:case 15:return n=OP(n.type,!1),n;case 11:return n=OP(n.type.render,!1),n;case 1:return n=OP(n.type,!0),n;default:return""}}function X2(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case yv:return"Fragment";case vv:return"Portal";case V2:return"Profiler";case q3:return"StrictMode";case W2:return"Suspense";case j2:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case FW:return(n.displayName||"Context")+".Consumer";case DW:return(n._context.displayName||"Context")+".Provider";case Q3:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Z3:return e=n.displayName||null,e!==null?e:X2(n.type)||"Memo";case ud:e=n._payload,n=n._init;try{return X2(n(e))}catch{}}return null}function fre(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X2(e);case 8:return e===q3?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rf(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function UW(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pre(n){var e=UW(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function eE(n){n._valueTracker||(n._valueTracker=pre(n))}function OW(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=UW(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function yC(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function J2(n,e){var t=e.checked;return Cr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function OG(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=rf(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kW(n,e){e=e.checked,e!=null&&Y3(n,"checked",e,!1)}function K2(n,e){kW(n,e);var t=rf(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Y2(n,e.type,t):e.hasOwnProperty("defaultValue")&&Y2(n,e.type,rf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function kG(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Y2(n,e,t){(e!=="number"||yC(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var w1=Array.isArray;function ay(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+rf(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function q2(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(et(91));return Cr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function GG(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(et(92));if(w1(t)){if(1<t.length)throw Error(et(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:rf(t)}}function GW(n,e){var t=rf(e.value),r=rf(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function HG(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function HW(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q2(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?HW(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var tE,zW=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(tE=tE||document.createElement("div"),tE.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tE.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function wA(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var O1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mre=["Webkit","ms","Moz","O"];Object.keys(O1).forEach(function(n){mre.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),O1[e]=O1[n]})});function VW(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||O1.hasOwnProperty(n)&&O1[n]?(""+e).trim():e+"px"}function WW(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=VW(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var gre=Cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Z2(n,e){if(e){if(gre[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(et(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(et(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(et(61))}if(e.style!=null&&typeof e.style!="object")throw Error(et(62))}}function $2(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eI=null;function $3(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tI=null,ly=null,cy=null;function zG(n){if(n=kS(n)){if(typeof tI!="function")throw Error(et(280));var e=n.stateNode;e&&(e=YT(e),tI(n.stateNode,n.type,e))}}function jW(n){ly?cy?cy.push(n):cy=[n]:ly=n}function XW(){if(ly){var n=ly,e=cy;if(cy=ly=null,zG(n),e)for(n=0;n<e.length;n++)zG(e[n])}}function JW(n,e){return n(e)}function KW(){}var kP=!1;function YW(n,e,t){if(kP)return n(e,t);kP=!0;try{return JW(n,e,t)}finally{kP=!1,(ly!==null||cy!==null)&&(KW(),XW())}}function bA(n,e){var t=n.stateNode;if(t===null)return null;var r=YT(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(et(231,e,typeof t));return t}var nI=!1;if(uh)try{var B_={};Object.defineProperty(B_,"passive",{get:function(){nI=!0}}),window.addEventListener("test",B_,B_),window.removeEventListener("test",B_,B_)}catch{nI=!1}function vre(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var k1=!1,xC=null,_C=!1,rI=null,yre={onError:function(n){k1=!0,xC=n}};function xre(n,e,t,r,i,s,o,a,l){k1=!1,xC=null,vre.apply(yre,arguments)}function _re(n,e,t,r,i,s,o,a,l){if(xre.apply(this,arguments),k1){if(k1){var u=xC;k1=!1,xC=null}else throw Error(et(198));_C||(_C=!0,rI=u)}}function fg(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function qW(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function VG(n){if(fg(n)!==n)throw Error(et(188))}function Are(n){var e=n.alternate;if(!e){if(e=fg(n),e===null)throw Error(et(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return VG(i),n;if(s===r)return VG(i),e;s=s.sibling}throw Error(et(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(et(189))}}if(t.alternate!==r)throw Error(et(190))}if(t.tag!==3)throw Error(et(188));return t.stateNode.current===t?n:e}function QW(n){return n=Are(n),n!==null?ZW(n):null}function ZW(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ZW(n);if(e!==null)return e;n=n.sibling}return null}var $W=Yo.unstable_scheduleCallback,WG=Yo.unstable_cancelCallback,Sre=Yo.unstable_shouldYield,Mre=Yo.unstable_requestPaint,jr=Yo.unstable_now,Ere=Yo.unstable_getCurrentPriorityLevel,eN=Yo.unstable_ImmediatePriority,ej=Yo.unstable_UserBlockingPriority,AC=Yo.unstable_NormalPriority,wre=Yo.unstable_LowPriority,tj=Yo.unstable_IdlePriority,jT=null,Lc=null;function bre(n){if(Lc&&typeof Lc.onCommitFiberRoot=="function")try{Lc.onCommitFiberRoot(jT,n,void 0,(n.current.flags&128)===128)}catch{}}var Tl=Math.clz32?Math.clz32:Rre,Cre=Math.log,Tre=Math.LN2;function Rre(n){return n>>>=0,n===0?32:31-(Cre(n)/Tre|0)|0}var nE=64,rE=4194304;function b1(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function SC(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=b1(a):(s&=o,s!==0&&(r=b1(s)))}else o=t&~i,o!==0?r=b1(o):s!==0&&(r=b1(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Tl(e),i=1<<t,r|=n[t],e&=~i;return r}function Pre(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bre(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Tl(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Pre(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function iI(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function nj(){var n=nE;return nE<<=1,!(nE&4194240)&&(nE=64),n}function GP(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function US(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Tl(e),n[e]=t}function Lre(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Tl(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function tN(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Tl(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var On=0;function rj(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var ij,nN,sj,oj,aj,sI=!1,iE=[],Pd=null,Bd=null,Ld=null,CA=new Map,TA=new Map,yd=[],Ire="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jG(n,e){switch(n){case"focusin":case"focusout":Pd=null;break;case"dragenter":case"dragleave":Bd=null;break;case"mouseover":case"mouseout":Ld=null;break;case"pointerover":case"pointerout":CA.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":TA.delete(e.pointerId)}}function L_(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kS(e),e!==null&&nN(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Dre(n,e,t,r,i){switch(e){case"focusin":return Pd=L_(Pd,n,e,t,r,i),!0;case"dragenter":return Bd=L_(Bd,n,e,t,r,i),!0;case"mouseover":return Ld=L_(Ld,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return CA.set(s,L_(CA.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,TA.set(s,L_(TA.get(s)||null,n,e,t,r,i)),!0}return!1}function lj(n){var e=nm(n.target);if(e!==null){var t=fg(e);if(t!==null){if(e=t.tag,e===13){if(e=qW(t),e!==null){n.blockedOn=e,aj(n.priority,function(){sj(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Tb(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=oI(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);eI=r,t.target.dispatchEvent(r),eI=null}else return e=kS(t),e!==null&&nN(e),n.blockedOn=t,!1;e.shift()}return!0}function XG(n,e,t){Tb(n)&&t.delete(e)}function Fre(){sI=!1,Pd!==null&&Tb(Pd)&&(Pd=null),Bd!==null&&Tb(Bd)&&(Bd=null),Ld!==null&&Tb(Ld)&&(Ld=null),CA.forEach(XG),TA.forEach(XG)}function I_(n,e){n.blockedOn===e&&(n.blockedOn=null,sI||(sI=!0,Yo.unstable_scheduleCallback(Yo.unstable_NormalPriority,Fre)))}function RA(n){function e(i){return I_(i,n)}if(0<iE.length){I_(iE[0],n);for(var t=1;t<iE.length;t++){var r=iE[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Pd!==null&&I_(Pd,n),Bd!==null&&I_(Bd,n),Ld!==null&&I_(Ld,n),CA.forEach(e),TA.forEach(e),t=0;t<yd.length;t++)r=yd[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<yd.length&&(t=yd[0],t.blockedOn===null);)lj(t),t.blockedOn===null&&yd.shift()}var uy=Eh.ReactCurrentBatchConfig,MC=!0;function Nre(n,e,t,r){var i=On,s=uy.transition;uy.transition=null;try{On=1,rN(n,e,t,r)}finally{On=i,uy.transition=s}}function Ure(n,e,t,r){var i=On,s=uy.transition;uy.transition=null;try{On=4,rN(n,e,t,r)}finally{On=i,uy.transition=s}}function rN(n,e,t,r){if(MC){var i=oI(n,e,t,r);if(i===null)qP(n,e,r,EC,t),jG(n,r);else if(Dre(i,n,e,t,r))r.stopPropagation();else if(jG(n,r),e&4&&-1<Ire.indexOf(n)){for(;i!==null;){var s=kS(i);if(s!==null&&ij(s),s=oI(n,e,t,r),s===null&&qP(n,e,r,EC,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else qP(n,e,r,null,t)}}var EC=null;function oI(n,e,t,r){if(EC=null,n=$3(r),n=nm(n),n!==null)if(e=fg(n),e===null)n=null;else if(t=e.tag,t===13){if(n=qW(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return EC=n,null}function cj(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ere()){case eN:return 1;case ej:return 4;case AC:case wre:return 16;case tj:return 536870912;default:return 16}default:return 16}}var Sd=null,iN=null,Rb=null;function uj(){if(Rb)return Rb;var n,e=iN,t=e.length,r,i="value"in Sd?Sd.value:Sd.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Rb=i.slice(n,1<r?1-r:void 0)}function Pb(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function sE(){return!0}function JG(){return!1}function na(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?sE:JG,this.isPropagationStopped=JG,this}return Cr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=sE)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=sE)},persist:function(){},isPersistent:sE}),e}var lx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sN=na(lx),OS=Cr({},lx,{view:0,detail:0}),Ore=na(OS),HP,zP,D_,XT=Cr({},OS,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oN,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==D_&&(D_&&n.type==="mousemove"?(HP=n.screenX-D_.screenX,zP=n.screenY-D_.screenY):zP=HP=0,D_=n),HP)},movementY:function(n){return"movementY"in n?n.movementY:zP}}),KG=na(XT),kre=Cr({},XT,{dataTransfer:0}),Gre=na(kre),Hre=Cr({},OS,{relatedTarget:0}),VP=na(Hre),zre=Cr({},lx,{animationName:0,elapsedTime:0,pseudoElement:0}),Vre=na(zre),Wre=Cr({},lx,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),jre=na(Wre),Xre=Cr({},lx,{data:0}),YG=na(Xre),Jre={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qre(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Yre[n])?!!e[n]:!1}function oN(){return qre}var Qre=Cr({},OS,{key:function(n){if(n.key){var e=Jre[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Pb(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Kre[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oN,charCode:function(n){return n.type==="keypress"?Pb(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pb(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Zre=na(Qre),$re=Cr({},XT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qG=na($re),eie=Cr({},OS,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oN}),tie=na(eie),nie=Cr({},lx,{propertyName:0,elapsedTime:0,pseudoElement:0}),rie=na(nie),iie=Cr({},XT,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),sie=na(iie),oie=[9,13,27,32],aN=uh&&"CompositionEvent"in window,G1=null;uh&&"documentMode"in document&&(G1=document.documentMode);var aie=uh&&"TextEvent"in window&&!G1,hj=uh&&(!aN||G1&&8<G1&&11>=G1),QG=String.fromCharCode(32),ZG=!1;function dj(n,e){switch(n){case"keyup":return oie.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fj(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xv=!1;function lie(n,e){switch(n){case"compositionend":return fj(e);case"keypress":return e.which!==32?null:(ZG=!0,QG);case"textInput":return n=e.data,n===QG&&ZG?null:n;default:return null}}function cie(n,e){if(xv)return n==="compositionend"||!aN&&dj(n,e)?(n=uj(),Rb=iN=Sd=null,xv=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return hj&&e.locale!=="ko"?null:e.data;default:return null}}var uie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $G(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!uie[n.type]:e==="textarea"}function pj(n,e,t,r){jW(r),e=wC(e,"onChange"),0<e.length&&(t=new sN("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var H1=null,PA=null;function hie(n){wj(n,0)}function JT(n){var e=Sv(n);if(OW(e))return n}function die(n,e){if(n==="change")return e}var mj=!1;if(uh){var WP;if(uh){var jP="oninput"in document;if(!jP){var eH=document.createElement("div");eH.setAttribute("oninput","return;"),jP=typeof eH.oninput=="function"}WP=jP}else WP=!1;mj=WP&&(!document.documentMode||9<document.documentMode)}function tH(){H1&&(H1.detachEvent("onpropertychange",gj),PA=H1=null)}function gj(n){if(n.propertyName==="value"&&JT(PA)){var e=[];pj(e,PA,n,$3(n)),YW(hie,e)}}function fie(n,e,t){n==="focusin"?(tH(),H1=e,PA=t,H1.attachEvent("onpropertychange",gj)):n==="focusout"&&tH()}function pie(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return JT(PA)}function mie(n,e){if(n==="click")return JT(e)}function gie(n,e){if(n==="input"||n==="change")return JT(e)}function vie(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Nl=typeof Object.is=="function"?Object.is:vie;function BA(n,e){if(Nl(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!z2.call(e,i)||!Nl(n[i],e[i]))return!1}return!0}function nH(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rH(n,e){var t=nH(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=nH(t)}}function vj(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?vj(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function yj(){for(var n=window,e=yC();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=yC(n.document)}return e}function lN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function yie(n){var e=yj(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&vj(t.ownerDocument.documentElement,t)){if(r!==null&&lN(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=rH(t,s);var o=rH(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var xie=uh&&"documentMode"in document&&11>=document.documentMode,_v=null,aI=null,z1=null,lI=!1;function iH(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;lI||_v==null||_v!==yC(r)||(r=_v,"selectionStart"in r&&lN(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),z1&&BA(z1,r)||(z1=r,r=wC(aI,"onSelect"),0<r.length&&(e=new sN("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=_v)))}function oE(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Av={animationend:oE("Animation","AnimationEnd"),animationiteration:oE("Animation","AnimationIteration"),animationstart:oE("Animation","AnimationStart"),transitionend:oE("Transition","TransitionEnd")},XP={},xj={};uh&&(xj=document.createElement("div").style,"AnimationEvent"in window||(delete Av.animationend.animation,delete Av.animationiteration.animation,delete Av.animationstart.animation),"TransitionEvent"in window||delete Av.transitionend.transition);function KT(n){if(XP[n])return XP[n];if(!Av[n])return n;var e=Av[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in xj)return XP[n]=e[t];return n}var _j=KT("animationend"),Aj=KT("animationiteration"),Sj=KT("animationstart"),Mj=KT("transitionend"),Ej=new Map,sH="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sf(n,e){Ej.set(n,e),dg(e,[n])}for(var JP=0;JP<sH.length;JP++){var KP=sH[JP],_ie=KP.toLowerCase(),Aie=KP[0].toUpperCase()+KP.slice(1);Sf(_ie,"on"+Aie)}Sf(_j,"onAnimationEnd");Sf(Aj,"onAnimationIteration");Sf(Sj,"onAnimationStart");Sf("dblclick","onDoubleClick");Sf("focusin","onFocus");Sf("focusout","onBlur");Sf(Mj,"onTransitionEnd");Cy("onMouseEnter",["mouseout","mouseover"]);Cy("onMouseLeave",["mouseout","mouseover"]);Cy("onPointerEnter",["pointerout","pointerover"]);Cy("onPointerLeave",["pointerout","pointerover"]);dg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dg("onBeforeInput",["compositionend","keypress","textInput","paste"]);dg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var C1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sie=new Set("cancel close invalid load scroll toggle".split(" ").concat(C1));function oH(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,_re(r,e,void 0,n),n.currentTarget=null}function wj(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;oH(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;oH(i,a,u),s=l}}}if(_C)throw n=rI,_C=!1,rI=null,n}function sr(n,e){var t=e[fI];t===void 0&&(t=e[fI]=new Set);var r=n+"__bubble";t.has(r)||(bj(e,n,2,!1),t.add(r))}function YP(n,e,t){var r=0;e&&(r|=4),bj(t,n,r,e)}var aE="_reactListening"+Math.random().toString(36).slice(2);function LA(n){if(!n[aE]){n[aE]=!0,IW.forEach(function(t){t!=="selectionchange"&&(Sie.has(t)||YP(t,!1,n),YP(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[aE]||(e[aE]=!0,YP("selectionchange",!1,e))}}function bj(n,e,t,r){switch(cj(e)){case 1:var i=Nre;break;case 4:i=Ure;break;default:i=rN}t=i.bind(null,e,t,n),i=void 0,!nI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function qP(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=nm(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}YW(function(){var u=s,h=$3(t),d=[];e:{var p=Ej.get(n);if(p!==void 0){var m=sN,v=n;switch(n){case"keypress":if(Pb(t)===0)break e;case"keydown":case"keyup":m=Zre;break;case"focusin":v="focus",m=VP;break;case"focusout":v="blur",m=VP;break;case"beforeblur":case"afterblur":m=VP;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=KG;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Gre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=tie;break;case _j:case Aj:case Sj:m=Vre;break;case Mj:m=rie;break;case"scroll":m=Ore;break;case"wheel":m=sie;break;case"copy":case"cut":case"paste":m=jre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=qG}var S=(e&4)!==0,M=!S&&n==="scroll",g=S?p!==null?p+"Capture":null:p;S=[];for(var _=u,A;_!==null;){A=_;var w=A.stateNode;if(A.tag===5&&w!==null&&(A=w,g!==null&&(w=bA(_,g),w!=null&&S.push(IA(_,w,A)))),M)break;_=_.return}0<S.length&&(p=new m(p,v,null,t,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==eI&&(v=t.relatedTarget||t.fromElement)&&(nm(v)||v[hh]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?nm(v):null,v!==null&&(M=fg(v),v!==M||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(S=KG,w="onMouseLeave",g="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(S=qG,w="onPointerLeave",g="onPointerEnter",_="pointer"),M=m==null?p:Sv(m),A=v==null?p:Sv(v),p=new S(w,_+"leave",m,t,h),p.target=M,p.relatedTarget=A,w=null,nm(h)===u&&(S=new S(g,_+"enter",v,t,h),S.target=A,S.relatedTarget=M,w=S),M=w,m&&v)t:{for(S=m,g=v,_=0,A=S;A;A=v0(A))_++;for(A=0,w=g;w;w=v0(w))A++;for(;0<_-A;)S=v0(S),_--;for(;0<A-_;)g=v0(g),A--;for(;_--;){if(S===g||g!==null&&S===g.alternate)break t;S=v0(S),g=v0(g)}S=null}else S=null;m!==null&&aH(d,p,m,S,!1),v!==null&&M!==null&&aH(d,M,v,S,!0)}}e:{if(p=u?Sv(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=die;else if($G(p))if(mj)C=gie;else{C=pie;var R=fie}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=mie);if(C&&(C=C(n,u))){pj(d,C,t,h);break e}R&&R(n,p,u),n==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&Y2(p,"number",p.value)}switch(R=u?Sv(u):window,n){case"focusin":($G(R)||R.contentEditable==="true")&&(_v=R,aI=u,z1=null);break;case"focusout":z1=aI=_v=null;break;case"mousedown":lI=!0;break;case"contextmenu":case"mouseup":case"dragend":lI=!1,iH(d,t,h);break;case"selectionchange":if(xie)break;case"keydown":case"keyup":iH(d,t,h)}var L;if(aN)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else xv?dj(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(hj&&t.locale!=="ko"&&(xv||I!=="onCompositionStart"?I==="onCompositionEnd"&&xv&&(L=uj()):(Sd=h,iN="value"in Sd?Sd.value:Sd.textContent,xv=!0)),R=wC(u,I),0<R.length&&(I=new YG(I,n,null,t,h),d.push({event:I,listeners:R}),L?I.data=L:(L=fj(t),L!==null&&(I.data=L)))),(L=aie?lie(n,t):cie(n,t))&&(u=wC(u,"onBeforeInput"),0<u.length&&(h=new YG("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=L))}wj(d,e)})}function IA(n,e,t){return{instance:n,listener:e,currentTarget:t}}function wC(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bA(n,t),s!=null&&r.unshift(IA(n,s,i)),s=bA(n,e),s!=null&&r.push(IA(n,s,i))),n=n.return}return r}function v0(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function aH(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=bA(t,s),l!=null&&o.unshift(IA(t,l,a))):i||(l=bA(t,s),l!=null&&o.push(IA(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Mie=/\r\n?/g,Eie=/\u0000|\uFFFD/g;function lH(n){return(typeof n=="string"?n:""+n).replace(Mie,`
`).replace(Eie,"")}function lE(n,e,t){if(e=lH(e),lH(n)!==e&&t)throw Error(et(425))}function bC(){}var cI=null,uI=null;function hI(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dI=typeof setTimeout=="function"?setTimeout:void 0,wie=typeof clearTimeout=="function"?clearTimeout:void 0,cH=typeof Promise=="function"?Promise:void 0,bie=typeof queueMicrotask=="function"?queueMicrotask:typeof cH<"u"?function(n){return cH.resolve(null).then(n).catch(Cie)}:dI;function Cie(n){setTimeout(function(){throw n})}function QP(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),RA(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);RA(e)}function Id(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function uH(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var cx=Math.random().toString(36).slice(2),Pc="__reactFiber$"+cx,DA="__reactProps$"+cx,hh="__reactContainer$"+cx,fI="__reactEvents$"+cx,Tie="__reactListeners$"+cx,Rie="__reactHandles$"+cx;function nm(n){var e=n[Pc];if(e)return e;for(var t=n.parentNode;t;){if(e=t[hh]||t[Pc]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=uH(n);n!==null;){if(t=n[Pc])return t;n=uH(n)}return e}n=t,t=n.parentNode}return null}function kS(n){return n=n[Pc]||n[hh],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Sv(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(et(33))}function YT(n){return n[DA]||null}var pI=[],Mv=-1;function Mf(n){return{current:n}}function ar(n){0>Mv||(n.current=pI[Mv],pI[Mv]=null,Mv--)}function Kn(n,e){Mv++,pI[Mv]=n.current,n.current=e}var sf={},Es=Mf(sf),uo=Mf(!1),Gm=sf;function Ty(n,e){var t=n.type.contextTypes;if(!t)return sf;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ho(n){return n=n.childContextTypes,n!=null}function CC(){ar(uo),ar(Es)}function hH(n,e,t){if(Es.current!==sf)throw Error(et(168));Kn(Es,e),Kn(uo,t)}function Cj(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(et(108,fre(n)||"Unknown",i));return Cr({},t,r)}function TC(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||sf,Gm=Es.current,Kn(Es,n),Kn(uo,uo.current),!0}function dH(n,e,t){var r=n.stateNode;if(!r)throw Error(et(169));t?(n=Cj(n,e,Gm),r.__reactInternalMemoizedMergedChildContext=n,ar(uo),ar(Es),Kn(Es,n)):ar(uo),Kn(uo,t)}var Ou=null,qT=!1,ZP=!1;function Tj(n){Ou===null?Ou=[n]:Ou.push(n)}function Pie(n){qT=!0,Tj(n)}function Ef(){if(!ZP&&Ou!==null){ZP=!0;var n=0,e=On;try{var t=Ou;for(On=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Ou=null,qT=!1}catch(i){throw Ou!==null&&(Ou=Ou.slice(n+1)),$W(eN,Ef),i}finally{On=e,ZP=!1}}return null}var Ev=[],wv=0,RC=null,PC=0,Da=[],Fa=0,Hm=null,zu=1,Vu="";function Up(n,e){Ev[wv++]=PC,Ev[wv++]=RC,RC=n,PC=e}function Rj(n,e,t){Da[Fa++]=zu,Da[Fa++]=Vu,Da[Fa++]=Hm,Hm=n;var r=zu;n=Vu;var i=32-Tl(r)-1;r&=~(1<<i),t+=1;var s=32-Tl(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zu=1<<32-Tl(e)+i|t<<i|r,Vu=s+n}else zu=1<<s|t<<i|r,Vu=n}function cN(n){n.return!==null&&(Up(n,1),Rj(n,1,0))}function uN(n){for(;n===RC;)RC=Ev[--wv],Ev[wv]=null,PC=Ev[--wv],Ev[wv]=null;for(;n===Hm;)Hm=Da[--Fa],Da[Fa]=null,Vu=Da[--Fa],Da[Fa]=null,zu=Da[--Fa],Da[Fa]=null}var jo=null,ko=null,ur=!1,Sl=null;function Pj(n,e){var t=Oa(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function fH(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,jo=n,ko=Id(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,jo=n,ko=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Hm!==null?{id:zu,overflow:Vu}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Oa(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,jo=n,ko=null,!0):!1;default:return!1}}function mI(n){return(n.mode&1)!==0&&(n.flags&128)===0}function gI(n){if(ur){var e=ko;if(e){var t=e;if(!fH(n,e)){if(mI(n))throw Error(et(418));e=Id(t.nextSibling);var r=jo;e&&fH(n,e)?Pj(r,t):(n.flags=n.flags&-4097|2,ur=!1,jo=n)}}else{if(mI(n))throw Error(et(418));n.flags=n.flags&-4097|2,ur=!1,jo=n}}}function pH(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;jo=n}function cE(n){if(n!==jo)return!1;if(!ur)return pH(n),ur=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!hI(n.type,n.memoizedProps)),e&&(e=ko)){if(mI(n))throw Bj(),Error(et(418));for(;e;)Pj(n,e),e=Id(e.nextSibling)}if(pH(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(et(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ko=Id(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ko=null}}else ko=jo?Id(n.stateNode.nextSibling):null;return!0}function Bj(){for(var n=ko;n;)n=Id(n.nextSibling)}function Ry(){ko=jo=null,ur=!1}function hN(n){Sl===null?Sl=[n]:Sl.push(n)}var Bie=Eh.ReactCurrentBatchConfig;function F_(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(et(309));var r=t.stateNode}if(!r)throw Error(et(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(et(284));if(!t._owner)throw Error(et(290,n))}return n}function uE(n,e){throw n=Object.prototype.toString.call(e),Error(et(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function mH(n){var e=n._init;return e(n._payload)}function Lj(n){function e(g,_){if(n){var A=g.deletions;A===null?(g.deletions=[_],g.flags|=16):A.push(_)}}function t(g,_){if(!n)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function r(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function i(g,_){return g=Ud(g,_),g.index=0,g.sibling=null,g}function s(g,_,A){return g.index=A,n?(A=g.alternate,A!==null?(A=A.index,A<_?(g.flags|=2,_):A):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,_,A,w){return _===null||_.tag!==6?(_=sB(A,g.mode,w),_.return=g,_):(_=i(_,A),_.return=g,_)}function l(g,_,A,w){var C=A.type;return C===yv?h(g,_,A.props.children,w,A.key):_!==null&&(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ud&&mH(C)===_.type)?(w=i(_,A.props),w.ref=F_(g,_,A),w.return=g,w):(w=Ub(A.type,A.key,A.props,null,g.mode,w),w.ref=F_(g,_,A),w.return=g,w)}function u(g,_,A,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=oB(A,g.mode,w),_.return=g,_):(_=i(_,A.children||[]),_.return=g,_)}function h(g,_,A,w,C){return _===null||_.tag!==7?(_=Em(A,g.mode,w,C),_.return=g,_):(_=i(_,A),_.return=g,_)}function d(g,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=sB(""+_,g.mode,A),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $M:return A=Ub(_.type,_.key,_.props,null,g.mode,A),A.ref=F_(g,null,_),A.return=g,A;case vv:return _=oB(_,g.mode,A),_.return=g,_;case ud:var w=_._init;return d(g,w(_._payload),A)}if(w1(_)||P_(_))return _=Em(_,g.mode,A,null),_.return=g,_;uE(g,_)}return null}function p(g,_,A,w){var C=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return C!==null?null:a(g,_,""+A,w);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case $M:return A.key===C?l(g,_,A,w):null;case vv:return A.key===C?u(g,_,A,w):null;case ud:return C=A._init,p(g,_,C(A._payload),w)}if(w1(A)||P_(A))return C!==null?null:h(g,_,A,w,null);uE(g,A)}return null}function m(g,_,A,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(A)||null,a(_,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $M:return g=g.get(w.key===null?A:w.key)||null,l(_,g,w,C);case vv:return g=g.get(w.key===null?A:w.key)||null,u(_,g,w,C);case ud:var R=w._init;return m(g,_,A,R(w._payload),C)}if(w1(w)||P_(w))return g=g.get(A)||null,h(_,g,w,C,null);uE(_,w)}return null}function v(g,_,A,w){for(var C=null,R=null,L=_,I=_=0,T=null;L!==null&&I<A.length;I++){L.index>I?(T=L,L=null):T=L.sibling;var B=p(g,L,A[I],w);if(B===null){L===null&&(L=T);break}n&&L&&B.alternate===null&&e(g,L),_=s(B,_,I),R===null?C=B:R.sibling=B,R=B,L=T}if(I===A.length)return t(g,L),ur&&Up(g,I),C;if(L===null){for(;I<A.length;I++)L=d(g,A[I],w),L!==null&&(_=s(L,_,I),R===null?C=L:R.sibling=L,R=L);return ur&&Up(g,I),C}for(L=r(g,L);I<A.length;I++)T=m(L,g,I,A[I],w),T!==null&&(n&&T.alternate!==null&&L.delete(T.key===null?I:T.key),_=s(T,_,I),R===null?C=T:R.sibling=T,R=T);return n&&L.forEach(function(H){return e(g,H)}),ur&&Up(g,I),C}function S(g,_,A,w){var C=P_(A);if(typeof C!="function")throw Error(et(150));if(A=C.call(A),A==null)throw Error(et(151));for(var R=C=null,L=_,I=_=0,T=null,B=A.next();L!==null&&!B.done;I++,B=A.next()){L.index>I?(T=L,L=null):T=L.sibling;var H=p(g,L,B.value,w);if(H===null){L===null&&(L=T);break}n&&L&&H.alternate===null&&e(g,L),_=s(H,_,I),R===null?C=H:R.sibling=H,R=H,L=T}if(B.done)return t(g,L),ur&&Up(g,I),C;if(L===null){for(;!B.done;I++,B=A.next())B=d(g,B.value,w),B!==null&&(_=s(B,_,I),R===null?C=B:R.sibling=B,R=B);return ur&&Up(g,I),C}for(L=r(g,L);!B.done;I++,B=A.next())B=m(L,g,I,B.value,w),B!==null&&(n&&B.alternate!==null&&L.delete(B.key===null?I:B.key),_=s(B,_,I),R===null?C=B:R.sibling=B,R=B);return n&&L.forEach(function(K){return e(g,K)}),ur&&Up(g,I),C}function M(g,_,A,w){if(typeof A=="object"&&A!==null&&A.type===yv&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case $M:e:{for(var C=A.key,R=_;R!==null;){if(R.key===C){if(C=A.type,C===yv){if(R.tag===7){t(g,R.sibling),_=i(R,A.props.children),_.return=g,g=_;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ud&&mH(C)===R.type){t(g,R.sibling),_=i(R,A.props),_.ref=F_(g,R,A),_.return=g,g=_;break e}t(g,R);break}else e(g,R);R=R.sibling}A.type===yv?(_=Em(A.props.children,g.mode,w,A.key),_.return=g,g=_):(w=Ub(A.type,A.key,A.props,null,g.mode,w),w.ref=F_(g,_,A),w.return=g,g=w)}return o(g);case vv:e:{for(R=A.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){t(g,_.sibling),_=i(_,A.children||[]),_.return=g,g=_;break e}else{t(g,_);break}else e(g,_);_=_.sibling}_=oB(A,g.mode,w),_.return=g,g=_}return o(g);case ud:return R=A._init,M(g,_,R(A._payload),w)}if(w1(A))return v(g,_,A,w);if(P_(A))return S(g,_,A,w);uE(g,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(t(g,_.sibling),_=i(_,A),_.return=g,g=_):(t(g,_),_=sB(A,g.mode,w),_.return=g,g=_),o(g)):t(g,_)}return M}var Py=Lj(!0),Ij=Lj(!1),BC=Mf(null),LC=null,bv=null,dN=null;function fN(){dN=bv=LC=null}function pN(n){var e=BC.current;ar(BC),n._currentValue=e}function vI(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function hy(n,e){LC=n,dN=bv=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(oo=!0),n.firstContext=null)}function Wa(n){var e=n._currentValue;if(dN!==n)if(n={context:n,memoizedValue:e,next:null},bv===null){if(LC===null)throw Error(et(308));bv=n,LC.dependencies={lanes:0,firstContext:n}}else bv=bv.next=n;return e}var rm=null;function mN(n){rm===null?rm=[n]:rm.push(n)}function Dj(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,mN(e)):(t.next=i.next,i.next=t),e.interleaved=t,dh(n,r)}function dh(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var hd=!1;function gN(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fj(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Zu(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Dd(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,wn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,dh(n,t)}return i=r.interleaved,i===null?(e.next=e,mN(r)):(e.next=i.next,i.next=e),r.interleaved=e,dh(n,t)}function Bb(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,tN(n,t)}}function gH(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function IC(n,e,t,r){var i=n.updateQueue;hd=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,S=a;switch(p=e,m=t,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(m,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,p=typeof v=="function"?v.call(m,d,p):v,p==null)break e;d=Cr({},d,p);break e;case 2:hd=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vm|=o,n.lanes=o,n.memoizedState=d}}function vH(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var GS={},Ic=Mf(GS),FA=Mf(GS),NA=Mf(GS);function im(n){if(n===GS)throw Error(et(174));return n}function vN(n,e){switch(Kn(NA,e),Kn(FA,n),Kn(Ic,GS),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Q2(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Q2(e,n)}ar(Ic),Kn(Ic,e)}function By(){ar(Ic),ar(FA),ar(NA)}function Nj(n){im(NA.current);var e=im(Ic.current),t=Q2(e,n.type);e!==t&&(Kn(FA,n),Kn(Ic,t))}function yN(n){FA.current===n&&(ar(Ic),ar(FA))}var mr=Mf(0);function DC(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $P=[];function xN(){for(var n=0;n<$P.length;n++)$P[n]._workInProgressVersionPrimary=null;$P.length=0}var Lb=Eh.ReactCurrentDispatcher,eB=Eh.ReactCurrentBatchConfig,zm=0,Mr=null,fi=null,Fi=null,FC=!1,V1=!1,UA=0,Lie=0;function us(){throw Error(et(321))}function _N(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Nl(n[t],e[t]))return!1;return!0}function AN(n,e,t,r,i,s){if(zm=s,Mr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lb.current=n===null||n.memoizedState===null?Nie:Uie,n=t(r,i),V1){s=0;do{if(V1=!1,UA=0,25<=s)throw Error(et(301));s+=1,Fi=fi=null,e.updateQueue=null,Lb.current=Oie,n=t(r,i)}while(V1)}if(Lb.current=NC,e=fi!==null&&fi.next!==null,zm=0,Fi=fi=Mr=null,FC=!1,e)throw Error(et(300));return n}function SN(){var n=UA!==0;return UA=0,n}function Tc(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fi===null?Mr.memoizedState=Fi=n:Fi=Fi.next=n,Fi}function ja(){if(fi===null){var n=Mr.alternate;n=n!==null?n.memoizedState:null}else n=fi.next;var e=Fi===null?Mr.memoizedState:Fi.next;if(e!==null)Fi=e,fi=n;else{if(n===null)throw Error(et(310));fi=n,n={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Fi===null?Mr.memoizedState=Fi=n:Fi=Fi.next=n}return Fi}function OA(n,e){return typeof e=="function"?e(n):e}function tB(n){var e=ja(),t=e.queue;if(t===null)throw Error(et(311));t.lastRenderedReducer=n;var r=fi,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((zm&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Mr.lanes|=h,Vm|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Nl(r,e.memoizedState)||(oo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Mr.lanes|=s,Vm|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function nB(n){var e=ja(),t=e.queue;if(t===null)throw Error(et(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);Nl(s,e.memoizedState)||(oo=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Uj(){}function Oj(n,e){var t=Mr,r=ja(),i=e(),s=!Nl(r.memoizedState,i);if(s&&(r.memoizedState=i,oo=!0),r=r.queue,MN(Hj.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Fi!==null&&Fi.memoizedState.tag&1){if(t.flags|=2048,kA(9,Gj.bind(null,t,r,i,e),void 0,null),ki===null)throw Error(et(349));zm&30||kj(t,e,i)}return i}function kj(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Mr.updateQueue,e===null?(e={lastEffect:null,stores:null},Mr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Gj(n,e,t,r){e.value=t,e.getSnapshot=r,zj(e)&&Vj(n)}function Hj(n,e,t){return t(function(){zj(e)&&Vj(n)})}function zj(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Nl(n,t)}catch{return!0}}function Vj(n){var e=dh(n,1);e!==null&&Rl(e,n,1,-1)}function yH(n){var e=Tc();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:OA,lastRenderedState:n},e.queue=n,n=n.dispatch=Fie.bind(null,Mr,n),[e.memoizedState,n]}function kA(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Mr.updateQueue,e===null?(e={lastEffect:null,stores:null},Mr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Wj(){return ja().memoizedState}function Ib(n,e,t,r){var i=Tc();Mr.flags|=n,i.memoizedState=kA(1|e,t,void 0,r===void 0?null:r)}function QT(n,e,t,r){var i=ja();r=r===void 0?null:r;var s=void 0;if(fi!==null){var o=fi.memoizedState;if(s=o.destroy,r!==null&&_N(r,o.deps)){i.memoizedState=kA(e,t,s,r);return}}Mr.flags|=n,i.memoizedState=kA(1|e,t,s,r)}function xH(n,e){return Ib(8390656,8,n,e)}function MN(n,e){return QT(2048,8,n,e)}function jj(n,e){return QT(4,2,n,e)}function Xj(n,e){return QT(4,4,n,e)}function Jj(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Kj(n,e,t){return t=t!=null?t.concat([n]):null,QT(4,4,Jj.bind(null,e,n),t)}function EN(){}function Yj(n,e){var t=ja();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_N(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function qj(n,e){var t=ja();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_N(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Qj(n,e,t){return zm&21?(Nl(t,e)||(t=nj(),Mr.lanes|=t,Vm|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,oo=!0),n.memoizedState=t)}function Iie(n,e){var t=On;On=t!==0&&4>t?t:4,n(!0);var r=eB.transition;eB.transition={};try{n(!1),e()}finally{On=t,eB.transition=r}}function Zj(){return ja().memoizedState}function Die(n,e,t){var r=Nd(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},$j(n))eX(e,t);else if(t=Dj(n,e,t,r),t!==null){var i=Os();Rl(t,n,r,i),tX(t,e,r)}}function Fie(n,e,t){var r=Nd(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if($j(n))eX(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Nl(a,o)){var l=e.interleaved;l===null?(i.next=i,mN(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Dj(n,e,i,r),t!==null&&(i=Os(),Rl(t,n,r,i),tX(t,e,r))}}function $j(n){var e=n.alternate;return n===Mr||e!==null&&e===Mr}function eX(n,e){V1=FC=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function tX(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,tN(n,t)}}var NC={readContext:Wa,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useInsertionEffect:us,useLayoutEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useMutableSource:us,useSyncExternalStore:us,useId:us,unstable_isNewReconciler:!1},Nie={readContext:Wa,useCallback:function(n,e){return Tc().memoizedState=[n,e===void 0?null:e],n},useContext:Wa,useEffect:xH,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ib(4194308,4,Jj.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ib(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ib(4,2,n,e)},useMemo:function(n,e){var t=Tc();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Tc();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Die.bind(null,Mr,n),[r.memoizedState,n]},useRef:function(n){var e=Tc();return n={current:n},e.memoizedState=n},useState:yH,useDebugValue:EN,useDeferredValue:function(n){return Tc().memoizedState=n},useTransition:function(){var n=yH(!1),e=n[0];return n=Iie.bind(null,n[1]),Tc().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Mr,i=Tc();if(ur){if(t===void 0)throw Error(et(407));t=t()}else{if(t=e(),ki===null)throw Error(et(349));zm&30||kj(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,xH(Hj.bind(null,r,s,n),[n]),r.flags|=2048,kA(9,Gj.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Tc(),e=ki.identifierPrefix;if(ur){var t=Vu,r=zu;t=(r&~(1<<32-Tl(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=UA++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Lie++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Uie={readContext:Wa,useCallback:Yj,useContext:Wa,useEffect:MN,useImperativeHandle:Kj,useInsertionEffect:jj,useLayoutEffect:Xj,useMemo:qj,useReducer:tB,useRef:Wj,useState:function(){return tB(OA)},useDebugValue:EN,useDeferredValue:function(n){var e=ja();return Qj(e,fi.memoizedState,n)},useTransition:function(){var n=tB(OA)[0],e=ja().memoizedState;return[n,e]},useMutableSource:Uj,useSyncExternalStore:Oj,useId:Zj,unstable_isNewReconciler:!1},Oie={readContext:Wa,useCallback:Yj,useContext:Wa,useEffect:MN,useImperativeHandle:Kj,useInsertionEffect:jj,useLayoutEffect:Xj,useMemo:qj,useReducer:nB,useRef:Wj,useState:function(){return nB(OA)},useDebugValue:EN,useDeferredValue:function(n){var e=ja();return fi===null?e.memoizedState=n:Qj(e,fi.memoizedState,n)},useTransition:function(){var n=nB(OA)[0],e=ja().memoizedState;return[n,e]},useMutableSource:Uj,useSyncExternalStore:Oj,useId:Zj,unstable_isNewReconciler:!1};function pl(n,e){if(n&&n.defaultProps){e=Cr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function yI(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Cr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var ZT={isMounted:function(n){return(n=n._reactInternals)?fg(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Os(),i=Nd(n),s=Zu(r,i);s.payload=e,t!=null&&(s.callback=t),e=Dd(n,s,i),e!==null&&(Rl(e,n,i,r),Bb(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Os(),i=Nd(n),s=Zu(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Dd(n,s,i),e!==null&&(Rl(e,n,i,r),Bb(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Os(),r=Nd(n),i=Zu(t,r);i.tag=2,e!=null&&(i.callback=e),e=Dd(n,i,r),e!==null&&(Rl(e,n,r,t),Bb(e,n,r))}};function _H(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!BA(t,r)||!BA(i,s):!0}function nX(n,e,t){var r=!1,i=sf,s=e.contextType;return typeof s=="object"&&s!==null?s=Wa(s):(i=ho(e)?Gm:Es.current,r=e.contextTypes,s=(r=r!=null)?Ty(n,i):sf),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ZT,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function AH(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&ZT.enqueueReplaceState(e,e.state,null)}function xI(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},gN(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Wa(s):(s=ho(e)?Gm:Es.current,i.context=Ty(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(yI(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ZT.enqueueReplaceState(i,i.state,null),IC(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Ly(n,e){try{var t="",r=e;do t+=dre(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function rB(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function _I(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var kie=typeof WeakMap=="function"?WeakMap:Map;function rX(n,e,t){t=Zu(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){OC||(OC=!0,RI=r),_I(n,e)},t}function iX(n,e,t){t=Zu(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){_I(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){_I(n,e),typeof r!="function"&&(Fd===null?Fd=new Set([this]):Fd.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function SH(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new kie;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=$ie.bind(null,n,e,t),e.then(n,n))}function MH(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function EH(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Zu(-1,1),e.tag=2,Dd(t,e,1))),t.lanes|=1),n)}var Gie=Eh.ReactCurrentOwner,oo=!1;function Ns(n,e,t,r){e.child=n===null?Ij(e,null,t,r):Py(e,n.child,t,r)}function wH(n,e,t,r,i){t=t.render;var s=e.ref;return hy(e,i),r=AN(n,e,t,r,s,i),t=SN(),n!==null&&!oo?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,fh(n,e,i)):(ur&&t&&cN(e),e.flags|=1,Ns(n,e,r,i),e.child)}function bH(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!LN(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,sX(n,e,s,r,i)):(n=Ub(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:BA,t(o,r)&&n.ref===e.ref)return fh(n,e,i)}return e.flags|=1,n=Ud(s,r),n.ref=e.ref,n.return=e,e.child=n}function sX(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(BA(s,r)&&n.ref===e.ref)if(oo=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(oo=!0);else return e.lanes=n.lanes,fh(n,e,i)}return AI(n,e,t,r,i)}function oX(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kn(Tv,Uo),Uo|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Kn(Tv,Uo),Uo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Kn(Tv,Uo),Uo|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Kn(Tv,Uo),Uo|=r;return Ns(n,e,i,t),e.child}function aX(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function AI(n,e,t,r,i){var s=ho(t)?Gm:Es.current;return s=Ty(e,s),hy(e,i),t=AN(n,e,t,r,s,i),r=SN(),n!==null&&!oo?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,fh(n,e,i)):(ur&&r&&cN(e),e.flags|=1,Ns(n,e,t,i),e.child)}function CH(n,e,t,r,i){if(ho(t)){var s=!0;TC(e)}else s=!1;if(hy(e,i),e.stateNode===null)Db(n,e),nX(e,t,r),xI(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Wa(u):(u=ho(t)?Gm:Es.current,u=Ty(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&AH(e,o,r,u),hd=!1;var p=e.memoizedState;o.state=p,IC(e,r,o,i),l=e.memoizedState,a!==r||p!==l||uo.current||hd?(typeof h=="function"&&(yI(e,t,h,r),l=e.memoizedState),(a=hd||_H(e,t,a,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Fj(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:pl(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Wa(l):(l=ho(t)?Gm:Es.current,l=Ty(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&AH(e,o,r,l),hd=!1,p=e.memoizedState,o.state=p,IC(e,r,o,i);var v=e.memoizedState;a!==d||p!==v||uo.current||hd?(typeof m=="function"&&(yI(e,t,m,r),v=e.memoizedState),(u=hd||_H(e,t,u,r,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return SI(n,e,t,r,s,i)}function SI(n,e,t,r,i,s){aX(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&dH(e,t,!1),fh(n,e,s);r=e.stateNode,Gie.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Py(e,n.child,null,s),e.child=Py(e,null,a,s)):Ns(n,e,a,s),e.memoizedState=r.state,i&&dH(e,t,!0),e.child}function lX(n){var e=n.stateNode;e.pendingContext?hH(n,e.pendingContext,e.pendingContext!==e.context):e.context&&hH(n,e.context,!1),vN(n,e.containerInfo)}function TH(n,e,t,r,i){return Ry(),hN(i),e.flags|=256,Ns(n,e,t,r),e.child}var MI={dehydrated:null,treeContext:null,retryLane:0};function EI(n){return{baseLanes:n,cachePool:null,transitions:null}}function cX(n,e,t){var r=e.pendingProps,i=mr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Kn(mr,i&1),n===null)return gI(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tR(o,r,0,null),n=Em(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=EI(t),e.memoizedState=MI,n):wN(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Hie(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ud(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ud(a,s):(s=Em(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?EI(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=MI,r}return s=n.child,n=s.sibling,r=Ud(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function wN(n,e){return e=tR({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function hE(n,e,t,r){return r!==null&&hN(r),Py(e,n.child,null,t),n=wN(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Hie(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=rB(Error(et(422))),hE(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=tR({mode:"visible",children:r.children},i,0,null),s=Em(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Py(e,n.child,null,o),e.child.memoizedState=EI(o),e.memoizedState=MI,s);if(!(e.mode&1))return hE(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(et(419)),r=rB(s,r,void 0),hE(n,e,o,r)}if(a=(o&n.childLanes)!==0,oo||a){if(r=ki,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,dh(n,i),Rl(r,n,i,-1))}return BN(),r=rB(Error(et(421))),hE(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=ese.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ko=Id(i.nextSibling),jo=e,ur=!0,Sl=null,n!==null&&(Da[Fa++]=zu,Da[Fa++]=Vu,Da[Fa++]=Hm,zu=n.id,Vu=n.overflow,Hm=e),e=wN(e,r.children),e.flags|=4096,e)}function RH(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),vI(n.return,e,t)}function iB(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function uX(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ns(n,e,r.children,t),r=mr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&RH(n,t,e);else if(n.tag===19)RH(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Kn(mr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&DC(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),iB(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&DC(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}iB(e,!0,t,null,s);break;case"together":iB(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Db(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function fh(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Vm|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(et(153));if(e.child!==null){for(n=e.child,t=Ud(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ud(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function zie(n,e,t){switch(e.tag){case 3:lX(e),Ry();break;case 5:Nj(e);break;case 1:ho(e.type)&&TC(e);break;case 4:vN(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Kn(BC,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Kn(mr,mr.current&1),e.flags|=128,null):t&e.child.childLanes?cX(n,e,t):(Kn(mr,mr.current&1),n=fh(n,e,t),n!==null?n.sibling:null);Kn(mr,mr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return uX(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Kn(mr,mr.current),r)break;return null;case 22:case 23:return e.lanes=0,oX(n,e,t)}return fh(n,e,t)}var hX,wI,dX,fX;hX=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};wI=function(){};dX=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,im(Ic.current);var s=null;switch(t){case"input":i=J2(n,i),r=J2(n,r),s=[];break;case"select":i=Cr({},i,{value:void 0}),r=Cr({},r,{value:void 0}),s=[];break;case"textarea":i=q2(n,i),r=q2(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=bC)}Z2(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(EA.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(EA.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&sr("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};fX=function(n,e,t,r){t!==r&&(e.flags|=4)};function N_(n,e){if(!ur)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function hs(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Vie(n,e,t){var r=e.pendingProps;switch(uN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hs(e),null;case 1:return ho(e.type)&&CC(),hs(e),null;case 3:return r=e.stateNode,By(),ar(uo),ar(Es),xN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(cE(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sl!==null&&(LI(Sl),Sl=null))),wI(n,e),hs(e),null;case 5:yN(e);var i=im(NA.current);if(t=e.type,n!==null&&e.stateNode!=null)dX(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(et(166));return hs(e),null}if(n=im(Ic.current),cE(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Pc]=e,r[DA]=s,n=(e.mode&1)!==0,t){case"dialog":sr("cancel",r),sr("close",r);break;case"iframe":case"object":case"embed":sr("load",r);break;case"video":case"audio":for(i=0;i<C1.length;i++)sr(C1[i],r);break;case"source":sr("error",r);break;case"img":case"image":case"link":sr("error",r),sr("load",r);break;case"details":sr("toggle",r);break;case"input":OG(r,s),sr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},sr("invalid",r);break;case"textarea":GG(r,s),sr("invalid",r)}Z2(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&lE(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lE(r.textContent,a,n),i=["children",""+a]):EA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&sr("scroll",r)}switch(t){case"input":eE(r),kG(r,s,!0);break;case"textarea":eE(r),HG(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bC)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=HW(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Pc]=e,n[DA]=r,hX(n,e,!1,!1),e.stateNode=n;e:{switch(o=$2(t,r),t){case"dialog":sr("cancel",n),sr("close",n),i=r;break;case"iframe":case"object":case"embed":sr("load",n),i=r;break;case"video":case"audio":for(i=0;i<C1.length;i++)sr(C1[i],n);i=r;break;case"source":sr("error",n),i=r;break;case"img":case"image":case"link":sr("error",n),sr("load",n),i=r;break;case"details":sr("toggle",n),i=r;break;case"input":OG(n,r),i=J2(n,r),sr("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Cr({},r,{value:void 0}),sr("invalid",n);break;case"textarea":GG(n,r),i=q2(n,r),sr("invalid",n);break;default:i=r}Z2(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?WW(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zW(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&wA(n,l):typeof l=="number"&&wA(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(EA.hasOwnProperty(s)?l!=null&&s==="onScroll"&&sr("scroll",n):l!=null&&Y3(n,s,l,o))}switch(t){case"input":eE(n),kG(n,r,!1);break;case"textarea":eE(n),HG(n);break;case"option":r.value!=null&&n.setAttribute("value",""+rf(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?ay(n,!!r.multiple,s,!1):r.defaultValue!=null&&ay(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=bC)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hs(e),null;case 6:if(n&&e.stateNode!=null)fX(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(et(166));if(t=im(NA.current),im(Ic.current),cE(e)){if(r=e.stateNode,t=e.memoizedProps,r[Pc]=e,(s=r.nodeValue!==t)&&(n=jo,n!==null))switch(n.tag){case 3:lE(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&lE(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Pc]=e,e.stateNode=r}return hs(e),null;case 13:if(ar(mr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ur&&ko!==null&&e.mode&1&&!(e.flags&128))Bj(),Ry(),e.flags|=98560,s=!1;else if(s=cE(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(et(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Pc]=e}else Ry(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hs(e),s=!1}else Sl!==null&&(LI(Sl),Sl=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||mr.current&1?vi===0&&(vi=3):BN())),e.updateQueue!==null&&(e.flags|=4),hs(e),null);case 4:return By(),wI(n,e),n===null&&LA(e.stateNode.containerInfo),hs(e),null;case 10:return pN(e.type._context),hs(e),null;case 17:return ho(e.type)&&CC(),hs(e),null;case 19:if(ar(mr),s=e.memoizedState,s===null)return hs(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)N_(s,!1);else{if(vi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=DC(n),o!==null){for(e.flags|=128,N_(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Kn(mr,mr.current&1|2),e.child}n=n.sibling}s.tail!==null&&jr()>Iy&&(e.flags|=128,r=!0,N_(s,!1),e.lanes=4194304)}else{if(!r)if(n=DC(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),N_(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ur)return hs(e),null}else 2*jr()-s.renderingStartTime>Iy&&t!==1073741824&&(e.flags|=128,r=!0,N_(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=jr(),e.sibling=null,t=mr.current,Kn(mr,r?t&1|2:t&1),e):(hs(e),null);case 22:case 23:return PN(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Uo&1073741824&&(hs(e),e.subtreeFlags&6&&(e.flags|=8192)):hs(e),null;case 24:return null;case 25:return null}throw Error(et(156,e.tag))}function Wie(n,e){switch(uN(e),e.tag){case 1:return ho(e.type)&&CC(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return By(),ar(uo),ar(Es),xN(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return yN(e),null;case 13:if(ar(mr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(et(340));Ry()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ar(mr),null;case 4:return By(),null;case 10:return pN(e.type._context),null;case 22:case 23:return PN(),null;case 24:return null;default:return null}}var dE=!1,Ss=!1,jie=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function Cv(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Dr(n,e,r)}else t.current=null}function pX(n,e,t){try{t()}catch(r){Dr(n,e,r)}}var PH=!1;function Xie(n,e){if(cI=MC,n=yj(),lN(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(uI={focusedElem:n,selectionRange:t},MC=!1,Mt=e;Mt!==null;)if(e=Mt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Mt=n;else for(;Mt!==null;){e=Mt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,M=v.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:pl(e.type,S),M);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(w){Dr(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,Mt=n;break}Mt=e.return}return v=PH,PH=!1,v}function W1(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&pX(e,t,s)}i=i.next}while(i!==r)}}function $T(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function bI(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function mX(n){var e=n.alternate;e!==null&&(n.alternate=null,mX(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Pc],delete e[DA],delete e[fI],delete e[Tie],delete e[Rie])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function gX(n){return n.tag===5||n.tag===3||n.tag===4}function BH(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gX(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function CI(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=bC));else if(r!==4&&(n=n.child,n!==null))for(CI(n,e,t),n=n.sibling;n!==null;)CI(n,e,t),n=n.sibling}function TI(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(TI(n,e,t),n=n.sibling;n!==null;)TI(n,e,t),n=n.sibling}var Qi=null,_l=!1;function Kh(n,e,t){for(t=t.child;t!==null;)vX(n,e,t),t=t.sibling}function vX(n,e,t){if(Lc&&typeof Lc.onCommitFiberUnmount=="function")try{Lc.onCommitFiberUnmount(jT,t)}catch{}switch(t.tag){case 5:Ss||Cv(t,e);case 6:var r=Qi,i=_l;Qi=null,Kh(n,e,t),Qi=r,_l=i,Qi!==null&&(_l?(n=Qi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Qi.removeChild(t.stateNode));break;case 18:Qi!==null&&(_l?(n=Qi,t=t.stateNode,n.nodeType===8?QP(n.parentNode,t):n.nodeType===1&&QP(n,t),RA(n)):QP(Qi,t.stateNode));break;case 4:r=Qi,i=_l,Qi=t.stateNode.containerInfo,_l=!0,Kh(n,e,t),Qi=r,_l=i;break;case 0:case 11:case 14:case 15:if(!Ss&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&pX(t,e,o),i=i.next}while(i!==r)}Kh(n,e,t);break;case 1:if(!Ss&&(Cv(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Dr(t,e,a)}Kh(n,e,t);break;case 21:Kh(n,e,t);break;case 22:t.mode&1?(Ss=(r=Ss)||t.memoizedState!==null,Kh(n,e,t),Ss=r):Kh(n,e,t);break;default:Kh(n,e,t)}}function LH(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new jie),e.forEach(function(r){var i=tse.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function ol(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qi=a.stateNode,_l=!1;break e;case 3:Qi=a.stateNode.containerInfo,_l=!0;break e;case 4:Qi=a.stateNode.containerInfo,_l=!0;break e}a=a.return}if(Qi===null)throw Error(et(160));vX(s,o,i),Qi=null,_l=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Dr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yX(e,n),e=e.sibling}function yX(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ol(e,n),Ec(n),r&4){try{W1(3,n,n.return),$T(3,n)}catch(S){Dr(n,n.return,S)}try{W1(5,n,n.return)}catch(S){Dr(n,n.return,S)}}break;case 1:ol(e,n),Ec(n),r&512&&t!==null&&Cv(t,t.return);break;case 5:if(ol(e,n),Ec(n),r&512&&t!==null&&Cv(t,t.return),n.flags&32){var i=n.stateNode;try{wA(i,"")}catch(S){Dr(n,n.return,S)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&kW(i,s),$2(a,o);var u=$2(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?WW(i,d):h==="dangerouslySetInnerHTML"?zW(i,d):h==="children"?wA(i,d):Y3(i,h,d,u)}switch(a){case"input":K2(i,s);break;case"textarea":GW(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ay(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?ay(i,!!s.multiple,s.defaultValue,!0):ay(i,!!s.multiple,s.multiple?[]:"",!1))}i[DA]=s}catch(S){Dr(n,n.return,S)}}break;case 6:if(ol(e,n),Ec(n),r&4){if(n.stateNode===null)throw Error(et(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(S){Dr(n,n.return,S)}}break;case 3:if(ol(e,n),Ec(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{RA(e.containerInfo)}catch(S){Dr(n,n.return,S)}break;case 4:ol(e,n),Ec(n);break;case 13:ol(e,n),Ec(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(TN=jr())),r&4&&LH(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Ss=(u=Ss)||h,ol(e,n),Ss=u):ol(e,n),Ec(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(Mt=n,h=n.child;h!==null;){for(d=Mt=h;Mt!==null;){switch(p=Mt,m=p.child,p.tag){case 0:case 11:case 14:case 15:W1(4,p,p.return);break;case 1:Cv(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){Dr(r,t,S)}}break;case 5:Cv(p,p.return);break;case 22:if(p.memoizedState!==null){DH(d);continue}}m!==null?(m.return=p,Mt=m):DH(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=VW("display",o))}catch(S){Dr(n,n.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){Dr(n,n.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ol(e,n),Ec(n),r&4&&LH(n);break;case 21:break;default:ol(e,n),Ec(n)}}function Ec(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(gX(t)){var r=t;break e}t=t.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wA(i,""),r.flags&=-33);var s=BH(n);TI(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=BH(n);CI(n,a,o);break;default:throw Error(et(161))}}catch(l){Dr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Jie(n,e,t){Mt=n,xX(n)}function xX(n,e,t){for(var r=(n.mode&1)!==0;Mt!==null;){var i=Mt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||dE;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ss;a=dE;var u=Ss;if(dE=o,(Ss=l)&&!u)for(Mt=i;Mt!==null;)o=Mt,l=o.child,o.tag===22&&o.memoizedState!==null?FH(i):l!==null?(l.return=o,Mt=l):FH(i);for(;s!==null;)Mt=s,xX(s),s=s.sibling;Mt=i,dE=a,Ss=u}IH(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Mt=s):IH(n)}}function IH(n){for(;Mt!==null;){var e=Mt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ss||$T(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ss)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:pl(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vH(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}vH(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&RA(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}Ss||e.flags&512&&bI(e)}catch(p){Dr(e,e.return,p)}}if(e===n){Mt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Mt=t;break}Mt=e.return}}function DH(n){for(;Mt!==null;){var e=Mt;if(e===n){Mt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Mt=t;break}Mt=e.return}}function FH(n){for(;Mt!==null;){var e=Mt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{$T(4,e)}catch(l){Dr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Dr(e,i,l)}}var s=e.return;try{bI(e)}catch(l){Dr(e,s,l)}break;case 5:var o=e.return;try{bI(e)}catch(l){Dr(e,o,l)}}}catch(l){Dr(e,e.return,l)}if(e===n){Mt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Mt=a;break}Mt=e.return}}var Kie=Math.ceil,UC=Eh.ReactCurrentDispatcher,bN=Eh.ReactCurrentOwner,Ha=Eh.ReactCurrentBatchConfig,wn=0,ki=null,oi=null,ts=0,Uo=0,Tv=Mf(0),vi=0,GA=null,Vm=0,eR=0,CN=0,j1=null,to=null,TN=0,Iy=1/0,Du=null,OC=!1,RI=null,Fd=null,fE=!1,Md=null,kC=0,X1=0,PI=null,Fb=-1,Nb=0;function Os(){return wn&6?jr():Fb!==-1?Fb:Fb=jr()}function Nd(n){return n.mode&1?wn&2&&ts!==0?ts&-ts:Bie.transition!==null?(Nb===0&&(Nb=nj()),Nb):(n=On,n!==0||(n=window.event,n=n===void 0?16:cj(n.type)),n):1}function Rl(n,e,t,r){if(50<X1)throw X1=0,PI=null,Error(et(185));US(n,t,r),(!(wn&2)||n!==ki)&&(n===ki&&(!(wn&2)&&(eR|=t),vi===4&&xd(n,ts)),fo(n,r),t===1&&wn===0&&!(e.mode&1)&&(Iy=jr()+500,qT&&Ef()))}function fo(n,e){var t=n.callbackNode;Bre(n,e);var r=SC(n,n===ki?ts:0);if(r===0)t!==null&&WG(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&WG(t),e===1)n.tag===0?Pie(NH.bind(null,n)):Tj(NH.bind(null,n)),bie(function(){!(wn&6)&&Ef()}),t=null;else{switch(rj(r)){case 1:t=eN;break;case 4:t=ej;break;case 16:t=AC;break;case 536870912:t=tj;break;default:t=AC}t=CX(t,_X.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function _X(n,e){if(Fb=-1,Nb=0,wn&6)throw Error(et(327));var t=n.callbackNode;if(dy()&&n.callbackNode!==t)return null;var r=SC(n,n===ki?ts:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=GC(n,r);else{e=r;var i=wn;wn|=2;var s=SX();(ki!==n||ts!==e)&&(Du=null,Iy=jr()+500,Mm(n,e));do try{Qie();break}catch(a){AX(n,a)}while(1);fN(),UC.current=s,wn=i,oi!==null?e=0:(ki=null,ts=0,e=vi)}if(e!==0){if(e===2&&(i=iI(n),i!==0&&(r=i,e=BI(n,i))),e===1)throw t=GA,Mm(n,0),xd(n,r),fo(n,jr()),t;if(e===6)xd(n,r);else{if(i=n.current.alternate,!(r&30)&&!Yie(i)&&(e=GC(n,r),e===2&&(s=iI(n),s!==0&&(r=s,e=BI(n,s))),e===1))throw t=GA,Mm(n,0),xd(n,r),fo(n,jr()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(et(345));case 2:Op(n,to,Du);break;case 3:if(xd(n,r),(r&130023424)===r&&(e=TN+500-jr(),10<e)){if(SC(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Os(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=dI(Op.bind(null,n,to,Du),e);break}Op(n,to,Du);break;case 4:if(xd(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Tl(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=jr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kie(r/1960))-r,10<r){n.timeoutHandle=dI(Op.bind(null,n,to,Du),r);break}Op(n,to,Du);break;case 5:Op(n,to,Du);break;default:throw Error(et(329))}}}return fo(n,jr()),n.callbackNode===t?_X.bind(null,n):null}function BI(n,e){var t=j1;return n.current.memoizedState.isDehydrated&&(Mm(n,e).flags|=256),n=GC(n,e),n!==2&&(e=to,to=t,e!==null&&LI(e)),n}function LI(n){to===null?to=n:to.push.apply(to,n)}function Yie(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!Nl(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xd(n,e){for(e&=~CN,e&=~eR,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Tl(e),r=1<<t;n[t]=-1,e&=~r}}function NH(n){if(wn&6)throw Error(et(327));dy();var e=SC(n,0);if(!(e&1))return fo(n,jr()),null;var t=GC(n,e);if(n.tag!==0&&t===2){var r=iI(n);r!==0&&(e=r,t=BI(n,r))}if(t===1)throw t=GA,Mm(n,0),xd(n,e),fo(n,jr()),t;if(t===6)throw Error(et(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Op(n,to,Du),fo(n,jr()),null}function RN(n,e){var t=wn;wn|=1;try{return n(e)}finally{wn=t,wn===0&&(Iy=jr()+500,qT&&Ef())}}function Wm(n){Md!==null&&Md.tag===0&&!(wn&6)&&dy();var e=wn;wn|=1;var t=Ha.transition,r=On;try{if(Ha.transition=null,On=1,n)return n()}finally{On=r,Ha.transition=t,wn=e,!(wn&6)&&Ef()}}function PN(){Uo=Tv.current,ar(Tv)}function Mm(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,wie(t)),oi!==null)for(t=oi.return;t!==null;){var r=t;switch(uN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&CC();break;case 3:By(),ar(uo),ar(Es),xN();break;case 5:yN(r);break;case 4:By();break;case 13:ar(mr);break;case 19:ar(mr);break;case 10:pN(r.type._context);break;case 22:case 23:PN()}t=t.return}if(ki=n,oi=n=Ud(n.current,null),ts=Uo=e,vi=0,GA=null,CN=eR=Vm=0,to=j1=null,rm!==null){for(e=0;e<rm.length;e++)if(t=rm[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}rm=null}return n}function AX(n,e){do{var t=oi;try{if(fN(),Lb.current=NC,FC){for(var r=Mr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}FC=!1}if(zm=0,Fi=fi=Mr=null,V1=!1,UA=0,bN.current=null,t===null||t.return===null){vi=1,GA=e,oi=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ts,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=MH(o);if(m!==null){m.flags&=-257,EH(m,o,a,s,e),m.mode&1&&SH(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var S=new Set;S.add(l),e.updateQueue=S}else v.add(l);break e}else{if(!(e&1)){SH(s,u,e),BN();break e}l=Error(et(426))}}else if(ur&&a.mode&1){var M=MH(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),EH(M,o,a,s,e),hN(Ly(l,a));break e}}s=l=Ly(l,a),vi!==4&&(vi=2),j1===null?j1=[s]:j1.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=rX(s,l,e);gH(s,g);break e;case 1:a=l;var _=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Fd===null||!Fd.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=iX(s,a,e);gH(s,w);break e}}s=s.return}while(s!==null)}EX(t)}catch(C){e=C,oi===t&&t!==null&&(oi=t=t.return);continue}break}while(1)}function SX(){var n=UC.current;return UC.current=NC,n===null?NC:n}function BN(){(vi===0||vi===3||vi===2)&&(vi=4),ki===null||!(Vm&268435455)&&!(eR&268435455)||xd(ki,ts)}function GC(n,e){var t=wn;wn|=2;var r=SX();(ki!==n||ts!==e)&&(Du=null,Mm(n,e));do try{qie();break}catch(i){AX(n,i)}while(1);if(fN(),wn=t,UC.current=r,oi!==null)throw Error(et(261));return ki=null,ts=0,vi}function qie(){for(;oi!==null;)MX(oi)}function Qie(){for(;oi!==null&&!Sre();)MX(oi)}function MX(n){var e=bX(n.alternate,n,Uo);n.memoizedProps=n.pendingProps,e===null?EX(n):oi=e,bN.current=null}function EX(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Wie(t,e),t!==null){t.flags&=32767,oi=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vi=6,oi=null;return}}else if(t=Vie(t,e,Uo),t!==null){oi=t;return}if(e=e.sibling,e!==null){oi=e;return}oi=e=n}while(e!==null);vi===0&&(vi=5)}function Op(n,e,t){var r=On,i=Ha.transition;try{Ha.transition=null,On=1,Zie(n,e,t,r)}finally{Ha.transition=i,On=r}return null}function Zie(n,e,t,r){do dy();while(Md!==null);if(wn&6)throw Error(et(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(et(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Lre(n,s),n===ki&&(oi=ki=null,ts=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||fE||(fE=!0,CX(AC,function(){return dy(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ha.transition,Ha.transition=null;var o=On;On=1;var a=wn;wn|=4,bN.current=null,Xie(n,t),yX(t,n),yie(uI),MC=!!cI,uI=cI=null,n.current=t,Jie(t),Mre(),wn=a,On=o,Ha.transition=s}else n.current=t;if(fE&&(fE=!1,Md=n,kC=i),s=n.pendingLanes,s===0&&(Fd=null),bre(t.stateNode),fo(n,jr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(OC)throw OC=!1,n=RI,RI=null,n;return kC&1&&n.tag!==0&&dy(),s=n.pendingLanes,s&1?n===PI?X1++:(X1=0,PI=n):X1=0,Ef(),null}function dy(){if(Md!==null){var n=rj(kC),e=Ha.transition,t=On;try{if(Ha.transition=null,On=16>n?16:n,Md===null)var r=!1;else{if(n=Md,Md=null,kC=0,wn&6)throw Error(et(331));var i=wn;for(wn|=4,Mt=n.current;Mt!==null;){var s=Mt,o=s.child;if(Mt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Mt=u;Mt!==null;){var h=Mt;switch(h.tag){case 0:case 11:case 15:W1(8,h,s)}var d=h.child;if(d!==null)d.return=h,Mt=d;else for(;Mt!==null;){h=Mt;var p=h.sibling,m=h.return;if(mX(h),h===u){Mt=null;break}if(p!==null){p.return=m,Mt=p;break}Mt=m}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var M=S.sibling;S.sibling=null,S=M}while(S!==null)}}Mt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Mt=o;else e:for(;Mt!==null;){if(s=Mt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:W1(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Mt=g;break e}Mt=s.return}}var _=n.current;for(Mt=_;Mt!==null;){o=Mt;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Mt=A;else e:for(o=_;Mt!==null;){if(a=Mt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$T(9,a)}}catch(C){Dr(a,a.return,C)}if(a===o){Mt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Mt=w;break e}Mt=a.return}}if(wn=i,Ef(),Lc&&typeof Lc.onPostCommitFiberRoot=="function")try{Lc.onPostCommitFiberRoot(jT,n)}catch{}r=!0}return r}finally{On=t,Ha.transition=e}}return!1}function UH(n,e,t){e=Ly(t,e),e=rX(n,e,1),n=Dd(n,e,1),e=Os(),n!==null&&(US(n,1,e),fo(n,e))}function Dr(n,e,t){if(n.tag===3)UH(n,n,t);else for(;e!==null;){if(e.tag===3){UH(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fd===null||!Fd.has(r))){n=Ly(t,n),n=iX(e,n,1),e=Dd(e,n,1),n=Os(),e!==null&&(US(e,1,n),fo(e,n));break}}e=e.return}}function $ie(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Os(),n.pingedLanes|=n.suspendedLanes&t,ki===n&&(ts&t)===t&&(vi===4||vi===3&&(ts&130023424)===ts&&500>jr()-TN?Mm(n,0):CN|=t),fo(n,e)}function wX(n,e){e===0&&(n.mode&1?(e=rE,rE<<=1,!(rE&130023424)&&(rE=4194304)):e=1);var t=Os();n=dh(n,e),n!==null&&(US(n,e,t),fo(n,t))}function ese(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),wX(n,t)}function tse(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(e),wX(n,t)}var bX;bX=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||uo.current)oo=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return oo=!1,zie(n,e,t);oo=!!(n.flags&131072)}else oo=!1,ur&&e.flags&1048576&&Rj(e,PC,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Db(n,e),n=e.pendingProps;var i=Ty(e,Es.current);hy(e,t),i=AN(null,e,r,n,i,t);var s=SN();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ho(r)?(s=!0,TC(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gN(e),i.updater=ZT,e.stateNode=i,i._reactInternals=e,xI(e,r,n,t),e=SI(null,e,r,!0,s,t)):(e.tag=0,ur&&s&&cN(e),Ns(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Db(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=rse(r),n=pl(r,n),i){case 0:e=AI(null,e,r,n,t);break e;case 1:e=CH(null,e,r,n,t);break e;case 11:e=wH(null,e,r,n,t);break e;case 14:e=bH(null,e,r,pl(r.type,n),t);break e}throw Error(et(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pl(r,i),AI(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pl(r,i),CH(n,e,r,i,t);case 3:e:{if(lX(e),n===null)throw Error(et(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Fj(n,e),IC(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ly(Error(et(423)),e),e=TH(n,e,r,t,i);break e}else if(r!==i){i=Ly(Error(et(424)),e),e=TH(n,e,r,t,i);break e}else for(ko=Id(e.stateNode.containerInfo.firstChild),jo=e,ur=!0,Sl=null,t=Ij(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Ry(),r===i){e=fh(n,e,t);break e}Ns(n,e,r,t)}e=e.child}return e;case 5:return Nj(e),n===null&&gI(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,hI(r,i)?o=null:s!==null&&hI(r,s)&&(e.flags|=32),aX(n,e),Ns(n,e,o,t),e.child;case 6:return n===null&&gI(e),null;case 13:return cX(n,e,t);case 4:return vN(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Py(e,null,r,t):Ns(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pl(r,i),wH(n,e,r,i,t);case 7:return Ns(n,e,e.pendingProps,t),e.child;case 8:return Ns(n,e,e.pendingProps.children,t),e.child;case 12:return Ns(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Kn(BC,r._currentValue),r._currentValue=o,s!==null)if(Nl(s.value,o)){if(s.children===i.children&&!uo.current){e=fh(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Zu(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),vI(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),vI(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ns(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hy(e,t),i=Wa(i),r=r(i),e.flags|=1,Ns(n,e,r,t),e.child;case 14:return r=e.type,i=pl(r,e.pendingProps),i=pl(r.type,i),bH(n,e,r,i,t);case 15:return sX(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:pl(r,i),Db(n,e),e.tag=1,ho(r)?(n=!0,TC(e)):n=!1,hy(e,t),nX(e,r,i),xI(e,r,i,t),SI(null,e,r,!0,n,t);case 19:return uX(n,e,t);case 22:return oX(n,e,t)}throw Error(et(156,e.tag))};function CX(n,e){return $W(n,e)}function nse(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(n,e,t,r){return new nse(n,e,t,r)}function LN(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rse(n){if(typeof n=="function")return LN(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Q3)return 11;if(n===Z3)return 14}return 2}function Ud(n,e){var t=n.alternate;return t===null?(t=Oa(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ub(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")LN(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case yv:return Em(t.children,i,s,e);case q3:o=8,i|=8;break;case V2:return n=Oa(12,t,e,i|2),n.elementType=V2,n.lanes=s,n;case W2:return n=Oa(13,t,e,i),n.elementType=W2,n.lanes=s,n;case j2:return n=Oa(19,t,e,i),n.elementType=j2,n.lanes=s,n;case NW:return tR(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case DW:o=10;break e;case FW:o=9;break e;case Q3:o=11;break e;case Z3:o=14;break e;case ud:o=16,r=null;break e}throw Error(et(130,n==null?n:typeof n,""))}return e=Oa(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Em(n,e,t,r){return n=Oa(7,n,r,e),n.lanes=t,n}function tR(n,e,t,r){return n=Oa(22,n,r,e),n.elementType=NW,n.lanes=t,n.stateNode={isHidden:!1},n}function sB(n,e,t){return n=Oa(6,n,null,e),n.lanes=t,n}function oB(n,e,t){return e=Oa(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function ise(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=GP(0),this.expirationTimes=GP(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=GP(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function IN(n,e,t,r,i,s,o,a,l){return n=new ise(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Oa(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},gN(s),n}function sse(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vv,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function TX(n){if(!n)return sf;n=n._reactInternals;e:{if(fg(n)!==n||n.tag!==1)throw Error(et(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ho(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(et(171))}if(n.tag===1){var t=n.type;if(ho(t))return Cj(n,t,e)}return e}function RX(n,e,t,r,i,s,o,a,l){return n=IN(t,r,!0,n,i,s,o,a,l),n.context=TX(null),t=n.current,r=Os(),i=Nd(t),s=Zu(r,i),s.callback=e??null,Dd(t,s,i),n.current.lanes=i,US(n,i,r),fo(n,r),n}function nR(n,e,t,r){var i=e.current,s=Os(),o=Nd(i);return t=TX(t),e.context===null?e.context=t:e.pendingContext=t,e=Zu(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Dd(i,e,o),n!==null&&(Rl(n,i,o,s),Bb(n,i,o)),o}function HC(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function OH(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function DN(n,e){OH(n,e),(n=n.alternate)&&OH(n,e)}function ose(){return null}var PX=typeof reportError=="function"?reportError:function(n){console.error(n)};function FN(n){this._internalRoot=n}rR.prototype.render=FN.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(et(409));nR(n,e,null,null)};rR.prototype.unmount=FN.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Wm(function(){nR(null,n,null,null)}),e[hh]=null}};function rR(n){this._internalRoot=n}rR.prototype.unstable_scheduleHydration=function(n){if(n){var e=oj();n={blockedOn:null,target:n,priority:e};for(var t=0;t<yd.length&&e!==0&&e<yd[t].priority;t++);yd.splice(t,0,n),t===0&&lj(n)}};function NN(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function iR(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kH(){}function ase(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=HC(o);s.call(u)}}var o=RX(e,r,n,0,null,!1,!1,"",kH);return n._reactRootContainer=o,n[hh]=o.current,LA(n.nodeType===8?n.parentNode:n),Wm(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=HC(l);a.call(u)}}var l=IN(n,0,!1,null,null,!1,!1,"",kH);return n._reactRootContainer=l,n[hh]=l.current,LA(n.nodeType===8?n.parentNode:n),Wm(function(){nR(e,l,t,r)}),l}function sR(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=HC(o);a.call(l)}}nR(e,o,n,i)}else o=ase(t,e,n,i,r);return HC(o)}ij=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=b1(e.pendingLanes);t!==0&&(tN(e,t|1),fo(e,jr()),!(wn&6)&&(Iy=jr()+500,Ef()))}break;case 13:Wm(function(){var r=dh(n,1);if(r!==null){var i=Os();Rl(r,n,1,i)}}),DN(n,1)}};nN=function(n){if(n.tag===13){var e=dh(n,134217728);if(e!==null){var t=Os();Rl(e,n,134217728,t)}DN(n,134217728)}};sj=function(n){if(n.tag===13){var e=Nd(n),t=dh(n,e);if(t!==null){var r=Os();Rl(t,n,e,r)}DN(n,e)}};oj=function(){return On};aj=function(n,e){var t=On;try{return On=n,e()}finally{On=t}};tI=function(n,e,t){switch(e){case"input":if(K2(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=YT(r);if(!i)throw Error(et(90));OW(r),K2(r,i)}}}break;case"textarea":GW(n,t);break;case"select":e=t.value,e!=null&&ay(n,!!t.multiple,e,!1)}};JW=RN;KW=Wm;var lse={usingClientEntryPoint:!1,Events:[kS,Sv,YT,jW,XW,RN]},U_={findFiberByHostInstance:nm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cse={bundleType:U_.bundleType,version:U_.version,rendererPackageName:U_.rendererPackageName,rendererConfig:U_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eh.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=QW(n),n===null?null:n.stateNode},findFiberByHostInstance:U_.findFiberByHostInstance||ose,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pE.isDisabled&&pE.supportsFiber)try{jT=pE.inject(cse),Lc=pE}catch{}}ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lse;ta.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NN(e))throw Error(et(200));return sse(n,e,null,t)};ta.createRoot=function(n,e){if(!NN(n))throw Error(et(299));var t=!1,r="",i=PX;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=IN(n,1,!1,null,null,t,!1,r,i),n[hh]=e.current,LA(n.nodeType===8?n.parentNode:n),new FN(e)};ta.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(et(188)):(n=Object.keys(n).join(","),Error(et(268,n)));return n=QW(e),n=n===null?null:n.stateNode,n};ta.flushSync=function(n){return Wm(n)};ta.hydrate=function(n,e,t){if(!iR(e))throw Error(et(200));return sR(null,n,e,!0,t)};ta.hydrateRoot=function(n,e,t){if(!NN(n))throw Error(et(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=PX;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=RX(e,null,n,1,t??null,i,!1,s,o),n[hh]=e.current,LA(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new rR(e)};ta.render=function(n,e,t){if(!iR(e))throw Error(et(200));return sR(null,n,e,!1,t)};ta.unmountComponentAtNode=function(n){if(!iR(n))throw Error(et(40));return n._reactRootContainer?(Wm(function(){sR(null,null,n,!1,function(){n._reactRootContainer=null,n[hh]=null})}),!0):!1};ta.unstable_batchedUpdates=RN;ta.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!iR(t))throw Error(et(200));if(n==null||n._reactInternals===void 0)throw Error(et(38));return sR(n,e,t,!1,r)};ta.version="18.3.1-next-f1338f8080-20240426";function BX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BX)}catch(n){console.error(n)}}BX(),PW.exports=ta;var LX=PW.exports,GH=LX;H2.createRoot=GH.createRoot,H2.hydrateRoot=GH.hydrateRoot;/**
* @license
* Copyright 2010-2023 Three.js Authors
* SPDX-License-Identifier: MIT
*/const HS="152",use={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},hse={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},IX=0,II=1,DX=2,dse=3,FX=0,oR=1,J1=2,ml=3,Gc=0,ks=1,bl=2,fse=2,$u=0,wm=1,DI=2,FI=3,NI=4,NX=5,Zp=100,UX=101,OX=102,UI=103,OI=104,kX=200,GX=201,HX=202,zX=203,UN=204,ON=205,VX=206,WX=207,jX=208,XX=209,JX=210,KX=0,YX=1,qX=2,zC=3,QX=4,ZX=5,$X=6,eJ=7,zS=0,tJ=1,nJ=2,Pl=0,kN=1,rJ=2,iJ=3,GN=4,sJ=5,aR=300,of=301,af=302,HA=303,zA=304,ux=306,lf=1e3,$i=1001,Dy=1002,Nr=1003,VA=1004,pse=1004,fy=1005,mse=1005,vr=1006,lR=1007,gse=1007,Hc=1008,vse=1008,ph=1009,oJ=1010,aJ=1011,HN=1012,lJ=1013,Ed=1014,Wu=1015,Fy=1016,cJ=1017,uJ=1018,bm=1020,hJ=1021,io=1023,dJ=1024,fJ=1025,Od=1026,jm=1027,pJ=1028,mJ=1029,gJ=1030,vJ=1031,yJ=1033,Ob=33776,kb=33777,Gb=33778,Hb=33779,kI=35840,GI=35841,HI=35842,zI=35843,xJ=36196,VI=37492,WI=37496,jI=37808,XI=37809,JI=37810,KI=37811,YI=37812,qI=37813,QI=37814,ZI=37815,$I=37816,eD=37817,tD=37818,nD=37819,rD=37820,iD=37821,zb=36492,_J=36283,sD=36284,oD=36285,aD=36286,AJ=2200,zN=2201,SJ=2202,Ny=2300,Xm=2301,Vb=2302,sm=2400,om=2401,WA=2402,cR=2500,VN=2501,MJ=0,WN=1,VC=2,jN=3e3,eh=3001,EJ=3200,wJ=3201,wf=0,bJ=1,kd="",Qt="srgb",Ul="srgb-linear",XN="display-p3",yse=0,Wb=7680,xse=7681,_se=7682,Ase=7683,Sse=34055,Mse=34056,Ese=5386,wse=512,bse=513,Cse=514,Tse=515,Rse=516,Pse=517,Bse=518,CJ=519,jA=35044,Lse=35048,Ise=35040,Dse=35045,Fse=35049,Nse=35041,Use=35046,Ose=35050,kse=35042,Gse="100",lD="300 es",WC=1035;class wh{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let i=0,s=r.length;i<s;i++)r[i].call(this,e);e.target=null}}}const ds=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let HH=1234567;const Cm=Math.PI/180,Uy=180/Math.PI;function Xo(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ds[n&255]+ds[n>>8&255]+ds[n>>16&255]+ds[n>>24&255]+"-"+ds[e&255]+ds[e>>8&255]+"-"+ds[e>>16&15|64]+ds[e>>24&255]+"-"+ds[t&63|128]+ds[t>>8&255]+"-"+ds[t>>16&255]+ds[t>>24&255]+ds[r&255]+ds[r>>8&255]+ds[r>>16&255]+ds[r>>24&255]).toLowerCase()}function Or(n,e,t){return Math.max(e,Math.min(t,n))}function JN(n,e){return(n%e+e)%e}function Hse(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function zse(n,e,t){return n!==e?(t-n)/(e-n):0}function K1(n,e,t){return(1-t)*n+t*e}function Vse(n,e,t,r){return K1(n,e,1-Math.exp(-t*r))}function Wse(n,e=1){return e-Math.abs(JN(n,e*2)-e)}function jse(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Xse(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Jse(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Kse(n,e){return n+Math.random()*(e-n)}function Yse(n){return n*(.5-Math.random())}function qse(n){n!==void 0&&(HH=n);let e=HH+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Qse(n){return n*Cm}function Zse(n){return n*Uy}function cD(n){return(n&n-1)===0&&n!==0}function TJ(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function RJ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function $se(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),h=o((e+r)/2),d=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*h,l*d,l*p,a*u);break;case"YZY":n.set(l*p,a*h,l*d,a*u);break;case"ZXZ":n.set(l*d,l*p,a*h,a*u);break;case"XZX":n.set(a*h,l*v,l*m,a*u);break;case"YXY":n.set(l*m,a*h,l*v,a*u);break;case"ZYZ":n.set(l*v,l*m,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Go(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function rn(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const PJ={DEG2RAD:Cm,RAD2DEG:Uy,generateUUID:Xo,clamp:Or,euclideanModulo:JN,mapLinear:Hse,inverseLerp:zse,lerp:K1,damp:Vse,pingpong:Wse,smoothstep:jse,smootherstep:Xse,randInt:Jse,randFloat:Kse,randFloatSpread:Yse,seededRandom:qse,degToRad:Qse,radToDeg:Zse,isPowerOfTwo:cD,ceilPowerOfTwo:TJ,floorPowerOfTwo:RJ,setQuaternionFromProperEuler:$se,normalize:rn,denormalize:Go};let We=class BJ{constructor(e=0,t=0){BJ.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Or(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};class hn{constructor(){hn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=r,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],h=r[4],d=r[7],p=r[2],m=r[5],v=r[8],S=i[0],M=i[3],g=i[6],_=i[1],A=i[4],w=i[7],C=i[2],R=i[5],L=i[8];return s[0]=o*S+a*_+l*C,s[3]=o*M+a*A+l*R,s[6]=o*g+a*w+l*L,s[1]=u*S+h*_+d*C,s[4]=u*M+h*A+d*R,s[7]=u*g+h*w+d*L,s[2]=p*S+m*_+v*C,s[5]=p*M+m*A+v*R,s[8]=p*g+m*w+v*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-r*s*h+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=h*o-a*u,p=a*l-h*s,m=u*s-o*l,v=t*d+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/v;return e[0]=d*S,e[1]=(i*u-h*r)*S,e[2]=(a*r-i*o)*S,e[3]=p*S,e[4]=(h*t-i*l)*S,e[5]=(i*s-a*t)*S,e[6]=m*S,e[7]=(r*l-u*t)*S,e[8]=(o*t-r*s)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(aB.makeScale(e,t)),this}rotate(e){return this.premultiply(aB.makeRotation(-e)),this}translate(e,t){return this.premultiply(aB.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const aB=new hn;function LJ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const eoe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Rv(n,e){return new eoe[n](e)}function XA(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const zH={};function Y1(n){n in zH||(zH[n]=!0,console.warn(n))}function py(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function lB(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const toe=new hn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),noe=new hn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function roe(n){return n.convertSRGBToLinear().applyMatrix3(noe)}function ioe(n){return n.applyMatrix3(toe).convertLinearToSRGB()}const soe={[Ul]:n=>n,[Qt]:n=>n.convertSRGBToLinear(),[XN]:roe},ooe={[Ul]:n=>n,[Qt]:n=>n.convertLinearToSRGB(),[XN]:ioe},Ea={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Ul},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=soe[e],i=ooe[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let y0;class KN{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{y0===void 0&&(y0=XA("canvas")),y0.width=e.width,y0.height=e.height;const r=y0.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=y0}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=XA("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=py(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(py(t[r]/255)*255):t[r]=py(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let am=class{constructor(e=null){this.isSource=!0,this.uuid=Xo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(cB(i[o].image)):s.push(cB(i[o]))}else s=cB(i);r.url=s}return t||(e.images[this.uuid]=r),r}};function cB(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?KN.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aoe=0;class Er extends wh{constructor(e=Er.DEFAULT_IMAGE,t=Er.DEFAULT_MAPPING,r=$i,i=$i,s=vr,o=Hc,a=io,l=ph,u=Er.DEFAULT_ANISOTROPY,h=kd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aoe++}),this.uuid=Xo(),this.name="",this.source=new am(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new We(0,0),this.repeat=new We(1,1),this.center=new We(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(Y1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===eh?Qt:kd),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==aR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case lf:e.x=e.x-Math.floor(e.x);break;case $i:e.x=e.x<0?0:1;break;case Dy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case lf:e.y=e.y-Math.floor(e.y);break;case $i:e.y=e.y<0?0:1;break;case Dy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Y1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Qt?eh:jN}set encoding(e){Y1("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===eh?Qt:kd}}Er.DEFAULT_IMAGE=null;Er.DEFAULT_MAPPING=aR;Er.DEFAULT_ANISOTROPY=1;class Nn{constructor(e=0,t=0,r=0,i=1){Nn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const o=e.elements,a=o[0],l=o[4],u=o[8],h=o[1],d=o[5],p=o[9],m=o[2],v=o[6],S=o[10];if(Math.abs(l-h)<.01&&Math.abs(u-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(l+h)<.1&&Math.abs(u+m)<.1&&Math.abs(p+v)<.1&&Math.abs(a+d+S-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const g=(a+1)/2,_=(d+1)/2,A=(S+1)/2,w=(l+h)/4,C=(u+m)/4,R=(p+v)/4;return g>_&&g>A?g<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(g),i=w/r,s=C/r):_>A?_<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(_),r=w/i,s=R/i):A<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(A),r=C/s,i=R/s),this.set(r,i,s,t),this}let M=Math.sqrt((v-p)*(v-p)+(u-m)*(u-m)+(h-l)*(h-l));return Math.abs(M)<.001&&(M=1),this.x=(v-p)/M,this.y=(u-m)/M,this.z=(h-l)/M,this.w=Math.acos((a+d+S-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ol extends wh{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Nn(0,0,e,t),this.scissorTest=!1,this.viewport=new Nn(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(Y1("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===eh?Qt:kd),this.texture=new Er(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:vr,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new am(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}let uR=class extends Er{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Nr,this.minFilter=Nr,this.wrapR=$i,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};class loe extends Ol{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new uR(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class YN extends Er{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Nr,this.minFilter=Nr,this.wrapR=$i,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class coe extends Ol{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new YN(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class uoe extends Ol{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ns{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],h=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],S=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=S;return}if(d!==S||l!==p||u!==m||h!==v){let M=1-a;const g=l*p+u*m+h*v+d*S,_=g>=0?1:-1,A=1-g*g;if(A>Number.EPSILON){const C=Math.sqrt(A),R=Math.atan2(C,g*_);M=Math.sin(M*R)/C,a=Math.sin(a*R)/C}const w=a*_;if(l=l*M+p*w,u=u*M+m*w,h=h*M+v*w,d=d*M+S*w,M===1-a){const C=1/Math.sqrt(l*l+u*u+h*h+d*d);l*=C,u*=C,h*=C,d*=C}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],h=r[i+3],d=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+h*d+l*m-u*p,e[t+1]=l*v+h*p+u*d-a*m,e[t+2]=u*v+h*m+a*p-l*d,e[t+3]=h*v-a*d-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),h=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*h*d+u*m*v,this._y=u*m*d-p*h*v,this._z=u*h*v+p*m*d,this._w=u*h*d-p*m*v;break;case"YXZ":this._x=p*h*d+u*m*v,this._y=u*m*d-p*h*v,this._z=u*h*v-p*m*d,this._w=u*h*d+p*m*v;break;case"ZXY":this._x=p*h*d-u*m*v,this._y=u*m*d+p*h*v,this._z=u*h*v+p*m*d,this._w=u*h*d-p*m*v;break;case"ZYX":this._x=p*h*d-u*m*v,this._y=u*m*d+p*h*v,this._z=u*h*v-p*m*d,this._w=u*h*d+p*m*v;break;case"YZX":this._x=p*h*d+u*m*v,this._y=u*m*d+p*h*v,this._z=u*h*v-p*m*d,this._w=u*h*d-p*m*v;break;case"XZY":this._x=p*h*d-u*m*v,this._y=u*m*d-p*h*v,this._z=u*h*v+p*m*d,this._w=u*h*d+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],d=t[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-u)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+u)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+u)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Or(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=r*h+o*a+i*u-s*l,this._y=i*h+o*l+s*a-r*u,this._z=s*h+o*u+r*l-i*a,this._w=o*h-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),d=Math.sin((1-t)*h)/u,p=Math.sin(t*h)/u;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}let se=class IJ{constructor(e=0,t=0,r=0){IJ.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(VH.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(VH.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*r,h=l*r+a*t-s*i,d=l*i+s*r-o*t,p=-s*t-o*r-a*i;return this.x=u*l+p*-s+h*-a-d*-o,this.y=h*l+p*-o+d*-s-u*-a,this.z=d*l+p*-a+u*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return uB.copy(this).projectOnVector(e),this.sub(uB)}reflect(e){return this.sub(uB.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Or(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const uB=new se,VH=new ns;class zl{constructor(e=new se(1/0,1/0,1/0),t=new se(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Au.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Au.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Au.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),x0.copy(e.boundingBox),x0.applyMatrix4(e.matrixWorld),this.union(x0);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Au.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Au)}else i.boundingBox===null&&i.computeBoundingBox(),x0.copy(i.boundingBox),x0.applyMatrix4(e.matrixWorld),this.union(x0)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Au),Au.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(O_),mE.subVectors(this.max,O_),_0.subVectors(e.a,O_),A0.subVectors(e.b,O_),S0.subVectors(e.c,O_),Yh.subVectors(A0,_0),qh.subVectors(S0,A0),vp.subVectors(_0,S0);let t=[0,-Yh.z,Yh.y,0,-qh.z,qh.y,0,-vp.z,vp.y,Yh.z,0,-Yh.x,qh.z,0,-qh.x,vp.z,0,-vp.x,-Yh.y,Yh.x,0,-qh.y,qh.x,0,-vp.y,vp.x,0];return!hB(t,_0,A0,S0,mE)||(t=[1,0,0,0,1,0,0,0,1],!hB(t,_0,A0,S0,mE))?!1:(gE.crossVectors(Yh,qh),t=[gE.x,gE.y,gE.z],hB(t,_0,A0,S0,mE))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Au).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Au).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_u[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_u[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_u[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_u[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_u[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_u[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_u[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_u[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_u),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _u=[new se,new se,new se,new se,new se,new se,new se,new se],Au=new se,x0=new zl,_0=new se,A0=new se,S0=new se,Yh=new se,qh=new se,vp=new se,O_=new se,mE=new se,gE=new se,yp=new se;function hB(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){yp.fromArray(n,s);const a=i.x*Math.abs(yp.x)+i.y*Math.abs(yp.y)+i.z*Math.abs(yp.z),l=e.dot(yp),u=t.dot(yp),h=r.dot(yp);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const hoe=new zl,k_=new se,dB=new se;class Vl{constructor(e=new se,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):hoe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;k_.subVectors(e,this.center);const t=k_.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(k_,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(dB.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(k_.copy(e.center).add(dB)),this.expandByPoint(k_.copy(e.center).sub(dB))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Su=new se,fB=new se,vE=new se,Qh=new se,pB=new se,yE=new se,mB=new se;let VS=class{constructor(e=new se,t=new se(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Su)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Su.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Su.copy(this.origin).addScaledVector(this.direction,t),Su.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){fB.copy(e).add(t).multiplyScalar(.5),vE.copy(t).sub(e).normalize(),Qh.copy(this.origin).sub(fB);const s=e.distanceTo(t)*.5,o=-this.direction.dot(vE),a=Qh.dot(this.direction),l=-Qh.dot(vE),u=Qh.lengthSq(),h=Math.abs(1-o*o);let d,p,m,v;if(h>0)if(d=o*l-a,p=o*a-l,v=s*h,d>=0)if(p>=-v)if(p<=v){const S=1/h;d*=S,p*=S,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+u}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p<=-v?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u):p<=v?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(fB).addScaledVector(vE,p),m}intersectSphere(e,t){Su.subVectors(e.center,this.origin);const r=Su.dot(this.direction),i=Su.dot(Su)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(r=(e.min.x-p.x)*u,i=(e.max.x-p.x)*u):(r=(e.max.x-p.x)*u,i=(e.min.x-p.x)*u),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Su)!==null}intersectTriangle(e,t,r,i,s){pB.subVectors(t,e),yE.subVectors(r,e),mB.crossVectors(pB,yE);let o=this.direction.dot(mB),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Qh.subVectors(this.origin,e);const l=a*this.direction.dot(yE.crossVectors(Qh,yE));if(l<0)return null;const u=a*this.direction.dot(pB.cross(Qh));if(u<0||l+u>o)return null;const h=-a*Qh.dot(mB);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class Wt{constructor(){Wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,u,h,d,p,m,v,S,M){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=h,g[10]=d,g[14]=p,g[3]=m,g[7]=v,g[11]=S,g[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Wt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/M0.setFromMatrixColumn(e,0).length(),s=1/M0.setFromMatrixColumn(e,1).length(),o=1/M0.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,v=a*h,S=a*d;t[0]=l*h,t[4]=-l*d,t[8]=u,t[1]=m+v*u,t[5]=p-S*u,t[9]=-a*l,t[2]=S-p*u,t[6]=v+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,v=u*h,S=u*d;t[0]=p+S*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-v,t[6]=S+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,v=u*h,S=u*d;t[0]=p-S*a,t[4]=-o*d,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*h,t[9]=S-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,v=a*h,S=a*d;t[0]=l*h,t[4]=v*u-m,t[8]=p*u+S,t[1]=l*d,t[5]=S*u+p,t[9]=m*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,v=a*l,S=a*u;t[0]=l*h,t[4]=S-p*d,t[8]=v*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=m*d+v,t[10]=p-S*d}else if(e.order==="XZY"){const p=o*l,m=o*u,v=a*l,S=a*u;t[0]=l*h,t[4]=-d,t[8]=u*h,t[1]=p*d+S,t[5]=o*h,t[9]=m*d-v,t[2]=v*d-m,t[6]=a*h,t[10]=S*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(doe,e,foe)}lookAt(e,t,r){const i=this.elements;return Io.subVectors(e,t),Io.lengthSq()===0&&(Io.z=1),Io.normalize(),Zh.crossVectors(r,Io),Zh.lengthSq()===0&&(Math.abs(r.z)===1?Io.x+=1e-4:Io.z+=1e-4,Io.normalize(),Zh.crossVectors(r,Io)),Zh.normalize(),xE.crossVectors(Io,Zh),i[0]=Zh.x,i[4]=xE.x,i[8]=Io.x,i[1]=Zh.y,i[5]=xE.y,i[9]=Io.y,i[2]=Zh.z,i[6]=xE.z,i[10]=Io.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],h=r[1],d=r[5],p=r[9],m=r[13],v=r[2],S=r[6],M=r[10],g=r[14],_=r[3],A=r[7],w=r[11],C=r[15],R=i[0],L=i[4],I=i[8],T=i[12],B=i[1],H=i[5],K=i[9],j=i[13],z=i[2],X=i[6],te=i[10],O=i[14],D=i[3],V=i[7],G=i[11],q=i[15];return s[0]=o*R+a*B+l*z+u*D,s[4]=o*L+a*H+l*X+u*V,s[8]=o*I+a*K+l*te+u*G,s[12]=o*T+a*j+l*O+u*q,s[1]=h*R+d*B+p*z+m*D,s[5]=h*L+d*H+p*X+m*V,s[9]=h*I+d*K+p*te+m*G,s[13]=h*T+d*j+p*O+m*q,s[2]=v*R+S*B+M*z+g*D,s[6]=v*L+S*H+M*X+g*V,s[10]=v*I+S*K+M*te+g*G,s[14]=v*T+S*j+M*O+g*q,s[3]=_*R+A*B+w*z+C*D,s[7]=_*L+A*H+w*X+C*V,s[11]=_*I+A*K+w*te+C*G,s[15]=_*T+A*j+w*O+C*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],d=e[6],p=e[10],m=e[14],v=e[3],S=e[7],M=e[11],g=e[15];return v*(+s*l*d-i*u*d-s*a*p+r*u*p+i*a*m-r*l*m)+S*(+t*l*m-t*u*p+s*o*p-i*o*m+i*u*h-s*l*h)+M*(+t*u*d-t*a*m-s*o*d+r*o*m+s*a*h-r*u*h)+g*(-i*a*h-t*l*d+t*a*p+i*o*d-r*o*p+r*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],m=e[11],v=e[12],S=e[13],M=e[14],g=e[15],_=d*M*u-S*p*u+S*l*m-a*M*m-d*l*g+a*p*g,A=v*p*u-h*M*u-v*l*m+o*M*m+h*l*g-o*p*g,w=h*S*u-v*d*u+v*a*m-o*S*m-h*a*g+o*d*g,C=v*d*l-h*S*l-v*a*p+o*S*p+h*a*M-o*d*M,R=t*_+r*A+i*w+s*C;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/R;return e[0]=_*L,e[1]=(S*p*s-d*M*s-S*i*m+r*M*m+d*i*g-r*p*g)*L,e[2]=(a*M*s-S*l*s+S*i*u-r*M*u-a*i*g+r*l*g)*L,e[3]=(d*l*s-a*p*s-d*i*u+r*p*u+a*i*m-r*l*m)*L,e[4]=A*L,e[5]=(h*M*s-v*p*s+v*i*m-t*M*m-h*i*g+t*p*g)*L,e[6]=(v*l*s-o*M*s-v*i*u+t*M*u+o*i*g-t*l*g)*L,e[7]=(o*p*s-h*l*s+h*i*u-t*p*u-o*i*m+t*l*m)*L,e[8]=w*L,e[9]=(v*d*s-h*S*s-v*r*m+t*S*m+h*r*g-t*d*g)*L,e[10]=(o*S*s-v*a*s+v*r*u-t*S*u-o*r*g+t*a*g)*L,e[11]=(h*a*s-o*d*s-h*r*u+t*d*u+o*r*m-t*a*m)*L,e[12]=C*L,e[13]=(h*S*i-v*d*i+v*r*p-t*S*p-h*r*M+t*d*M)*L,e[14]=(v*a*i-o*S*i-v*r*l+t*S*l+o*r*M-t*a*M)*L,e[15]=(o*d*i-h*a*i+h*r*l-t*d*l-o*r*p+t*a*p)*L,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,h*a+r,h*l-i*o,0,u*l-i*a,h*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,d=a+a,p=s*u,m=s*h,v=s*d,S=o*h,M=o*d,g=a*d,_=l*u,A=l*h,w=l*d,C=r.x,R=r.y,L=r.z;return i[0]=(1-(S+g))*C,i[1]=(m+w)*C,i[2]=(v-A)*C,i[3]=0,i[4]=(m-w)*R,i[5]=(1-(p+g))*R,i[6]=(M+_)*R,i[7]=0,i[8]=(v+A)*L,i[9]=(M-_)*L,i[10]=(1-(p+S))*L,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=M0.set(i[0],i[1],i[2]).length();const o=M0.set(i[4],i[5],i[6]).length(),a=M0.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],al.copy(this);const l=1/s,u=1/o,h=1/a;return al.elements[0]*=l,al.elements[1]*=l,al.elements[2]*=l,al.elements[4]*=u,al.elements[5]*=u,al.elements[6]*=u,al.elements[8]*=h,al.elements[9]*=h,al.elements[10]*=h,t.setFromRotationMatrix(al),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),u=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=u,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),u=1/(r-i),h=1/(o-s),d=(t+e)*l,p=(r+i)*u,m=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const M0=new se,al=new Wt,doe=new se(0,0,0),foe=new se(1,1,1),Zh=new se,xE=new se,Io=new se,WH=new Wt,jH=new ns;let qN=class DJ{constructor(e=0,t=0,r=0,i=DJ.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],h=i[9],d=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(Or(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Or(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Or(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Or(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Or(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-Or(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return WH.makeRotationFromQuaternion(e),this.setFromRotationMatrix(WH,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return jH.setFromEuler(this),this.setFromQuaternion(jH,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};qN.DEFAULT_ORDER="XYZ";let Tm=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},poe=0;const XH=new se,E0=new ns,Mu=new Wt,_E=new se,G_=new se,moe=new se,goe=new ns,JH=new se(1,0,0),KH=new se(0,1,0),YH=new se(0,0,1),voe={type:"added"},qH={type:"removed"};class Mn extends wh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:poe++}),this.uuid=Xo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mn.DEFAULT_UP.clone();const e=new se,t=new qN,r=new ns,i=new se(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Wt},normalMatrix:{value:new hn}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=Mn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Tm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return E0.setFromAxisAngle(e,t),this.quaternion.multiply(E0),this}rotateOnWorldAxis(e,t){return E0.setFromAxisAngle(e,t),this.quaternion.premultiply(E0),this}rotateX(e){return this.rotateOnAxis(JH,e)}rotateY(e){return this.rotateOnAxis(KH,e)}rotateZ(e){return this.rotateOnAxis(YH,e)}translateOnAxis(e,t){return XH.copy(e).applyQuaternion(this.quaternion),this.position.add(XH.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(JH,e)}translateY(e){return this.translateOnAxis(KH,e)}translateZ(e){return this.translateOnAxis(YH,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Mu.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?_E.copy(e):_E.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),G_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mu.lookAt(G_,_E,this.up):Mu.lookAt(_E,G_,this.up),this.quaternion.setFromRotationMatrix(Mu),i&&(Mu.extractRotation(i.matrixWorld),E0.setFromRotationMatrix(Mu),this.quaternion.premultiply(E0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(voe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(qH)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(qH)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Mu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Mu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Mu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(G_,e,moe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(G_,goe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Mn.DEFAULT_UP=new se(0,1,0);Mn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ll=new se,Eu=new se,gB=new se,wu=new se,w0=new se,b0=new se,QH=new se,vB=new se,yB=new se,xB=new se;let AE=!1,lm=class kp{constructor(e=new se,t=new se,r=new se){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ll.subVectors(e,t),i.cross(ll);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){ll.subVectors(i,t),Eu.subVectors(r,t),gB.subVectors(e,t);const o=ll.dot(ll),a=ll.dot(Eu),l=ll.dot(gB),u=Eu.dot(Eu),h=Eu.dot(gB),d=o*u-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,m=(u*l-a*h)*p,v=(o*h-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,wu),wu.x>=0&&wu.y>=0&&wu.x+wu.y<=1}static getUV(e,t,r,i,s,o,a,l){return AE===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),AE=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,wu),l.setScalar(0),l.addScaledVector(s,wu.x),l.addScaledVector(o,wu.y),l.addScaledVector(a,wu.z),l}static isFrontFacing(e,t,r,i){return ll.subVectors(r,t),Eu.subVectors(e,t),ll.cross(Eu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ll.subVectors(this.c,this.b),Eu.subVectors(this.a,this.b),ll.cross(Eu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return kp.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return kp.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return AE===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),AE=!0),kp.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return kp.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return kp.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return kp.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;w0.subVectors(i,r),b0.subVectors(s,r),vB.subVectors(e,r);const l=w0.dot(vB),u=b0.dot(vB);if(l<=0&&u<=0)return t.copy(r);yB.subVectors(e,i);const h=w0.dot(yB),d=b0.dot(yB);if(h>=0&&d<=h)return t.copy(i);const p=l*d-h*u;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(r).addScaledVector(w0,o);xB.subVectors(e,s);const m=w0.dot(xB),v=b0.dot(xB);if(v>=0&&m<=v)return t.copy(s);const S=m*u-l*v;if(S<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(r).addScaledVector(b0,a);const M=h*v-m*d;if(M<=0&&d-h>=0&&m-v>=0)return QH.subVectors(s,i),a=(d-h)/(d-h+(m-v)),t.copy(i).addScaledVector(QH,a);const g=1/(M+S+p);return o=S*g,a=p*g,t.copy(r).addScaledVector(w0,o).addScaledVector(b0,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},yoe=0;class xi extends wh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yoe++}),this.uuid=Xo(),this.name="",this.type="Material",this.blending=wm,this.side=Gc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=UN,this.blendDst=ON,this.blendEquation=Zp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=zC,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=CJ,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wb,this.stencilZFail=Wb,this.stencilZPass=Wb,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==wm&&(r.blending=this.blending),this.side!==Gc&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const FJ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cl={h:0,s:0,l:0},SE={h:0,s:0,l:0};function _B(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let vt=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ea.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Ea.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ea.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Ea.workingColorSpace){if(e=JN(e,1),t=Or(t,0,1),r=Or(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=_B(o,s,e+1/3),this.g=_B(o,s,e),this.b=_B(o,s,e-1/3)}return Ea.toWorkingColorSpace(this,i),this}setStyle(e,t=Qt){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Qt){const r=FJ[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=py(e.r),this.g=py(e.g),this.b=py(e.b),this}copyLinearToSRGB(e){return this.r=lB(e.r),this.g=lB(e.g),this.b=lB(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qt){return Ea.fromWorkingColorSpace(fs.copy(this),e),Math.round(Or(fs.r*255,0,255))*65536+Math.round(Or(fs.g*255,0,255))*256+Math.round(Or(fs.b*255,0,255))}getHexString(e=Qt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ea.workingColorSpace){Ea.fromWorkingColorSpace(fs.copy(this),t);const r=fs.r,i=fs.g,s=fs.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=h<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=Ea.workingColorSpace){return Ea.fromWorkingColorSpace(fs.copy(this),t),e.r=fs.r,e.g=fs.g,e.b=fs.b,e}getStyle(e=Qt){Ea.fromWorkingColorSpace(fs.copy(this),e);const t=fs.r,r=fs.g,i=fs.b;return e!==Qt?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(cl),cl.h+=e,cl.s+=t,cl.l+=r,this.setHSL(cl.h,cl.s,cl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(cl),e.getHSL(SE);const r=K1(cl.h,SE.h,t),i=K1(cl.s,SE.s,t),s=K1(cl.l,SE.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const fs=new vt;vt.NAMES=FJ;let Ho=class extends xi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const Gu=xoe();function xoe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function $s(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Or(n,-65504,65504),Gu.floatView[0]=n;const e=Gu.uint32View[0],t=e>>23&511;return Gu.baseTable[t]+((e&8388607)>>Gu.shiftTable[t])}function T1(n){const e=n>>10;return Gu.uint32View[0]=Gu.mantissaTable[Gu.offsetTable[e]+(n&1023)]+Gu.exponentTable[e],Gu.floatView[0]}const _oe={toHalfFloat:$s,fromHalfFloat:T1},ni=new se,ME=new We;class Cn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=jA,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)ME.fromBufferAttribute(this,t),ME.applyMatrix3(e),this.setXY(t,ME.x,ME.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ni.fromBufferAttribute(this,t),ni.applyMatrix3(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ni.fromBufferAttribute(this,t),ni.applyMatrix4(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ni.fromBufferAttribute(this,t),ni.applyNormalMatrix(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ni.fromBufferAttribute(this,t),ni.transformDirection(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Go(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Go(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Go(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Go(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array),s=rn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==jA&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Aoe extends Cn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class Soe extends Cn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class Moe extends Cn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class Eoe extends Cn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class QN extends Cn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class woe extends Cn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class ZN extends Cn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class boe extends Cn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=T1(this.array[e*this.itemSize]);return this.normalized&&(t=Go(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=$s(t),this}getY(e){let t=T1(this.array[e*this.itemSize+1]);return this.normalized&&(t=Go(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=$s(t),this}getZ(e){let t=T1(this.array[e*this.itemSize+2]);return this.normalized&&(t=Go(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=$s(t),this}getW(e){let t=T1(this.array[e*this.itemSize+3]);return this.normalized&&(t=Go(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=$s(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array)),this.array[e+0]=$s(t),this.array[e+1]=$s(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array)),this.array[e+0]=$s(t),this.array[e+1]=$s(r),this.array[e+2]=$s(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array),s=rn(s,this.array)),this.array[e+0]=$s(t),this.array[e+1]=$s(r),this.array[e+2]=$s(i),this.array[e+3]=$s(s),this}}let Ct=class extends Cn{constructor(e,t,r){super(new Float32Array(e),t,r)}};class Coe extends Cn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let Toe=0;const _a=new Wt,AB=new Mn,C0=new se,Do=new zl,H_=new zl,Ii=new se;class $t extends wh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Toe++}),this.uuid=Xo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(LJ(e)?ZN:QN)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new hn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _a.makeRotationFromQuaternion(e),this.applyMatrix4(_a),this}rotateX(e){return _a.makeRotationX(e),this.applyMatrix4(_a),this}rotateY(e){return _a.makeRotationY(e),this.applyMatrix4(_a),this}rotateZ(e){return _a.makeRotationZ(e),this.applyMatrix4(_a),this}translate(e,t,r){return _a.makeTranslation(e,t,r),this.applyMatrix4(_a),this}scale(e,t,r){return _a.makeScale(e,t,r),this.applyMatrix4(_a),this}lookAt(e){return AB.lookAt(e),AB.updateMatrix(),this.applyMatrix4(AB.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(C0).negate(),this.translate(C0.x,C0.y,C0.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ct(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new se(-1/0,-1/0,-1/0),new se(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Do.setFromBufferAttribute(s),this.morphTargetsRelative?(Ii.addVectors(this.boundingBox.min,Do.min),this.boundingBox.expandByPoint(Ii),Ii.addVectors(this.boundingBox.max,Do.max),this.boundingBox.expandByPoint(Ii)):(this.boundingBox.expandByPoint(Do.min),this.boundingBox.expandByPoint(Do.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new se,1/0);return}if(e){const r=this.boundingSphere.center;if(Do.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];H_.setFromBufferAttribute(a),this.morphTargetsRelative?(Ii.addVectors(Do.min,H_.min),Do.expandByPoint(Ii),Ii.addVectors(Do.max,H_.max),Do.expandByPoint(Ii)):(Do.expandByPoint(H_.min),Do.expandByPoint(H_.max))}Do.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Ii.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Ii));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)Ii.fromBufferAttribute(a,u),l&&(C0.fromBufferAttribute(e,u),Ii.add(C0)),i=Math.max(i,r.distanceToSquared(Ii))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Cn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],h=[];for(let B=0;B<a;B++)u[B]=new se,h[B]=new se;const d=new se,p=new se,m=new se,v=new We,S=new We,M=new We,g=new se,_=new se;function A(B,H,K){d.fromArray(i,B*3),p.fromArray(i,H*3),m.fromArray(i,K*3),v.fromArray(o,B*2),S.fromArray(o,H*2),M.fromArray(o,K*2),p.sub(d),m.sub(d),S.sub(v),M.sub(v);const j=1/(S.x*M.y-M.x*S.y);isFinite(j)&&(g.copy(p).multiplyScalar(M.y).addScaledVector(m,-S.y).multiplyScalar(j),_.copy(m).multiplyScalar(S.x).addScaledVector(p,-M.x).multiplyScalar(j),u[B].add(g),u[H].add(g),u[K].add(g),h[B].add(_),h[H].add(_),h[K].add(_))}let w=this.groups;w.length===0&&(w=[{start:0,count:r.length}]);for(let B=0,H=w.length;B<H;++B){const K=w[B],j=K.start,z=K.count;for(let X=j,te=j+z;X<te;X+=3)A(r[X+0],r[X+1],r[X+2])}const C=new se,R=new se,L=new se,I=new se;function T(B){L.fromArray(s,B*3),I.copy(L);const H=u[B];C.copy(H),C.sub(L.multiplyScalar(L.dot(H))).normalize(),R.crossVectors(I,H);const K=R.dot(h[B])<0?-1:1;l[B*4]=C.x,l[B*4+1]=C.y,l[B*4+2]=C.z,l[B*4+3]=K}for(let B=0,H=w.length;B<H;++B){const K=w[B],j=K.start,z=K.count;for(let X=j,te=j+z;X<te;X+=3)T(r[X+0]),T(r[X+1]),T(r[X+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Cn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new se,s=new se,o=new se,a=new se,l=new se,u=new se,h=new se,d=new se;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),S=e.getX(p+1),M=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,S),o.fromBufferAttribute(t,M),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,S),u.fromBufferAttribute(r,M),a.add(h),l.add(h),u.add(h),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(S,l.x,l.y,l.z),r.setXYZ(M,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Ii.fromBufferAttribute(e,t),Ii.normalize(),e.setXYZ(t,Ii.x,Ii.y,Ii.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,d=a.normalized,p=new u.constructor(l.length*h);let m=0,v=0;for(let S=0,M=l.length;S<M;S++){a.isInterleavedBufferAttribute?m=l[S]*a.data.stride+a.offset:m=l[S]*h;for(let g=0;g<h;g++)p[v++]=u[m++]}return new Cn(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new $t,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,d=u.length;h<d;h++){const p=u[h],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d];h.push(m.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],d=s[u];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ZH=new Wt,wc=new VS,EE=new Vl,$H=new se,T0=new se,R0=new se,P0=new se,SB=new se,wE=new se,bE=new We,CE=new We,TE=new We,ez=new se,tz=new se,nz=new se,RE=new se,PE=new se;class Ui extends Mn{constructor(e=new $t,t=new Ho){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){wE.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],d=s[l];h!==0&&(SB.fromBufferAttribute(d,e),o?wE.addScaledVector(SB,h):wE.addScaledVector(SB.sub(t),h))}t.add(wE)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),EE.copy(r.boundingSphere),EE.applyMatrix4(s),wc.copy(e.ray).recast(e.near),!(EE.containsPoint(wc.origin)===!1&&(wc.intersectSphere(EE,$H)===null||wc.origin.distanceToSquared($H)>(e.far-e.near)**2))&&(ZH.copy(s).invert(),wc.copy(e.ray).applyMatrix4(ZH),!(r.boundingBox!==null&&wc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t)))}_computeIntersections(e,t){let r;const i=this.geometry,s=this.material,o=i.index,a=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,h=i.attributes.normal,d=i.groups,p=i.drawRange;if(o!==null)if(Array.isArray(s))for(let m=0,v=d.length;m<v;m++){const S=d[m],M=s[S.materialIndex],g=Math.max(S.start,p.start),_=Math.min(o.count,Math.min(S.start+S.count,p.start+p.count));for(let A=g,w=_;A<w;A+=3){const C=o.getX(A),R=o.getX(A+1),L=o.getX(A+2);r=BE(this,M,e,wc,l,u,h,C,R,L),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const m=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let S=m,M=v;S<M;S+=3){const g=o.getX(S),_=o.getX(S+1),A=o.getX(S+2);r=BE(this,s,e,wc,l,u,h,g,_,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(a!==void 0)if(Array.isArray(s))for(let m=0,v=d.length;m<v;m++){const S=d[m],M=s[S.materialIndex],g=Math.max(S.start,p.start),_=Math.min(a.count,Math.min(S.start+S.count,p.start+p.count));for(let A=g,w=_;A<w;A+=3){const C=A,R=A+1,L=A+2;r=BE(this,M,e,wc,l,u,h,C,R,L),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const m=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let S=m,M=v;S<M;S+=3){const g=S,_=S+1,A=S+2;r=BE(this,s,e,wc,l,u,h,g,_,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function Roe(n,e,t,r,i,s,o,a){let l;if(e.side===ks?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Gc,a),l===null)return null;PE.copy(a),PE.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(PE);return u<t.near||u>t.far?null:{distance:u,point:PE.clone(),object:n}}function BE(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,T0),n.getVertexPosition(l,R0),n.getVertexPosition(u,P0);const h=Roe(n,e,t,r,T0,R0,P0,RE);if(h){i&&(bE.fromBufferAttribute(i,a),CE.fromBufferAttribute(i,l),TE.fromBufferAttribute(i,u),h.uv=lm.getInterpolation(RE,T0,R0,P0,bE,CE,TE,new We)),s&&(bE.fromBufferAttribute(s,a),CE.fromBufferAttribute(s,l),TE.fromBufferAttribute(s,u),h.uv1=lm.getInterpolation(RE,T0,R0,P0,bE,CE,TE,new We),h.uv2=h.uv1),o&&(ez.fromBufferAttribute(o,a),tz.fromBufferAttribute(o,l),nz.fromBufferAttribute(o,u),h.normal=lm.getInterpolation(RE,T0,R0,P0,ez,tz,nz,new se),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new se,materialIndex:0};lm.getNormal(T0,R0,P0,d.normal),h.face=d}return h}class bf extends $t{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],d=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ct(u,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(d,2));function v(S,M,g,_,A,w,C,R,L,I,T){const B=w/L,H=C/I,K=w/2,j=C/2,z=R/2,X=L+1,te=I+1;let O=0,D=0;const V=new se;for(let G=0;G<te;G++){const q=G*H-j;for(let re=0;re<X;re++){const Y=re*B-K;V[S]=Y*_,V[M]=q*A,V[g]=z,u.push(V.x,V.y,V.z),V[S]=0,V[M]=0,V[g]=R>0?1:-1,h.push(V.x,V.y,V.z),d.push(re/L),d.push(1-G/I),O+=1}}for(let G=0;G<I;G++)for(let q=0;q<L;q++){const re=p+q+X*G,Y=p+q+X*(G+1),ae=p+(q+1)+X*(G+1),Se=p+(q+1)+X*G;l.push(re,Y,Se),l.push(Y,ae,Se),D+=6}a.addGroup(m,D,T),m+=D,p+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Oy(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Ls(n){const e={};for(let t=0;t<n.length;t++){const r=Oy(n[t]);for(const i in r)e[i]=r[i]}return e}function Poe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function NJ(n){return n.getRenderTarget()===null?n.outputColorSpace:Ul}const UJ={clone:Oy,merge:Ls};var Boe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Loe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class zc extends xi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Boe,this.fragmentShader=Loe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Oy(e.uniforms),this.uniformsGroups=Poe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class WS extends Mn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class mi extends WS{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Uy*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Cm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Uy*2*Math.atan(Math.tan(Cm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Cm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const B0=-90,L0=1;class OJ extends Mn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new mi(B0,L0,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new mi(B0,L0,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new mi(B0,L0,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new mi(B0,L0,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new mi(B0,L0,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new mi(B0,L0,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,u]=this.children,h=e.getRenderTarget(),d=e.toneMapping,p=e.xr.enabled;e.toneMapping=Pl,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}let jS=class extends Er{constructor(e,t,r,i,s,o,a,l,u,h){e=e!==void 0?e:[],t=t!==void 0?t:of,super(e,t,r,i,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}};class kJ extends Ol{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(Y1("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===eh?Qt:kd),this.texture=new jS(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:vr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new bf(5,5,5),s=new zc({name:"CubemapFromEquirect",uniforms:Oy(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ks,blending:$u});s.uniforms.tEquirect.value=t;const o=new Ui(i,s),a=t.minFilter;return t.minFilter===Hc&&(t.minFilter=vr),new OJ(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const MB=new se,Ioe=new se,Doe=new hn;class dd{constructor(e=new se(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=MB.subVectors(r,t).cross(Ioe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(MB),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Doe.getNormalMatrix(e),i=this.coplanarPoint(MB).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const xp=new Vl,LE=new se;let hR=class{constructor(e=new dd,t=new dd,r=new dd,i=new dd,s=new dd,o=new dd){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],h=r[6],d=r[7],p=r[8],m=r[9],v=r[10],S=r[11],M=r[12],g=r[13],_=r[14],A=r[15];return t[0].setComponents(a-i,d-l,S-p,A-M).normalize(),t[1].setComponents(a+i,d+l,S+p,A+M).normalize(),t[2].setComponents(a+s,d+u,S+m,A+g).normalize(),t[3].setComponents(a-s,d-u,S-m,A-g).normalize(),t[4].setComponents(a-o,d-h,S-v,A-_).normalize(),t[5].setComponents(a+o,d+h,S+v,A+_).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),xp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),xp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(xp)}intersectsSprite(e){return xp.center.set(0,0,0),xp.radius=.7071067811865476,xp.applyMatrix4(e.matrixWorld),this.intersectsSphere(xp)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(LE.x=i.normal.x>0?e.max.x:e.min.x,LE.y=i.normal.y>0?e.max.y:e.min.y,LE.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(LE)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function GJ(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Foe(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,h){const d=u.array,p=u.usage,m=n.createBuffer();n.bindBuffer(h,m),n.bufferData(h,d,p),u.onUploadCallback();let v;if(d instanceof Float32Array)v=n.FLOAT;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)v=n.SHORT;else if(d instanceof Uint32Array)v=n.UNSIGNED_INT;else if(d instanceof Int32Array)v=n.INT;else if(d instanceof Int8Array)v=n.BYTE;else if(d instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:v,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,h,d){const p=h.array,m=h.updateRange;n.bindBuffer(d,u),m.count===-1?n.bufferSubData(d,0,p):(t?n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),h.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h&&(n.deleteBuffer(h.buffer),r.delete(u))}function l(u,h){if(u.isGLBufferAttribute){const p=r.get(u);(!p||p.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=r.get(u);d===void 0?r.set(u,i(u,h)):d.version<u.version&&(s(d.buffer,u,h),d.version=u.version)}return{get:o,remove:a,update:l}}let dR=class HJ extends $t{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,h=l+1,d=e/a,p=t/l,m=[],v=[],S=[],M=[];for(let g=0;g<h;g++){const _=g*p-o;for(let A=0;A<u;A++){const w=A*d-s;v.push(w,-_,0),S.push(0,0,1),M.push(A/a),M.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const A=_+u*g,w=_+u*(g+1),C=_+1+u*(g+1),R=_+1+u*g;m.push(A,w,R),m.push(w,C,R)}this.setIndex(m),this.setAttribute("position",new Ct(v,3)),this.setAttribute("normal",new Ct(S,3)),this.setAttribute("uv",new Ct(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new HJ(e.width,e.height,e.widthSegments,e.heightSegments)}};var Noe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Uoe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ooe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,koe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Goe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Hoe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zoe="vec3 transformed = vec3( position );",Voe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Woe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,joe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Xoe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Joe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Koe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Yoe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qoe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Qoe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Zoe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,$oe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,eae=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,tae=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,nae=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,rae=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,iae=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,sae=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,oae=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,aae=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,lae="gl_FragColor = linearToOutputTexel( gl_FragColor );",cae=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,uae=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hae=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dae=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,fae=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,pae=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,mae=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gae=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,vae=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,yae=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,xae=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_ae=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Aae=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Sae=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Mae=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Eae=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,wae=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,bae=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Cae=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Tae=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Rae=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Pae=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,Bae=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Lae=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Iae=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Dae=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Fae=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Nae=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Uae=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Oae=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,kae=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,Gae=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Hae=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,zae=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vae=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Wae=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jae=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Xae=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Jae=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Kae=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Yae=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,qae=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Qae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Zae=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$ae=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ele=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,tle=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,nle=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,rle=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ile=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sle=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ole=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ale=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,lle=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,cle=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,ule=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hle=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,dle=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,fle=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,ple=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,mle=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,gle=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,vle=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,yle=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,xle=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_le=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Ale=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Sle=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Mle=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Ele=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,wle=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,ble=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Cle=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Tle=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Rle=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Ple=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ble=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Lle=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ile=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Dle=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Fle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Nle=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ule=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ole=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,kle=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Gle=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Hle=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,zle=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Vle=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Wle=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jle=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Xle=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jle=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Kle=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yle=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qle=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Qle=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Zle=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,$le=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ece=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tce=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,nce=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rce=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ice=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sce=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,oce=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ace=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lce=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,cce=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uce=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,tn={alphamap_fragment:Noe,alphamap_pars_fragment:Uoe,alphatest_fragment:Ooe,alphatest_pars_fragment:koe,aomap_fragment:Goe,aomap_pars_fragment:Hoe,begin_vertex:zoe,beginnormal_vertex:Voe,bsdfs:Woe,iridescence_fragment:joe,bumpmap_pars_fragment:Xoe,clipping_planes_fragment:Joe,clipping_planes_pars_fragment:Koe,clipping_planes_pars_vertex:Yoe,clipping_planes_vertex:qoe,color_fragment:Qoe,color_pars_fragment:Zoe,color_pars_vertex:$oe,color_vertex:eae,common:tae,cube_uv_reflection_fragment:nae,defaultnormal_vertex:rae,displacementmap_pars_vertex:iae,displacementmap_vertex:sae,emissivemap_fragment:oae,emissivemap_pars_fragment:aae,encodings_fragment:lae,encodings_pars_fragment:cae,envmap_fragment:uae,envmap_common_pars_fragment:hae,envmap_pars_fragment:dae,envmap_pars_vertex:fae,envmap_physical_pars_fragment:wae,envmap_vertex:pae,fog_vertex:mae,fog_pars_vertex:gae,fog_fragment:vae,fog_pars_fragment:yae,gradientmap_pars_fragment:xae,lightmap_fragment:_ae,lightmap_pars_fragment:Aae,lights_lambert_fragment:Sae,lights_lambert_pars_fragment:Mae,lights_pars_begin:Eae,lights_toon_fragment:bae,lights_toon_pars_fragment:Cae,lights_phong_fragment:Tae,lights_phong_pars_fragment:Rae,lights_physical_fragment:Pae,lights_physical_pars_fragment:Bae,lights_fragment_begin:Lae,lights_fragment_maps:Iae,lights_fragment_end:Dae,logdepthbuf_fragment:Fae,logdepthbuf_pars_fragment:Nae,logdepthbuf_pars_vertex:Uae,logdepthbuf_vertex:Oae,map_fragment:kae,map_pars_fragment:Gae,map_particle_fragment:Hae,map_particle_pars_fragment:zae,metalnessmap_fragment:Vae,metalnessmap_pars_fragment:Wae,morphcolor_vertex:jae,morphnormal_vertex:Xae,morphtarget_pars_vertex:Jae,morphtarget_vertex:Kae,normal_fragment_begin:Yae,normal_fragment_maps:qae,normal_pars_fragment:Qae,normal_pars_vertex:Zae,normal_vertex:$ae,normalmap_pars_fragment:ele,clearcoat_normal_fragment_begin:tle,clearcoat_normal_fragment_maps:nle,clearcoat_pars_fragment:rle,iridescence_pars_fragment:ile,output_fragment:sle,packing:ole,premultiplied_alpha_fragment:ale,project_vertex:lle,dithering_fragment:cle,dithering_pars_fragment:ule,roughnessmap_fragment:hle,roughnessmap_pars_fragment:dle,shadowmap_pars_fragment:fle,shadowmap_pars_vertex:ple,shadowmap_vertex:mle,shadowmask_pars_fragment:gle,skinbase_vertex:vle,skinning_pars_vertex:yle,skinning_vertex:xle,skinnormal_vertex:_le,specularmap_fragment:Ale,specularmap_pars_fragment:Sle,tonemapping_fragment:Mle,tonemapping_pars_fragment:Ele,transmission_fragment:wle,transmission_pars_fragment:ble,uv_pars_fragment:Cle,uv_pars_vertex:Tle,uv_vertex:Rle,worldpos_vertex:Ple,background_vert:Ble,background_frag:Lle,backgroundCube_vert:Ile,backgroundCube_frag:Dle,cube_vert:Fle,cube_frag:Nle,depth_vert:Ule,depth_frag:Ole,distanceRGBA_vert:kle,distanceRGBA_frag:Gle,equirect_vert:Hle,equirect_frag:zle,linedashed_vert:Vle,linedashed_frag:Wle,meshbasic_vert:jle,meshbasic_frag:Xle,meshlambert_vert:Jle,meshlambert_frag:Kle,meshmatcap_vert:Yle,meshmatcap_frag:qle,meshnormal_vert:Qle,meshnormal_frag:Zle,meshphong_vert:$le,meshphong_frag:ece,meshphysical_vert:tce,meshphysical_frag:nce,meshtoon_vert:rce,meshtoon_frag:ice,points_vert:sce,points_frag:oce,shadow_vert:ace,shadow_frag:lce,sprite_vert:cce,sprite_frag:uce},pt={common:{diffuse:{value:new vt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new hn},alphaMap:{value:null},alphaMapTransform:{value:new hn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new hn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new hn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new hn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new hn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new hn},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new hn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new hn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new hn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new hn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new vt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new hn}},sprite:{diffuse:{value:new vt(16777215)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new hn},alphaMap:{value:null},alphaTest:{value:0}}},Ml={basic:{uniforms:Ls([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.fog]),vertexShader:tn.meshbasic_vert,fragmentShader:tn.meshbasic_frag},lambert:{uniforms:Ls([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new vt(0)}}]),vertexShader:tn.meshlambert_vert,fragmentShader:tn.meshlambert_frag},phong:{uniforms:Ls([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new vt(0)},specular:{value:new vt(1118481)},shininess:{value:30}}]),vertexShader:tn.meshphong_vert,fragmentShader:tn.meshphong_frag},standard:{uniforms:Ls([pt.common,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.roughnessmap,pt.metalnessmap,pt.fog,pt.lights,{emissive:{value:new vt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag},toon:{uniforms:Ls([pt.common,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.gradientmap,pt.fog,pt.lights,{emissive:{value:new vt(0)}}]),vertexShader:tn.meshtoon_vert,fragmentShader:tn.meshtoon_frag},matcap:{uniforms:Ls([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,{matcap:{value:null}}]),vertexShader:tn.meshmatcap_vert,fragmentShader:tn.meshmatcap_frag},points:{uniforms:Ls([pt.points,pt.fog]),vertexShader:tn.points_vert,fragmentShader:tn.points_frag},dashed:{uniforms:Ls([pt.common,pt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tn.linedashed_vert,fragmentShader:tn.linedashed_frag},depth:{uniforms:Ls([pt.common,pt.displacementmap]),vertexShader:tn.depth_vert,fragmentShader:tn.depth_frag},normal:{uniforms:Ls([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,{opacity:{value:1}}]),vertexShader:tn.meshnormal_vert,fragmentShader:tn.meshnormal_frag},sprite:{uniforms:Ls([pt.sprite,pt.fog]),vertexShader:tn.sprite_vert,fragmentShader:tn.sprite_frag},background:{uniforms:{uvTransform:{value:new hn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tn.background_vert,fragmentShader:tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:tn.backgroundCube_vert,fragmentShader:tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tn.cube_vert,fragmentShader:tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tn.equirect_vert,fragmentShader:tn.equirect_frag},distanceRGBA:{uniforms:Ls([pt.common,pt.displacementmap,{referencePosition:{value:new se},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tn.distanceRGBA_vert,fragmentShader:tn.distanceRGBA_frag},shadow:{uniforms:Ls([pt.lights,pt.fog,{color:{value:new vt(0)},opacity:{value:1}}]),vertexShader:tn.shadow_vert,fragmentShader:tn.shadow_frag}};Ml.physical={uniforms:Ls([Ml.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new hn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new hn},clearcoatNormalScale:{value:new We(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new hn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new hn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new hn},sheen:{value:0},sheenColor:{value:new vt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new hn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new hn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new hn},transmissionSamplerSize:{value:new We},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new hn},attenuationDistance:{value:0},attenuationColor:{value:new vt(0)},specularColor:{value:new vt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new hn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new hn}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag};const IE={r:0,b:0,g:0};function hce(n,e,t,r,i,s,o){const a=new vt(0);let l=s===!0?0:1,u,h,d=null,p=0,m=null;function v(M,g){let _=!1,A=g.isScene===!0?g.background:null;switch(A&&A.isTexture&&(A=(g.backgroundBlurriness>0?t:e).get(A)),A===null?S(a,l):A&&A.isColor&&(S(A,1),_=!0),n.xr.getEnvironmentBlendMode()){case"opaque":_=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),_=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),_=!0;break}(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),A&&(A.isCubeTexture||A.mapping===ux)?(h===void 0&&(h=new Ui(new bf(1,1,1),new zc({name:"BackgroundCubeMaterial",uniforms:Oy(Ml.backgroundCube.uniforms),vertexShader:Ml.backgroundCube.vertexShader,fragmentShader:Ml.backgroundCube.fragmentShader,side:ks,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(w,C,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=A,h.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=A.colorSpace!==Qt,(d!==A||p!==A.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=A,p=A.version,m=n.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null)):A&&A.isTexture&&(u===void 0&&(u=new Ui(new dR(2,2),new zc({name:"BackgroundMaterial",uniforms:Oy(Ml.background.uniforms),vertexShader:Ml.background.vertexShader,fragmentShader:Ml.background.fragmentShader,side:Gc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=A,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=A.colorSpace!==Qt,A.matrixAutoUpdate===!0&&A.updateMatrix(),u.material.uniforms.uvTransform.value.copy(A.matrix),(d!==A||p!==A.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=A,p=A.version,m=n.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null))}function S(M,g){M.getRGB(IE,NJ(n)),r.buffers.color.setClear(IE.r,IE.g,IE.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(M,g=1){a.set(M),l=g,S(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,S(a,l)},render:v}}function dce(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=M(null);let u=l,h=!1;function d(z,X,te,O,D){let V=!1;if(o){const G=S(O,te,X);u!==G&&(u=G,m(u.object)),V=g(z,O,te,D),V&&_(z,O,te,D)}else{const G=X.wireframe===!0;(u.geometry!==O.id||u.program!==te.id||u.wireframe!==G)&&(u.geometry=O.id,u.program=te.id,u.wireframe=G,V=!0)}D!==null&&t.update(D,n.ELEMENT_ARRAY_BUFFER),(V||h)&&(h=!1,I(z,X,te,O),D!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(D).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(z){return r.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function v(z){return r.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function S(z,X,te){const O=te.wireframe===!0;let D=a[z.id];D===void 0&&(D={},a[z.id]=D);let V=D[X.id];V===void 0&&(V={},D[X.id]=V);let G=V[O];return G===void 0&&(G=M(p()),V[O]=G),G}function M(z){const X=[],te=[],O=[];for(let D=0;D<i;D++)X[D]=0,te[D]=0,O[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:te,attributeDivisors:O,object:z,attributes:{},index:null}}function g(z,X,te,O){const D=u.attributes,V=X.attributes;let G=0;const q=te.getAttributes();for(const re in q)if(q[re].location>=0){const Y=D[re];let ae=V[re];if(ae===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(ae=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(ae=z.instanceColor)),Y===void 0||Y.attribute!==ae||ae&&Y.data!==ae.data)return!0;G++}return u.attributesNum!==G||u.index!==O}function _(z,X,te,O){const D={},V=X.attributes;let G=0;const q=te.getAttributes();for(const re in q)if(q[re].location>=0){let Y=V[re];Y===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(Y=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(Y=z.instanceColor));const ae={};ae.attribute=Y,Y&&Y.data&&(ae.data=Y.data),D[re]=ae,G++}u.attributes=D,u.attributesNum=G,u.index=O}function A(){const z=u.newAttributes;for(let X=0,te=z.length;X<te;X++)z[X]=0}function w(z){C(z,0)}function C(z,X){const te=u.newAttributes,O=u.enabledAttributes,D=u.attributeDivisors;te[z]=1,O[z]===0&&(n.enableVertexAttribArray(z),O[z]=1),D[z]!==X&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,X),D[z]=X)}function R(){const z=u.newAttributes,X=u.enabledAttributes;for(let te=0,O=X.length;te<O;te++)X[te]!==z[te]&&(n.disableVertexAttribArray(te),X[te]=0)}function L(z,X,te,O,D,V){r.isWebGL2===!0&&(te===n.INT||te===n.UNSIGNED_INT)?n.vertexAttribIPointer(z,X,te,D,V):n.vertexAttribPointer(z,X,te,O,D,V)}function I(z,X,te,O){if(r.isWebGL2===!1&&(z.isInstancedMesh||O.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const D=O.attributes,V=te.getAttributes(),G=X.defaultAttributeValues;for(const q in V){const re=V[q];if(re.location>=0){let Y=D[q];if(Y===void 0&&(q==="instanceMatrix"&&z.instanceMatrix&&(Y=z.instanceMatrix),q==="instanceColor"&&z.instanceColor&&(Y=z.instanceColor)),Y!==void 0){const ae=Y.normalized,Se=Y.itemSize,ve=t.get(Y);if(ve===void 0)continue;const W=ve.buffer,Xe=ve.type,Ne=ve.bytesPerElement;if(Y.isInterleavedBufferAttribute){const ye=Y.data,me=ye.stride,pe=Y.offset;if(ye.isInstancedInterleavedBuffer){for(let le=0;le<re.locationSize;le++)C(re.location+le,ye.meshPerAttribute);z.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let le=0;le<re.locationSize;le++)w(re.location+le);n.bindBuffer(n.ARRAY_BUFFER,W);for(let le=0;le<re.locationSize;le++)L(re.location+le,Se/re.locationSize,Xe,ae,me*Ne,(pe+Se/re.locationSize*le)*Ne)}else{if(Y.isInstancedBufferAttribute){for(let ye=0;ye<re.locationSize;ye++)C(re.location+ye,Y.meshPerAttribute);z.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let ye=0;ye<re.locationSize;ye++)w(re.location+ye);n.bindBuffer(n.ARRAY_BUFFER,W);for(let ye=0;ye<re.locationSize;ye++)L(re.location+ye,Se/re.locationSize,Xe,ae,Se*Ne,Se/re.locationSize*ye*Ne)}}else if(G!==void 0){const ae=G[q];if(ae!==void 0)switch(ae.length){case 2:n.vertexAttrib2fv(re.location,ae);break;case 3:n.vertexAttrib3fv(re.location,ae);break;case 4:n.vertexAttrib4fv(re.location,ae);break;default:n.vertexAttrib1fv(re.location,ae)}}}}R()}function T(){K();for(const z in a){const X=a[z];for(const te in X){const O=X[te];for(const D in O)v(O[D].object),delete O[D];delete X[te]}delete a[z]}}function B(z){if(a[z.id]===void 0)return;const X=a[z.id];for(const te in X){const O=X[te];for(const D in O)v(O[D].object),delete O[D];delete X[te]}delete a[z.id]}function H(z){for(const X in a){const te=a[X];if(te[z.id]===void 0)continue;const O=te[z.id];for(const D in O)v(O[D].object),delete O[D];delete te[z.id]}}function K(){j(),h=!0,u!==l&&(u=l,m(u.object))}function j(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:K,resetDefaultState:j,dispose:T,releaseStatesOfGeometry:B,releaseStatesOfProgram:H,initAttributes:A,enableAttribute:w,disableUnusedAttributes:R}}function fce(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,h){n.drawArrays(s,u,h),t.update(h,s,1)}function l(u,h,d){if(d===0)return;let p,m;if(i)p=n,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,u,h,d),t.update(h,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function pce(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),M=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),A=p>0,w=o||e.has("OES_texture_float"),C=A&&w,R=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:S,maxVertexUniforms:M,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:A,floatFragmentTextures:w,floatVertexTextures:C,maxSamples:R}}function mce(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new dd,a=new hn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const v=d.clippingPlanes,S=d.clipIntersection,M=d.clipShadows,g=n.get(d);if(!i||v===null||v.length===0||s&&!M)s?h(null):u();else{const _=s?0:r,A=_*4;let w=g.clippingState||null;l.value=w,w=h(v,p,A,m);for(let C=0;C!==A;++C)w[C]=t[C];g.clippingState=w,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(d,p,m,v){const S=d!==null?d.length:0;let M=null;if(S!==0){if(M=l.value,v!==!0||M===null){const g=m+S*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(M===null||M.length<g)&&(M=new Float32Array(g));for(let A=0,w=m;A!==S;++A,w+=4)o.copy(d[A]).applyMatrix4(_,a),o.normal.toArray(M,w),M[w+3]=o.constant}l.value=M,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,M}}function gce(n){let e=new WeakMap;function t(o,a){return a===HA?o.mapping=of:a===zA&&(o.mapping=af),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===HA||a===zA)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new kJ(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let hx=class extends WS{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const Pv=4,rz=[.125,.215,.35,.446,.526,.582],$p=20,EB=new hx,iz=new vt;let wB=null;const Gp=(1+Math.sqrt(5))/2,I0=1/Gp,sz=[new se(1,1,1),new se(-1,1,1),new se(1,1,-1),new se(-1,1,-1),new se(0,Gp,I0),new se(0,Gp,-I0),new se(I0,0,Gp),new se(-I0,0,Gp),new se(Gp,I0,0),new se(-Gp,I0,0)];class uD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){wB=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=lz(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=az(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(wB),e.scissorTest=!1,DE(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===of||e.mapping===af?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wB=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:vr,minFilter:vr,generateMipmaps:!1,type:Fy,format:io,colorSpace:Ul,depthBuffer:!1},i=oz(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=oz(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=vce(s)),this._blurMaterial=yce(s,e,t)}return i}_compileMaterial(e){const t=new Ui(this._lodPlanes[0],e);this._renderer.compile(t,EB)}_sceneToCubeUV(e,t,r,i){const s=new mi(90,1,t,r),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,h=l.toneMapping;l.getClearColor(iz),l.toneMapping=Pl,l.autoClear=!1;const d=new Ho({name:"PMREM.Background",side:ks,depthWrite:!1,depthTest:!1}),p=new Ui(new bf,d);let m=!1;const v=e.background;v?v.isColor&&(d.color.copy(v),e.background=null,m=!0):(d.color.copy(iz),m=!0);for(let S=0;S<6;S++){const M=S%3;M===0?(s.up.set(0,o[S],0),s.lookAt(a[S],0,0)):M===1?(s.up.set(0,0,o[S]),s.lookAt(0,a[S],0)):(s.up.set(0,o[S],0),s.lookAt(0,0,a[S]));const g=this._cubeSize;DE(i,M*g,S>2?g:0,g,g),l.setRenderTarget(i),m&&l.render(p,s),l.render(e,s)}p.geometry.dispose(),p.material.dispose(),l.toneMapping=h,l.autoClear=u,e.background=v}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===of||e.mapping===af;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=lz()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=az());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Ui(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;DE(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,EB)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=sz[(i-1)%sz.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new Ui(this._lodPlanes[i],u),p=u.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*$p-1),S=s/v,M=isFinite(s)?1+Math.floor(h*S):$p;M>$p&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${$p}`);const g=[];let _=0;for(let L=0;L<$p;++L){const I=L/S,T=Math.exp(-I*I/2);g.push(T),L===0?_+=T:L<M&&(_+=2*T)}for(let L=0;L<g.length;L++)g[L]=g[L]/_;p.envMap.value=e.texture,p.samples.value=M,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:A}=this;p.dTheta.value=v,p.mipInt.value=A-r;const w=this._sizeLods[i],C=3*w*(i>A-Pv?i-A+Pv:0),R=4*(this._cubeSize-w);DE(t,C,R,3*w,2*w),l.setRenderTarget(t),l.render(d,EB)}}function vce(n){const e=[],t=[],r=[];let i=n;const s=n-Pv+1+rz.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Pv?l=rz[o-n+Pv-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),h=-u,d=1+u,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,v=6,S=3,M=2,g=1,_=new Float32Array(S*v*m),A=new Float32Array(M*v*m),w=new Float32Array(g*v*m);for(let R=0;R<m;R++){const L=R%3*2/3-1,I=R>2?0:-1,T=[L,I,0,L+2/3,I,0,L+2/3,I+1,0,L,I,0,L+2/3,I+1,0,L,I+1,0];_.set(T,S*v*R),A.set(p,M*v*R);const B=[R,R,R,R,R,R];w.set(B,g*v*R)}const C=new $t;C.setAttribute("position",new Cn(_,S)),C.setAttribute("uv",new Cn(A,M)),C.setAttribute("faceIndex",new Cn(w,g)),e.push(C),i>Pv&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function oz(n,e,t){const r=new Ol(n,e,t);return r.texture.mapping=ux,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function DE(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function yce(n,e,t){const r=new Float32Array($p),i=new se(0,1,0);return new zc({name:"SphericalGaussianBlur",defines:{n:$p,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:$N(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$u,depthTest:!1,depthWrite:!1})}function az(){return new zc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$N(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$u,depthTest:!1,depthWrite:!1})}function lz(){return new zc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$N(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$u,depthTest:!1,depthWrite:!1})}function $N(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function xce(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===HA||l===zA,h=l===of||l===af;if(u||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new uD(n)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(u&&d&&d.height>0||h&&d&&i(d)){t===null&&(t=new uD(n));const p=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function _ce(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Ace(n,e,t,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const v in m){const S=m[v];for(let M=0,g=S.length;M<g;M++)e.update(S[M],n.ARRAY_BUFFER)}}function u(d){const p=[],m=d.index,v=d.attributes.position;let S=0;if(m!==null){const _=m.array;S=m.version;for(let A=0,w=_.length;A<w;A+=3){const C=_[A+0],R=_[A+1],L=_[A+2];p.push(C,R,R,L,L,C)}}else{const _=v.array;S=v.version;for(let A=0,w=_.length/3-1;A<w;A+=3){const C=A+0,R=A+1,L=A+2;p.push(C,R,R,L,L,C)}}const M=new(LJ(p)?ZN:QN)(p,1);M.version=S;const g=s.get(d);g&&e.remove(g),s.set(d,M)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function Sce(n,e,t,r){const i=r.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function h(p,m){n.drawElements(s,m,a,p*l),t.update(m,s,1)}function d(p,m,v){if(v===0)return;let S,M;if(i)S=n,M="drawElementsInstanced";else if(S=e.get("ANGLE_instanced_arrays"),M="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[M](s,m,a,p*l,v),t.update(m,s,v)}this.setMode=o,this.setIndex=u,this.render=h,this.renderInstances=d}function Mce(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Ece(n,e){return n[0]-e[0]}function wce(n,e){return Math.abs(e[1])-Math.abs(n[1])}function bce(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Nn,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,h,d){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const m=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,v=m!==void 0?m.length:0;let S=s.get(h);if(S===void 0||S.count!==v){let _=function(){j.dispose(),s.delete(h),h.removeEventListener("dispose",_)};S!==void 0&&S.texture.dispose();const A=h.morphAttributes.position!==void 0,w=h.morphAttributes.normal!==void 0,C=h.morphAttributes.color!==void 0,R=h.morphAttributes.position||[],L=h.morphAttributes.normal||[],I=h.morphAttributes.color||[];let T=0;A===!0&&(T=1),w===!0&&(T=2),C===!0&&(T=3);let B=h.attributes.position.count*T,H=1;B>e.maxTextureSize&&(H=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const K=new Float32Array(B*H*4*v),j=new uR(K,B,H,v);j.type=Wu,j.needsUpdate=!0;const z=T*4;for(let X=0;X<v;X++){const te=R[X],O=L[X],D=I[X],V=B*H*4*X;for(let G=0;G<te.count;G++){const q=G*z;A===!0&&(o.fromBufferAttribute(te,G),K[V+q+0]=o.x,K[V+q+1]=o.y,K[V+q+2]=o.z,K[V+q+3]=0),w===!0&&(o.fromBufferAttribute(O,G),K[V+q+4]=o.x,K[V+q+5]=o.y,K[V+q+6]=o.z,K[V+q+7]=0),C===!0&&(o.fromBufferAttribute(D,G),K[V+q+8]=o.x,K[V+q+9]=o.y,K[V+q+10]=o.z,K[V+q+11]=D.itemSize===4?o.w:1)}}S={count:v,texture:j,size:new We(B,H)},s.set(h,S),h.addEventListener("dispose",_)}let M=0;for(let _=0;_<p.length;_++)M+=p[_];const g=h.morphTargetsRelative?1:1-M;d.getUniforms().setValue(n,"morphTargetBaseInfluence",g),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",S.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",S.size)}else{const m=p===void 0?0:p.length;let v=r[h.id];if(v===void 0||v.length!==m){v=[];for(let A=0;A<m;A++)v[A]=[A,0];r[h.id]=v}for(let A=0;A<m;A++){const w=v[A];w[0]=A,w[1]=p[A]}v.sort(wce);for(let A=0;A<8;A++)A<m&&v[A][1]?(a[A][0]=v[A][0],a[A][1]=v[A][1]):(a[A][0]=Number.MAX_SAFE_INTEGER,a[A][1]=0);a.sort(Ece);const S=h.morphAttributes.position,M=h.morphAttributes.normal;let g=0;for(let A=0;A<8;A++){const w=a[A],C=w[0],R=w[1];C!==Number.MAX_SAFE_INTEGER&&R?(S&&h.getAttribute("morphTarget"+A)!==S[C]&&h.setAttribute("morphTarget"+A,S[C]),M&&h.getAttribute("morphNormal"+A)!==M[C]&&h.setAttribute("morphNormal"+A,M[C]),i[A]=R,g+=R):(S&&h.hasAttribute("morphTarget"+A)===!0&&h.deleteAttribute("morphTarget"+A),M&&h.hasAttribute("morphNormal"+A)===!0&&h.deleteAttribute("morphNormal"+A),i[A]=0)}const _=h.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",_),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function Cce(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,h=l.geometry,d=e.get(l,h);return i.get(d)!==u&&(e.update(d),i.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER)),d}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const zJ=new Er,VJ=new uR,WJ=new YN,jJ=new jS,cz=[],uz=[],hz=new Float32Array(16),dz=new Float32Array(9),fz=new Float32Array(4);function dx(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=cz[i];if(s===void 0&&(s=new Float32Array(i),cz[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ai(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Si(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function fR(n,e){let t=uz[e];t===void 0&&(t=new Int32Array(e),uz[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Tce(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Rce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ai(t,e))return;n.uniform2fv(this.addr,e),Si(t,e)}}function Pce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ai(t,e))return;n.uniform3fv(this.addr,e),Si(t,e)}}function Bce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ai(t,e))return;n.uniform4fv(this.addr,e),Si(t,e)}}function Lce(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ai(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Si(t,e)}else{if(Ai(t,r))return;fz.set(r),n.uniformMatrix2fv(this.addr,!1,fz),Si(t,r)}}function Ice(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ai(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Si(t,e)}else{if(Ai(t,r))return;dz.set(r),n.uniformMatrix3fv(this.addr,!1,dz),Si(t,r)}}function Dce(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ai(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Si(t,e)}else{if(Ai(t,r))return;hz.set(r),n.uniformMatrix4fv(this.addr,!1,hz),Si(t,r)}}function Fce(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Nce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ai(t,e))return;n.uniform2iv(this.addr,e),Si(t,e)}}function Uce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ai(t,e))return;n.uniform3iv(this.addr,e),Si(t,e)}}function Oce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ai(t,e))return;n.uniform4iv(this.addr,e),Si(t,e)}}function kce(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Gce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ai(t,e))return;n.uniform2uiv(this.addr,e),Si(t,e)}}function Hce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ai(t,e))return;n.uniform3uiv(this.addr,e),Si(t,e)}}function zce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ai(t,e))return;n.uniform4uiv(this.addr,e),Si(t,e)}}function Vce(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||zJ,i)}function Wce(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||WJ,i)}function jce(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||jJ,i)}function Xce(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||VJ,i)}function Jce(n){switch(n){case 5126:return Tce;case 35664:return Rce;case 35665:return Pce;case 35666:return Bce;case 35674:return Lce;case 35675:return Ice;case 35676:return Dce;case 5124:case 35670:return Fce;case 35667:case 35671:return Nce;case 35668:case 35672:return Uce;case 35669:case 35673:return Oce;case 5125:return kce;case 36294:return Gce;case 36295:return Hce;case 36296:return zce;case 35678:case 36198:case 36298:case 36306:case 35682:return Vce;case 35679:case 36299:case 36307:return Wce;case 35680:case 36300:case 36308:case 36293:return jce;case 36289:case 36303:case 36311:case 36292:return Xce}}function Kce(n,e){n.uniform1fv(this.addr,e)}function Yce(n,e){const t=dx(e,this.size,2);n.uniform2fv(this.addr,t)}function qce(n,e){const t=dx(e,this.size,3);n.uniform3fv(this.addr,t)}function Qce(n,e){const t=dx(e,this.size,4);n.uniform4fv(this.addr,t)}function Zce(n,e){const t=dx(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function $ce(n,e){const t=dx(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function eue(n,e){const t=dx(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function tue(n,e){n.uniform1iv(this.addr,e)}function nue(n,e){n.uniform2iv(this.addr,e)}function rue(n,e){n.uniform3iv(this.addr,e)}function iue(n,e){n.uniform4iv(this.addr,e)}function sue(n,e){n.uniform1uiv(this.addr,e)}function oue(n,e){n.uniform2uiv(this.addr,e)}function aue(n,e){n.uniform3uiv(this.addr,e)}function lue(n,e){n.uniform4uiv(this.addr,e)}function cue(n,e,t){const r=this.cache,i=e.length,s=fR(t,i);Ai(r,s)||(n.uniform1iv(this.addr,s),Si(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||zJ,s[o])}function uue(n,e,t){const r=this.cache,i=e.length,s=fR(t,i);Ai(r,s)||(n.uniform1iv(this.addr,s),Si(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||WJ,s[o])}function hue(n,e,t){const r=this.cache,i=e.length,s=fR(t,i);Ai(r,s)||(n.uniform1iv(this.addr,s),Si(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||jJ,s[o])}function due(n,e,t){const r=this.cache,i=e.length,s=fR(t,i);Ai(r,s)||(n.uniform1iv(this.addr,s),Si(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||VJ,s[o])}function fue(n){switch(n){case 5126:return Kce;case 35664:return Yce;case 35665:return qce;case 35666:return Qce;case 35674:return Zce;case 35675:return $ce;case 35676:return eue;case 5124:case 35670:return tue;case 35667:case 35671:return nue;case 35668:case 35672:return rue;case 35669:case 35673:return iue;case 5125:return sue;case 36294:return oue;case 36295:return aue;case 36296:return lue;case 35678:case 36198:case 36298:case 36306:case 35682:return cue;case 35679:case 36299:case 36307:return uue;case 35680:case 36300:case 36308:case 36293:return hue;case 36289:case 36303:case 36311:case 36292:return due}}class pue{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Jce(t.type)}}class mue{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=fue(t.type)}}class gue{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const bB=/(\w+)(\])?(\[|\.)?/g;function pz(n,e){n.seq.push(e),n.map[e.id]=e}function vue(n,e,t){const r=n.name,i=r.length;for(bB.lastIndex=0;;){const s=bB.exec(r),o=bB.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){pz(t,u===void 0?new pue(a,n,e):new mue(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new gue(a),pz(t,h)),t=h}}}class jb{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);vue(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function mz(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let yue=0;function xue(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function _ue(n){switch(n){case Ul:return["Linear","( value )"];case Qt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function gz(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+xue(n.getShaderSource(e),o)}else return i}function Aue(n,e){const t=_ue(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Sue(n,e){let t;switch(e){case kN:t="Linear";break;case rJ:t="Reinhard";break;case iJ:t="OptimizedCineon";break;case GN:t="ACESFilmic";break;case sJ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Mue(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(R1).join(`
`)}function Eue(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function wue(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function R1(n){return n!==""}function vz(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function yz(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const bue=/^[ \t]*#include +<([\w\d./]+)>/gm;function hD(n){return n.replace(bue,Cue)}function Cue(n,e){const t=tn[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return hD(t)}const Tue=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xz(n){return n.replace(Tue,Rue)}function Rue(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function _z(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Pue(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===oR?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===J1?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ml&&(e="SHADOWMAP_TYPE_VSM"),e}function Bue(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case of:case af:e="ENVMAP_TYPE_CUBE";break;case ux:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Lue(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case af:e="ENVMAP_MODE_REFRACTION";break}return e}function Iue(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case zS:e="ENVMAP_BLENDING_MULTIPLY";break;case tJ:e="ENVMAP_BLENDING_MIX";break;case nJ:e="ENVMAP_BLENDING_ADD";break}return e}function Due(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Fue(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Pue(t),u=Bue(t),h=Lue(t),d=Iue(t),p=Due(t),m=t.isWebGL2?"":Mue(t),v=Eue(s),S=i.createProgram();let M,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=[v].filter(R1).join(`
`),M.length>0&&(M+=`
`),g=[m,v].filter(R1).join(`
`),g.length>0&&(g+=`
`)):(M=[_z(t),"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(R1).join(`
`),g=[m,_z(t),"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Pl?"#define TONE_MAPPING":"",t.toneMapping!==Pl?tn.tonemapping_pars_fragment:"",t.toneMapping!==Pl?Sue("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",tn.encodings_pars_fragment,Aue("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(R1).join(`
`)),o=hD(o),o=vz(o,t),o=yz(o,t),a=hD(a),a=vz(a,t),a=yz(a,t),o=xz(o),a=xz(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,M=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,g=["#define varying in",t.glslVersion===lD?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===lD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const A=_+M+o,w=_+g+a,C=mz(i,i.VERTEX_SHADER,A),R=mz(i,i.FRAGMENT_SHADER,w);if(i.attachShader(S,C),i.attachShader(S,R),t.index0AttributeName!==void 0?i.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(S,0,"position"),i.linkProgram(S),n.debug.checkShaderErrors){const T=i.getProgramInfoLog(S).trim(),B=i.getShaderInfoLog(C).trim(),H=i.getShaderInfoLog(R).trim();let K=!0,j=!0;if(i.getProgramParameter(S,i.LINK_STATUS)===!1)if(K=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,S,C,R);else{const z=gz(i,C,"vertex"),X=gz(i,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(S,i.VALIDATE_STATUS)+`

Program Info Log: `+T+`
`+z+`
`+X)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(B===""||H==="")&&(j=!1);j&&(this.diagnostics={runnable:K,programLog:T,vertexShader:{log:B,prefix:M},fragmentShader:{log:H,prefix:g}})}i.deleteShader(C),i.deleteShader(R);let L;this.getUniforms=function(){return L===void 0&&(L=new jb(i,S)),L};let I;return this.getAttributes=function(){return I===void 0&&(I=wue(i,S)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(S),this.program=void 0},this.name=t.shaderName,this.id=yue++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=C,this.fragmentShader=R,this}let Nue=0;class Uue{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Oue(e),t.set(e,r)),r}}class Oue{constructor(e){this.id=Nue++,this.code=e,this.usedTimes=0}}function kue(n,e,t,r,i,s,o){const a=new Tm,l=new Uue,u=[],h=i.isWebGL2,d=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(T){return T===1?"uv1":T===2?"uv2":T===3?"uv3":"uv"}function M(T,B,H,K,j){const z=K.fog,X=j.geometry,te=T.isMeshStandardMaterial?K.environment:null,O=(T.isMeshStandardMaterial?t:e).get(T.envMap||te),D=O&&O.mapping===ux?O.image.height:null,V=v[T.type];T.precision!==null&&(m=i.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));const G=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,q=G!==void 0?G.length:0;let re=0;X.morphAttributes.position!==void 0&&(re=1),X.morphAttributes.normal!==void 0&&(re=2),X.morphAttributes.color!==void 0&&(re=3);let Y,ae,Se,ve;if(V){const ke=Ml[V];Y=ke.vertexShader,ae=ke.fragmentShader}else Y=T.vertexShader,ae=T.fragmentShader,l.update(T),Se=l.getVertexShaderID(T),ve=l.getFragmentShaderID(T);const W=n.getRenderTarget(),Xe=j.isInstancedMesh===!0,Ne=!!T.map,ye=!!T.matcap,me=!!O,pe=!!T.aoMap,le=!!T.lightMap,Ae=!!T.bumpMap,Re=!!T.normalMap,De=!!T.displacementMap,Je=!!T.emissiveMap,Qe=!!T.metalnessMap,Ve=!!T.roughnessMap,nt=T.clearcoat>0,It=T.iridescence>0,U=T.sheen>0,F=T.transmission>0,oe=nt&&!!T.clearcoatMap,_e=nt&&!!T.clearcoatNormalMap,Me=nt&&!!T.clearcoatRoughnessMap,Te=It&&!!T.iridescenceMap,Ke=It&&!!T.iridescenceThicknessMap,Be=U&&!!T.sheenColorMap,he=U&&!!T.sheenRoughnessMap,Ue=!!T.specularMap,Ge=!!T.specularColorMap,je=!!T.specularIntensityMap,Le=F&&!!T.transmissionMap,Oe=F&&!!T.thicknessMap,xt=!!T.gradientMap,wt=!!T.alphaMap,zt=T.alphaTest>0,J=!!T.extensions,ce=!!X.attributes.uv1,xe=!!X.attributes.uv2,Pe=!!X.attributes.uv3;return{isWebGL2:h,shaderID:V,shaderName:T.type,vertexShader:Y,fragmentShader:ae,defines:T.defines,customVertexShaderID:Se,customFragmentShaderID:ve,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:m,instancing:Xe,instancingColor:Xe&&j.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:W===null?n.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:Ul,map:Ne,matcap:ye,envMap:me,envMapMode:me&&O.mapping,envMapCubeUVHeight:D,aoMap:pe,lightMap:le,bumpMap:Ae,normalMap:Re,displacementMap:p&&De,emissiveMap:Je,normalMapObjectSpace:Re&&T.normalMapType===bJ,normalMapTangentSpace:Re&&T.normalMapType===wf,metalnessMap:Qe,roughnessMap:Ve,clearcoat:nt,clearcoatMap:oe,clearcoatNormalMap:_e,clearcoatRoughnessMap:Me,iridescence:It,iridescenceMap:Te,iridescenceThicknessMap:Ke,sheen:U,sheenColorMap:Be,sheenRoughnessMap:he,specularMap:Ue,specularColorMap:Ge,specularIntensityMap:je,transmission:F,transmissionMap:Le,thicknessMap:Oe,gradientMap:xt,opaque:T.transparent===!1&&T.blending===wm,alphaMap:wt,alphaTest:zt,combine:T.combine,mapUv:Ne&&S(T.map.channel),aoMapUv:pe&&S(T.aoMap.channel),lightMapUv:le&&S(T.lightMap.channel),bumpMapUv:Ae&&S(T.bumpMap.channel),normalMapUv:Re&&S(T.normalMap.channel),displacementMapUv:De&&S(T.displacementMap.channel),emissiveMapUv:Je&&S(T.emissiveMap.channel),metalnessMapUv:Qe&&S(T.metalnessMap.channel),roughnessMapUv:Ve&&S(T.roughnessMap.channel),clearcoatMapUv:oe&&S(T.clearcoatMap.channel),clearcoatNormalMapUv:_e&&S(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Me&&S(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Te&&S(T.iridescenceMap.channel),iridescenceThicknessMapUv:Ke&&S(T.iridescenceThicknessMap.channel),sheenColorMapUv:Be&&S(T.sheenColorMap.channel),sheenRoughnessMapUv:he&&S(T.sheenRoughnessMap.channel),specularMapUv:Ue&&S(T.specularMap.channel),specularColorMapUv:Ge&&S(T.specularColorMap.channel),specularIntensityMapUv:je&&S(T.specularIntensityMap.channel),transmissionMapUv:Le&&S(T.transmissionMap.channel),thicknessMapUv:Oe&&S(T.thicknessMap.channel),alphaMapUv:wt&&S(T.alphaMap.channel),vertexTangents:Re&&!!X.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,vertexUv1s:ce,vertexUv2s:xe,vertexUv3s:Pe,pointsUvs:j.isPoints===!0&&!!X.attributes.uv&&(Ne||wt),fog:!!z,useFog:T.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:j.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:re,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&H.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:Pl,useLegacyLights:n.useLegacyLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===bl,flipSided:T.side===ks,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:J&&T.extensions.derivatives===!0,extensionFragDepth:J&&T.extensions.fragDepth===!0,extensionDrawBuffers:J&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:J&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function g(T){const B=[];if(T.shaderID?B.push(T.shaderID):(B.push(T.customVertexShaderID),B.push(T.customFragmentShaderID)),T.defines!==void 0)for(const H in T.defines)B.push(H),B.push(T.defines[H]);return T.isRawShaderMaterial===!1&&(_(B,T),A(B,T),B.push(n.outputColorSpace)),B.push(T.customProgramCacheKey),B.join()}function _(T,B){T.push(B.precision),T.push(B.outputColorSpace),T.push(B.envMapMode),T.push(B.envMapCubeUVHeight),T.push(B.mapUv),T.push(B.alphaMapUv),T.push(B.lightMapUv),T.push(B.aoMapUv),T.push(B.bumpMapUv),T.push(B.normalMapUv),T.push(B.displacementMapUv),T.push(B.emissiveMapUv),T.push(B.metalnessMapUv),T.push(B.roughnessMapUv),T.push(B.clearcoatMapUv),T.push(B.clearcoatNormalMapUv),T.push(B.clearcoatRoughnessMapUv),T.push(B.iridescenceMapUv),T.push(B.iridescenceThicknessMapUv),T.push(B.sheenColorMapUv),T.push(B.sheenRoughnessMapUv),T.push(B.specularMapUv),T.push(B.specularColorMapUv),T.push(B.specularIntensityMapUv),T.push(B.transmissionMapUv),T.push(B.thicknessMapUv),T.push(B.combine),T.push(B.fogExp2),T.push(B.sizeAttenuation),T.push(B.morphTargetsCount),T.push(B.morphAttributeCount),T.push(B.numDirLights),T.push(B.numPointLights),T.push(B.numSpotLights),T.push(B.numSpotLightMaps),T.push(B.numHemiLights),T.push(B.numRectAreaLights),T.push(B.numDirLightShadows),T.push(B.numPointLightShadows),T.push(B.numSpotLightShadows),T.push(B.numSpotLightShadowsWithMaps),T.push(B.shadowMapType),T.push(B.toneMapping),T.push(B.numClippingPlanes),T.push(B.numClipIntersection),T.push(B.depthPacking)}function A(T,B){a.disableAll(),B.isWebGL2&&a.enable(0),B.supportsVertexTextures&&a.enable(1),B.instancing&&a.enable(2),B.instancingColor&&a.enable(3),B.matcap&&a.enable(4),B.envMap&&a.enable(5),B.normalMapObjectSpace&&a.enable(6),B.normalMapTangentSpace&&a.enable(7),B.clearcoat&&a.enable(8),B.iridescence&&a.enable(9),B.alphaTest&&a.enable(10),B.vertexColors&&a.enable(11),B.vertexAlphas&&a.enable(12),B.vertexUv1s&&a.enable(13),B.vertexUv2s&&a.enable(14),B.vertexUv3s&&a.enable(15),B.vertexTangents&&a.enable(16),T.push(a.mask),a.disableAll(),B.fog&&a.enable(0),B.useFog&&a.enable(1),B.flatShading&&a.enable(2),B.logarithmicDepthBuffer&&a.enable(3),B.skinning&&a.enable(4),B.morphTargets&&a.enable(5),B.morphNormals&&a.enable(6),B.morphColors&&a.enable(7),B.premultipliedAlpha&&a.enable(8),B.shadowMapEnabled&&a.enable(9),B.useLegacyLights&&a.enable(10),B.doubleSided&&a.enable(11),B.flipSided&&a.enable(12),B.useDepthPacking&&a.enable(13),B.dithering&&a.enable(14),B.transmission&&a.enable(15),B.sheen&&a.enable(16),B.opaque&&a.enable(17),B.pointsUvs&&a.enable(18),T.push(a.mask)}function w(T){const B=v[T.type];let H;if(B){const K=Ml[B];H=UJ.clone(K.uniforms)}else H=T.uniforms;return H}function C(T,B){let H;for(let K=0,j=u.length;K<j;K++){const z=u[K];if(z.cacheKey===B){H=z,++H.usedTimes;break}}return H===void 0&&(H=new Fue(n,B,T,s),u.push(H)),H}function R(T){if(--T.usedTimes===0){const B=u.indexOf(T);u[B]=u[u.length-1],u.pop(),T.destroy()}}function L(T){l.remove(T)}function I(){l.dispose()}return{getParameters:M,getProgramCacheKey:g,getUniforms:w,acquireProgram:C,releaseProgram:R,releaseShaderCache:L,programs:u,dispose:I}}function Gue(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Hue(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Az(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Sz(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,p,m,v,S,M){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:v,renderOrder:d.renderOrder,z:S,group:M},n[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=d.renderOrder,g.z=S,g.group=M),e++,g}function a(d,p,m,v,S,M){const g=o(d,p,m,v,S,M);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(d,p,m,v,S,M){const g=o(d,p,m,v,S,M);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function u(d,p){t.length>1&&t.sort(d||Hue),r.length>1&&r.sort(p||Az),i.length>1&&i.sort(p||Az)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:h,sort:u}}function zue(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new Sz,n.set(r,[o])):i>=s.length?(o=new Sz,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Vue(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new se,color:new vt};break;case"SpotLight":t={position:new se,direction:new se,color:new vt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new se,color:new vt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new se,skyColor:new vt,groundColor:new vt};break;case"RectAreaLight":t={color:new vt,position:new se,halfWidth:new se,halfHeight:new se};break}return n[e.id]=t,t}}}function Wue(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let jue=0;function Xue(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Jue(n,e){const t=new Vue,r=Wue(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)i.probe.push(new se);const s=new se,o=new Wt,a=new Wt;function l(h,d){let p=0,m=0,v=0;for(let H=0;H<9;H++)i.probe[H].set(0,0,0);let S=0,M=0,g=0,_=0,A=0,w=0,C=0,R=0,L=0,I=0;h.sort(Xue);const T=d===!0?Math.PI:1;for(let H=0,K=h.length;H<K;H++){const j=h[H],z=j.color,X=j.intensity,te=j.distance,O=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)p+=z.r*X*T,m+=z.g*X*T,v+=z.b*X*T;else if(j.isLightProbe)for(let D=0;D<9;D++)i.probe[D].addScaledVector(j.sh.coefficients[D],X);else if(j.isDirectionalLight){const D=t.get(j);if(D.color.copy(j.color).multiplyScalar(j.intensity*T),j.castShadow){const V=j.shadow,G=r.get(j);G.shadowBias=V.bias,G.shadowNormalBias=V.normalBias,G.shadowRadius=V.radius,G.shadowMapSize=V.mapSize,i.directionalShadow[S]=G,i.directionalShadowMap[S]=O,i.directionalShadowMatrix[S]=j.shadow.matrix,w++}i.directional[S]=D,S++}else if(j.isSpotLight){const D=t.get(j);D.position.setFromMatrixPosition(j.matrixWorld),D.color.copy(z).multiplyScalar(X*T),D.distance=te,D.coneCos=Math.cos(j.angle),D.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),D.decay=j.decay,i.spot[g]=D;const V=j.shadow;if(j.map&&(i.spotLightMap[L]=j.map,L++,V.updateMatrices(j),j.castShadow&&I++),i.spotLightMatrix[g]=V.matrix,j.castShadow){const G=r.get(j);G.shadowBias=V.bias,G.shadowNormalBias=V.normalBias,G.shadowRadius=V.radius,G.shadowMapSize=V.mapSize,i.spotShadow[g]=G,i.spotShadowMap[g]=O,R++}g++}else if(j.isRectAreaLight){const D=t.get(j);D.color.copy(z).multiplyScalar(X),D.halfWidth.set(j.width*.5,0,0),D.halfHeight.set(0,j.height*.5,0),i.rectArea[_]=D,_++}else if(j.isPointLight){const D=t.get(j);if(D.color.copy(j.color).multiplyScalar(j.intensity*T),D.distance=j.distance,D.decay=j.decay,j.castShadow){const V=j.shadow,G=r.get(j);G.shadowBias=V.bias,G.shadowNormalBias=V.normalBias,G.shadowRadius=V.radius,G.shadowMapSize=V.mapSize,G.shadowCameraNear=V.camera.near,G.shadowCameraFar=V.camera.far,i.pointShadow[M]=G,i.pointShadowMap[M]=O,i.pointShadowMatrix[M]=j.shadow.matrix,C++}i.point[M]=D,M++}else if(j.isHemisphereLight){const D=t.get(j);D.skyColor.copy(j.color).multiplyScalar(X*T),D.groundColor.copy(j.groundColor).multiplyScalar(X*T),i.hemi[A]=D,A++}}_>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_FLOAT_1,i.rectAreaLTC2=pt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_HALF_1,i.rectAreaLTC2=pt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const B=i.hash;(B.directionalLength!==S||B.pointLength!==M||B.spotLength!==g||B.rectAreaLength!==_||B.hemiLength!==A||B.numDirectionalShadows!==w||B.numPointShadows!==C||B.numSpotShadows!==R||B.numSpotMaps!==L)&&(i.directional.length=S,i.spot.length=g,i.rectArea.length=_,i.point.length=M,i.hemi.length=A,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=R,i.spotShadowMap.length=R,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=R+L-I,i.spotLightMap.length=L,i.numSpotLightShadowsWithMaps=I,B.directionalLength=S,B.pointLength=M,B.spotLength=g,B.rectAreaLength=_,B.hemiLength=A,B.numDirectionalShadows=w,B.numPointShadows=C,B.numSpotShadows=R,B.numSpotMaps=L,i.version=jue++)}function u(h,d){let p=0,m=0,v=0,S=0,M=0;const g=d.matrixWorldInverse;for(let _=0,A=h.length;_<A;_++){const w=h[_];if(w.isDirectionalLight){const C=i.directional[p];C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),p++}else if(w.isSpotLight){const C=i.spot[v];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),v++}else if(w.isRectAreaLight){const C=i.rectArea[S];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(w.width*.5,0,0),C.halfHeight.set(0,w.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),S++}else if(w.isPointLight){const C=i.point[m];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),m++}else if(w.isHemisphereLight){const C=i.hemi[M];C.direction.setFromMatrixPosition(w.matrixWorld),C.direction.transformDirection(g),M++}}}return{setup:l,setupView:u,state:i}}function Mz(n,e){const t=new Jue(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(h){r.push(h)}function a(h){i.push(h)}function l(h){t.setup(r,h)}function u(h){t.setupView(r,h)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function Kue(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new Mz(n,e),t.set(s,[l])):o>=a.length?(l=new Mz(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class eU extends xi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=EJ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tU extends xi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Yue=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,que=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Que(n,e,t){let r=new hR;const i=new We,s=new We,o=new Nn,a=new eU({depthPacking:wJ}),l=new tU,u={},h=t.maxTextureSize,d={[Gc]:ks,[ks]:Gc,[bl]:bl},p=new zc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:Yue,fragmentShader:que}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new $t;v.setAttribute("position",new Cn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Ui(v,p),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=oR;let g=this.type;this.render=function(C,R,L){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||C.length===0)return;const I=n.getRenderTarget(),T=n.getActiveCubeFace(),B=n.getActiveMipmapLevel(),H=n.state;H.setBlending($u),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const K=g!==ml&&this.type===ml,j=g===ml&&this.type!==ml;for(let z=0,X=C.length;z<X;z++){const te=C[z],O=te.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;i.copy(O.mapSize);const D=O.getFrameExtents();if(i.multiply(D),s.copy(O.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/D.x),i.x=s.x*D.x,O.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/D.y),i.y=s.y*D.y,O.mapSize.y=s.y)),O.map===null||K===!0||j===!0){const G=this.type!==ml?{minFilter:Nr,magFilter:Nr}:{};O.map!==null&&O.map.dispose(),O.map=new Ol(i.x,i.y,G),O.map.texture.name=te.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();const V=O.getViewportCount();for(let G=0;G<V;G++){const q=O.getViewport(G);o.set(s.x*q.x,s.y*q.y,s.x*q.z,s.y*q.w),H.viewport(o),O.updateMatrices(te,G),r=O.getFrustum(),w(R,L,O.camera,te,this.type)}O.isPointLightShadow!==!0&&this.type===ml&&_(O,L),O.needsUpdate=!1}g=this.type,M.needsUpdate=!1,n.setRenderTarget(I,T,B)};function _(C,R){const L=e.update(S);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new Ol(i.x,i.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(R,null,L,p,S,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(R,null,L,m,S,null)}function A(C,R,L,I){let T=null;const B=L.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(B!==void 0)T=B;else if(T=L.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const H=T.uuid,K=R.uuid;let j=u[H];j===void 0&&(j={},u[H]=j);let z=j[K];z===void 0&&(z=T.clone(),j[K]=z),T=z}if(T.visible=R.visible,T.wireframe=R.wireframe,I===ml?T.side=R.shadowSide!==null?R.shadowSide:R.side:T.side=R.shadowSide!==null?R.shadowSide:d[R.side],T.alphaMap=R.alphaMap,T.alphaTest=R.alphaTest,T.map=R.map,T.clipShadows=R.clipShadows,T.clippingPlanes=R.clippingPlanes,T.clipIntersection=R.clipIntersection,T.displacementMap=R.displacementMap,T.displacementScale=R.displacementScale,T.displacementBias=R.displacementBias,T.wireframeLinewidth=R.wireframeLinewidth,T.linewidth=R.linewidth,L.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const H=n.properties.get(T);H.light=L}return T}function w(C,R,L,I,T){if(C.visible===!1)return;if(C.layers.test(R.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&T===ml)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,C.matrixWorld);const H=e.update(C),K=C.material;if(Array.isArray(K)){const j=H.groups;for(let z=0,X=j.length;z<X;z++){const te=j[z],O=K[te.materialIndex];if(O&&O.visible){const D=A(C,O,I,T);n.renderBufferDirect(L,null,H,D,C,te)}}}else if(K.visible){const j=A(C,K,I,T);n.renderBufferDirect(L,null,H,j,C,null)}}const B=C.children;for(let H=0,K=B.length;H<K;H++)w(B[H],R,L,I,T)}}function Zue(n,e,t){const r=t.isWebGL2;function i(){let J=!1;const ce=new Nn;let xe=null;const Pe=new Nn(0,0,0,0);return{setMask:function(ke){xe!==ke&&!J&&(n.colorMask(ke,ke,ke,ke),xe=ke)},setLocked:function(ke){J=ke},setClear:function(ke,Lt,Rt,ln,dr){dr===!0&&(ke*=ln,Lt*=ln,Rt*=ln),ce.set(ke,Lt,Rt,ln),Pe.equals(ce)===!1&&(n.clearColor(ke,Lt,Rt,ln),Pe.copy(ce))},reset:function(){J=!1,xe=null,Pe.set(-1,0,0,0)}}}function s(){let J=!1,ce=null,xe=null,Pe=null;return{setTest:function(ke){ke?W(n.DEPTH_TEST):Xe(n.DEPTH_TEST)},setMask:function(ke){ce!==ke&&!J&&(n.depthMask(ke),ce=ke)},setFunc:function(ke){if(xe!==ke){switch(ke){case KX:n.depthFunc(n.NEVER);break;case YX:n.depthFunc(n.ALWAYS);break;case qX:n.depthFunc(n.LESS);break;case zC:n.depthFunc(n.LEQUAL);break;case QX:n.depthFunc(n.EQUAL);break;case ZX:n.depthFunc(n.GEQUAL);break;case $X:n.depthFunc(n.GREATER);break;case eJ:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}xe=ke}},setLocked:function(ke){J=ke},setClear:function(ke){Pe!==ke&&(n.clearDepth(ke),Pe=ke)},reset:function(){J=!1,ce=null,xe=null,Pe=null}}}function o(){let J=!1,ce=null,xe=null,Pe=null,ke=null,Lt=null,Rt=null,ln=null,dr=null;return{setTest:function(kt){J||(kt?W(n.STENCIL_TEST):Xe(n.STENCIL_TEST))},setMask:function(kt){ce!==kt&&!J&&(n.stencilMask(kt),ce=kt)},setFunc:function(kt,Pn,Zn){(xe!==kt||Pe!==Pn||ke!==Zn)&&(n.stencilFunc(kt,Pn,Zn),xe=kt,Pe=Pn,ke=Zn)},setOp:function(kt,Pn,Zn){(Lt!==kt||Rt!==Pn||ln!==Zn)&&(n.stencilOp(kt,Pn,Zn),Lt=kt,Rt=Pn,ln=Zn)},setLocked:function(kt){J=kt},setClear:function(kt){dr!==kt&&(n.clearStencil(kt),dr=kt)},reset:function(){J=!1,ce=null,xe=null,Pe=null,ke=null,Lt=null,Rt=null,ln=null,dr=null}}}const a=new i,l=new s,u=new o,h=new WeakMap,d=new WeakMap;let p={},m={},v=new WeakMap,S=[],M=null,g=!1,_=null,A=null,w=null,C=null,R=null,L=null,I=null,T=!1,B=null,H=null,K=null,j=null,z=null;const X=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let te=!1,O=0;const D=n.getParameter(n.VERSION);D.indexOf("WebGL")!==-1?(O=parseFloat(/^WebGL (\d)/.exec(D)[1]),te=O>=1):D.indexOf("OpenGL ES")!==-1&&(O=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),te=O>=2);let V=null,G={};const q=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),Y=new Nn().fromArray(q),ae=new Nn().fromArray(re);function Se(J,ce,xe,Pe){const ke=new Uint8Array(4),Lt=n.createTexture();n.bindTexture(J,Lt),n.texParameteri(J,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(J,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Rt=0;Rt<xe;Rt++)r&&(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)?n.texImage3D(ce,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,ke):n.texImage2D(ce+Rt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ke);return Lt}const ve={};ve[n.TEXTURE_2D]=Se(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=Se(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(ve[n.TEXTURE_2D_ARRAY]=Se(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=Se(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),W(n.DEPTH_TEST),l.setFunc(zC),De(!1),Je(II),W(n.CULL_FACE),Ae($u);function W(J){p[J]!==!0&&(n.enable(J),p[J]=!0)}function Xe(J){p[J]!==!1&&(n.disable(J),p[J]=!1)}function Ne(J,ce){return m[J]!==ce?(n.bindFramebuffer(J,ce),m[J]=ce,r&&(J===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=ce),J===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=ce)),!0):!1}function ye(J,ce){let xe=S,Pe=!1;if(J)if(xe=v.get(ce),xe===void 0&&(xe=[],v.set(ce,xe)),J.isWebGLMultipleRenderTargets){const ke=J.texture;if(xe.length!==ke.length||xe[0]!==n.COLOR_ATTACHMENT0){for(let Lt=0,Rt=ke.length;Lt<Rt;Lt++)xe[Lt]=n.COLOR_ATTACHMENT0+Lt;xe.length=ke.length,Pe=!0}}else xe[0]!==n.COLOR_ATTACHMENT0&&(xe[0]=n.COLOR_ATTACHMENT0,Pe=!0);else xe[0]!==n.BACK&&(xe[0]=n.BACK,Pe=!0);Pe&&(t.isWebGL2?n.drawBuffers(xe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(xe))}function me(J){return M!==J?(n.useProgram(J),M=J,!0):!1}const pe={[Zp]:n.FUNC_ADD,[UX]:n.FUNC_SUBTRACT,[OX]:n.FUNC_REVERSE_SUBTRACT};if(r)pe[UI]=n.MIN,pe[OI]=n.MAX;else{const J=e.get("EXT_blend_minmax");J!==null&&(pe[UI]=J.MIN_EXT,pe[OI]=J.MAX_EXT)}const le={[kX]:n.ZERO,[GX]:n.ONE,[HX]:n.SRC_COLOR,[UN]:n.SRC_ALPHA,[JX]:n.SRC_ALPHA_SATURATE,[jX]:n.DST_COLOR,[VX]:n.DST_ALPHA,[zX]:n.ONE_MINUS_SRC_COLOR,[ON]:n.ONE_MINUS_SRC_ALPHA,[XX]:n.ONE_MINUS_DST_COLOR,[WX]:n.ONE_MINUS_DST_ALPHA};function Ae(J,ce,xe,Pe,ke,Lt,Rt,ln){if(J===$u){g===!0&&(Xe(n.BLEND),g=!1);return}if(g===!1&&(W(n.BLEND),g=!0),J!==NX){if(J!==_||ln!==T){if((A!==Zp||R!==Zp)&&(n.blendEquation(n.FUNC_ADD),A=Zp,R=Zp),ln)switch(J){case wm:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case DI:n.blendFunc(n.ONE,n.ONE);break;case FI:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case NI:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case wm:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case DI:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case FI:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case NI:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}w=null,C=null,L=null,I=null,_=J,T=ln}return}ke=ke||ce,Lt=Lt||xe,Rt=Rt||Pe,(ce!==A||ke!==R)&&(n.blendEquationSeparate(pe[ce],pe[ke]),A=ce,R=ke),(xe!==w||Pe!==C||Lt!==L||Rt!==I)&&(n.blendFuncSeparate(le[xe],le[Pe],le[Lt],le[Rt]),w=xe,C=Pe,L=Lt,I=Rt),_=J,T=!1}function Re(J,ce){J.side===bl?Xe(n.CULL_FACE):W(n.CULL_FACE);let xe=J.side===ks;ce&&(xe=!xe),De(xe),J.blending===wm&&J.transparent===!1?Ae($u):Ae(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.premultipliedAlpha),l.setFunc(J.depthFunc),l.setTest(J.depthTest),l.setMask(J.depthWrite),a.setMask(J.colorWrite);const Pe=J.stencilWrite;u.setTest(Pe),Pe&&(u.setMask(J.stencilWriteMask),u.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),u.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),Ve(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?W(n.SAMPLE_ALPHA_TO_COVERAGE):Xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function De(J){B!==J&&(J?n.frontFace(n.CW):n.frontFace(n.CCW),B=J)}function Je(J){J!==IX?(W(n.CULL_FACE),J!==H&&(J===II?n.cullFace(n.BACK):J===DX?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Xe(n.CULL_FACE),H=J}function Qe(J){J!==K&&(te&&n.lineWidth(J),K=J)}function Ve(J,ce,xe){J?(W(n.POLYGON_OFFSET_FILL),(j!==ce||z!==xe)&&(n.polygonOffset(ce,xe),j=ce,z=xe)):Xe(n.POLYGON_OFFSET_FILL)}function nt(J){J?W(n.SCISSOR_TEST):Xe(n.SCISSOR_TEST)}function It(J){J===void 0&&(J=n.TEXTURE0+X-1),V!==J&&(n.activeTexture(J),V=J)}function U(J,ce,xe){xe===void 0&&(V===null?xe=n.TEXTURE0+X-1:xe=V);let Pe=G[xe];Pe===void 0&&(Pe={type:void 0,texture:void 0},G[xe]=Pe),(Pe.type!==J||Pe.texture!==ce)&&(V!==xe&&(n.activeTexture(xe),V=xe),n.bindTexture(J,ce||ve[J]),Pe.type=J,Pe.texture=ce)}function F(){const J=G[V];J!==void 0&&J.type!==void 0&&(n.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function _e(){try{n.compressedTexImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Me(){try{n.texSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Te(){try{n.texSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ke(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Be(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function he(){try{n.texStorage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ue(){try{n.texStorage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ge(){try{n.texImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function je(){try{n.texImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Le(J){Y.equals(J)===!1&&(n.scissor(J.x,J.y,J.z,J.w),Y.copy(J))}function Oe(J){ae.equals(J)===!1&&(n.viewport(J.x,J.y,J.z,J.w),ae.copy(J))}function xt(J,ce){let xe=d.get(ce);xe===void 0&&(xe=new WeakMap,d.set(ce,xe));let Pe=xe.get(J);Pe===void 0&&(Pe=n.getUniformBlockIndex(ce,J.name),xe.set(J,Pe))}function wt(J,ce){const xe=d.get(ce).get(J);h.get(ce)!==xe&&(n.uniformBlockBinding(ce,xe,J.__bindingPointIndex),h.set(ce,xe))}function zt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},V=null,G={},m={},v=new WeakMap,S=[],M=null,g=!1,_=null,A=null,w=null,C=null,R=null,L=null,I=null,T=!1,B=null,H=null,K=null,j=null,z=null,Y.set(0,0,n.canvas.width,n.canvas.height),ae.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:W,disable:Xe,bindFramebuffer:Ne,drawBuffers:ye,useProgram:me,setBlending:Ae,setMaterial:Re,setFlipSided:De,setCullFace:Je,setLineWidth:Qe,setPolygonOffset:Ve,setScissorTest:nt,activeTexture:It,bindTexture:U,unbindTexture:F,compressedTexImage2D:oe,compressedTexImage3D:_e,texImage2D:Ge,texImage3D:je,updateUBOMapping:xt,uniformBlockBinding:wt,texStorage2D:he,texStorage3D:Ue,texSubImage2D:Me,texSubImage3D:Te,compressedTexSubImage2D:Ke,compressedTexSubImage3D:Be,scissor:Le,viewport:Oe,reset:zt}}function $ue(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let S;const M=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(U,F){return g?new OffscreenCanvas(U,F):XA("canvas")}function A(U,F,oe,_e){let Me=1;if((U.width>_e||U.height>_e)&&(Me=_e/Math.max(U.width,U.height)),Me<1||F===!0)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap){const Te=F?RJ:Math.floor,Ke=Te(Me*U.width),Be=Te(Me*U.height);S===void 0&&(S=_(Ke,Be));const he=oe?_(Ke,Be):S;return he.width=Ke,he.height=Be,he.getContext("2d").drawImage(U,0,0,Ke,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+Ke+"x"+Be+")."),he}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function w(U){return cD(U.width)&&cD(U.height)}function C(U){return a?!1:U.wrapS!==$i||U.wrapT!==$i||U.minFilter!==Nr&&U.minFilter!==vr}function R(U,F){return U.generateMipmaps&&F&&U.minFilter!==Nr&&U.minFilter!==vr}function L(U){n.generateMipmap(U)}function I(U,F,oe,_e,Me=!1){if(a===!1)return F;if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Te=F;return F===n.RED&&(oe===n.FLOAT&&(Te=n.R32F),oe===n.HALF_FLOAT&&(Te=n.R16F),oe===n.UNSIGNED_BYTE&&(Te=n.R8)),F===n.RG&&(oe===n.FLOAT&&(Te=n.RG32F),oe===n.HALF_FLOAT&&(Te=n.RG16F),oe===n.UNSIGNED_BYTE&&(Te=n.RG8)),F===n.RGBA&&(oe===n.FLOAT&&(Te=n.RGBA32F),oe===n.HALF_FLOAT&&(Te=n.RGBA16F),oe===n.UNSIGNED_BYTE&&(Te=_e===Qt&&Me===!1?n.SRGB8_ALPHA8:n.RGBA8),oe===n.UNSIGNED_SHORT_4_4_4_4&&(Te=n.RGBA4),oe===n.UNSIGNED_SHORT_5_5_5_1&&(Te=n.RGB5_A1)),(Te===n.R16F||Te===n.R32F||Te===n.RG16F||Te===n.RG32F||Te===n.RGBA16F||Te===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function T(U,F,oe){return R(U,oe)===!0||U.isFramebufferTexture&&U.minFilter!==Nr&&U.minFilter!==vr?Math.log2(Math.max(F.width,F.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?F.mipmaps.length:1}function B(U){return U===Nr||U===VA||U===fy?n.NEAREST:n.LINEAR}function H(U){const F=U.target;F.removeEventListener("dispose",H),j(F),F.isVideoTexture&&v.delete(F)}function K(U){const F=U.target;F.removeEventListener("dispose",K),X(F)}function j(U){const F=r.get(U);if(F.__webglInit===void 0)return;const oe=U.source,_e=M.get(oe);if(_e){const Me=_e[F.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&z(U),Object.keys(_e).length===0&&M.delete(oe)}r.remove(U)}function z(U){const F=r.get(U);n.deleteTexture(F.__webglTexture);const oe=U.source,_e=M.get(oe);delete _e[F.__cacheKey],o.memory.textures--}function X(U){const F=U.texture,oe=r.get(U),_e=r.get(F);if(_e.__webglTexture!==void 0&&(n.deleteTexture(_e.__webglTexture),o.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let Me=0;Me<6;Me++)n.deleteFramebuffer(oe.__webglFramebuffer[Me]),oe.__webglDepthbuffer&&n.deleteRenderbuffer(oe.__webglDepthbuffer[Me]);else{if(n.deleteFramebuffer(oe.__webglFramebuffer),oe.__webglDepthbuffer&&n.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let Me=0;Me<oe.__webglColorRenderbuffer.length;Me++)oe.__webglColorRenderbuffer[Me]&&n.deleteRenderbuffer(oe.__webglColorRenderbuffer[Me]);oe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}if(U.isWebGLMultipleRenderTargets)for(let Me=0,Te=F.length;Me<Te;Me++){const Ke=r.get(F[Me]);Ke.__webglTexture&&(n.deleteTexture(Ke.__webglTexture),o.memory.textures--),r.remove(F[Me])}r.remove(F),r.remove(U)}let te=0;function O(){te=0}function D(){const U=te;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),te+=1,U}function V(U){const F=[];return F.push(U.wrapS),F.push(U.wrapT),F.push(U.wrapR||0),F.push(U.magFilter),F.push(U.minFilter),F.push(U.anisotropy),F.push(U.internalFormat),F.push(U.format),F.push(U.type),F.push(U.generateMipmaps),F.push(U.premultiplyAlpha),F.push(U.flipY),F.push(U.unpackAlignment),F.push(U.colorSpace),F.join()}function G(U,F){const oe=r.get(U);if(U.isVideoTexture&&nt(U),U.isRenderTargetTexture===!1&&U.version>0&&oe.__version!==U.version){const _e=U.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Xe(oe,U,F);return}}t.bindTexture(n.TEXTURE_2D,oe.__webglTexture,n.TEXTURE0+F)}function q(U,F){const oe=r.get(U);if(U.version>0&&oe.__version!==U.version){Xe(oe,U,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,oe.__webglTexture,n.TEXTURE0+F)}function re(U,F){const oe=r.get(U);if(U.version>0&&oe.__version!==U.version){Xe(oe,U,F);return}t.bindTexture(n.TEXTURE_3D,oe.__webglTexture,n.TEXTURE0+F)}function Y(U,F){const oe=r.get(U);if(U.version>0&&oe.__version!==U.version){Ne(oe,U,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture,n.TEXTURE0+F)}const ae={[lf]:n.REPEAT,[$i]:n.CLAMP_TO_EDGE,[Dy]:n.MIRRORED_REPEAT},Se={[Nr]:n.NEAREST,[VA]:n.NEAREST_MIPMAP_NEAREST,[fy]:n.NEAREST_MIPMAP_LINEAR,[vr]:n.LINEAR,[lR]:n.LINEAR_MIPMAP_NEAREST,[Hc]:n.LINEAR_MIPMAP_LINEAR};function ve(U,F,oe){if(oe?(n.texParameteri(U,n.TEXTURE_WRAP_S,ae[F.wrapS]),n.texParameteri(U,n.TEXTURE_WRAP_T,ae[F.wrapT]),(U===n.TEXTURE_3D||U===n.TEXTURE_2D_ARRAY)&&n.texParameteri(U,n.TEXTURE_WRAP_R,ae[F.wrapR]),n.texParameteri(U,n.TEXTURE_MAG_FILTER,Se[F.magFilter]),n.texParameteri(U,n.TEXTURE_MIN_FILTER,Se[F.minFilter])):(n.texParameteri(U,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(U,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(U===n.TEXTURE_3D||U===n.TEXTURE_2D_ARRAY)&&n.texParameteri(U,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(F.wrapS!==$i||F.wrapT!==$i)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(U,n.TEXTURE_MAG_FILTER,B(F.magFilter)),n.texParameteri(U,n.TEXTURE_MIN_FILTER,B(F.minFilter)),F.minFilter!==Nr&&F.minFilter!==vr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(F.magFilter===Nr||F.minFilter!==fy&&F.minFilter!==Hc||F.type===Wu&&e.has("OES_texture_float_linear")===!1||a===!1&&F.type===Fy&&e.has("OES_texture_half_float_linear")===!1)return;(F.anisotropy>1||r.get(F).__currentAnisotropy)&&(n.texParameterf(U,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,i.getMaxAnisotropy())),r.get(F).__currentAnisotropy=F.anisotropy)}}function W(U,F){let oe=!1;U.__webglInit===void 0&&(U.__webglInit=!0,F.addEventListener("dispose",H));const _e=F.source;let Me=M.get(_e);Me===void 0&&(Me={},M.set(_e,Me));const Te=V(F);if(Te!==U.__cacheKey){Me[Te]===void 0&&(Me[Te]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,oe=!0),Me[Te].usedTimes++;const Ke=Me[U.__cacheKey];Ke!==void 0&&(Me[U.__cacheKey].usedTimes--,Ke.usedTimes===0&&z(F)),U.__cacheKey=Te,U.__webglTexture=Me[Te].texture}return oe}function Xe(U,F,oe){let _e=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(_e=n.TEXTURE_3D);const Me=W(U,F),Te=F.source;t.bindTexture(_e,U.__webglTexture,n.TEXTURE0+oe);const Ke=r.get(Te);if(Te.version!==Ke.__version||Me===!0){t.activeTexture(n.TEXTURE0+oe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Be=C(F)&&w(F.image)===!1;let he=A(F.image,Be,!1,h);he=It(F,he);const Ue=w(he)||a,Ge=s.convert(F.format,F.colorSpace);let je=s.convert(F.type),Le=I(F.internalFormat,Ge,je,F.colorSpace);ve(_e,F,Ue);let Oe;const xt=F.mipmaps,wt=a&&F.isVideoTexture!==!0,zt=Ke.__version===void 0||Me===!0,J=T(F,he,Ue);if(F.isDepthTexture)Le=n.DEPTH_COMPONENT,a?F.type===Wu?Le=n.DEPTH_COMPONENT32F:F.type===Ed?Le=n.DEPTH_COMPONENT24:F.type===bm?Le=n.DEPTH24_STENCIL8:Le=n.DEPTH_COMPONENT16:F.type===Wu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),F.format===Od&&Le===n.DEPTH_COMPONENT&&F.type!==HN&&F.type!==Ed&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=Ed,je=s.convert(F.type)),F.format===jm&&Le===n.DEPTH_COMPONENT&&(Le=n.DEPTH_STENCIL,F.type!==bm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=bm,je=s.convert(F.type))),zt&&(wt?t.texStorage2D(n.TEXTURE_2D,1,Le,he.width,he.height):t.texImage2D(n.TEXTURE_2D,0,Le,he.width,he.height,0,Ge,je,null));else if(F.isDataTexture)if(xt.length>0&&Ue){wt&&zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,xt[0].width,xt[0].height);for(let ce=0,xe=xt.length;ce<xe;ce++)Oe=xt[ce],wt?t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Oe.width,Oe.height,Ge,je,Oe.data):t.texImage2D(n.TEXTURE_2D,ce,Le,Oe.width,Oe.height,0,Ge,je,Oe.data);F.generateMipmaps=!1}else wt?(zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,he.width,he.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,he.width,he.height,Ge,je,he.data)):t.texImage2D(n.TEXTURE_2D,0,Le,he.width,he.height,0,Ge,je,he.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){wt&&zt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,J,Le,xt[0].width,xt[0].height,he.depth);for(let ce=0,xe=xt.length;ce<xe;ce++)Oe=xt[ce],F.format!==io?Ge!==null?wt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,Oe.width,Oe.height,he.depth,Ge,Oe.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ce,Le,Oe.width,Oe.height,he.depth,0,Oe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,Oe.width,Oe.height,he.depth,Ge,je,Oe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ce,Le,Oe.width,Oe.height,he.depth,0,Ge,je,Oe.data)}else{wt&&zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,xt[0].width,xt[0].height);for(let ce=0,xe=xt.length;ce<xe;ce++)Oe=xt[ce],F.format!==io?Ge!==null?wt?t.compressedTexSubImage2D(n.TEXTURE_2D,ce,0,0,Oe.width,Oe.height,Ge,Oe.data):t.compressedTexImage2D(n.TEXTURE_2D,ce,Le,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Oe.width,Oe.height,Ge,je,Oe.data):t.texImage2D(n.TEXTURE_2D,ce,Le,Oe.width,Oe.height,0,Ge,je,Oe.data)}else if(F.isDataArrayTexture)wt?(zt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,J,Le,he.width,he.height,he.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,he.width,he.height,he.depth,Ge,je,he.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Le,he.width,he.height,he.depth,0,Ge,je,he.data);else if(F.isData3DTexture)wt?(zt&&t.texStorage3D(n.TEXTURE_3D,J,Le,he.width,he.height,he.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,he.width,he.height,he.depth,Ge,je,he.data)):t.texImage3D(n.TEXTURE_3D,0,Le,he.width,he.height,he.depth,0,Ge,je,he.data);else if(F.isFramebufferTexture){if(zt)if(wt)t.texStorage2D(n.TEXTURE_2D,J,Le,he.width,he.height);else{let ce=he.width,xe=he.height;for(let Pe=0;Pe<J;Pe++)t.texImage2D(n.TEXTURE_2D,Pe,Le,ce,xe,0,Ge,je,null),ce>>=1,xe>>=1}}else if(xt.length>0&&Ue){wt&&zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,xt[0].width,xt[0].height);for(let ce=0,xe=xt.length;ce<xe;ce++)Oe=xt[ce],wt?t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Ge,je,Oe):t.texImage2D(n.TEXTURE_2D,ce,Le,Ge,je,Oe);F.generateMipmaps=!1}else wt?(zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,he.width,he.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ge,je,he)):t.texImage2D(n.TEXTURE_2D,0,Le,Ge,je,he);R(F,Ue)&&L(_e),Ke.__version=Te.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function Ne(U,F,oe){if(F.image.length!==6)return;const _e=W(U,F),Me=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture,n.TEXTURE0+oe);const Te=r.get(Me);if(Me.version!==Te.__version||_e===!0){t.activeTexture(n.TEXTURE0+oe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Ke=F.isCompressedTexture||F.image[0].isCompressedTexture,Be=F.image[0]&&F.image[0].isDataTexture,he=[];for(let ce=0;ce<6;ce++)!Ke&&!Be?he[ce]=A(F.image[ce],!1,!0,u):he[ce]=Be?F.image[ce].image:F.image[ce],he[ce]=It(F,he[ce]);const Ue=he[0],Ge=w(Ue)||a,je=s.convert(F.format,F.colorSpace),Le=s.convert(F.type),Oe=I(F.internalFormat,je,Le,F.colorSpace),xt=a&&F.isVideoTexture!==!0,wt=Te.__version===void 0||_e===!0;let zt=T(F,Ue,Ge);ve(n.TEXTURE_CUBE_MAP,F,Ge);let J;if(Ke){xt&&wt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,zt,Oe,Ue.width,Ue.height);for(let ce=0;ce<6;ce++){J=he[ce].mipmaps;for(let xe=0;xe<J.length;xe++){const Pe=J[xe];F.format!==io?je!==null?xt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe,0,0,Pe.width,Pe.height,je,Pe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe,Oe,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe,0,0,Pe.width,Pe.height,je,Le,Pe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe,Oe,Pe.width,Pe.height,0,je,Le,Pe.data)}}}else{J=F.mipmaps,xt&&wt&&(J.length>0&&zt++,t.texStorage2D(n.TEXTURE_CUBE_MAP,zt,Oe,he[0].width,he[0].height));for(let ce=0;ce<6;ce++)if(Be){xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,he[ce].width,he[ce].height,je,Le,he[ce].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,Oe,he[ce].width,he[ce].height,0,je,Le,he[ce].data);for(let xe=0;xe<J.length;xe++){const Pe=J[xe].image[ce].image;xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe+1,0,0,Pe.width,Pe.height,je,Le,Pe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe+1,Oe,Pe.width,Pe.height,0,je,Le,Pe.data)}}else{xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,je,Le,he[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,Oe,je,Le,he[ce]);for(let xe=0;xe<J.length;xe++){const Pe=J[xe];xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe+1,0,0,je,Le,Pe.image[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe+1,Oe,je,Le,Pe.image[ce])}}}R(F,Ge)&&L(n.TEXTURE_CUBE_MAP),Te.__version=Me.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function ye(U,F,oe,_e,Me){const Te=s.convert(oe.format,oe.colorSpace),Ke=s.convert(oe.type),Be=I(oe.internalFormat,Te,Ke,oe.colorSpace);r.get(F).__hasExternalTextures||(Me===n.TEXTURE_3D||Me===n.TEXTURE_2D_ARRAY?t.texImage3D(Me,0,Be,F.width,F.height,F.depth,0,Te,Ke,null):t.texImage2D(Me,0,Be,F.width,F.height,0,Te,Ke,null)),t.bindFramebuffer(n.FRAMEBUFFER,U),Ve(F)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,Me,r.get(oe).__webglTexture,0,Qe(F)):(Me===n.TEXTURE_2D||Me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,Me,r.get(oe).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function me(U,F,oe){if(n.bindRenderbuffer(n.RENDERBUFFER,U),F.depthBuffer&&!F.stencilBuffer){let _e=n.DEPTH_COMPONENT16;if(oe||Ve(F)){const Me=F.depthTexture;Me&&Me.isDepthTexture&&(Me.type===Wu?_e=n.DEPTH_COMPONENT32F:Me.type===Ed&&(_e=n.DEPTH_COMPONENT24));const Te=Qe(F);Ve(F)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Te,_e,F.width,F.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Te,_e,F.width,F.height)}else n.renderbufferStorage(n.RENDERBUFFER,_e,F.width,F.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,U)}else if(F.depthBuffer&&F.stencilBuffer){const _e=Qe(F);oe&&Ve(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,F.width,F.height):Ve(F)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,U)}else{const _e=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Me=0;Me<_e.length;Me++){const Te=_e[Me],Ke=s.convert(Te.format,Te.colorSpace),Be=s.convert(Te.type),he=I(Te.internalFormat,Ke,Be,Te.colorSpace),Ue=Qe(F);oe&&Ve(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,he,F.width,F.height):Ve(F)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,he,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,he,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function pe(U,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,U),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),G(F.depthTexture,0);const oe=r.get(F.depthTexture).__webglTexture,_e=Qe(F);if(F.depthTexture.format===Od)Ve(F)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,oe,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,oe,0);else if(F.depthTexture.format===jm)Ve(F)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,oe,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,oe,0);else throw new Error("Unknown depthTexture format")}function le(U){const F=r.get(U),oe=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!F.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");pe(F.__webglFramebuffer,U)}else if(oe){F.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[_e]),F.__webglDepthbuffer[_e]=n.createRenderbuffer(),me(F.__webglDepthbuffer[_e],U,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer=n.createRenderbuffer(),me(F.__webglDepthbuffer,U,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(U,F,oe){const _e=r.get(U);F!==void 0&&ye(_e.__webglFramebuffer,U,U.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),oe!==void 0&&le(U)}function Re(U){const F=U.texture,oe=r.get(U),_e=r.get(F);U.addEventListener("dispose",K),U.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=F.version,o.memory.textures++);const Me=U.isWebGLCubeRenderTarget===!0,Te=U.isWebGLMultipleRenderTargets===!0,Ke=w(U)||a;if(Me){oe.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)oe.__webglFramebuffer[Be]=n.createFramebuffer()}else{if(oe.__webglFramebuffer=n.createFramebuffer(),Te)if(i.drawBuffers){const Be=U.texture;for(let he=0,Ue=Be.length;he<Ue;he++){const Ge=r.get(Be[he]);Ge.__webglTexture===void 0&&(Ge.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&U.samples>0&&Ve(U)===!1){const Be=Te?F:[F];oe.__webglMultisampledFramebuffer=n.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let he=0;he<Be.length;he++){const Ue=Be[he];oe.__webglColorRenderbuffer[he]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,oe.__webglColorRenderbuffer[he]);const Ge=s.convert(Ue.format,Ue.colorSpace),je=s.convert(Ue.type),Le=I(Ue.internalFormat,Ge,je,Ue.colorSpace,U.isXRRenderTarget===!0),Oe=Qe(U);n.renderbufferStorageMultisample(n.RENDERBUFFER,Oe,Le,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+he,n.RENDERBUFFER,oe.__webglColorRenderbuffer[he])}n.bindRenderbuffer(n.RENDERBUFFER,null),U.depthBuffer&&(oe.__webglDepthRenderbuffer=n.createRenderbuffer(),me(oe.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Me){t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),ve(n.TEXTURE_CUBE_MAP,F,Ke);for(let Be=0;Be<6;Be++)ye(oe.__webglFramebuffer[Be],U,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Be);R(F,Ke)&&L(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Te){const Be=U.texture;for(let he=0,Ue=Be.length;he<Ue;he++){const Ge=Be[he],je=r.get(Ge);t.bindTexture(n.TEXTURE_2D,je.__webglTexture),ve(n.TEXTURE_2D,Ge,Ke),ye(oe.__webglFramebuffer,U,Ge,n.COLOR_ATTACHMENT0+he,n.TEXTURE_2D),R(Ge,Ke)&&L(n.TEXTURE_2D)}t.unbindTexture()}else{let Be=n.TEXTURE_2D;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(a?Be=U.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Be,_e.__webglTexture),ve(Be,F,Ke),ye(oe.__webglFramebuffer,U,F,n.COLOR_ATTACHMENT0,Be),R(F,Ke)&&L(Be),t.unbindTexture()}U.depthBuffer&&le(U)}function De(U){const F=w(U)||a,oe=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let _e=0,Me=oe.length;_e<Me;_e++){const Te=oe[_e];if(R(Te,F)){const Ke=U.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Be=r.get(Te).__webglTexture;t.bindTexture(Ke,Be),L(Ke),t.unbindTexture()}}}function Je(U){if(a&&U.samples>0&&Ve(U)===!1){const F=U.isWebGLMultipleRenderTargets?U.texture:[U.texture],oe=U.width,_e=U.height;let Me=n.COLOR_BUFFER_BIT;const Te=[],Ke=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Be=r.get(U),he=U.isWebGLMultipleRenderTargets===!0;if(he)for(let Ue=0;Ue<F.length;Ue++)t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Be.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Be.__webglFramebuffer);for(let Ue=0;Ue<F.length;Ue++){Te.push(n.COLOR_ATTACHMENT0+Ue),U.depthBuffer&&Te.push(Ke);const Ge=Be.__ignoreDepthValues!==void 0?Be.__ignoreDepthValues:!1;if(Ge===!1&&(U.depthBuffer&&(Me|=n.DEPTH_BUFFER_BIT),U.stencilBuffer&&(Me|=n.STENCIL_BUFFER_BIT)),he&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Be.__webglColorRenderbuffer[Ue]),Ge===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Ke]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Ke])),he){const je=r.get(F[Ue]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,je,0)}n.blitFramebuffer(0,0,oe,_e,0,0,oe,_e,Me,n.NEAREST),m&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Te)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),he)for(let Ue=0;Ue<F.length;Ue++){t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,Be.__webglColorRenderbuffer[Ue]);const Ge=r.get(F[Ue]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,Ge,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Be.__webglMultisampledFramebuffer)}}function Qe(U){return Math.min(d,U.samples)}function Ve(U){const F=r.get(U);return a&&U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function nt(U){const F=o.render.frame;v.get(U)!==F&&(v.set(U,F),U.update())}function It(U,F){const oe=U.colorSpace,_e=U.format,Me=U.type;return U.isCompressedTexture===!0||U.format===WC||oe!==Ul&&oe!==kd&&(oe===Qt?a===!1?e.has("EXT_sRGB")===!0&&_e===io?(U.format=WC,U.minFilter=vr,U.generateMipmaps=!1):F=KN.sRGBToLinear(F):(_e!==io||Me!==ph)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),F}this.allocateTextureUnit=D,this.resetTextureUnits=O,this.setTexture2D=G,this.setTexture2DArray=q,this.setTexture3D=re,this.setTextureCube=Y,this.rebindTextures=Ae,this.setupRenderTarget=Re,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=Je,this.setupDepthRenderbuffer=le,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=Ve}function XJ(n,e,t){const r=t.isWebGL2;function i(s,o=kd){let a;if(s===ph)return n.UNSIGNED_BYTE;if(s===cJ)return n.UNSIGNED_SHORT_4_4_4_4;if(s===uJ)return n.UNSIGNED_SHORT_5_5_5_1;if(s===oJ)return n.BYTE;if(s===aJ)return n.SHORT;if(s===HN)return n.UNSIGNED_SHORT;if(s===lJ)return n.INT;if(s===Ed)return n.UNSIGNED_INT;if(s===Wu)return n.FLOAT;if(s===Fy)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===hJ)return n.ALPHA;if(s===io)return n.RGBA;if(s===dJ)return n.LUMINANCE;if(s===fJ)return n.LUMINANCE_ALPHA;if(s===Od)return n.DEPTH_COMPONENT;if(s===jm)return n.DEPTH_STENCIL;if(s===WC)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===pJ)return n.RED;if(s===mJ)return n.RED_INTEGER;if(s===gJ)return n.RG;if(s===vJ)return n.RG_INTEGER;if(s===yJ)return n.RGBA_INTEGER;if(s===Ob||s===kb||s===Gb||s===Hb)if(o===Qt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Ob)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===kb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Gb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Hb)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Ob)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===kb)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Gb)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Hb)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===kI||s===GI||s===HI||s===zI)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===kI)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===GI)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===HI)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===zI)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===xJ)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===VI||s===WI)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===VI)return o===Qt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===WI)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===jI||s===XI||s===JI||s===KI||s===YI||s===qI||s===QI||s===ZI||s===$I||s===eD||s===tD||s===nD||s===rD||s===iD)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===jI)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===XI)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===JI)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===KI)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===YI)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===qI)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===QI)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===ZI)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===$I)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===eD)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===tD)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===nD)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===rD)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===iD)return o===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===zb)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===zb)return o===Qt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===_J||s===sD||s===oD||s===aD)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===zb)return a.COMPRESSED_RED_RGTC1_EXT;if(s===sD)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===oD)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===aD)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===bm?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class JJ extends mi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ju extends Mn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ehe={type:"move"};class CB{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ju,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ju,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new se,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new se),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ju,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new se,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new se),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const S of e.hand.values()){const M=t.getJointPose(S,r),g=this._getHandJoint(u,S);M!==null&&(g.matrix.fromArray(M.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=M.radius),g.visible=M!==null}const h=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,v=.005;u.inputState.pinching&&p>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ehe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new ju;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class KJ extends Er{constructor(e,t,r,i,s,o,a,l,u,h){if(h=h!==void 0?h:Od,h!==Od&&h!==jm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Od&&(r=Ed),r===void 0&&h===jm&&(r=bm),super(null,i,s,o,a,l,h,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Nr,this.minFilter=l!==void 0?l:Nr,this.flipY=!1,this.generateMipmaps=!1}}class the extends wh{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,d=null,p=null,m=null,v=null;const S=t.getContextAttributes();let M=null,g=null;const _=[],A=[],w=new Set,C=new Map,R=new mi;R.layers.enable(1),R.viewport=new Nn;const L=new mi;L.layers.enable(2),L.viewport=new Nn;const I=[R,L],T=new JJ;T.layers.enable(1),T.layers.enable(2);let B=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let ae=_[Y];return ae===void 0&&(ae=new CB,_[Y]=ae),ae.getTargetRaySpace()},this.getControllerGrip=function(Y){let ae=_[Y];return ae===void 0&&(ae=new CB,_[Y]=ae),ae.getGripSpace()},this.getHand=function(Y){let ae=_[Y];return ae===void 0&&(ae=new CB,_[Y]=ae),ae.getHandSpace()};function K(Y){const ae=A.indexOf(Y.inputSource);if(ae===-1)return;const Se=_[ae];Se!==void 0&&(Se.update(Y.inputSource,Y.frame,u||o),Se.dispatchEvent({type:Y.type,data:Y.inputSource}))}function j(){i.removeEventListener("select",K),i.removeEventListener("selectstart",K),i.removeEventListener("selectend",K),i.removeEventListener("squeeze",K),i.removeEventListener("squeezestart",K),i.removeEventListener("squeezeend",K),i.removeEventListener("end",j),i.removeEventListener("inputsourceschange",z);for(let Y=0;Y<_.length;Y++){const ae=A[Y];ae!==null&&(A[Y]=null,_[Y].disconnect(ae))}B=null,H=null,e.setRenderTarget(M),m=null,p=null,d=null,i=null,g=null,re.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){s=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){a=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(Y){u=Y},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(Y){if(i=Y,i!==null){if(M=e.getRenderTarget(),i.addEventListener("select",K),i.addEventListener("selectstart",K),i.addEventListener("selectend",K),i.addEventListener("squeeze",K),i.addEventListener("squeezestart",K),i.addEventListener("squeezeend",K),i.addEventListener("end",j),i.addEventListener("inputsourceschange",z),S.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ae={antialias:i.renderState.layers===void 0?S.antialias:!0,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,ae),i.updateRenderState({baseLayer:m}),g=new Ol(m.framebufferWidth,m.framebufferHeight,{format:io,type:ph,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let ae=null,Se=null,ve=null;S.depth&&(ve=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ae=S.stencil?jm:Od,Se=S.stencil?bm:Ed);const W={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:s};d=new XRWebGLBinding(i,t),p=d.createProjectionLayer(W),i.updateRenderState({layers:[p]}),g=new Ol(p.textureWidth,p.textureHeight,{format:io,type:ph,depthTexture:new KJ(p.textureWidth,p.textureHeight,Se,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0});const Xe=e.properties.get(g);Xe.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),re.setContext(i),re.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function z(Y){for(let ae=0;ae<Y.removed.length;ae++){const Se=Y.removed[ae],ve=A.indexOf(Se);ve>=0&&(A[ve]=null,_[ve].disconnect(Se))}for(let ae=0;ae<Y.added.length;ae++){const Se=Y.added[ae];let ve=A.indexOf(Se);if(ve===-1){for(let Xe=0;Xe<_.length;Xe++)if(Xe>=A.length){A.push(Se),ve=Xe;break}else if(A[Xe]===null){A[Xe]=Se,ve=Xe;break}if(ve===-1)break}const W=_[ve];W&&W.connect(Se)}}const X=new se,te=new se;function O(Y,ae,Se){X.setFromMatrixPosition(ae.matrixWorld),te.setFromMatrixPosition(Se.matrixWorld);const ve=X.distanceTo(te),W=ae.projectionMatrix.elements,Xe=Se.projectionMatrix.elements,Ne=W[14]/(W[10]-1),ye=W[14]/(W[10]+1),me=(W[9]+1)/W[5],pe=(W[9]-1)/W[5],le=(W[8]-1)/W[0],Ae=(Xe[8]+1)/Xe[0],Re=Ne*le,De=Ne*Ae,Je=ve/(-le+Ae),Qe=Je*-le;ae.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(Qe),Y.translateZ(Je),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert();const Ve=Ne+Je,nt=ye+Je,It=Re-Qe,U=De+(ve-Qe),F=me*ye/nt*Ve,oe=pe*ye/nt*Ve;Y.projectionMatrix.makePerspective(It,U,F,oe,Ve,nt),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}function D(Y,ae){ae===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(ae.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(i===null)return;T.near=L.near=R.near=Y.near,T.far=L.far=R.far=Y.far,(B!==T.near||H!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),B=T.near,H=T.far);const ae=Y.parent,Se=T.cameras;D(T,ae);for(let ve=0;ve<Se.length;ve++)D(Se[ve],ae);Se.length===2?O(T,R,L):T.projectionMatrix.copy(R.projectionMatrix),V(Y,T,ae)};function V(Y,ae,Se){Se===null?Y.matrix.copy(ae.matrixWorld):(Y.matrix.copy(Se.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(ae.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0);const ve=Y.children;for(let W=0,Xe=ve.length;W<Xe;W++)ve[W].updateMatrixWorld(!0);Y.projectionMatrix.copy(ae.projectionMatrix),Y.projectionMatrixInverse.copy(ae.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=Uy*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(Y){l=Y,p!==null&&(p.fixedFoveation=Y),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Y)},this.getPlanes=function(){return w};let G=null;function q(Y,ae){if(h=ae.getViewerPose(u||o),v=ae,h!==null){const Se=h.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let ve=!1;Se.length!==T.cameras.length&&(T.cameras.length=0,ve=!0);for(let W=0;W<Se.length;W++){const Xe=Se[W];let Ne=null;if(m!==null)Ne=m.getViewport(Xe);else{const me=d.getViewSubImage(p,Xe);Ne=me.viewport,W===0&&(e.setRenderTargetTextures(g,me.colorTexture,p.ignoreDepthValues?void 0:me.depthStencilTexture),e.setRenderTarget(g))}let ye=I[W];ye===void 0&&(ye=new mi,ye.layers.enable(W),ye.viewport=new Nn,I[W]=ye),ye.matrix.fromArray(Xe.transform.matrix),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.projectionMatrix.fromArray(Xe.projectionMatrix),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert(),ye.viewport.set(Ne.x,Ne.y,Ne.width,Ne.height),W===0&&(T.matrix.copy(ye.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),ve===!0&&T.cameras.push(ye)}}for(let Se=0;Se<_.length;Se++){const ve=A[Se],W=_[Se];ve!==null&&W!==void 0&&W.update(ve,ae,u||o)}if(G&&G(Y,ae),ae.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:ae.detectedPlanes});let Se=null;for(const ve of w)ae.detectedPlanes.has(ve)||(Se===null&&(Se=[]),Se.push(ve));if(Se!==null)for(const ve of Se)w.delete(ve),C.delete(ve),r.dispatchEvent({type:"planeremoved",data:ve});for(const ve of ae.detectedPlanes)if(!w.has(ve))w.add(ve),C.set(ve,ae.lastChangedTime),r.dispatchEvent({type:"planeadded",data:ve});else{const W=C.get(ve);ve.lastChangedTime>W&&(C.set(ve,ve.lastChangedTime),r.dispatchEvent({type:"planechanged",data:ve}))}}v=null}const re=new GJ;re.setAnimationLoop(q),this.setAnimationLoop=function(Y){G=Y},this.dispose=function(){}}}function nhe(n,e){function t(M,g){M.matrixAutoUpdate===!0&&M.updateMatrix(),g.value.copy(M.matrix)}function r(M,g){g.color.getRGB(M.fogColor.value,NJ(n)),g.isFog?(M.fogNear.value=g.near,M.fogFar.value=g.far):g.isFogExp2&&(M.fogDensity.value=g.density)}function i(M,g,_,A,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(M,g):g.isMeshToonMaterial?(s(M,g),d(M,g)):g.isMeshPhongMaterial?(s(M,g),h(M,g)):g.isMeshStandardMaterial?(s(M,g),p(M,g),g.isMeshPhysicalMaterial&&m(M,g,w)):g.isMeshMatcapMaterial?(s(M,g),v(M,g)):g.isMeshDepthMaterial?s(M,g):g.isMeshDistanceMaterial?(s(M,g),S(M,g)):g.isMeshNormalMaterial?s(M,g):g.isLineBasicMaterial?(o(M,g),g.isLineDashedMaterial&&a(M,g)):g.isPointsMaterial?l(M,g,_,A):g.isSpriteMaterial?u(M,g):g.isShadowMaterial?(M.color.value.copy(g.color),M.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(M,g){M.opacity.value=g.opacity,g.color&&M.diffuse.value.copy(g.color),g.emissive&&M.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(M.map.value=g.map,t(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap,t(g.alphaMap,M.alphaMapTransform)),g.bumpMap&&(M.bumpMap.value=g.bumpMap,t(g.bumpMap,M.bumpMapTransform),M.bumpScale.value=g.bumpScale,g.side===ks&&(M.bumpScale.value*=-1)),g.normalMap&&(M.normalMap.value=g.normalMap,t(g.normalMap,M.normalMapTransform),M.normalScale.value.copy(g.normalScale),g.side===ks&&M.normalScale.value.negate()),g.displacementMap&&(M.displacementMap.value=g.displacementMap,t(g.displacementMap,M.displacementMapTransform),M.displacementScale.value=g.displacementScale,M.displacementBias.value=g.displacementBias),g.emissiveMap&&(M.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,M.emissiveMapTransform)),g.specularMap&&(M.specularMap.value=g.specularMap,t(g.specularMap,M.specularMapTransform)),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(M.envMap.value=_,M.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=g.reflectivity,M.ior.value=g.ior,M.refractionRatio.value=g.refractionRatio),g.lightMap){M.lightMap.value=g.lightMap;const A=n.useLegacyLights===!0?Math.PI:1;M.lightMapIntensity.value=g.lightMapIntensity*A,t(g.lightMap,M.lightMapTransform)}g.aoMap&&(M.aoMap.value=g.aoMap,M.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,M.aoMapTransform))}function o(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,g.map&&(M.map.value=g.map,t(g.map,M.mapTransform))}function a(M,g){M.dashSize.value=g.dashSize,M.totalSize.value=g.dashSize+g.gapSize,M.scale.value=g.scale}function l(M,g,_,A){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.size.value=g.size*_,M.scale.value=A*.5,g.map&&(M.map.value=g.map,t(g.map,M.uvTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function u(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.rotation.value=g.rotation,g.map&&(M.map.value=g.map,t(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function h(M,g){M.specular.value.copy(g.specular),M.shininess.value=Math.max(g.shininess,1e-4)}function d(M,g){g.gradientMap&&(M.gradientMap.value=g.gradientMap)}function p(M,g){M.metalness.value=g.metalness,g.metalnessMap&&(M.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,M.metalnessMapTransform)),M.roughness.value=g.roughness,g.roughnessMap&&(M.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,M.roughnessMapTransform)),e.get(g).envMap&&(M.envMapIntensity.value=g.envMapIntensity)}function m(M,g,_){M.ior.value=g.ior,g.sheen>0&&(M.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),M.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(M.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,M.sheenColorMapTransform)),g.sheenRoughnessMap&&(M.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,M.sheenRoughnessMapTransform))),g.clearcoat>0&&(M.clearcoat.value=g.clearcoat,M.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(M.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,M.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(M.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ks&&M.clearcoatNormalScale.value.negate())),g.iridescence>0&&(M.iridescence.value=g.iridescence,M.iridescenceIOR.value=g.iridescenceIOR,M.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(M.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,M.iridescenceMapTransform)),g.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),g.transmission>0&&(M.transmission.value=g.transmission,M.transmissionSamplerMap.value=_.texture,M.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(M.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,M.transmissionMapTransform)),M.thickness.value=g.thickness,g.thicknessMap&&(M.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=g.attenuationDistance,M.attenuationColor.value.copy(g.attenuationColor)),M.specularIntensity.value=g.specularIntensity,M.specularColor.value.copy(g.specularColor),g.specularColorMap&&(M.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,M.specularColorMapTransform)),g.specularIntensityMap&&(M.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,M.specularIntensityMapTransform))}function v(M,g){g.matcap&&(M.matcap.value=g.matcap)}function S(M,g){const _=e.get(g).light;M.referencePosition.value.setFromMatrixPosition(_.matrixWorld),M.nearDistance.value=_.shadow.camera.near,M.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function rhe(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(_,A){const w=A.program;r.uniformBlockBinding(_,w)}function u(_,A){let w=i[_.id];w===void 0&&(v(_),w=h(_),i[_.id]=w,_.addEventListener("dispose",M));const C=A.program;r.updateUBOMapping(_,C);const R=e.render.frame;s[_.id]!==R&&(p(_),s[_.id]=R)}function h(_){const A=d();_.__bindingPointIndex=A;const w=n.createBuffer(),C=_.__size,R=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,C,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,w),w}function d(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const A=i[_.id],w=_.uniforms,C=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let R=0,L=w.length;R<L;R++){const I=w[R];if(m(I,R,C)===!0){const T=I.__offset,B=Array.isArray(I.value)?I.value:[I.value];let H=0;for(let K=0;K<B.length;K++){const j=B[K],z=S(j);typeof j=="number"?(I.__data[0]=j,n.bufferSubData(n.UNIFORM_BUFFER,T+H,I.__data)):j.isMatrix3?(I.__data[0]=j.elements[0],I.__data[1]=j.elements[1],I.__data[2]=j.elements[2],I.__data[3]=j.elements[0],I.__data[4]=j.elements[3],I.__data[5]=j.elements[4],I.__data[6]=j.elements[5],I.__data[7]=j.elements[0],I.__data[8]=j.elements[6],I.__data[9]=j.elements[7],I.__data[10]=j.elements[8],I.__data[11]=j.elements[0]):(j.toArray(I.__data,H),H+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,T,I.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(_,A,w){const C=_.value;if(w[A]===void 0){if(typeof C=="number")w[A]=C;else{const R=Array.isArray(C)?C:[C],L=[];for(let I=0;I<R.length;I++)L.push(R[I].clone());w[A]=L}return!0}else if(typeof C=="number"){if(w[A]!==C)return w[A]=C,!0}else{const R=Array.isArray(w[A])?w[A]:[w[A]],L=Array.isArray(C)?C:[C];for(let I=0;I<R.length;I++){const T=R[I];if(T.equals(L[I])===!1)return T.copy(L[I]),!0}}return!1}function v(_){const A=_.uniforms;let w=0;const C=16;let R=0;for(let L=0,I=A.length;L<I;L++){const T=A[L],B={boundary:0,storage:0},H=Array.isArray(T.value)?T.value:[T.value];for(let K=0,j=H.length;K<j;K++){const z=H[K],X=S(z);B.boundary+=X.boundary,B.storage+=X.storage}if(T.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=w,L>0){R=w%C;const K=C-R;R!==0&&K-B.boundary<0&&(w+=C-R,T.__offset=w)}w+=B.storage}return R=w%C,R>0&&(w+=C-R),_.__size=w,_.__cache={},this}function S(_){const A={boundary:0,storage:0};return typeof _=="number"?(A.boundary=4,A.storage=4):_.isVector2?(A.boundary=8,A.storage=8):_.isVector3||_.isColor?(A.boundary=16,A.storage=12):_.isVector4?(A.boundary=16,A.storage=16):_.isMatrix3?(A.boundary=48,A.storage=48):_.isMatrix4?(A.boundary=64,A.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),A}function M(_){const A=_.target;A.removeEventListener("dispose",M);const w=o.indexOf(A.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(i[A.id]),delete i[A.id],delete s[A.id]}function g(){for(const _ in i)n.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:u,dispose:g}}function ihe(){const n=XA("canvas");return n.style.display="block",n}class nU{constructor(e={}){const{canvas:t=ihe(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;let m=null,v=null;const S=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Qt,this.useLegacyLights=!0,this.toneMapping=Pl,this.toneMappingExposure=1;const g=this;let _=!1,A=0,w=0,C=null,R=-1,L=null;const I=new Nn,T=new Nn;let B=null,H=t.width,K=t.height,j=1,z=null,X=null;const te=new Nn(0,0,H,K),O=new Nn(0,0,H,K);let D=!1;const V=new hR;let G=!1,q=!1,re=null;const Y=new Wt,ae=new se,Se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ve(){return C===null?j:1}let W=r;function Xe(N,ne){for(let ue=0;ue<N.length;ue++){const Z=N[ue],de=t.getContext(Z,ne);if(de!==null)return de}return null}try{const N={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${HS}`),t.addEventListener("webglcontextlost",Oe,!1),t.addEventListener("webglcontextrestored",xt,!1),t.addEventListener("webglcontextcreationerror",wt,!1),W===null){const ne=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&ne.shift(),W=Xe(ne,N),W===null)throw Xe(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}W.getShaderPrecisionFormat===void 0&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}let Ne,ye,me,pe,le,Ae,Re,De,Je,Qe,Ve,nt,It,U,F,oe,_e,Me,Te,Ke,Be,he,Ue,Ge;function je(){Ne=new _ce(W),ye=new pce(W,Ne,e),Ne.init(ye),he=new XJ(W,Ne,ye),me=new Zue(W,Ne,ye),pe=new Mce(W),le=new Gue,Ae=new $ue(W,Ne,me,le,ye,he,pe),Re=new gce(g),De=new xce(g),Je=new Foe(W,ye),Ue=new dce(W,Ne,Je,ye),Qe=new Ace(W,Je,pe,Ue),Ve=new Cce(W,Qe,Je,pe),Te=new bce(W,ye,Ae),oe=new mce(le),nt=new kue(g,Re,De,Ne,ye,Ue,oe),It=new nhe(g,le),U=new zue,F=new Kue(Ne,ye),Me=new hce(g,Re,De,me,Ve,p,l),_e=new Que(g,Ve,ye),Ge=new rhe(W,pe,ye,me),Ke=new fce(W,Ne,pe,ye),Be=new Sce(W,Ne,pe,ye),pe.programs=nt.programs,g.capabilities=ye,g.extensions=Ne,g.properties=le,g.renderLists=U,g.shadowMap=_e,g.state=me,g.info=pe}je();const Le=new the(g,W);this.xr=Le,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const N=Ne.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=Ne.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(N){N!==void 0&&(j=N,this.setSize(H,K,!1))},this.getSize=function(N){return N.set(H,K)},this.setSize=function(N,ne,ue=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=N,K=ne,t.width=Math.floor(N*j),t.height=Math.floor(ne*j),ue===!0&&(t.style.width=N+"px",t.style.height=ne+"px"),this.setViewport(0,0,N,ne)},this.getDrawingBufferSize=function(N){return N.set(H*j,K*j).floor()},this.setDrawingBufferSize=function(N,ne,ue){H=N,K=ne,j=ue,t.width=Math.floor(N*ue),t.height=Math.floor(ne*ue),this.setViewport(0,0,N,ne)},this.getCurrentViewport=function(N){return N.copy(I)},this.getViewport=function(N){return N.copy(te)},this.setViewport=function(N,ne,ue,Z){N.isVector4?te.set(N.x,N.y,N.z,N.w):te.set(N,ne,ue,Z),me.viewport(I.copy(te).multiplyScalar(j).floor())},this.getScissor=function(N){return N.copy(O)},this.setScissor=function(N,ne,ue,Z){N.isVector4?O.set(N.x,N.y,N.z,N.w):O.set(N,ne,ue,Z),me.scissor(T.copy(O).multiplyScalar(j).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(N){me.setScissorTest(D=N)},this.setOpaqueSort=function(N){z=N},this.setTransparentSort=function(N){X=N},this.getClearColor=function(N){return N.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor.apply(Me,arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha.apply(Me,arguments)},this.clear=function(N=!0,ne=!0,ue=!0){let Z=0;N&&(Z|=W.COLOR_BUFFER_BIT),ne&&(Z|=W.DEPTH_BUFFER_BIT),ue&&(Z|=W.STENCIL_BUFFER_BIT),W.clear(Z)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Oe,!1),t.removeEventListener("webglcontextrestored",xt,!1),t.removeEventListener("webglcontextcreationerror",wt,!1),U.dispose(),F.dispose(),le.dispose(),Re.dispose(),De.dispose(),Ve.dispose(),Ue.dispose(),Ge.dispose(),nt.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",ke),Le.removeEventListener("sessionend",Lt),re&&(re.dispose(),re=null),Rt.stop()};function Oe(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function xt(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const N=pe.autoReset,ne=_e.enabled,ue=_e.autoUpdate,Z=_e.needsUpdate,de=_e.type;je(),pe.autoReset=N,_e.enabled=ne,_e.autoUpdate=ue,_e.needsUpdate=Z,_e.type=de}function wt(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function zt(N){const ne=N.target;ne.removeEventListener("dispose",zt),J(ne)}function J(N){ce(N),le.remove(N)}function ce(N){const ne=le.get(N).programs;ne!==void 0&&(ne.forEach(function(ue){nt.releaseProgram(ue)}),N.isShaderMaterial&&nt.releaseShaderCache(N))}this.renderBufferDirect=function(N,ne,ue,Z,de,Fe){ne===null&&(ne=Se);const Ye=de.isMesh&&de.matrixWorld.determinant()<0,$e=rc(N,ne,ue,Z,de);me.setMaterial(Z,Ye);let st=ue.index,_t=1;Z.wireframe===!0&&(st=Qe.getWireframeAttribute(ue),_t=2);const ct=ue.drawRange,ut=ue.attributes.position;let Dt=ct.start*_t,yn=(ct.start+ct.count)*_t;Fe!==null&&(Dt=Math.max(Dt,Fe.start*_t),yn=Math.min(yn,(Fe.start+Fe.count)*_t)),st!==null?(Dt=Math.max(Dt,0),yn=Math.min(yn,st.count)):ut!=null&&(Dt=Math.max(Dt,0),yn=Math.min(yn,ut.count));const Ln=yn-Dt;if(Ln<0||Ln===1/0)return;Ue.setup(de,Z,$e,ue,st);let $n,Ft=Ke;if(st!==null&&($n=Je.get(st),Ft=Be,Ft.setIndex($n)),de.isMesh)Z.wireframe===!0?(me.setLineWidth(Z.wireframeLinewidth*ve()),Ft.setMode(W.LINES)):Ft.setMode(W.TRIANGLES);else if(de.isLine){let ht=Z.linewidth;ht===void 0&&(ht=1),me.setLineWidth(ht*ve()),de.isLineSegments?Ft.setMode(W.LINES):de.isLineLoop?Ft.setMode(W.LINE_LOOP):Ft.setMode(W.LINE_STRIP)}else de.isPoints?Ft.setMode(W.POINTS):de.isSprite&&Ft.setMode(W.TRIANGLES);if(de.isInstancedMesh)Ft.renderInstances(Dt,Ln,de.count);else if(ue.isInstancedBufferGeometry){const ht=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,_o=Math.min(ue.instanceCount,ht);Ft.renderInstances(Dt,Ln,_o)}else Ft.render(Dt,Ln)},this.compile=function(N,ne){function ue(Z,de,Fe){Z.transparent===!0&&Z.side===bl&&Z.forceSinglePass===!1?(Z.side=ks,Z.needsUpdate=!0,xo(Z,de,Fe),Z.side=Gc,Z.needsUpdate=!0,xo(Z,de,Fe),Z.side=bl):xo(Z,de,Fe)}v=F.get(N),v.init(),M.push(v),N.traverseVisible(function(Z){Z.isLight&&Z.layers.test(ne.layers)&&(v.pushLight(Z),Z.castShadow&&v.pushShadow(Z))}),v.setupLights(g.useLegacyLights),N.traverse(function(Z){const de=Z.material;if(de)if(Array.isArray(de))for(let Fe=0;Fe<de.length;Fe++){const Ye=de[Fe];ue(Ye,N,Z)}else ue(de,N,Z)}),M.pop(),v=null};let xe=null;function Pe(N){xe&&xe(N)}function ke(){Rt.stop()}function Lt(){Rt.start()}const Rt=new GJ;Rt.setAnimationLoop(Pe),typeof self<"u"&&Rt.setContext(self),this.setAnimationLoop=function(N){xe=N,Le.setAnimationLoop(N),N===null?Rt.stop():Rt.start()},Le.addEventListener("sessionstart",ke),Le.addEventListener("sessionend",Lt),this.render=function(N,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(ne),ne=Le.getCamera()),N.isScene===!0&&N.onBeforeRender(g,N,ne,C),v=F.get(N,M.length),v.init(),M.push(v),Y.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),V.setFromProjectionMatrix(Y),q=this.localClippingEnabled,G=oe.init(this.clippingPlanes,q),m=U.get(N,S.length),m.init(),S.push(m),ln(N,ne,0,g.sortObjects),m.finish(),g.sortObjects===!0&&m.sort(z,X),G===!0&&oe.beginShadows();const ue=v.state.shadowsArray;if(_e.render(ue,N,ne),G===!0&&oe.endShadows(),this.info.autoReset===!0&&this.info.reset(),Me.render(m,N),v.setupLights(g.useLegacyLights),ne.isArrayCamera){const Z=ne.cameras;for(let de=0,Fe=Z.length;de<Fe;de++){const Ye=Z[de];dr(m,N,Ye,Ye.viewport)}}else dr(m,N,ne);C!==null&&(Ae.updateMultisampleRenderTarget(C),Ae.updateRenderTargetMipmap(C)),N.isScene===!0&&N.onAfterRender(g,N,ne),Ue.resetDefaultState(),R=-1,L=null,M.pop(),M.length>0?v=M[M.length-1]:v=null,S.pop(),S.length>0?m=S[S.length-1]:m=null};function ln(N,ne,ue,Z){if(N.visible===!1)return;if(N.layers.test(ne.layers)){if(N.isGroup)ue=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(ne);else if(N.isLight)v.pushLight(N),N.castShadow&&v.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||V.intersectsSprite(N)){Z&&ae.setFromMatrixPosition(N.matrixWorld).applyMatrix4(Y);const Fe=Ve.update(N),Ye=N.material;Ye.visible&&m.push(N,Fe,Ye,ue,ae.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||V.intersectsObject(N))){N.isSkinnedMesh&&N.skeleton.frame!==pe.render.frame&&(N.skeleton.update(),N.skeleton.frame=pe.render.frame);const Fe=Ve.update(N),Ye=N.material;if(Z&&(Fe.boundingSphere===null&&Fe.computeBoundingSphere(),ae.copy(Fe.boundingSphere.center).applyMatrix4(N.matrixWorld).applyMatrix4(Y)),Array.isArray(Ye)){const $e=Fe.groups;for(let st=0,_t=$e.length;st<_t;st++){const ct=$e[st],ut=Ye[ct.materialIndex];ut&&ut.visible&&m.push(N,Fe,ut,ue,ae.z,ct)}}else Ye.visible&&m.push(N,Fe,Ye,ue,ae.z,null)}}const de=N.children;for(let Fe=0,Ye=de.length;Fe<Ye;Fe++)ln(de[Fe],ne,ue,Z)}function dr(N,ne,ue,Z){const de=N.opaque,Fe=N.transmissive,Ye=N.transparent;v.setupLightsView(ue),G===!0&&oe.setGlobalState(g.clippingPlanes,ue),Fe.length>0&&kt(de,Fe,ne,ue),Z&&me.viewport(I.copy(Z)),de.length>0&&Pn(de,ne,ue),Fe.length>0&&Pn(Fe,ne,ue),Ye.length>0&&Pn(Ye,ne,ue),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1)}function kt(N,ne,ue,Z){if(re===null){const $e=ye.isWebGL2;re=new Ol(1024,1024,{generateMipmaps:!0,type:Ne.has("EXT_color_buffer_half_float")?Fy:ph,minFilter:Hc,samples:$e&&a===!0?4:0})}const de=g.getRenderTarget();g.setRenderTarget(re),g.clear();const Fe=g.toneMapping;g.toneMapping=Pl,Pn(N,ue,Z),Ae.updateMultisampleRenderTarget(re),Ae.updateRenderTargetMipmap(re);let Ye=!1;for(let $e=0,st=ne.length;$e<st;$e++){const _t=ne[$e],ct=_t.object,ut=_t.geometry,Dt=_t.material,yn=_t.group;if(Dt.side===bl&&ct.layers.test(Z.layers)){const Ln=Dt.side;Dt.side=ks,Dt.needsUpdate=!0,Zn(ct,ue,Z,ut,Dt,yn),Dt.side=Ln,Dt.needsUpdate=!0,Ye=!0}}Ye===!0&&(Ae.updateMultisampleRenderTarget(re),Ae.updateRenderTargetMipmap(re)),g.setRenderTarget(de),g.toneMapping=Fe}function Pn(N,ne,ue){const Z=ne.isScene===!0?ne.overrideMaterial:null;for(let de=0,Fe=N.length;de<Fe;de++){const Ye=N[de],$e=Ye.object,st=Ye.geometry,_t=Z===null?Ye.material:Z,ct=Ye.group;$e.layers.test(ue.layers)&&Zn($e,ne,ue,st,_t,ct)}}function Zn(N,ne,ue,Z,de,Fe){N.onBeforeRender(g,ne,ue,Z,de,Fe),N.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),de.onBeforeRender(g,ne,ue,Z,N,Fe),de.transparent===!0&&de.side===bl&&de.forceSinglePass===!1?(de.side=ks,de.needsUpdate=!0,g.renderBufferDirect(ue,ne,Z,de,N,Fe),de.side=Gc,de.needsUpdate=!0,g.renderBufferDirect(ue,ne,Z,de,N,Fe),de.side=bl):g.renderBufferDirect(ue,ne,Z,de,N,Fe),N.onAfterRender(g,ne,ue,Z,de,Fe)}function xo(N,ne,ue){ne.isScene!==!0&&(ne=Se);const Z=le.get(N),de=v.state.lights,Fe=v.state.shadowsArray,Ye=de.state.version,$e=nt.getParameters(N,de.state,Fe,ne,ue),st=nt.getProgramCacheKey($e);let _t=Z.programs;Z.environment=N.isMeshStandardMaterial?ne.environment:null,Z.fog=ne.fog,Z.envMap=(N.isMeshStandardMaterial?De:Re).get(N.envMap||Z.environment),_t===void 0&&(N.addEventListener("dispose",zt),_t=new Map,Z.programs=_t);let ct=_t.get(st);if(ct!==void 0){if(Z.currentProgram===ct&&Z.lightsStateVersion===Ye)return nc(N,$e),ct}else $e.uniforms=nt.getUniforms(N),N.onBuild(ue,$e,g),N.onBeforeCompile($e,g),ct=nt.acquireProgram($e,st),_t.set(st,ct),Z.uniforms=$e.uniforms;const ut=Z.uniforms;(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(ut.clippingPlanes=oe.uniform),nc(N,$e),Z.needsLights=qa(N),Z.lightsStateVersion=Ye,Z.needsLights&&(ut.ambientLightColor.value=de.state.ambient,ut.lightProbe.value=de.state.probe,ut.directionalLights.value=de.state.directional,ut.directionalLightShadows.value=de.state.directionalShadow,ut.spotLights.value=de.state.spot,ut.spotLightShadows.value=de.state.spotShadow,ut.rectAreaLights.value=de.state.rectArea,ut.ltc_1.value=de.state.rectAreaLTC1,ut.ltc_2.value=de.state.rectAreaLTC2,ut.pointLights.value=de.state.point,ut.pointLightShadows.value=de.state.pointShadow,ut.hemisphereLights.value=de.state.hemi,ut.directionalShadowMap.value=de.state.directionalShadowMap,ut.directionalShadowMatrix.value=de.state.directionalShadowMatrix,ut.spotShadowMap.value=de.state.spotShadowMap,ut.spotLightMatrix.value=de.state.spotLightMatrix,ut.spotLightMap.value=de.state.spotLightMap,ut.pointShadowMap.value=de.state.pointShadowMap,ut.pointShadowMatrix.value=de.state.pointShadowMatrix);const Dt=ct.getUniforms(),yn=jb.seqWithValue(Dt.seq,ut);return Z.currentProgram=ct,Z.uniformsList=yn,ct}function nc(N,ne){const ue=le.get(N);ue.outputColorSpace=ne.outputColorSpace,ue.instancing=ne.instancing,ue.skinning=ne.skinning,ue.morphTargets=ne.morphTargets,ue.morphNormals=ne.morphNormals,ue.morphColors=ne.morphColors,ue.morphTargetsCount=ne.morphTargetsCount,ue.numClippingPlanes=ne.numClippingPlanes,ue.numIntersection=ne.numClipIntersection,ue.vertexAlphas=ne.vertexAlphas,ue.vertexTangents=ne.vertexTangents,ue.toneMapping=ne.toneMapping}function rc(N,ne,ue,Z,de){ne.isScene!==!0&&(ne=Se),Ae.resetTextureUnits();const Fe=ne.fog,Ye=Z.isMeshStandardMaterial?ne.environment:null,$e=C===null?g.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Ul,st=(Z.isMeshStandardMaterial?De:Re).get(Z.envMap||Ye),_t=Z.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,ct=!!Z.normalMap&&!!ue.attributes.tangent,ut=!!ue.morphAttributes.position,Dt=!!ue.morphAttributes.normal,yn=!!ue.morphAttributes.color,Ln=Z.toneMapped?g.toneMapping:Pl,$n=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Ft=$n!==void 0?$n.length:0,ht=le.get(Z),_o=v.state.lights;if(G===!0&&(q===!0||N!==L)){const Ot=N===L&&Z.id===R;oe.setState(Z,N,Ot)}let Gn=!1;Z.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==_o.state.version||ht.outputColorSpace!==$e||de.isInstancedMesh&&ht.instancing===!1||!de.isInstancedMesh&&ht.instancing===!0||de.isSkinnedMesh&&ht.skinning===!1||!de.isSkinnedMesh&&ht.skinning===!0||ht.envMap!==st||Z.fog===!0&&ht.fog!==Fe||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==oe.numPlanes||ht.numIntersection!==oe.numIntersection)||ht.vertexAlphas!==_t||ht.vertexTangents!==ct||ht.morphTargets!==ut||ht.morphNormals!==Dt||ht.morphColors!==yn||ht.toneMapping!==Ln||ye.isWebGL2===!0&&ht.morphTargetsCount!==Ft)&&(Gn=!0):(Gn=!0,ht.__version=Z.version);let Wn=ht.currentProgram;Gn===!0&&(Wn=xo(Z,ne,de));let Hr=!1,Vt=!1,Pt=!1;const St=Wn.getUniforms(),Kt=ht.uniforms;if(me.useProgram(Wn.program)&&(Hr=!0,Vt=!0,Pt=!0),Z.id!==R&&(R=Z.id,Vt=!0),Hr||L!==N){if(St.setValue(W,"projectionMatrix",N.projectionMatrix),ye.logarithmicDepthBuffer&&St.setValue(W,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),L!==N&&(L=N,Vt=!0,Pt=!0),Z.isShaderMaterial||Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshStandardMaterial||Z.envMap){const Ot=St.map.cameraPosition;Ot!==void 0&&Ot.setValue(W,ae.setFromMatrixPosition(N.matrixWorld))}(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial)&&St.setValue(W,"isOrthographic",N.isOrthographicCamera===!0),(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial||Z.isShadowMaterial||de.isSkinnedMesh)&&St.setValue(W,"viewMatrix",N.matrixWorldInverse)}if(de.isSkinnedMesh){St.setOptional(W,de,"bindMatrix"),St.setOptional(W,de,"bindMatrixInverse");const Ot=de.skeleton;Ot&&(ye.floatVertexTextures?(Ot.boneTexture===null&&Ot.computeBoneTexture(),St.setValue(W,"boneTexture",Ot.boneTexture,Ae),St.setValue(W,"boneTextureSize",Ot.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const on=ue.morphAttributes;if((on.position!==void 0||on.normal!==void 0||on.color!==void 0&&ye.isWebGL2===!0)&&Te.update(de,ue,Wn),(Vt||ht.receiveShadow!==de.receiveShadow)&&(ht.receiveShadow=de.receiveShadow,St.setValue(W,"receiveShadow",de.receiveShadow)),Z.isMeshGouraudMaterial&&Z.envMap!==null&&(Kt.envMap.value=st,Kt.flipEnvMap.value=st.isCubeTexture&&st.isRenderTargetTexture===!1?-1:1),Vt&&(St.setValue(W,"toneMappingExposure",g.toneMappingExposure),ht.needsLights&&Xc(Kt,Pt),Fe&&Z.fog===!0&&It.refreshFogUniforms(Kt,Fe),It.refreshMaterialUniforms(Kt,Z,j,K,re),jb.upload(W,ht.uniformsList,Kt,Ae)),Z.isShaderMaterial&&Z.uniformsNeedUpdate===!0&&(jb.upload(W,ht.uniformsList,Kt,Ae),Z.uniformsNeedUpdate=!1),Z.isSpriteMaterial&&St.setValue(W,"center",de.center),St.setValue(W,"modelViewMatrix",de.modelViewMatrix),St.setValue(W,"normalMatrix",de.normalMatrix),St.setValue(W,"modelMatrix",de.matrixWorld),Z.isShaderMaterial||Z.isRawShaderMaterial){const Ot=Z.uniformsGroups;for(let Rr=0,er=Ot.length;Rr<er;Rr++)if(ye.isWebGL2){const tr=Ot[Rr];Ge.update(tr,Wn),Ge.bind(tr,Wn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Wn}function Xc(N,ne){N.ambientLightColor.needsUpdate=ne,N.lightProbe.needsUpdate=ne,N.directionalLights.needsUpdate=ne,N.directionalLightShadows.needsUpdate=ne,N.pointLights.needsUpdate=ne,N.pointLightShadows.needsUpdate=ne,N.spotLights.needsUpdate=ne,N.spotLightShadows.needsUpdate=ne,N.rectAreaLights.needsUpdate=ne,N.hemisphereLights.needsUpdate=ne}function qa(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(N,ne,ue){le.get(N.texture).__webglTexture=ne,le.get(N.depthTexture).__webglTexture=ue;const Z=le.get(N);Z.__hasExternalTextures=!0,Z.__hasExternalTextures&&(Z.__autoAllocateDepthBuffer=ue===void 0,Z.__autoAllocateDepthBuffer||Ne.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Z.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(N,ne){const ue=le.get(N);ue.__webglFramebuffer=ne,ue.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(N,ne=0,ue=0){C=N,A=ne,w=ue;let Z=!0,de=null,Fe=!1,Ye=!1;if(N){const $e=le.get(N);$e.__useDefaultFramebuffer!==void 0?(me.bindFramebuffer(W.FRAMEBUFFER,null),Z=!1):$e.__webglFramebuffer===void 0?Ae.setupRenderTarget(N):$e.__hasExternalTextures&&Ae.rebindTextures(N,le.get(N.texture).__webglTexture,le.get(N.depthTexture).__webglTexture);const st=N.texture;(st.isData3DTexture||st.isDataArrayTexture||st.isCompressedArrayTexture)&&(Ye=!0);const _t=le.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(de=_t[ne],Fe=!0):ye.isWebGL2&&N.samples>0&&Ae.useMultisampledRTT(N)===!1?de=le.get(N).__webglMultisampledFramebuffer:de=_t,I.copy(N.viewport),T.copy(N.scissor),B=N.scissorTest}else I.copy(te).multiplyScalar(j).floor(),T.copy(O).multiplyScalar(j).floor(),B=D;if(me.bindFramebuffer(W.FRAMEBUFFER,de)&&ye.drawBuffers&&Z&&me.drawBuffers(N,de),me.viewport(I),me.scissor(T),me.setScissorTest(B),Fe){const $e=le.get(N.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+ne,$e.__webglTexture,ue)}else if(Ye){const $e=le.get(N.texture),st=ne||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,$e.__webglTexture,ue||0,st)}R=-1},this.readRenderTargetPixels=function(N,ne,ue,Z,de,Fe,Ye){if(!(N&&N.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let $e=le.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Ye!==void 0&&($e=$e[Ye]),$e){me.bindFramebuffer(W.FRAMEBUFFER,$e);try{const st=N.texture,_t=st.format,ct=st.type;if(_t!==io&&he.convert(_t)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ut=ct===Fy&&(Ne.has("EXT_color_buffer_half_float")||ye.isWebGL2&&Ne.has("EXT_color_buffer_float"));if(ct!==ph&&he.convert(ct)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ct===Wu&&(ye.isWebGL2||Ne.has("OES_texture_float")||Ne.has("WEBGL_color_buffer_float")))&&!ut){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=N.width-Z&&ue>=0&&ue<=N.height-de&&W.readPixels(ne,ue,Z,de,he.convert(_t),he.convert(ct),Fe)}finally{const st=C!==null?le.get(C).__webglFramebuffer:null;me.bindFramebuffer(W.FRAMEBUFFER,st)}}},this.copyFramebufferToTexture=function(N,ne,ue=0){const Z=Math.pow(2,-ue),de=Math.floor(ne.image.width*Z),Fe=Math.floor(ne.image.height*Z);Ae.setTexture2D(ne,0),W.copyTexSubImage2D(W.TEXTURE_2D,ue,0,0,N.x,N.y,de,Fe),me.unbindTexture()},this.copyTextureToTexture=function(N,ne,ue,Z=0){const de=ne.image.width,Fe=ne.image.height,Ye=he.convert(ue.format),$e=he.convert(ue.type);Ae.setTexture2D(ue,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,ue.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,ue.unpackAlignment),ne.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,Z,N.x,N.y,de,Fe,Ye,$e,ne.image.data):ne.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,Z,N.x,N.y,ne.mipmaps[0].width,ne.mipmaps[0].height,Ye,ne.mipmaps[0].data):W.texSubImage2D(W.TEXTURE_2D,Z,N.x,N.y,Ye,$e,ne.image),Z===0&&ue.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),me.unbindTexture()},this.copyTextureToTexture3D=function(N,ne,ue,Z,de=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Fe=N.max.x-N.min.x+1,Ye=N.max.y-N.min.y+1,$e=N.max.z-N.min.z+1,st=he.convert(Z.format),_t=he.convert(Z.type);let ct;if(Z.isData3DTexture)Ae.setTexture3D(Z,0),ct=W.TEXTURE_3D;else if(Z.isDataArrayTexture)Ae.setTexture2DArray(Z,0),ct=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,Z.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,Z.unpackAlignment);const ut=W.getParameter(W.UNPACK_ROW_LENGTH),Dt=W.getParameter(W.UNPACK_IMAGE_HEIGHT),yn=W.getParameter(W.UNPACK_SKIP_PIXELS),Ln=W.getParameter(W.UNPACK_SKIP_ROWS),$n=W.getParameter(W.UNPACK_SKIP_IMAGES),Ft=ue.isCompressedTexture?ue.mipmaps[0]:ue.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,Ft.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Ft.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,N.min.x),W.pixelStorei(W.UNPACK_SKIP_ROWS,N.min.y),W.pixelStorei(W.UNPACK_SKIP_IMAGES,N.min.z),ue.isDataTexture||ue.isData3DTexture?W.texSubImage3D(ct,de,ne.x,ne.y,ne.z,Fe,Ye,$e,st,_t,Ft.data):ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),W.compressedTexSubImage3D(ct,de,ne.x,ne.y,ne.z,Fe,Ye,$e,st,Ft.data)):W.texSubImage3D(ct,de,ne.x,ne.y,ne.z,Fe,Ye,$e,st,_t,Ft),W.pixelStorei(W.UNPACK_ROW_LENGTH,ut),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Dt),W.pixelStorei(W.UNPACK_SKIP_PIXELS,yn),W.pixelStorei(W.UNPACK_SKIP_ROWS,Ln),W.pixelStorei(W.UNPACK_SKIP_IMAGES,$n),de===0&&Z.generateMipmaps&&W.generateMipmap(ct),me.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?Ae.setTextureCube(N,0):N.isData3DTexture?Ae.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?Ae.setTexture2DArray(N,0):Ae.setTexture2D(N,0),me.unbindTexture()},this.resetState=function(){A=0,w=0,C=null,me.reset(),Ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Qt?eh:jN}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===eh?Qt:Ul}}class YJ extends nU{}YJ.prototype.isWebGL1Renderer=!0;let qJ=class QJ{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new vt(e),this.density=t}clone(){return new QJ(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}},ZJ=class $J{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new vt(e),this.near=t,this.far=r}clone(){return new $J(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},rU=class extends Mn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(n,e){return super.copy(n,e),n.background!==null&&(this.background=n.background.clone()),n.environment!==null&&(this.environment=n.environment.clone()),n.fog!==null&&(this.fog=n.fog.clone()),this.backgroundBlurriness=n.backgroundBlurriness,this.backgroundIntensity=n.backgroundIntensity,n.overrideMaterial!==null&&(this.overrideMaterial=n.overrideMaterial.clone()),this.matrixAutoUpdate=n.matrixAutoUpdate,this}toJSON(n){const e=super.toJSON(n);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(n){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=n}},XS=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=jA,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Xo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};const Ps=new se;class cf{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ps.fromBufferAttribute(this,t),Ps.applyMatrix4(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ps.fromBufferAttribute(this,t),Ps.applyNormalMatrix(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ps.fromBufferAttribute(this,t),Ps.transformDirection(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Go(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Go(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Go(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Go(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=rn(t,this.array),r=rn(r,this.array),i=rn(i,this.array),s=rn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Cn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new cf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class iU extends xi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let D0;const z_=new se,F0=new se,N0=new se,U0=new We,V_=new We,e7=new Wt,FE=new se,W_=new se,NE=new se,Ez=new We,TB=new We,wz=new We;class t7 extends Mn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",D0===void 0){D0=new $t;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new XS(t,5);D0.setIndex([0,1,2,0,2,3]),D0.setAttribute("position",new cf(r,3,0,!1)),D0.setAttribute("uv",new cf(r,2,3,!1))}this.geometry=D0,this.material=e!==void 0?e:new iU,this.center=new We(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),F0.setFromMatrixScale(this.matrixWorld),e7.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),N0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&F0.multiplyScalar(-N0.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;UE(FE.set(-.5,-.5,0),N0,o,F0,i,s),UE(W_.set(.5,-.5,0),N0,o,F0,i,s),UE(NE.set(.5,.5,0),N0,o,F0,i,s),Ez.set(0,0),TB.set(1,0),wz.set(1,1);let a=e.ray.intersectTriangle(FE,W_,NE,!1,z_);if(a===null&&(UE(W_.set(-.5,.5,0),N0,o,F0,i,s),TB.set(0,1),a=e.ray.intersectTriangle(FE,NE,W_,!1,z_),a===null))return;const l=e.ray.origin.distanceTo(z_);l<e.near||l>e.far||t.push({distance:l,point:z_.clone(),uv:lm.getInterpolation(z_,FE,W_,NE,Ez,TB,wz,new We),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function UE(n,e,t,r,i,s){U0.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(V_.x=s*U0.x-i*U0.y,V_.y=i*U0.x+s*U0.y):V_.copy(U0),n.copy(e),n.x+=V_.x,n.y+=V_.y,n.applyMatrix4(e7)}const OE=new se,bz=new se;class n7 extends Mn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){OE.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(OE);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){OE.setFromMatrixPosition(e.matrixWorld),bz.setFromMatrixPosition(this.matrixWorld);const r=OE.distanceTo(bz)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const Cz=new se,Tz=new Nn,Rz=new Nn,she=new se,Pz=new Wt,O0=new se;class sU extends Ui{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new zl),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)O0.fromBufferAttribute(t,r),this.applyBoneTransform(r,O0),this.boundingBox.expandByPoint(O0)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Vl),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)O0.fromBufferAttribute(t,r),this.applyBoneTransform(r,O0),this.boundingSphere.expandByPoint(O0)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Nn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;Tz.fromBufferAttribute(i.attributes.skinIndex,e),Rz.fromBufferAttribute(i.attributes.skinWeight,e),Cz.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=Rz.getComponent(s);if(o!==0){const a=Tz.getComponent(s);Pz.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(she.copy(Cz).applyMatrix4(Pz),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}let pR=class extends Mn{constructor(){super(),this.isBone=!0,this.type="Bone"}};class my extends Er{constructor(e=null,t=1,r=1,i,s,o,a,l,u=Nr,h=Nr,d,p){super(null,o,a,l,u,h,i,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Bz=new Wt,ohe=new Wt;let oU=class r7{constructor(e=[],t=[]){this.uuid=Xo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Wt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:ohe;Bz.multiplyMatrices(a,t[s]),Bz.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new r7(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=TJ(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new my(t,e,e,io,Wu);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new pR),this.bones.push(o),this.boneInverses.push(new Wt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}},Jm=class extends Cn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};const k0=new Wt,Lz=new Wt,kE=[],Iz=new zl,ahe=new Wt,j_=new Ui,X_=new Vl;class aU extends Ui{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Jm(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,ahe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new zl),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,k0),Iz.copy(e.boundingBox).applyMatrix4(k0),this.boundingBox.union(Iz)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Vl),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,k0),X_.copy(e.boundingSphere).applyMatrix4(k0),this.boundingSphere.union(X_)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(j_.geometry=this.geometry,j_.material=this.material,j_.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),X_.copy(this.boundingSphere),X_.applyMatrix4(r),e.ray.intersectsSphere(X_)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,k0),Lz.multiplyMatrices(r,k0),j_.matrixWorld=Lz,j_.raycast(e,kE);for(let o=0,a=kE.length;o<a;o++){const l=kE[o];l.instanceId=s,l.object=this,t.push(l)}kE.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Jm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}let bs=class extends xi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new vt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}};const Dz=new se,Fz=new se,Nz=new Wt,RB=new VS,GE=new Vl;class mh extends Mn{constructor(e=new $t,t=new bs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)Dz.fromBufferAttribute(t,i-1),Fz.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=Dz.distanceTo(Fz);e.setAttribute("lineDistance",new Ct(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),GE.copy(r.boundingSphere),GE.applyMatrix4(i),GE.radius+=s,e.ray.intersectsSphere(GE)===!1)return;Nz.copy(i).invert(),RB.copy(e.ray).applyMatrix4(Nz);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new se,h=new se,d=new se,p=new se,m=this.isLineSegments?2:1,v=r.index,S=r.attributes.position;if(v!==null){const M=Math.max(0,o.start),g=Math.min(v.count,o.start+o.count);for(let _=M,A=g-1;_<A;_+=m){const w=v.getX(_),C=v.getX(_+1);if(u.fromBufferAttribute(S,w),h.fromBufferAttribute(S,C),RB.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(p);R<e.near||R>e.far||t.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const M=Math.max(0,o.start),g=Math.min(S.count,o.start+o.count);for(let _=M,A=g-1;_<A;_+=m){if(u.fromBufferAttribute(S,_),h.fromBufferAttribute(S,_+1),RB.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(p);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}}const Uz=new se,Oz=new se;class Wl extends mh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)Uz.fromBufferAttribute(t,i),Oz.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+Uz.distanceTo(Oz);e.setAttribute("lineDistance",new Ct(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lU extends mh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}let mR=class extends xi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new vt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}};const kz=new Wt,dD=new VS,HE=new Vl,zE=new se;class cU extends Mn{constructor(e=new $t,t=new mR){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),HE.copy(r.boundingSphere),HE.applyMatrix4(i),HE.radius+=s,e.ray.intersectsSphere(HE)===!1)return;kz.copy(i).invert(),dD.copy(e.ray).applyMatrix4(kz);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,h=r.attributes.position;if(u!==null){const d=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let m=d,v=p;m<v;m++){const S=u.getX(m);zE.fromBufferAttribute(h,S),Gz(zE,S,l,i,e,t,this)}}else{const d=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let m=d,v=p;m<v;m++)zE.fromBufferAttribute(h,m),Gz(zE,m,l,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=r.length;i<s;i++){const o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}}function Gz(n,e,t,r,i,s,o){const a=dD.distanceSqToPoint(n);if(a<t){const l=new se;dD.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class lhe extends Er{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:vr,this.magFilter=s!==void 0?s:vr,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class che extends Er{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=Nr,this.minFilter=Nr,this.generateMipmaps=!1,this.needsUpdate=!0}}class uU extends Er{constructor(e,t,r,i,s,o,a,l,u,h,d,p){super(null,o,a,l,u,h,i,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class uhe extends uU{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=$i}}class hhe extends Er{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class jl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const h=r[i],d=r[i+1]-h,p=(o-h)/d;return(i+p)/(s-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),o=this.getPoint(i),a=t||(s.isVector2?new We:new se);return a.copy(o).sub(s).normalize(),a}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new se,i=[],s=[],o=[],a=new se,l=new Wt;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new se)}s[0]=new se,o[0]=new se;let u=Number.MAX_VALUE;const h=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=u&&(u=h,r.set(1,0,0)),d<=u&&(u=d,r.set(0,1,0)),p<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Or(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(Or(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}let gR=class extends jl{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new We,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*h-m*d+this.aX,u=p*d+m*h+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}};class i7 extends gR{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function hU(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,d){let p=(o-s)/u-(a-s)/(u+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const VE=new se,PB=new hU,BB=new hU,LB=new hU;class s7 extends jl{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new se){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=i[(a-1)%s]:(VE.subVectors(i[0],i[1]).add(i[0]),u=VE);const d=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(VE.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=VE),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(d),m),S=Math.pow(d.distanceToSquared(p),m),M=Math.pow(p.distanceToSquared(h),m);S<1e-4&&(S=1),v<1e-4&&(v=S),M<1e-4&&(M=S),PB.initNonuniformCatmullRom(u.x,d.x,p.x,h.x,v,S,M),BB.initNonuniformCatmullRom(u.y,d.y,p.y,h.y,v,S,M),LB.initNonuniformCatmullRom(u.z,d.z,p.z,h.z,v,S,M)}else this.curveType==="catmullrom"&&(PB.initCatmullRom(u.x,d.x,p.x,h.x,this.tension),BB.initCatmullRom(u.y,d.y,p.y,h.y,this.tension),LB.initCatmullRom(u.z,d.z,p.z,h.z,this.tension));return r.set(PB.calc(l),BB.calc(l),LB.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new se().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Hz(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function dhe(n,e){const t=1-n;return t*t*e}function fhe(n,e){return 2*(1-n)*n*e}function phe(n,e){return n*n*e}function q1(n,e,t,r){return dhe(n,e)+fhe(n,t)+phe(n,r)}function mhe(n,e){const t=1-n;return t*t*t*e}function ghe(n,e){const t=1-n;return 3*t*t*n*e}function vhe(n,e){return 3*(1-n)*n*n*e}function yhe(n,e){return n*n*n*e}function Q1(n,e,t,r,i){return mhe(n,e)+ghe(n,t)+vhe(n,r)+yhe(n,i)}class dU extends jl{constructor(e=new We,t=new We,r=new We,i=new We){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new We){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Q1(e,i.x,s.x,o.x,a.x),Q1(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class o7 extends jl{constructor(e=new se,t=new se,r=new se,i=new se){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new se){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Q1(e,i.x,s.x,o.x,a.x),Q1(e,i.y,s.y,o.y,a.y),Q1(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}let vR=class extends jl{constructor(e=new We,t=new We){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new We){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new We){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}};class a7 extends jl{constructor(e=new se,t=new se){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new se){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new se){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fU extends jl{constructor(e=new We,t=new We,r=new We){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new We){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(q1(e,i.x,s.x,o.x),q1(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pU extends jl{constructor(e=new se,t=new se,r=new se){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new se){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(q1(e,i.x,s.x,o.x),q1(e,i.y,s.y,o.y),q1(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mU extends jl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new We){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],h=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(Hz(a,l.x,u.x,h.x,d.x),Hz(a,l.y,u.y,h.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new We().fromArray(i))}return this}}var gU=Object.freeze({__proto__:null,ArcCurve:i7,CatmullRomCurve3:s7,CubicBezierCurve:dU,CubicBezierCurve3:o7,EllipseCurve:gR,LineCurve:vR,LineCurve3:a7,QuadraticBezierCurve:fU,QuadraticBezierCurve3:pU,SplineCurve:mU});class l7 extends jl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new vR(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new gU[i.type]().fromJSON(i))}return this}}let JA=class extends l7{constructor(e){super(),this.type="Path",this.currentPoint=new We,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new vR(this.currentPoint.clone(),new We(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new fU(this.currentPoint.clone(),new We(e,t),new We(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new dU(this.currentPoint.clone(),new We(e,t),new We(r,i),new We(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new mU(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new gR(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},yR=class c7 extends $t{constructor(e=[new We(0,-.5),new We(.5,0),new We(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Or(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/t,d=new se,p=new We,m=new se,v=new se,S=new se;let M=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:M=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-M,m.z=g*0,S.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:M=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-M,m.z=g*0,v.copy(m),m.x+=S.x,m.y+=S.y,m.z+=S.z,m.normalize(),l.push(m.x,m.y,m.z),S.copy(v)}for(let _=0;_<=t;_++){const A=r+_*h*i,w=Math.sin(A),C=Math.cos(A);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*w,d.y=e[R].y,d.z=e[R].x*C,o.push(d.x,d.y,d.z),p.x=_/t,p.y=R/(e.length-1),a.push(p.x,p.y);const L=l[3*R+0]*w,I=l[3*R+1],T=l[3*R+0]*C;u.push(L,I,T)}}for(let _=0;_<t;_++)for(let A=0;A<e.length-1;A++){const w=A+_*e.length,C=w,R=w+e.length,L=w+e.length+1,I=w+1;s.push(C,R,I),s.push(L,I,R)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("uv",new Ct(a,2)),this.setAttribute("normal",new Ct(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c7(e.points,e.segments,e.phiStart,e.phiLength)}},vU=class u7 extends yR{constructor(e=1,t=1,r=4,i=8){const s=new JA;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new u7(e.radius,e.length,e.capSegments,e.radialSegments)}},yU=class h7 extends $t{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new se,h=new We;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=r+d/t*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(a,3)),this.setAttribute("uv",new Ct(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h7(e.radius,e.segments,e.thetaStart,e.thetaLength)}},JS=class d7 extends $t{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const h=[],d=[],p=[],m=[];let v=0;const S=[],M=r/2;let g=0;_(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(h),this.setAttribute("position",new Ct(d,3)),this.setAttribute("normal",new Ct(p,3)),this.setAttribute("uv",new Ct(m,2));function _(){const w=new se,C=new se;let R=0;const L=(t-e)/r;for(let I=0;I<=s;I++){const T=[],B=I/s,H=B*(t-e)+e;for(let K=0;K<=i;K++){const j=K/i,z=j*l+a,X=Math.sin(z),te=Math.cos(z);C.x=H*X,C.y=-B*r+M,C.z=H*te,d.push(C.x,C.y,C.z),w.set(X,L,te).normalize(),p.push(w.x,w.y,w.z),m.push(j,1-B),T.push(v++)}S.push(T)}for(let I=0;I<i;I++)for(let T=0;T<s;T++){const B=S[T][I],H=S[T+1][I],K=S[T+1][I+1],j=S[T][I+1];h.push(B,H,j),h.push(H,K,j),R+=6}u.addGroup(g,R,0),g+=R}function A(w){const C=v,R=new We,L=new se;let I=0;const T=w===!0?e:t,B=w===!0?1:-1;for(let K=1;K<=i;K++)d.push(0,M*B,0),p.push(0,B,0),m.push(.5,.5),v++;const H=v;for(let K=0;K<=i;K++){const j=K/i*l+a,z=Math.cos(j),X=Math.sin(j);L.x=T*X,L.y=M*B,L.z=T*z,d.push(L.x,L.y,L.z),p.push(0,B,0),R.x=z*.5+.5,R.y=X*.5*B+.5,m.push(R.x,R.y),v++}for(let K=0;K<i;K++){const j=C+K,z=H+K;w===!0?h.push(z,z+1,j):h.push(z+1,z,j),I+=3}u.addGroup(g,I,w===!0?1:2),g+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new d7(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},xU=class f7 extends JS{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new f7(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};class bh extends $t{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),h(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const A=new se,w=new se,C=new se;for(let R=0;R<t.length;R+=3)m(t[R+0],A),m(t[R+1],w),m(t[R+2],C),l(A,w,C,_)}function l(_,A,w,C){const R=C+1,L=[];for(let I=0;I<=R;I++){L[I]=[];const T=_.clone().lerp(w,I/R),B=A.clone().lerp(w,I/R),H=R-I;for(let K=0;K<=H;K++)K===0&&I===R?L[I][K]=T:L[I][K]=T.clone().lerp(B,K/H)}for(let I=0;I<R;I++)for(let T=0;T<2*(R-I)-1;T++){const B=Math.floor(T/2);T%2===0?(p(L[I][B+1]),p(L[I+1][B]),p(L[I][B])):(p(L[I][B+1]),p(L[I+1][B+1]),p(L[I+1][B]))}}function u(_){const A=new se;for(let w=0;w<s.length;w+=3)A.x=s[w+0],A.y=s[w+1],A.z=s[w+2],A.normalize().multiplyScalar(_),s[w+0]=A.x,s[w+1]=A.y,s[w+2]=A.z}function h(){const _=new se;for(let A=0;A<s.length;A+=3){_.x=s[A+0],_.y=s[A+1],_.z=s[A+2];const w=M(_)/2/Math.PI+.5,C=g(_)/Math.PI+.5;o.push(w,1-C)}v(),d()}function d(){for(let _=0;_<o.length;_+=6){const A=o[_+0],w=o[_+2],C=o[_+4],R=Math.max(A,w,C),L=Math.min(A,w,C);R>.9&&L<.1&&(A<.2&&(o[_+0]+=1),w<.2&&(o[_+2]+=1),C<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,A){const w=_*3;A.x=e[w+0],A.y=e[w+1],A.z=e[w+2]}function v(){const _=new se,A=new se,w=new se,C=new se,R=new We,L=new We,I=new We;for(let T=0,B=0;T<s.length;T+=9,B+=6){_.set(s[T+0],s[T+1],s[T+2]),A.set(s[T+3],s[T+4],s[T+5]),w.set(s[T+6],s[T+7],s[T+8]),R.set(o[B+0],o[B+1]),L.set(o[B+2],o[B+3]),I.set(o[B+4],o[B+5]),C.copy(_).add(A).add(w).divideScalar(3);const H=M(C);S(R,B+0,_,H),S(L,B+2,A,H),S(I,B+4,w,H)}}function S(_,A,w,C){C<0&&_.x===1&&(o[A]=_.x-1),w.x===0&&w.z===0&&(o[A]=C/2/Math.PI+.5)}function M(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bh(e.vertices,e.indices,e.radius,e.details)}}let _U=class p7 extends bh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new p7(e.radius,e.detail)}};const WE=new se,jE=new se,IB=new se,XE=new lm;class m7 extends $t{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),i=Math.cos(Cm*t),s=e.getIndex(),o=e.getAttribute("position"),a=s?s.count:o.count,l=[0,0,0],u=["a","b","c"],h=new Array(3),d={},p=[];for(let m=0;m<a;m+=3){s?(l[0]=s.getX(m),l[1]=s.getX(m+1),l[2]=s.getX(m+2)):(l[0]=m,l[1]=m+1,l[2]=m+2);const{a:v,b:S,c:M}=XE;if(v.fromBufferAttribute(o,l[0]),S.fromBufferAttribute(o,l[1]),M.fromBufferAttribute(o,l[2]),XE.getNormal(IB),h[0]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,h[1]=`${Math.round(S.x*r)},${Math.round(S.y*r)},${Math.round(S.z*r)}`,h[2]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let g=0;g<3;g++){const _=(g+1)%3,A=h[g],w=h[_],C=XE[u[g]],R=XE[u[_]],L=`${A}_${w}`,I=`${w}_${A}`;I in d&&d[I]?(IB.dot(d[I].normal)<=i&&(p.push(C.x,C.y,C.z),p.push(R.x,R.y,R.z)),d[I]=null):L in d||(d[L]={index0:l[g],index1:l[_],normal:IB.clone()})}}for(const m in d)if(d[m]){const{index0:v,index1:S}=d[m];WE.fromBufferAttribute(o,v),jE.fromBufferAttribute(o,S),p.push(WE.x,WE.y,WE.z),p.push(jE.x,jE.y,jE.z)}this.setAttribute("position",new Ct(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Rm=class extends JA{constructor(e){super(e),this.uuid=Xo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new JA().fromJSON(i))}return this}};const xhe={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=g7(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,h,d,p,m;if(r&&(s=Ehe(n,e,s,t)),n.length>80*t){a=u=n[0],l=h=n[1];for(let v=t;v<i;v+=t)d=n[v],p=n[v+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>h&&(h=p);m=Math.max(u-a,h-l),m=m!==0?32767/m:0}return KA(s,o,t,a,l,m,0),o}};function g7(n,e,t,r,i){let s,o;if(i===Fhe(n,e,t,r)>0)for(s=e;s<t;s+=r)o=zz(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=zz(s,n[s],n[s+1],o);return o&&xR(o,o.next)&&(qA(o),o=o.next),o}function Km(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(xR(t,t.next)||xr(t.prev,t,t.next)===0)){if(qA(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function KA(n,e,t,r,i,s,o){if(!n)return;!o&&s&&Rhe(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?Ahe(n,r,i,s):_he(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),qA(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=She(Km(n),e,t),KA(n,e,t,r,i,s,2)):o===2&&Mhe(n,e,t,r,i,s):KA(Km(n),e,t,r,i,s,1);break}}}function _he(n){const e=n.prev,t=n,r=n.next;if(xr(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,h=i<s?i<o?i:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let v=r.next;for(;v!==e;){if(v.x>=h&&v.x<=p&&v.y>=d&&v.y<=m&&Bv(i,a,s,l,o,u,v.x,v.y)&&xr(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Ahe(n,e,t,r){const i=n.prev,s=n,o=n.next;if(xr(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,h=i.y,d=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,v=h<d?h<p?h:p:d<p?d:p,S=a>l?a>u?a:u:l>u?l:u,M=h>d?h>p?h:p:d>p?d:p,g=fD(m,v,e,t,r),_=fD(S,M,e,t,r);let A=n.prevZ,w=n.nextZ;for(;A&&A.z>=g&&w&&w.z<=_;){if(A.x>=m&&A.x<=S&&A.y>=v&&A.y<=M&&A!==i&&A!==o&&Bv(a,h,l,d,u,p,A.x,A.y)&&xr(A.prev,A,A.next)>=0||(A=A.prevZ,w.x>=m&&w.x<=S&&w.y>=v&&w.y<=M&&w!==i&&w!==o&&Bv(a,h,l,d,u,p,w.x,w.y)&&xr(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;A&&A.z>=g;){if(A.x>=m&&A.x<=S&&A.y>=v&&A.y<=M&&A!==i&&A!==o&&Bv(a,h,l,d,u,p,A.x,A.y)&&xr(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;w&&w.z<=_;){if(w.x>=m&&w.x<=S&&w.y>=v&&w.y<=M&&w!==i&&w!==o&&Bv(a,h,l,d,u,p,w.x,w.y)&&xr(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function She(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!xR(i,s)&&v7(i,r,r.next,s)&&YA(i,s)&&YA(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),qA(r),qA(r.next),r=n=s),r=r.next}while(r!==n);return Km(r)}function Mhe(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Lhe(o,a)){let l=y7(o,a);o=Km(o,o.next),l=Km(l,l.next),KA(o,e,t,r,i,s,0),KA(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function Ehe(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=g7(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(Bhe(u));for(i.sort(whe),s=0;s<i.length;s++)t=bhe(i[s],t);return t}function whe(n,e){return n.x-e.x}function bhe(n,e){const t=Che(n,e);if(!t)return e;const r=y7(t,n);return Km(r,r.next),Km(t,t.next)}function Che(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let h=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Bv(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),YA(t,n)&&(d<h||d===h&&(t.x>i.x||t.x===i.x&&The(i,t)))&&(i=t,h=d)),t=t.next;while(t!==a);return i}function The(n,e){return xr(n.prev,n,e.prev)<0&&xr(e.next,n,n.next)<0}function Rhe(n,e,t,r){let i=n;do i.z===0&&(i.z=fD(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Phe(i)}function Phe(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function fD(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Bhe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Bv(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function Lhe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Ihe(n,e)&&(YA(n,e)&&YA(e,n)&&Dhe(n,e)&&(xr(n.prev,n,e.prev)||xr(n,e.prev,e))||xR(n,e)&&xr(n.prev,n,n.next)>0&&xr(e.prev,e,e.next)>0)}function xr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function xR(n,e){return n.x===e.x&&n.y===e.y}function v7(n,e,t,r){const i=KE(xr(n,e,t)),s=KE(xr(n,e,r)),o=KE(xr(t,r,n)),a=KE(xr(t,r,e));return!!(i!==s&&o!==a||i===0&&JE(n,t,e)||s===0&&JE(n,r,e)||o===0&&JE(t,n,r)||a===0&&JE(t,e,r))}function JE(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function KE(n){return n>0?1:n<0?-1:0}function Ihe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&v7(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function YA(n,e){return xr(n.prev,n,n.next)<0?xr(n,e,n.next)>=0&&xr(n,n.prev,e)>=0:xr(n,e,n.prev)<0||xr(n,n.next,e)<0}function Dhe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function y7(n,e){const t=new pD(n.i,n.x,n.y),r=new pD(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function zz(n,e,t,r){const i=new pD(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function qA(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function pD(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fhe(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Dc{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Dc.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];Vz(e),Wz(r,e);let o=e.length;t.forEach(Vz);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,Wz(r,t[l]);const a=xhe.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function Vz(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Wz(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}let AU=class x7 extends $t{constructor(e=new Rm([new We(.5,.5),new We(-.5,.5),new We(-.5,-.5),new We(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ct(i,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:Nhe;let A,w=!1,C,R,L,I;g&&(A=g.getSpacedPoints(h),w=!0,p=!1,C=g.computeFrenetFrames(h,!1),R=new se,L=new se,I=new se),p||(M=0,m=0,v=0,S=0);const T=a.extractPoints(u);let B=T.shape;const H=T.holes;if(!Dc.isClockWise(B)){B=B.reverse();for(let me=0,pe=H.length;me<pe;me++){const le=H[me];Dc.isClockWise(le)&&(H[me]=le.reverse())}}const K=Dc.triangulateShape(B,H),j=B;for(let me=0,pe=H.length;me<pe;me++){const le=H[me];B=B.concat(le)}function z(me,pe,le){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().addScaledVector(pe,le)}const X=B.length,te=K.length;function O(me,pe,le){let Ae,Re,De;const Je=me.x-pe.x,Qe=me.y-pe.y,Ve=le.x-me.x,nt=le.y-me.y,It=Je*Je+Qe*Qe,U=Je*nt-Qe*Ve;if(Math.abs(U)>Number.EPSILON){const F=Math.sqrt(It),oe=Math.sqrt(Ve*Ve+nt*nt),_e=pe.x-Qe/F,Me=pe.y+Je/F,Te=le.x-nt/oe,Ke=le.y+Ve/oe,Be=((Te-_e)*nt-(Ke-Me)*Ve)/(Je*nt-Qe*Ve);Ae=_e+Je*Be-me.x,Re=Me+Qe*Be-me.y;const he=Ae*Ae+Re*Re;if(he<=2)return new We(Ae,Re);De=Math.sqrt(he/2)}else{let F=!1;Je>Number.EPSILON?Ve>Number.EPSILON&&(F=!0):Je<-Number.EPSILON?Ve<-Number.EPSILON&&(F=!0):Math.sign(Qe)===Math.sign(nt)&&(F=!0),F?(Ae=-Qe,Re=Je,De=Math.sqrt(It)):(Ae=Je,Re=Qe,De=Math.sqrt(It/2))}return new We(Ae/De,Re/De)}const D=[];for(let me=0,pe=j.length,le=pe-1,Ae=me+1;me<pe;me++,le++,Ae++)le===pe&&(le=0),Ae===pe&&(Ae=0),D[me]=O(j[me],j[le],j[Ae]);const V=[];let G,q=D.concat();for(let me=0,pe=H.length;me<pe;me++){const le=H[me];G=[];for(let Ae=0,Re=le.length,De=Re-1,Je=Ae+1;Ae<Re;Ae++,De++,Je++)De===Re&&(De=0),Je===Re&&(Je=0),G[Ae]=O(le[Ae],le[De],le[Je]);V.push(G),q=q.concat(G)}for(let me=0;me<M;me++){const pe=me/M,le=m*Math.cos(pe*Math.PI/2),Ae=v*Math.sin(pe*Math.PI/2)+S;for(let Re=0,De=j.length;Re<De;Re++){const Je=z(j[Re],D[Re],Ae);ve(Je.x,Je.y,-le)}for(let Re=0,De=H.length;Re<De;Re++){const Je=H[Re];G=V[Re];for(let Qe=0,Ve=Je.length;Qe<Ve;Qe++){const nt=z(Je[Qe],G[Qe],Ae);ve(nt.x,nt.y,-le)}}}const re=v+S;for(let me=0;me<X;me++){const pe=p?z(B[me],q[me],re):B[me];w?(L.copy(C.normals[0]).multiplyScalar(pe.x),R.copy(C.binormals[0]).multiplyScalar(pe.y),I.copy(A[0]).add(L).add(R),ve(I.x,I.y,I.z)):ve(pe.x,pe.y,0)}for(let me=1;me<=h;me++)for(let pe=0;pe<X;pe++){const le=p?z(B[pe],q[pe],re):B[pe];w?(L.copy(C.normals[me]).multiplyScalar(le.x),R.copy(C.binormals[me]).multiplyScalar(le.y),I.copy(A[me]).add(L).add(R),ve(I.x,I.y,I.z)):ve(le.x,le.y,d/h*me)}for(let me=M-1;me>=0;me--){const pe=me/M,le=m*Math.cos(pe*Math.PI/2),Ae=v*Math.sin(pe*Math.PI/2)+S;for(let Re=0,De=j.length;Re<De;Re++){const Je=z(j[Re],D[Re],Ae);ve(Je.x,Je.y,d+le)}for(let Re=0,De=H.length;Re<De;Re++){const Je=H[Re];G=V[Re];for(let Qe=0,Ve=Je.length;Qe<Ve;Qe++){const nt=z(Je[Qe],G[Qe],Ae);w?ve(nt.x,nt.y+A[h-1].y,A[h-1].x+le):ve(nt.x,nt.y,d+le)}}}Y(),ae();function Y(){const me=i.length/3;if(p){let pe=0,le=X*pe;for(let Ae=0;Ae<te;Ae++){const Re=K[Ae];W(Re[2]+le,Re[1]+le,Re[0]+le)}pe=h+M*2,le=X*pe;for(let Ae=0;Ae<te;Ae++){const Re=K[Ae];W(Re[0]+le,Re[1]+le,Re[2]+le)}}else{for(let pe=0;pe<te;pe++){const le=K[pe];W(le[2],le[1],le[0])}for(let pe=0;pe<te;pe++){const le=K[pe];W(le[0]+X*h,le[1]+X*h,le[2]+X*h)}}r.addGroup(me,i.length/3-me,0)}function ae(){const me=i.length/3;let pe=0;Se(j,pe),pe+=j.length;for(let le=0,Ae=H.length;le<Ae;le++){const Re=H[le];Se(Re,pe),pe+=Re.length}r.addGroup(me,i.length/3-me,1)}function Se(me,pe){let le=me.length;for(;--le>=0;){const Ae=le;let Re=le-1;Re<0&&(Re=me.length-1);for(let De=0,Je=h+M*2;De<Je;De++){const Qe=X*De,Ve=X*(De+1),nt=pe+Ae+Qe,It=pe+Re+Qe,U=pe+Re+Ve,F=pe+Ae+Ve;Xe(nt,It,U,F)}}}function ve(me,pe,le){l.push(me),l.push(pe),l.push(le)}function W(me,pe,le){Ne(me),Ne(pe),Ne(le);const Ae=i.length/3,Re=_.generateTopUV(r,i,Ae-3,Ae-2,Ae-1);ye(Re[0]),ye(Re[1]),ye(Re[2])}function Xe(me,pe,le,Ae){Ne(me),Ne(pe),Ne(Ae),Ne(pe),Ne(le),Ne(Ae);const Re=i.length/3,De=_.generateSideWallUV(r,i,Re-6,Re-3,Re-2,Re-1);ye(De[0]),ye(De[1]),ye(De[3]),ye(De[1]),ye(De[2]),ye(De[3])}function Ne(me){i.push(l[me*3+0]),i.push(l[me*3+1]),i.push(l[me*3+2])}function ye(me){s.push(me.x),s.push(me.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return Uhe(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new gU[i.type]().fromJSON(i)),new x7(r,e.options)}};const Nhe={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],h=e[i*3+1];return[new We(s,o),new We(a,l),new We(u,h)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],h=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],S=e[s*3],M=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new We(o,1-l),new We(u,1-d),new We(p,1-v),new We(S,1-g)]:[new We(a,1-l),new We(h,1-d),new We(m,1-v),new We(M,1-g)]}};function Uhe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}let SU=class _7 extends bh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _7(e.radius,e.detail)}},_R=class A7 extends bh{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new A7(e.radius,e.detail)}},MU=class S7 extends $t{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],h=[];let d=e;const p=(t-e)/i,m=new se,v=new We;for(let S=0;S<=i;S++){for(let M=0;M<=r;M++){const g=s+M/r*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y)}d+=p}for(let S=0;S<i;S++){const M=S*(r+1);for(let g=0;g<r;g++){const _=g+M,A=_,w=_+r+1,C=_+r+2,R=_+1;a.push(A,w,R),a.push(w,C,R)}}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S7(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},EU=class M7 extends $t{constructor(e=new Rm([new We(0,.5),new We(-.5,-.5),new We(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ct(i,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2));function u(h){const d=i.length/3,p=h.extractPoints(t);let m=p.shape;const v=p.holes;Dc.isClockWise(m)===!1&&(m=m.reverse());for(let M=0,g=v.length;M<g;M++){const _=v[M];Dc.isClockWise(_)===!0&&(v[M]=_.reverse())}const S=Dc.triangulateShape(m,v);for(let M=0,g=v.length;M<g;M++){const _=v[M];m=m.concat(_)}for(let M=0,g=m.length;M<g;M++){const _=m[M];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let M=0,g=S.length;M<g;M++){const _=S[M],A=_[0]+d,w=_[1]+d,C=_[2]+d;r.push(A,w,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Ohe(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new M7(r,e.curveSegments)}};function Ohe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}let AR=class E7 extends $t{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const h=[],d=new se,p=new se,m=[],v=[],S=[],M=[];for(let g=0;g<=r;g++){const _=[],A=g/r;let w=0;g===0&&o===0?w=.5/t:g===r&&l===Math.PI&&(w=-.5/t);for(let C=0;C<=t;C++){const R=C/t;d.x=-e*Math.cos(i+R*s)*Math.sin(o+A*a),d.y=e*Math.cos(o+A*a),d.z=e*Math.sin(i+R*s)*Math.sin(o+A*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),S.push(p.x,p.y,p.z),M.push(R+w,1-A),_.push(u++)}h.push(_)}for(let g=0;g<r;g++)for(let _=0;_<t;_++){const A=h[g][_+1],w=h[g][_],C=h[g+1][_],R=h[g+1][_+1];(g!==0||o>0)&&m.push(A,w,R),(g!==r-1||l<Math.PI)&&m.push(w,C,R)}this.setIndex(m),this.setAttribute("position",new Ct(v,3)),this.setAttribute("normal",new Ct(S,3)),this.setAttribute("uv",new Ct(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new E7(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},wU=class w7 extends bh{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new w7(e.radius,e.detail)}},bU=class b7 extends $t{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],h=new se,d=new se,p=new se;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const S=v/i*s,M=m/r*Math.PI*2;d.x=(e+t*Math.cos(M))*Math.cos(S),d.y=(e+t*Math.cos(M))*Math.sin(S),d.z=t*Math.sin(M),a.push(d.x,d.y,d.z),h.x=e*Math.cos(S),h.y=e*Math.sin(S),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(v/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const S=(i+1)*m+v-1,M=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,_=(i+1)*m+v;o.push(S,M,_),o.push(M,g,_)}this.setIndex(o),this.setAttribute("position",new Ct(a,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new b7(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},CU=class C7 extends $t{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],h=[],d=new se,p=new se,m=new se,v=new se,S=new se,M=new se,g=new se;for(let A=0;A<=r;++A){const w=A/r*s*Math.PI*2;_(w,s,o,e,m),_(w+.01,s,o,e,v),M.subVectors(v,m),g.addVectors(v,m),S.crossVectors(M,g),g.crossVectors(S,M),S.normalize(),g.normalize();for(let C=0;C<=i;++C){const R=C/i*Math.PI*2,L=-t*Math.cos(R),I=t*Math.sin(R);d.x=m.x+(L*g.x+I*S.x),d.y=m.y+(L*g.y+I*S.y),d.z=m.z+(L*g.z+I*S.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),u.push(p.x,p.y,p.z),h.push(A/r),h.push(C/i)}}for(let A=1;A<=r;A++)for(let w=1;w<=i;w++){const C=(i+1)*(A-1)+(w-1),R=(i+1)*A+(w-1),L=(i+1)*A+w,I=(i+1)*(A-1)+w;a.push(C,R,I),a.push(R,L,I)}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(u,3)),this.setAttribute("uv",new Ct(h,2));function _(A,w,C,R,L){const I=Math.cos(A),T=Math.sin(A),B=C/w*A,H=Math.cos(B);L.x=R*(2+H)*.5*I,L.y=R*(2+H)*T*.5,L.z=R*Math.sin(B)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C7(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},TU=class T7 extends $t{constructor(e=new pU(new se(-1,-1,0),new se(-1,1,0),new se(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new se,l=new se,u=new We;let h=new se;const d=[],p=[],m=[],v=[];S(),this.setIndex(v),this.setAttribute("position",new Ct(d,3)),this.setAttribute("normal",new Ct(p,3)),this.setAttribute("uv",new Ct(m,2));function S(){for(let A=0;A<t;A++)M(A);M(s===!1?t:0),_(),g()}function M(A){h=e.getPointAt(A/t,h);const w=o.normals[A],C=o.binormals[A];for(let R=0;R<=i;R++){const L=R/i*Math.PI*2,I=Math.sin(L),T=-Math.cos(L);l.x=T*w.x+I*C.x,l.y=T*w.y+I*C.y,l.z=T*w.z+I*C.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let A=1;A<=t;A++)for(let w=1;w<=i;w++){const C=(i+1)*(A-1)+(w-1),R=(i+1)*A+(w-1),L=(i+1)*A+w,I=(i+1)*(A-1)+w;v.push(C,R,I),v.push(R,L,I)}}function _(){for(let A=0;A<=t;A++)for(let w=0;w<=i;w++)u.x=A/t,u.y=w/i,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new T7(new gU[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}};class R7 extends $t{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new se,s=new se;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const d=l[u],p=d.start,m=d.count;for(let v=p,S=p+m;v<S;v+=3)for(let M=0;M<3;M++){const g=a.getX(v+M),_=a.getX(v+(M+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),jz(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,d=3*a+(u+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),jz(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function jz(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var Xz=Object.freeze({__proto__:null,BoxGeometry:bf,CapsuleGeometry:vU,CircleGeometry:yU,ConeGeometry:xU,CylinderGeometry:JS,DodecahedronGeometry:_U,EdgesGeometry:m7,ExtrudeGeometry:AU,IcosahedronGeometry:SU,LatheGeometry:yR,OctahedronGeometry:_R,PlaneGeometry:dR,PolyhedronGeometry:bh,RingGeometry:MU,ShapeGeometry:EU,SphereGeometry:AR,TetrahedronGeometry:wU,TorusGeometry:bU,TorusKnotGeometry:CU,TubeGeometry:TU,WireframeGeometry:R7});class P7 extends xi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new vt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class B7 extends zc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}let KS=class extends xi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};class Ka extends KS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new We(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Or(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new vt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new vt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new vt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class L7 extends xi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new vt(16777215),this.specular=new vt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class RU extends xi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class I7 extends xi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class D7 extends xi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new vt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=zS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class F7 extends xi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=wf,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class N7 extends bs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Pa(n,e,t){return PU(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function cm(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function PU(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function U7(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function mD(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function BU(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function khe(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),d=[],p=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*i;if(!(v<t||v>=r)){d.push(u.times[m]);for(let S=0;S<h;++S)p.push(u.values[m*h+S])}}d.length!==0&&(u.times=cm(d,u.times.constructor),u.values=cm(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Ghe(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let S;if(s<=a.times[0]){const g=h,_=d-h;S=Pa(a.values,g,_)}else if(s>=a.times[v]){const g=v*d+h,_=g+d-h;S=Pa(a.values,g,_)}else{const g=a.createInterpolant(),_=h,A=d-h;g.evaluate(s),S=Pa(g.resultBuffer,_,A)}l==="quaternion"&&new ns().fromArray(S).normalize().conjugate().toArray(S);const M=u.times.length;for(let g=0;g<M;++g){const _=g*m+p;if(l==="quaternion")ns.multiplyQuaternionsFlat(u.values,_,S,0,u.values,_);else{const A=m-p*2;for(let w=0;w<A;++w)u.values[_+w]-=S[w]}}}return n.blendMode=VN,n}const Hhe={arraySlice:Pa,convertArray:cm,isTypedArray:PU,getKeyframeOrder:U7,sortedArray:mD,flattenJSON:BU,subclip:khe,makeClipAdditive:Ghe};let fx=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}};class O7 extends fx{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:sm,endingEnd:sm}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case om:s=e,a=2*t-r;break;case WA:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case om:o=e,l=2*r-t;break;case WA:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),S=v*v,M=S*v,g=-p*M+2*p*S-p*v,_=(1+p)*M+(-1.5-2*p)*S+(-.5+p)*v+1,A=(-1-m)*M+(1.5+m)*S+.5*v,w=m*M-m*S;for(let C=0;C!==a;++C)s[C]=g*o[h+C]+_*o[u+C]+A*o[l+C]+w*o[d+C];return s}}class LU extends fx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(r-t)/(i-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[u+p]*d+o[l+p]*h;return s}}class k7 extends fx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Xl{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=cm(t,this.TimeBufferType),this.values=cm(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:cm(e.times,Array),values:cm(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new k7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new LU(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new O7(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ny:t=this.InterpolantFactoryMethodDiscrete;break;case Xm:t=this.InterpolantFactoryMethodLinear;break;case Vb:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ny;case this.InterpolantFactoryMethodLinear:return Xm;case this.InterpolantFactoryMethodSmooth:return Vb}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Pa(r,s,o),this.values=Pa(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&PU(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Pa(this.times),t=Pa(this.values),r=this.getValueSize(),i=this.getInterpolation()===Vb,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let v=0;v!==r;++v){const S=t[d+v];if(S!==t[p+v]||S!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=Pa(e,0,o),this.values=Pa(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Pa(this.times,0),t=Pa(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Xl.prototype.TimeBufferType=Float32Array;Xl.prototype.ValueBufferType=Float32Array;Xl.prototype.DefaultInterpolation=Xm;let pg=class extends Xl{};pg.prototype.ValueTypeName="bool";pg.prototype.ValueBufferType=Array;pg.prototype.DefaultInterpolation=Ny;pg.prototype.InterpolantFactoryMethodLinear=void 0;pg.prototype.InterpolantFactoryMethodSmooth=void 0;class IU extends Xl{}IU.prototype.ValueTypeName="color";let Ym=class extends Xl{};Ym.prototype.ValueTypeName="number";class G7 extends fx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let h=u+a;u!==h;u+=4)ns.slerpFlat(s,0,o,u-a,o,u,l);return s}}class uf extends Xl{InterpolantFactoryMethodLinear(e){return new G7(this.times,this.values,this.getValueSize(),e)}}uf.prototype.ValueTypeName="quaternion";uf.prototype.DefaultInterpolation=Xm;uf.prototype.InterpolantFactoryMethodSmooth=void 0;let mg=class extends Xl{};mg.prototype.ValueTypeName="string";mg.prototype.ValueBufferType=Array;mg.prototype.DefaultInterpolation=Ny;mg.prototype.InterpolantFactoryMethodLinear=void 0;mg.prototype.InterpolantFactoryMethodSmooth=void 0;let qm=class extends Xl{};qm.prototype.ValueTypeName="vector";class ky{constructor(e,t=-1,r,i=cR){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Xo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(Vhe(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Xl.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=U7(l);l=mD(l,1,h),u=mD(u,1,h),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Ym(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const d=h[1];let p=i[d];p||(i[d]=p=[]),p.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,d,p,m,v){if(p.length!==0){const S=[],M=[];BU(p,S,M,m),S.length!==0&&v.push(new h(d,S,M))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const d=u[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const p={};let m;for(m=0;m<d.length;m++)if(d[m].morphTargets)for(let v=0;v<d[m].morphTargets.length;v++)p[d[m].morphTargets[v]]=-1;for(const v in p){const S=[],M=[];for(let g=0;g!==d[m].morphTargets.length;++g){const _=d[m];S.push(_.time),M.push(_.morphTarget===v?1:0)}i.push(new Ym(".morphTargetInfluence["+v+"]",S,M))}l=p.length*o}else{const p=".bones["+t[h].name+"]";r(qm,p+".position",d,"pos",i),r(uf,p+".quaternion",d,"rot",i),r(qm,p+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zhe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ym;case"vector":case"vector2":case"vector3":case"vector4":return qm;case"color":return IU;case"quaternion":return uf;case"bool":case"boolean":return pg;case"string":return mg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Vhe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=zhe(n.type);if(n.times===void 0){const t=[],r=[];BU(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Qm={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class DU{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=u.length;d<p;d+=2){const m=u[d],v=u[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return v}return null}}}const Lv=new DU;let Ws=class{constructor(e){this.manager=e!==void 0?e:Lv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const bu={};let Whe=class extends Error{constructor(e,t){super(e),this.response=t}},qo=class extends Ws{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Qm.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(bu[e]!==void 0){bu[e].push({onLoad:t,onProgress:r,onError:i});return}bu[e]=[],bu[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=bu[e],d=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let S=0;const M=new ReadableStream({start(g){_();function _(){d.read().then(({done:A,value:w})=>{if(A)g.close();else{S+=w.byteLength;const C=new ProgressEvent("progress",{lengthComputable:v,loaded:S,total:m});for(let R=0,L=h.length;R<L;R++){const I=h[R];I.onProgress&&I.onProgress(C)}g.enqueue(w),_()}})}}});return new Response(M)}else throw new Whe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,p=new TextDecoder(d);return u.arrayBuffer().then(m=>p.decode(m))}}}).then(u=>{Qm.add(e,u);const h=bu[e];delete bu[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const h=bu[e];if(h===void 0)throw this.manager.itemError(e),u;delete bu[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};class jhe extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new qo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=ky.parse(e[r]);t.push(i)}return t}}class Xhe extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new uU,l=new qo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=vr),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+S]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=vr),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}let QA=class extends Ws{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Qm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=XA("img");function l(){h(),Qm.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(d){h(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}};class Jhe extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=new jS,o=new QA(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class Khe extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new my,a=new qo(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:$i,o.wrapT=u.wrapT!==void 0?u.wrapT:$i,o.magFilter=u.magFilter!==void 0?u.magFilter:vr,o.minFilter=u.minFilter!==void 0?u.minFilter:vr,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Hc),u.mipmapCount===1&&(o.minFilter=vr),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u))},r,i),o}}class H7 extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=new Er,o=new QA(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}let Cf=class extends Mn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new vt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}};class z7 extends Cf{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new vt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const DB=new Wt,Jz=new se,Kz=new se;class FU{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new We(512,512),this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new hR,this._frameExtents=new We(1,1),this._viewportCount=1,this._viewports=[new Nn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;Jz.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jz),Kz.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Kz),t.updateMatrixWorld(),DB.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DB),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(DB)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}let Yhe=class extends FU{constructor(){super(new mi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Uy*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}};class NU extends Cf{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Yhe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Yz=new Wt,J_=new se,FB=new se;class qhe extends FU{constructor(){super(new mi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new We(4,2),this._viewportCount=6,this._viewports=[new Nn(2,1,1,1),new Nn(0,1,1,1),new Nn(3,1,1,1),new Nn(1,1,1,1),new Nn(3,0,1,1),new Nn(1,0,1,1)],this._cubeDirections=[new se(1,0,0),new se(-1,0,0),new se(0,0,1),new se(0,0,-1),new se(0,1,0),new se(0,-1,0)],this._cubeUps=[new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,1,0),new se(0,0,1),new se(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),J_.setFromMatrixPosition(e.matrixWorld),r.position.copy(J_),FB.copy(r.position),FB.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(FB),r.updateMatrixWorld(),i.makeTranslation(-J_.x,-J_.y,-J_.z),Yz.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yz)}}class UU extends Cf{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new qhe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Qhe extends FU{constructor(){super(new hx(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class OU extends Cf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.shadow=new Qhe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class V7 extends Cf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class W7 extends Cf{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class j7{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new se)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}let SR=class extends Cf{constructor(e=new j7,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}},X7=class J7 extends Ws{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new qo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=J7.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new vt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new vt().setHex(o.value);break;case"v2":i.uniforms[s].value=new We().fromArray(o.value);break;case"v3":i.uniforms[s].value=new se().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Nn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new hn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Wt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new We().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new We().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:P7,SpriteMaterial:iU,RawShaderMaterial:B7,ShaderMaterial:zc,PointsMaterial:mR,MeshPhysicalMaterial:Ka,MeshStandardMaterial:KS,MeshPhongMaterial:L7,MeshToonMaterial:RU,MeshNormalMaterial:I7,MeshLambertMaterial:D7,MeshDepthMaterial:eU,MeshDistanceMaterial:tU,MeshBasicMaterial:Ho,MeshMatcapMaterial:F7,LineDashedMaterial:N7,LineBasicMaterial:bs,Material:xi};return new t[e]}};class Gd{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class K7 extends $t{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Y7 extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new qo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,m){if(t[m]!==void 0)return t[m];const v=p.interleavedBuffers[m],S=s(p,v.buffer),M=Rv(v.type,S),g=new XS(M,v.stride);return g.uuid=v.uuid,t[m]=g,g}function s(p,m){if(r[m]!==void 0)return r[m];const v=p.arrayBuffers[m],S=new Uint32Array(v).buffer;return r[m]=S,S}const o=e.isInstancedBufferGeometry?new K7:new $t,a=e.data.index;if(a!==void 0){const p=Rv(a.type,a.array);o.setIndex(new Cn(p,1))}const l=e.data.attributes;for(const p in l){const m=l[p];let v;if(m.isInterleavedBufferAttribute){const S=i(e.data,m.data);v=new cf(S,m.itemSize,m.offset,m.normalized)}else{const S=Rv(m.type,m.array),M=m.isInstancedBufferAttribute?Jm:Cn;v=new M(S,m.itemSize,m.normalized)}m.name!==void 0&&(v.name=m.name),m.usage!==void 0&&v.setUsage(m.usage),m.updateRange!==void 0&&(v.updateRange.offset=m.updateRange.offset,v.updateRange.count=m.updateRange.count),o.setAttribute(p,v)}const u=e.data.morphAttributes;if(u)for(const p in u){const m=u[p],v=[];for(let S=0,M=m.length;S<M;S++){const g=m[S];let _;if(g.isInterleavedBufferAttribute){const A=i(e.data,g.data);_=new cf(A,g.itemSize,g.offset,g.normalized)}else{const A=Rv(g.type,g.array);_=new Cn(A,g.itemSize,g.normalized)}g.name!==void 0&&(_.name=g.name),v.push(_)}o.morphAttributes[p]=v}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let p=0,m=h.length;p!==m;++p){const v=h[p];o.addGroup(v.start,v.count,v.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const p=new se;d.center!==void 0&&p.fromArray(d.center),o.boundingSphere=new Vl(p,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Zhe extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?Gd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new qo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?Gd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new qo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Rm().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new oU().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new Y7;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in Xz?a=Xz[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new X7;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=ky.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(h)}else return l.data?{data:Rv(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new DU(t);s=new QA(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const m=[];for(let v=0,S=p.length;v<S;v++){const M=p[v],g=a(M);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new my(g.data,g.width,g.height)))}i[d.uuid]=new am(m)}else{const m=a(d.url);i[d.uuid]=new am(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Rv(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new QA(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],v=await s(m);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new my(v.data,v.width,v.height)))}r[l.uuid]=new am(h)}else{const h=await s(l.url);r[l.uuid]=new am(h)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let h;Array.isArray(u)?(h=new jS,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new my:h=new Er,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,$he)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],qz),h.wrapT=r(a.wrap[1],qz)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,Qz)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,Qz)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,S=p.length;v<S;v++){const M=p[v];r[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),m.push(r[M])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function u(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let h,d;switch(e.type){case"Scene":o=new rU,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new vt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new ZJ(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new qJ(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new mi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new hx(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new V7(e.color,e.intensity);break;case"DirectionalLight":o=new OU(e.color,e.intensity);break;case"PointLight":o=new UU(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new W7(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new NU(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new z7(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new SR().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new sU(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new Ui(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new aU(h,d,p),o.instanceMatrix=new Jm(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Jm(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new n7;break;case"Line":o=new mh(a(e.geometry),l(e.material));break;case"LineLoop":o=new lU(a(e.geometry),l(e.material));break;case"LineSegments":o=new Wl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new cU(a(e.geometry),l(e.material));break;case"Sprite":o=new t7(l(e.material));break;case"Group":o=new ju;break;case"Bone":o=new pR;break;default:o=new Mn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],S=o.getObjectByProperty("uuid",v.object);S!==void 0&&o.addLevel(S,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const $he={UVMapping:aR,CubeReflectionMapping:of,CubeRefractionMapping:af,EquirectangularReflectionMapping:HA,EquirectangularRefractionMapping:zA,CubeUVReflectionMapping:ux},qz={RepeatWrapping:lf,ClampToEdgeWrapping:$i,MirroredRepeatWrapping:Dy},Qz={NearestFilter:Nr,NearestMipmapNearestFilter:VA,NearestMipmapLinearFilter:fy,LinearFilter:vr,LinearMipmapNearestFilter:lR,LinearMipmapLinearFilter:Hc};class q7 extends Ws{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Qm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Qm.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let YE;class kU{static getContext(){return YE===void 0&&(YE=new(window.AudioContext||window.webkitAudioContext)),YE}static setContext(e){YE=e}}class ede extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new qo(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);kU.getContext().decodeAudioData(u,function(h){t(h)},a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class tde extends SR{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new vt().set(e),s=new vt().set(t),o=new se(i.r,i.g,i.b),a=new se(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class nde extends SR{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new vt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Zz=new Wt,$z=new Wt,_p=new Wt;class rde{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new mi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new mi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,_p.copy(e.projectionMatrix);const r=t.eyeSep/2,i=r*t.near/t.focus,s=t.near*Math.tan(Cm*t.fov*.5)/t.zoom;let o,a;$z.elements[12]=-r,Zz.elements[12]=r,o=-s*t.aspect+i,a=s*t.aspect+i,_p.elements[0]=2*t.near/(a-o),_p.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(_p),o=-s*t.aspect-i,a=s*t.aspect-i,_p.elements[0]=2*t.near/(a-o),_p.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(_p)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply($z),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Zz)}}class GU{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=e4(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=e4();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function e4(){return(typeof performance>"u"?Date:performance).now()}const Ap=new se,t4=new ns,ide=new se,Sp=new se;class sde extends Mn{constructor(){super(),this.type="AudioListener",this.context=kU.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new GU}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ap,t4,ide),Sp.set(0,0,-1).applyQuaternion(t4),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ap.x,i),t.positionY.linearRampToValueAtTime(Ap.y,i),t.positionZ.linearRampToValueAtTime(Ap.z,i),t.forwardX.linearRampToValueAtTime(Sp.x,i),t.forwardY.linearRampToValueAtTime(Sp.y,i),t.forwardZ.linearRampToValueAtTime(Sp.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Ap.x,Ap.y,Ap.z),t.setOrientation(Sp.x,Sp.y,Sp.z,r.x,r.y,r.z)}}class Q7 extends Mn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Mp=new se,n4=new ns,ode=new se,Ep=new se;class ade extends Q7{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Mp,n4,ode),Ep.set(0,0,1).applyQuaternion(n4);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Mp.x,r),t.positionY.linearRampToValueAtTime(Mp.y,r),t.positionZ.linearRampToValueAtTime(Mp.z,r),t.orientationX.linearRampToValueAtTime(Ep.x,r),t.orientationY.linearRampToValueAtTime(Ep.y,r),t.orientationZ.linearRampToValueAtTime(Ep.z,r)}else t.setPosition(Mp.x,Mp.y,Mp.z),t.setOrientation(Ep.x,Ep.y,Ep.z)}}class lde{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class Z7{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){ns.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;ns.multiplyQuaternionsFlat(e,o,e,t,e,r),ns.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const HU="\\[\\]\\.:\\/",cde=new RegExp("["+HU+"]","g"),zU="[^"+HU+"]",ude="[^"+HU.replace("\\.","")+"]",hde=/((?:WC+[\/:])*)/.source.replace("WC",zU),dde=/(WCOD+)?/.source.replace("WCOD",ude),fde=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",zU),pde=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",zU),mde=new RegExp("^"+hde+dde+fde+pde+"$"),gde=["material","materials","bones","map"];class vde{constructor(e,t,r){const i=r||An.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class An{constructor(e,t,r){this.path=t,this.parsedPath=r||An.parseTrackName(t),this.node=An.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new An.Composite(e,t,r):new An(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(cde,"")}static parseTrackName(e){const t=mde.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);gde.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=An.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}An.Composite=vde;An.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};An.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};An.prototype.GetterByBindingType=[An.prototype._getValue_direct,An.prototype._getValue_array,An.prototype._getValue_arrayElement,An.prototype._getValue_toArray];An.prototype.SetterByBindingTypeAndVersioning=[[An.prototype._setValue_direct,An.prototype._setValue_direct_setNeedsUpdate,An.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[An.prototype._setValue_array,An.prototype._setValue_array_setNeedsUpdate,An.prototype._setValue_array_setMatrixWorldNeedsUpdate],[An.prototype._setValue_arrayElement,An.prototype._setValue_arrayElement_setNeedsUpdate,An.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[An.prototype._setValue_fromArray,An.prototype._setValue_fromArray_setNeedsUpdate,An.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class yde{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Xo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let S=0,M=o;S!==M;++S)s[S].push(new An(p,r[S],i[S]))}else if(v<u){a=e[v];const S=--u,M=e[S];t[M.uuid]=v,e[v]=M,t[m]=S,e[S]=p;for(let g=0,_=o;g!==_;++g){const A=s[g],w=A[S];let C=A[v];A[v]=w,C===void 0&&(C=new An(p,r[g],i[g])),A[S]=C}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[u]=d,e[d]=l;for(let m=0,v=i;m!==v;++m){const S=r[m],M=S[d],g=S[h];S[h]=M,S[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],v=--o,S=e[v];t[m.uuid]=d,e[d]=m,t[S.uuid]=p,e[p]=S,e.pop();for(let M=0,g=i;M!==g;++M){const _=r[M],A=_[p],w=_[v];_[d]=A,_[p]=w,_.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let v=0,S=i;v!==S;++v){const M=r[v];M[d]=M[p],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,d=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const v=l[p];d[p]=new An(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class $7{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:sm,endingEnd:sm};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=zN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case VN:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case cR:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===SJ;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===AJ){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=om,i.endingEnd=om):(e?i.endingStart=this.zeroSlopeAtStart?om:sm:i.endingStart=WA,t?i.endingEnd=this.zeroSlopeAtEnd?om:sm:i.endingEnd=WA)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const xde=new Float32Array(1);class eK extends wh{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let d=0;d!==s;++d){const p=i[d],m=p.name;let v=h[m];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const S=t&&t._propertyBindings[d].binding.parsedPath;v=new Z7(An.create(r,m,S),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new LU(new Float32Array(2),new Float32Array(2),1,xde),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?ky.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=cR),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new $7(this,o,t,r);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?ky.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class VU{constructor(e){this.value=e}clone(){return new VU(this.value.clone===void 0?this.value:this.value.clone())}}let _de=0;class Ade extends wh{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_de++}),this.name="",this.usage=jA,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class Sde extends XS{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Mde{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class tK{constructor(e,t,r=0,i=1/0){this.ray=new VS(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Tm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return gD(e,this,r,t),r.sort(r4),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)gD(e[i],this,r,t);return r.sort(r4),r}}function r4(n,e){return n.distance-e.distance}function gD(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)gD(i[s],e,t,!0)}}class Ede{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Or(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class wde{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const i4=new We;class bde{constructor(e=new We(1/0,1/0),t=new We(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=i4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,i4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const s4=new se,qE=new se;class Cde{constructor(e=new se,t=new se){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){s4.subVectors(e,this.start),qE.subVectors(this.end,this.start);const r=qE.dot(qE);let i=qE.dot(s4)/r;return t&&(i=Or(i,0,1)),i}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const o4=new se;class Tde extends Mn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new $t,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new Ct(i,3));const s=new bs({fog:!1,toneMapped:!1});this.cone=new Wl(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),o4.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(o4),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $h=new se,QE=new Wt,NB=new Wt;class Rde extends Wl{constructor(e){const t=nK(e),r=new $t,i=[],s=[],o=new vt(0,0,1),a=new vt(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Ct(i,3)),r.setAttribute("color",new Ct(s,3));const l=new bs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");NB.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(QE.multiplyMatrices(NB,a.matrixWorld),$h.setFromMatrixPosition(QE),i.setXYZ(o,$h.x,$h.y,$h.z),QE.multiplyMatrices(NB,a.parent.matrixWorld),$h.setFromMatrixPosition(QE),i.setXYZ(o+1,$h.x,$h.y,$h.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function nK(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,nK(n.children[t]));return e}class Pde extends Ui{constructor(e,t,r){const i=new AR(t,4,2),s=new Ho({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Bde=new se,a4=new vt,l4=new vt;class Lde extends Mn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new _R(t);i.rotateY(Math.PI*.5),this.material=new Ho({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Cn(o,3)),this.add(new Ui(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");a4.copy(this.light.color),l4.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?a4:l4;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Bde.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Ide extends Wl{constructor(e=10,t=10,r=4473924,i=8947848){r=new vt(r),i=new vt(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const S=p===s?r:i;S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3}const h=new $t;h.setAttribute("position",new Ct(l,3)),h.setAttribute("color",new Ct(u,3));const d=new bs({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Dde extends Wl{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new vt(s),o=new vt(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const S=d&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let d=0;d<r;d++){const p=d&1?s:o,m=e-e/r*d;for(let v=0;v<i;v++){let S=v/i*(Math.PI*2),M=Math.sin(S)*m,g=Math.cos(S)*m;a.push(M,0,g),l.push(p.r,p.g,p.b),S=(v+1)/i*(Math.PI*2),M=Math.sin(S)*m,g=Math.cos(S)*m,a.push(M,0,g),l.push(p.r,p.g,p.b)}}const u=new $t;u.setAttribute("position",new Ct(a,3)),u.setAttribute("color",new Ct(l,3));const h=new bs({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const c4=new se,ZE=new se,u4=new se;class Fde extends Mn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new $t;i.setAttribute("position",new Ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new bs({fog:!1,toneMapped:!1});this.lightPlane=new mh(i,s),this.add(this.lightPlane),i=new $t,i.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new mh(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),c4.setFromMatrixPosition(this.light.matrixWorld),ZE.setFromMatrixPosition(this.light.target.matrixWorld),u4.subVectors(ZE,c4),this.lightPlane.lookAt(ZE),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ZE),this.targetLine.scale.z=u4.length()}}const $E=new se,Lr=new WS;class Nde extends Wl{constructor(e){const t=new $t,r=new bs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,S){l(v),l(S)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new Ct(i,3)),t.setAttribute("color",new Ct(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new vt(16755200),h=new vt(16711680),d=new vt(43775),p=new vt(16777215),m=new vt(3355443);this.setColors(u,h,d,p,m)}setColors(e,t,r,i,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,r.r,r.g,r.b),o.setXYZ(33,r.r,r.g,r.b),o.setXYZ(34,r.r,r.g,r.b),o.setXYZ(35,r.r,r.g,r.b),o.setXYZ(36,r.r,r.g,r.b),o.setXYZ(37,r.r,r.g,r.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Lr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vr("c",t,e,Lr,0,0,-1),Vr("t",t,e,Lr,0,0,1),Vr("n1",t,e,Lr,-r,-i,-1),Vr("n2",t,e,Lr,r,-i,-1),Vr("n3",t,e,Lr,-r,i,-1),Vr("n4",t,e,Lr,r,i,-1),Vr("f1",t,e,Lr,-r,-i,1),Vr("f2",t,e,Lr,r,-i,1),Vr("f3",t,e,Lr,-r,i,1),Vr("f4",t,e,Lr,r,i,1),Vr("u1",t,e,Lr,r*.7,i*1.1,-1),Vr("u2",t,e,Lr,-r*.7,i*1.1,-1),Vr("u3",t,e,Lr,0,i*2,-1),Vr("cf1",t,e,Lr,-r,0,1),Vr("cf2",t,e,Lr,r,0,1),Vr("cf3",t,e,Lr,0,-i,1),Vr("cf4",t,e,Lr,0,i,1),Vr("cn1",t,e,Lr,-r,0,-1),Vr("cn2",t,e,Lr,r,0,-1),Vr("cn3",t,e,Lr,0,-i,-1),Vr("cn4",t,e,Lr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vr(n,e,t,r,i,s,o){$E.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],$E.x,$E.y,$E.z)}}const ew=new zl;class Ude extends Wl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new $t;s.setIndex(new Cn(r,1)),s.setAttribute("position",new Cn(i,3)),super(s,new bs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&ew.setFromObject(this.object),ew.isEmpty())return;const t=ew.min,r=ew.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ode extends Wl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new $t;s.setIndex(new Cn(r,1)),s.setAttribute("position",new Ct(i,3)),super(s,new bs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class kde extends mh{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new $t;o.setAttribute("position",new Ct(s,3)),o.computeBoundingSphere(),super(o,new bs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new $t;l.setAttribute("position",new Ct(a,3)),l.computeBoundingSphere(),this.add(new Ui(l,new Ho({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const h4=new se;let tw,UB;class Gde extends Mn{constructor(e=new se(0,0,1),t=new se(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",tw===void 0&&(tw=new $t,tw.setAttribute("position",new Ct([0,0,0,0,1,0],3)),UB=new JS(0,.5,1,5,1),UB.translate(0,-.5,0)),this.position.copy(t),this.line=new mh(tw,new bs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ui(UB,new Ho({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{h4.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(h4,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Hde extends Wl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new $t;i.setAttribute("position",new Ct(t,3)),i.setAttribute("color",new Ct(r,3));const s=new bs({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new vt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class zde{constructor(){this.type="ShapePath",this.color=new vt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new JA,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const _=[];for(let A=0,w=g.length;A<w;A++){const C=g[A],R=new Rm;R.curves=C.curves,_.push(R)}return _}function r(g,_){const A=_.length;let w=!1;for(let C=A-1,R=0;R<A;C=R++){let L=_[C],I=_[R],T=I.x-L.x,B=I.y-L.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(L=_[R],T=-T,I=_[C],B=-B),g.y<L.y||g.y>I.y)continue;if(g.y===L.y){if(g.x===L.x)return!0}else{const H=B*(g.x-L.x)-T*(g.y-L.y);if(H===0)return!0;if(H<0)continue;w=!w}}else{if(g.y!==L.y)continue;if(I.x<=g.x&&g.x<=L.x||L.x<=g.x&&g.x<=I.x)return!0}}return w}const i=Dc.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Rm,l.curves=a.curves,u.push(l),u;let h=!i(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],v=0,S;p[v]=void 0,m[v]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],S=a.getPoints(),o=i(S),o=e?!o:o,o?(!h&&p[v]&&v++,p[v]={s:new Rm,p:S},p[v].s.curves=a.curves,h&&v++,m[v]=[]):m[v].push({h:a,p:S[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,_=0;for(let A=0,w=p.length;A<w;A++)d[A]=[];for(let A=0,w=p.length;A<w;A++){const C=m[A];for(let R=0;R<C.length;R++){const L=C[R];let I=!0;for(let T=0;T<p.length;T++)r(L.p,p[T].p)&&(A!==T&&_++,I?(I=!1,d[T].push(L)):g=!0);I&&d[A].push(L)}}_>0&&g===!1&&(m=d)}let M;for(let g=0,_=p.length;g<_;g++){l=p[g].s,u.push(l),M=m[g];for(let A=0,w=M.length;A<w;A++)l.holes.push(M[A].h)}return u}}class Vde extends bf{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class Wde extends vU{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class jde extends yU{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class Xde extends xU{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class Jde extends JS{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class Kde extends _U{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class Yde extends AU{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class qde extends SU{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class Qde extends yR{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class Zde extends _R{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class $de extends dR{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class efe extends bh{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class tfe extends MU{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class nfe extends EU{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class rfe extends AR{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class ife extends wU{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class sfe extends bU{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class ofe extends CU{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class afe extends TU{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:HS}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=HS);const lfe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:GN,AddEquation:Zp,AddOperation:nJ,AdditiveAnimationBlendMode:VN,AdditiveBlending:DI,AlphaFormat:hJ,AlwaysDepth:YX,AlwaysStencilFunc:CJ,AmbientLight:V7,AmbientLightProbe:nde,AnimationAction:$7,AnimationClip:ky,AnimationLoader:jhe,AnimationMixer:eK,AnimationObjectGroup:yde,AnimationUtils:Hhe,ArcCurve:i7,ArrayCamera:JJ,ArrowHelper:Gde,Audio:Q7,AudioAnalyser:lde,AudioContext:kU,AudioListener:sde,AudioLoader:ede,AxesHelper:Hde,BackSide:ks,BasicDepthPacking:EJ,BasicShadowMap:FX,Bone:pR,BooleanKeyframeTrack:pg,Box2:bde,Box3:zl,Box3Helper:Ode,BoxBufferGeometry:Vde,BoxGeometry:bf,BoxHelper:Ude,BufferAttribute:Cn,BufferGeometry:$t,BufferGeometryLoader:Y7,ByteType:oJ,Cache:Qm,Camera:WS,CameraHelper:Nde,CanvasTexture:hhe,CapsuleBufferGeometry:Wde,CapsuleGeometry:vU,CatmullRomCurve3:s7,CineonToneMapping:iJ,CircleBufferGeometry:jde,CircleGeometry:yU,ClampToEdgeWrapping:$i,Clock:GU,Color:vt,ColorKeyframeTrack:IU,ColorManagement:Ea,CompressedArrayTexture:uhe,CompressedTexture:uU,CompressedTextureLoader:Xhe,ConeBufferGeometry:Xde,ConeGeometry:xU,CubeCamera:OJ,CubeReflectionMapping:of,CubeRefractionMapping:af,CubeTexture:jS,CubeTextureLoader:Jhe,CubeUVReflectionMapping:ux,CubicBezierCurve:dU,CubicBezierCurve3:o7,CubicInterpolant:O7,CullFaceBack:II,CullFaceFront:DX,CullFaceFrontBack:dse,CullFaceNone:IX,Curve:jl,CurvePath:l7,CustomBlending:NX,CustomToneMapping:sJ,CylinderBufferGeometry:Jde,CylinderGeometry:JS,Cylindrical:wde,Data3DTexture:YN,DataArrayTexture:uR,DataTexture:my,DataTextureLoader:Khe,DataUtils:_oe,DecrementStencilOp:Ase,DecrementWrapStencilOp:Mse,DefaultLoadingManager:Lv,DepthFormat:Od,DepthStencilFormat:jm,DepthTexture:KJ,DirectionalLight:OU,DirectionalLightHelper:Fde,DiscreteInterpolant:k7,DisplayP3ColorSpace:XN,DodecahedronBufferGeometry:Kde,DodecahedronGeometry:_U,DoubleSide:bl,DstAlphaFactor:VX,DstColorFactor:jX,DynamicCopyUsage:Ose,DynamicDrawUsage:Lse,DynamicReadUsage:Fse,EdgesGeometry:m7,EllipseCurve:gR,EqualDepth:QX,EqualStencilFunc:Cse,EquirectangularReflectionMapping:HA,EquirectangularRefractionMapping:zA,Euler:qN,EventDispatcher:wh,ExtrudeBufferGeometry:Yde,ExtrudeGeometry:AU,FileLoader:qo,Float16BufferAttribute:boe,Float32BufferAttribute:Ct,Float64BufferAttribute:Coe,FloatType:Wu,Fog:ZJ,FogExp2:qJ,FramebufferTexture:che,FrontSide:Gc,Frustum:hR,GLBufferAttribute:Mde,GLSL1:Gse,GLSL3:lD,GreaterDepth:$X,GreaterEqualDepth:ZX,GreaterEqualStencilFunc:Bse,GreaterStencilFunc:Rse,GridHelper:Ide,Group:ju,HalfFloatType:Fy,HemisphereLight:z7,HemisphereLightHelper:Lde,HemisphereLightProbe:tde,IcosahedronBufferGeometry:qde,IcosahedronGeometry:SU,ImageBitmapLoader:q7,ImageLoader:QA,ImageUtils:KN,IncrementStencilOp:_se,IncrementWrapStencilOp:Sse,InstancedBufferAttribute:Jm,InstancedBufferGeometry:K7,InstancedInterleavedBuffer:Sde,InstancedMesh:aU,Int16BufferAttribute:Eoe,Int32BufferAttribute:woe,Int8BufferAttribute:Aoe,IntType:lJ,InterleavedBuffer:XS,InterleavedBufferAttribute:cf,Interpolant:fx,InterpolateDiscrete:Ny,InterpolateLinear:Xm,InterpolateSmooth:Vb,InvertStencilOp:Ese,KeepStencilOp:Wb,KeyframeTrack:Xl,LOD:n7,LatheBufferGeometry:Qde,LatheGeometry:yR,Layers:Tm,LessDepth:qX,LessEqualDepth:zC,LessEqualStencilFunc:Tse,LessStencilFunc:bse,Light:Cf,LightProbe:SR,Line:mh,Line3:Cde,LineBasicMaterial:bs,LineCurve:vR,LineCurve3:a7,LineDashedMaterial:N7,LineLoop:lU,LineSegments:Wl,LinearEncoding:jN,LinearFilter:vr,LinearInterpolant:LU,LinearMipMapLinearFilter:vse,LinearMipMapNearestFilter:gse,LinearMipmapLinearFilter:Hc,LinearMipmapNearestFilter:lR,LinearSRGBColorSpace:Ul,LinearToneMapping:kN,Loader:Ws,LoaderUtils:Gd,LoadingManager:DU,LoopOnce:AJ,LoopPingPong:SJ,LoopRepeat:zN,LuminanceAlphaFormat:fJ,LuminanceFormat:dJ,MOUSE:use,Material:xi,MaterialLoader:X7,MathUtils:PJ,Matrix3:hn,Matrix4:Wt,MaxEquation:OI,Mesh:Ui,MeshBasicMaterial:Ho,MeshDepthMaterial:eU,MeshDistanceMaterial:tU,MeshLambertMaterial:D7,MeshMatcapMaterial:F7,MeshNormalMaterial:I7,MeshPhongMaterial:L7,MeshPhysicalMaterial:Ka,MeshStandardMaterial:KS,MeshToonMaterial:RU,MinEquation:UI,MirroredRepeatWrapping:Dy,MixOperation:tJ,MultiplyBlending:NI,MultiplyOperation:zS,NearestFilter:Nr,NearestMipMapLinearFilter:mse,NearestMipMapNearestFilter:pse,NearestMipmapLinearFilter:fy,NearestMipmapNearestFilter:VA,NeverDepth:KX,NeverStencilFunc:wse,NoBlending:$u,NoColorSpace:kd,NoToneMapping:Pl,NormalAnimationBlendMode:cR,NormalBlending:wm,NotEqualDepth:eJ,NotEqualStencilFunc:Pse,NumberKeyframeTrack:Ym,Object3D:Mn,ObjectLoader:Zhe,ObjectSpaceNormalMap:bJ,OctahedronBufferGeometry:Zde,OctahedronGeometry:_R,OneFactor:GX,OneMinusDstAlphaFactor:WX,OneMinusDstColorFactor:XX,OneMinusSrcAlphaFactor:ON,OneMinusSrcColorFactor:zX,OrthographicCamera:hx,PCFShadowMap:oR,PCFSoftShadowMap:J1,PMREMGenerator:uD,Path:JA,PerspectiveCamera:mi,Plane:dd,PlaneBufferGeometry:$de,PlaneGeometry:dR,PlaneHelper:kde,PointLight:UU,PointLightHelper:Pde,Points:cU,PointsMaterial:mR,PolarGridHelper:Dde,PolyhedronBufferGeometry:efe,PolyhedronGeometry:bh,PositionalAudio:ade,PropertyBinding:An,PropertyMixer:Z7,QuadraticBezierCurve:fU,QuadraticBezierCurve3:pU,Quaternion:ns,QuaternionKeyframeTrack:uf,QuaternionLinearInterpolant:G7,RED_GREEN_RGTC2_Format:oD,RED_RGTC1_Format:_J,REVISION:HS,RGBADepthPacking:wJ,RGBAFormat:io,RGBAIntegerFormat:yJ,RGBA_ASTC_10x10_Format:nD,RGBA_ASTC_10x5_Format:$I,RGBA_ASTC_10x6_Format:eD,RGBA_ASTC_10x8_Format:tD,RGBA_ASTC_12x10_Format:rD,RGBA_ASTC_12x12_Format:iD,RGBA_ASTC_4x4_Format:jI,RGBA_ASTC_5x4_Format:XI,RGBA_ASTC_5x5_Format:JI,RGBA_ASTC_6x5_Format:KI,RGBA_ASTC_6x6_Format:YI,RGBA_ASTC_8x5_Format:qI,RGBA_ASTC_8x6_Format:QI,RGBA_ASTC_8x8_Format:ZI,RGBA_BPTC_Format:zb,RGBA_ETC2_EAC_Format:WI,RGBA_PVRTC_2BPPV1_Format:zI,RGBA_PVRTC_4BPPV1_Format:HI,RGBA_S3TC_DXT1_Format:kb,RGBA_S3TC_DXT3_Format:Gb,RGBA_S3TC_DXT5_Format:Hb,RGB_ETC1_Format:xJ,RGB_ETC2_Format:VI,RGB_PVRTC_2BPPV1_Format:GI,RGB_PVRTC_4BPPV1_Format:kI,RGB_S3TC_DXT1_Format:Ob,RGFormat:gJ,RGIntegerFormat:vJ,RawShaderMaterial:B7,Ray:VS,Raycaster:tK,RectAreaLight:W7,RedFormat:pJ,RedIntegerFormat:mJ,ReinhardToneMapping:rJ,RepeatWrapping:lf,ReplaceStencilOp:xse,ReverseSubtractEquation:OX,RingBufferGeometry:tfe,RingGeometry:MU,SIGNED_RED_GREEN_RGTC2_Format:aD,SIGNED_RED_RGTC1_Format:sD,SRGBColorSpace:Qt,Scene:rU,ShaderChunk:tn,ShaderLib:Ml,ShaderMaterial:zc,ShadowMaterial:P7,Shape:Rm,ShapeBufferGeometry:nfe,ShapeGeometry:EU,ShapePath:zde,ShapeUtils:Dc,ShortType:aJ,Skeleton:oU,SkeletonHelper:Rde,SkinnedMesh:sU,Source:am,Sphere:Vl,SphereBufferGeometry:rfe,SphereGeometry:AR,Spherical:Ede,SphericalHarmonics3:j7,SplineCurve:mU,SpotLight:NU,SpotLightHelper:Tde,Sprite:t7,SpriteMaterial:iU,SrcAlphaFactor:UN,SrcAlphaSaturateFactor:JX,SrcColorFactor:HX,StaticCopyUsage:Use,StaticDrawUsage:jA,StaticReadUsage:Dse,StereoCamera:rde,StreamCopyUsage:kse,StreamDrawUsage:Ise,StreamReadUsage:Nse,StringKeyframeTrack:mg,SubtractEquation:UX,SubtractiveBlending:FI,TOUCH:hse,TangentSpaceNormalMap:wf,TetrahedronBufferGeometry:ife,TetrahedronGeometry:wU,Texture:Er,TextureLoader:H7,TorusBufferGeometry:sfe,TorusGeometry:bU,TorusKnotBufferGeometry:ofe,TorusKnotGeometry:CU,Triangle:lm,TriangleFanDrawMode:VC,TriangleStripDrawMode:WN,TrianglesDrawMode:MJ,TubeBufferGeometry:afe,TubeGeometry:TU,TwoPassDoubleSide:fse,UVMapping:aR,Uint16BufferAttribute:QN,Uint32BufferAttribute:ZN,Uint8BufferAttribute:Soe,Uint8ClampedBufferAttribute:Moe,Uniform:VU,UniformsGroup:Ade,UniformsLib:pt,UniformsUtils:UJ,UnsignedByteType:ph,UnsignedInt248Type:bm,UnsignedIntType:Ed,UnsignedShort4444Type:cJ,UnsignedShort5551Type:uJ,UnsignedShortType:HN,VSMShadowMap:ml,Vector2:We,Vector3:se,Vector4:Nn,VectorKeyframeTrack:qm,VideoTexture:lhe,WebGL1Renderer:YJ,WebGL3DRenderTarget:coe,WebGLArrayRenderTarget:loe,WebGLCubeRenderTarget:kJ,WebGLMultipleRenderTargets:uoe,WebGLRenderTarget:Ol,WebGLRenderer:nU,WebGLUtils:XJ,WireframeGeometry:R7,WrapAroundEnding:WA,ZeroCurvatureEnding:sm,ZeroFactor:kX,ZeroSlopeEnding:om,ZeroStencilOp:yse,_SRGBAFormat:WC,sRGBEncoding:eh},Symbol.toStringTag,{value:"Module"}));var rK={exports:{}},gg={};/**
* @license React
* react-reconciler-constants.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/gg.ConcurrentRoot=1;gg.ContinuousEventPriority=4;gg.DefaultEventPriority=16;gg.DiscreteEventPriority=1;gg.IdleEventPriority=536870912;gg.LegacyRoot=0;rK.exports=gg;var Iv=rK.exports;function cfe(n){let e;const t=new Set,r=(a,l)=>{const u=typeof a=="function"?a(e):a;if(u!==e){const h=e;e=l?u:Object.assign({},e,u),t.forEach(d=>d(e,h))}},i=()=>e,s=(a,l=i,u=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=l(e);function d(){const p=l(e);if(!u(h,p)){const m=h;a(h=p,m)}}return t.add(d),()=>t.delete(d)},o={setState:r,getState:i,subscribe:(a,l,u)=>l||u?s(a,l,u):(t.add(a),()=>t.delete(a)),destroy:()=>t.clear()};return e=n(r,i,o),o}const ufe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),d4=ufe?we.useEffect:we.useLayoutEffect;function hfe(n){const e=typeof n=="function"?cfe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=we.useReducer(M=>M+1,0),o=e.getState(),a=we.useRef(o),l=we.useRef(r),u=we.useRef(i),h=we.useRef(!1),d=we.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||u.current!==i||h.current)&&(p=r(o),m=!i(d.current,p)),d4(()=>{m&&(d.current=p),a.current=o,l.current=r,u.current=i,h.current=!1});const v=we.useRef(o);d4(()=>{const M=()=>{try{const _=e.getState(),A=l.current(_);u.current(d.current,A)||(a.current=_,d.current=A,s())}catch{h.current=!0,s()}},g=e.subscribe(M);return e.getState()!==v.current&&M(),g},[]);const S=m?p:d.current;return we.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const dfe=n=>typeof n=="object"&&typeof n.then=="function",um=[];function iK(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function sK(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of um)if(iK(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=um.indexOf(i);s!==-1&&um.splice(s,1)},promise:(dfe(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(um.push(i),!t)throw i.promise}const ffe=(n,e,t)=>sK(n,e,!1,t),pfe=(n,e,t)=>void sK(n,e,!0,t),mfe=n=>{if(n===void 0||n.length===0)um.splice(0,um.length);else{const e=um.find(t=>iK(n,t.keys,t.equal));e&&e.remove()}};var oK={exports:{}},aK={exports:{}},lK={};/**
* @license React
* scheduler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/(function(n){function e(D,V){var G=D.length;D.push(V);e:for(;0<G;){var q=G-1>>>1,re=D[q];if(0<i(re,V))D[q]=V,D[G]=re,G=q;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var V=D[0],G=D.pop();if(G!==V){D[0]=G;e:for(var q=0,re=D.length,Y=re>>>1;q<Y;){var ae=2*(q+1)-1,Se=D[ae],ve=ae+1,W=D[ve];if(0>i(Se,G))ve<re&&0>i(W,Se)?(D[q]=W,D[ve]=G,q=ve):(D[q]=Se,D[ae]=G,q=ae);else if(ve<re&&0>i(W,G))D[q]=W,D[ve]=G,q=ve;else break e}}return V}function i(D,V){var G=D.sortIndex-V.sortIndex;return G!==0?G:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,v=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(D){for(var V=t(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=D)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(u)}}function w(D){if(S=!1,A(D),!v)if(t(l)!==null)v=!0,te(C);else{var V=t(u);V!==null&&O(w,V.startTime-D)}}function C(D,V){v=!1,S&&(S=!1,g(I),I=-1),m=!0;var G=p;try{for(A(V),d=t(l);d!==null&&(!(d.expirationTime>V)||D&&!H());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var re=q(d.expirationTime<=V);V=n.unstable_now(),typeof re=="function"?d.callback=re:d===t(l)&&r(l),A(V)}else r(l);d=t(l)}if(d!==null)var Y=!0;else{var ae=t(u);ae!==null&&O(w,ae.startTime-V),Y=!1}return Y}finally{d=null,p=G,m=!1}}var R=!1,L=null,I=-1,T=5,B=-1;function H(){return!(n.unstable_now()-B<T)}function K(){if(L!==null){var D=n.unstable_now();B=D;var V=!0;try{V=L(!0,D)}finally{V?j():(R=!1,L=null)}}else R=!1}var j;if(typeof _=="function")j=function(){_(K)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,X=z.port2;z.port1.onmessage=K,j=function(){X.postMessage(null)}}else j=function(){M(K,0)};function te(D){L=D,R||(R=!0,j())}function O(D,V){I=M(function(){D(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,te(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var G=p;p=V;try{return D()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=p;p=D;try{return V()}finally{p=G}},n.unstable_scheduleCallback=function(D,V,G){var q=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,D){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,D={id:h++,callback:V,priorityLevel:D,startTime:G,expirationTime:re,sortIndex:-1},G>q?(D.sortIndex=G,e(u,D),t(l)===null&&D===t(u)&&(S?(g(I),I=-1):S=!0,O(w,G-q))):(D.sortIndex=re,e(l,D),v||m||(v=!0,te(C))),D},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(D){var V=p;return function(){var G=p;p=V;try{return D.apply(this,arguments)}finally{p=G}}}})(lK);aK.exports=lK;var vD=aK.exports;/**
* @license React
* react-reconciler.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var gfe=function(n){var e={},t=we,r=vD,i=Object.assign;function s(y){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+y,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+y+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),A=Symbol.for("react.offscreen"),w=Symbol.iterator;function C(y){return y===null||typeof y!="object"?null:(y=w&&y[w]||y["@@iterator"],typeof y=="function"?y:null)}function R(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case u:return"Fragment";case l:return"Portal";case d:return"Profiler";case h:return"StrictMode";case S:return"Suspense";case M:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case m:return(y.displayName||"Context")+".Consumer";case p:return(y._context.displayName||"Context")+".Provider";case v:var c=y.render;return y=y.displayName,y||(y=c.displayName||c.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case g:return c=y.displayName||null,c!==null?c:R(y.type)||"Memo";case _:c=y._payload,y=y._init;try{return R(y(c))}catch{}}return null}function L(y){var c=y.type;switch(y.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=c.render,y=y.displayName||y.name||"",c.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(c);case 8:return c===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function I(y){var c=y,f=y;if(y.alternate)for(;c.return;)c=c.return;else{y=c;do c=y,c.flags&4098&&(f=c.return),y=c.return;while(y)}return c.tag===3?f:null}function T(y){if(I(y)!==y)throw Error(s(188))}function B(y){var c=y.alternate;if(!c){if(c=I(y),c===null)throw Error(s(188));return c!==y?null:y}for(var f=y,x=c;;){var E=f.return;if(E===null)break;var b=E.alternate;if(b===null){if(x=E.return,x!==null){f=x;continue}break}if(E.child===b.child){for(b=E.child;b;){if(b===f)return T(E),y;if(b===x)return T(E),c;b=b.sibling}throw Error(s(188))}if(f.return!==x.return)f=E,x=b;else{for(var P=!1,k=E.child;k;){if(k===f){P=!0,f=E,x=b;break}if(k===x){P=!0,x=E,f=b;break}k=k.sibling}if(!P){for(k=b.child;k;){if(k===f){P=!0,f=b,x=E;break}if(k===x){P=!0,x=b,f=E;break}k=k.sibling}if(!P)throw Error(s(189))}}if(f.alternate!==x)throw Error(s(190))}if(f.tag!==3)throw Error(s(188));return f.stateNode.current===f?y:c}function H(y){return y=B(y),y!==null?K(y):null}function K(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var c=K(y);if(c!==null)return c;y=y.sibling}return null}function j(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){if(y.tag!==4){var c=j(y);if(c!==null)return c}y=y.sibling}return null}var z=Array.isArray,X=n.getPublicInstance,te=n.getRootHostContext,O=n.getChildHostContext,D=n.prepareForCommit,V=n.resetAfterCommit,G=n.createInstance,q=n.appendInitialChild,re=n.finalizeInitialChildren,Y=n.prepareUpdate,ae=n.shouldSetTextContent,Se=n.createTextInstance,ve=n.scheduleTimeout,W=n.cancelTimeout,Xe=n.noTimeout,Ne=n.isPrimaryRenderer,ye=n.supportsMutation,me=n.supportsPersistence,pe=n.supportsHydration,le=n.getInstanceFromNode,Ae=n.preparePortalMount,Re=n.getCurrentEventPriority,De=n.detachDeletedInstance,Je=n.supportsMicrotasks,Qe=n.scheduleMicrotask,Ve=n.supportsTestSelectors,nt=n.findFiberRoot,It=n.getBoundingRect,U=n.getTextContent,F=n.isHiddenSubtree,oe=n.matchAccessibilityRole,_e=n.setFocusIfFocusable,Me=n.setupIntersectionObserver,Te=n.appendChild,Ke=n.appendChildToContainer,Be=n.commitTextUpdate,he=n.commitMount,Ue=n.commitUpdate,Ge=n.insertBefore,je=n.insertInContainerBefore,Le=n.removeChild,Oe=n.removeChildFromContainer,xt=n.resetTextContent,wt=n.hideInstance,zt=n.hideTextInstance,J=n.unhideInstance,ce=n.unhideTextInstance,xe=n.clearContainer,Pe=n.cloneInstance,ke=n.createContainerChildSet,Lt=n.appendChildToContainerChildSet,Rt=n.finalizeContainerChildren,ln=n.replaceContainerChildren,dr=n.cloneHiddenInstance,kt=n.cloneHiddenTextInstance,Pn=n.canHydrateInstance,Zn=n.canHydrateTextInstance,xo=n.canHydrateSuspenseInstance,nc=n.isSuspenseInstancePending,rc=n.isSuspenseInstanceFallback,Xc=n.registerSuspenseInstanceRetry,qa=n.getNextHydratableSibling,N=n.getFirstHydratableChild,ne=n.getFirstHydratableChildWithinContainer,ue=n.getFirstHydratableChildWithinSuspenseInstance,Z=n.hydrateInstance,de=n.hydrateTextInstance,Fe=n.hydrateSuspenseInstance,Ye=n.getNextHydratableInstanceAfterSuspenseInstance,$e=n.commitHydratedContainer,st=n.commitHydratedSuspenseInstance,_t=n.clearSuspenseBoundary,ct=n.clearSuspenseBoundaryFromContainer,ut=n.shouldDeleteUnhydratedTailInstances,Dt=n.didNotMatchHydratedContainerTextInstance,yn=n.didNotMatchHydratedTextInstance,Ln;function $n(y){if(Ln===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Ln=c&&c[1]||""}return`
`+Ln+y}var Ft=!1;function ht(y,c){if(!y||Ft)return"";Ft=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(fe){var x=fe}Reflect.construct(y,[],c)}else{try{c.call()}catch(fe){x=fe}y.call(c.prototype)}else{try{throw Error()}catch(fe){x=fe}y()}}catch(fe){if(fe&&x&&typeof fe.stack=="string"){for(var E=fe.stack.split(`
`),b=x.stack.split(`
`),P=E.length-1,k=b.length-1;1<=P&&0<=k&&E[P]!==b[k];)k--;for(;1<=P&&0<=k;P--,k--)if(E[P]!==b[k]){if(P!==1||k!==1)do if(P--,k--,0>k||E[P]!==b[k]){var $=`
`+E[P].replace(" at new "," at ");return y.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",y.displayName)),$}while(1<=P&&0<=k);break}}}finally{Ft=!1,Error.prepareStackTrace=f}return(y=y?y.displayName||y.name:"")?$n(y):""}var _o=Object.prototype.hasOwnProperty,Gn=[],Wn=-1;function Hr(y){return{current:y}}function Vt(y){0>Wn||(y.current=Gn[Wn],Gn[Wn]=null,Wn--)}function Pt(y,c){Wn++,Gn[Wn]=y.current,y.current=c}var St={},Kt=Hr(St),on=Hr(!1),Ot=St;function Rr(y,c){var f=y.type.contextTypes;if(!f)return St;var x=y.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var E={},b;for(b in f)E[b]=c[b];return x&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=c,y.__reactInternalMemoizedMaskedChildContext=E),E}function er(y){return y=y.childContextTypes,y!=null}function tr(){Vt(on),Vt(Kt)}function Nf(y,c,f){if(Kt.current!==St)throw Error(s(168));Pt(Kt,c),Pt(on,f)}function Rx(y,c,f){var x=y.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return f;x=x.getChildContext();for(var E in x)if(!(E in c))throw Error(s(108,L(y)||"Unknown",E));return i({},f,x)}function Uf(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||St,Ot=Kt.current,Pt(Kt,y),Pt(on,on.current),!0}function Of(y,c,f){var x=y.stateNode;if(!x)throw Error(s(169));f?(y=Rx(y,c,Ot),x.__reactInternalMemoizedMergedChildContext=y,Vt(on),Vt(Kt),Pt(Kt,y)):Vt(on),Pt(on,f)}var Ks=Math.clz32?Math.clz32:SP,Ao=Math.log,AP=Math.LN2;function SP(y){return y>>>=0,y===0?32:31-(Ao(y)/AP|0)|0}var Cg=64,Jc=4194304;function ic(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function sc(y,c){var f=y.pendingLanes;if(f===0)return 0;var x=0,E=y.suspendedLanes,b=y.pingedLanes,P=f&268435455;if(P!==0){var k=P&~E;k!==0?x=ic(k):(b&=P,b!==0&&(x=ic(b)))}else P=f&~E,P!==0?x=ic(P):b!==0&&(x=ic(b));if(x===0)return 0;if(c!==0&&c!==x&&!(c&E)&&(E=x&-x,b=c&-c,E>=b||E===16&&(b&4194240)!==0))return c;if(x&4&&(x|=f&16),c=y.entangledLanes,c!==0)for(y=y.entanglements,c&=x;0<c;)f=31-Ks(c),E=1<<f,x|=y[f],c&=~E;return x}function Tg(y,c){switch(y){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MP(y,c){for(var f=y.suspendedLanes,x=y.pingedLanes,E=y.expirationTimes,b=y.pendingLanes;0<b;){var P=31-Ks(b),k=1<<P,$=E[P];$===-1?(!(k&f)||k&x)&&(E[P]=Tg(k,c)):$<=c&&(y.expiredLanes|=k),b&=~k}}function Px(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function kf(y){for(var c=[],f=0;31>f;f++)c.push(y);return c}function Kc(y,c,f){y.pendingLanes|=c,c!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,c=31-Ks(c),y[c]=f}function Gf(y,c){var f=y.pendingLanes&~c;y.pendingLanes=c,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=c,y.mutableReadLanes&=c,y.entangledLanes&=c,c=y.entanglements;var x=y.eventTimes;for(y=y.expirationTimes;0<f;){var E=31-Ks(f),b=1<<E;c[E]=0,x[E]=-1,y[E]=-1,f&=~b}}function Bx(y,c){var f=y.entangledLanes|=c;for(y=y.entanglements;f;){var x=31-Ks(f),E=1<<x;E&c|y[x]&c&&(y[x]|=c),f&=~E}}var vn=0;function xn(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var Rg=r.unstable_scheduleCallback,Pg=r.unstable_cancelCallback,UM=r.unstable_shouldYield,EP=r.unstable_requestPaint,Kr=r.unstable_now,Pr=r.unstable_ImmediatePriority,Lx=r.unstable_UserBlockingPriority,Ix=r.unstable_NormalPriority,Dx=r.unstable_IdlePriority,Bg=null,Ts=null;function sa(y){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(Bg,y,void 0,(y.current.flags&128)===128)}catch{}}function wP(y,c){return y===c&&(y!==0||1/y===1/c)||y!==y&&c!==c}var oa=typeof Object.is=="function"?Object.is:wP,Yr=null,Ys=!1,Ph=!1;function Lg(y){Yr===null?Yr=[y]:Yr.push(y)}function OM(y){Ys=!0,Lg(y)}function aa(){if(!Ph&&Yr!==null){Ph=!0;var y=0,c=vn;try{var f=Yr;for(vn=1;y<f.length;y++){var x=f[y];do x=x(!0);while(x!==null)}Yr=null,Ys=!1}catch(E){throw Yr!==null&&(Yr=Yr.slice(y+1)),Rg(Pr,aa),E}finally{vn=c,Ph=!1}}return null}var la=o.ReactCurrentBatchConfig;function Ig(y,c){if(oa(y,c))return!0;if(typeof y!="object"||y===null||typeof c!="object"||c===null)return!1;var f=Object.keys(y),x=Object.keys(c);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var E=f[x];if(!_o.call(c,E)||!oa(y[E],c[E]))return!1}return!0}function Dg(y){switch(y.tag){case 5:return $n(y.type);case 16:return $n("Lazy");case 13:return $n("Suspense");case 19:return $n("SuspenseList");case 0:case 2:case 15:return y=ht(y.type,!1),y;case 11:return y=ht(y.type.render,!1),y;case 1:return y=ht(y.type,!0),y;default:return""}}function So(y,c){if(y&&y.defaultProps){c=i({},c),y=y.defaultProps;for(var f in y)c[f]===void 0&&(c[f]=y[f]);return c}return c}var as=Hr(null),Yc=null,Qa=null,oc=null;function Hf(){oc=Qa=Yc=null}function Fg(y,c,f){Ne?(Pt(as,c._currentValue),c._currentValue=f):(Pt(as,c._currentValue2),c._currentValue2=f)}function Ng(y){var c=as.current;Vt(as),Ne?y._currentValue=c:y._currentValue2=c}function zf(y,c,f){for(;y!==null;){var x=y.alternate;if((y.childLanes&c)!==c?(y.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),y===f)break;y=y.return}}function ac(y,c){Yc=y,oc=Qa=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&c&&(Rs=!0),y.firstContext=null)}function li(y){var c=Ne?y._currentValue:y._currentValue2;if(oc!==y)if(y={context:y,memoizedValue:c,next:null},Qa===null){if(Yc===null)throw Error(s(308));Qa=y,Yc.dependencies={lanes:0,firstContext:y}}else Qa=Qa.next=y;return c}var fr=null,ci=!1;function ca(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ug(y,c){y=y.updateQueue,c.updateQueue===y&&(c.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function ua(y,c){return{eventTime:y,lane:c,tag:0,payload:null,callback:null,next:null}}function wi(y,c){var f=y.updateQueue;f!==null&&(f=f.shared,Bt!==null&&y.mode&1&&!(bt&2)?(y=f.interleaved,y===null?(c.next=c,fr===null?fr=[f]:fr.push(f)):(c.next=y.next,y.next=c),f.interleaved=c):(y=f.pending,y===null?c.next=c:(c.next=y.next,y.next=c),f.pending=c))}function Mo(y,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var x=c.lanes;x&=y.pendingLanes,f|=x,c.lanes=f,Bx(y,f)}}function Vf(y,c){var f=y.updateQueue,x=y.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var E=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var P={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};b===null?E=b=P:b=b.next=P,f=f.next}while(f!==null);b===null?E=b=c:b=b.next=c}else E=b=c;f={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:b,shared:x.shared,effects:x.effects},y.updateQueue=f;return}y=f.lastBaseUpdate,y===null?f.firstBaseUpdate=c:y.next=c,f.lastBaseUpdate=c}function Wf(y,c,f,x){var E=y.updateQueue;ci=!1;var b=E.firstBaseUpdate,P=E.lastBaseUpdate,k=E.shared.pending;if(k!==null){E.shared.pending=null;var $=k,fe=$.next;$.next=null,P===null?b=fe:P.next=fe,P=$;var Ce=y.alternate;Ce!==null&&(Ce=Ce.updateQueue,k=Ce.lastBaseUpdate,k!==P&&(k===null?Ce.firstBaseUpdate=fe:k.next=fe,Ce.lastBaseUpdate=$))}if(b!==null){var He=E.baseState;P=0,Ce=fe=$=null,k=b;do{var Ze=k.lane,ot=k.eventTime;if((x&Ze)===Ze){Ce!==null&&(Ce=Ce.next={eventTime:ot,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var rt=y,At=k;switch(Ze=c,ot=f,At.tag){case 1:if(rt=At.payload,typeof rt=="function"){He=rt.call(ot,He,Ze);break e}He=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=At.payload,Ze=typeof rt=="function"?rt.call(ot,He,Ze):rt,Ze==null)break e;He=i({},He,Ze);break e;case 2:ci=!0}}k.callback!==null&&k.lane!==0&&(y.flags|=64,Ze=E.effects,Ze===null?E.effects=[k]:Ze.push(k))}else ot={eventTime:ot,lane:Ze,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Ce===null?(fe=Ce=ot,$=He):Ce=Ce.next=ot,P|=Ze;if(k=k.next,k===null){if(k=E.shared.pending,k===null)break;Ze=k,k=Ze.next,Ze.next=null,E.lastBaseUpdate=Ze,E.shared.pending=null}}while(1);if(Ce===null&&($=He),E.baseState=$,E.firstBaseUpdate=fe,E.lastBaseUpdate=Ce,c=E.shared.interleaved,c!==null){E=c;do P|=E.lane,E=E.next;while(E!==c)}else b===null&&(E.shared.lanes=0);ga|=P,y.lanes=P,y.memoizedState=He}}function jf(y,c,f){if(y=c.effects,c.effects=null,y!==null)for(c=0;c<y.length;c++){var x=y[c],E=x.callback;if(E!==null){if(x.callback=null,x=f,typeof E!="function")throw Error(s(191,E));E.call(x)}}}var Fx=new t.Component().refs;function Og(y,c,f,x){c=y.memoizedState,f=f(x,c),f=f==null?c:i({},c,f),y.memoizedState=f,y.lanes===0&&(y.updateQueue.baseState=f)}var Bh={isMounted:function(y){return(y=y._reactInternals)?I(y)===y:!1},enqueueSetState:function(y,c,f){y=y._reactInternals;var x=ti(),E=cr(y),b=ua(x,E);b.payload=c,f!=null&&(b.callback=f),wi(y,b),c=zr(y,E,x),c!==null&&Mo(c,y,E)},enqueueReplaceState:function(y,c,f){y=y._reactInternals;var x=ti(),E=cr(y),b=ua(x,E);b.tag=1,b.payload=c,f!=null&&(b.callback=f),wi(y,b),c=zr(y,E,x),c!==null&&Mo(c,y,E)},enqueueForceUpdate:function(y,c){y=y._reactInternals;var f=ti(),x=cr(y),E=ua(f,x);E.tag=2,c!=null&&(E.callback=c),wi(y,E),c=zr(y,x,f),c!==null&&Mo(c,y,x)}};function Xf(y,c,f,x,E,b,P){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(x,b,P):c.prototype&&c.prototype.isPureReactComponent?!Ig(f,x)||!Ig(E,b):!0}function Nx(y,c,f){var x=!1,E=St,b=c.contextType;return typeof b=="object"&&b!==null?b=li(b):(E=er(c)?Ot:Kt.current,x=c.contextTypes,b=(x=x!=null)?Rr(y,E):St),c=new c(f,b),y.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Bh,y.stateNode=c,c._reactInternals=y,x&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=E,y.__reactInternalMemoizedMaskedChildContext=b),c}function Ux(y,c,f,x){y=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,x),c.state!==y&&Bh.enqueueReplaceState(c,c.state,null)}function kg(y,c,f,x){var E=y.stateNode;E.props=f,E.state=y.memoizedState,E.refs=Fx,ca(y);var b=c.contextType;typeof b=="object"&&b!==null?E.context=li(b):(b=er(c)?Ot:Kt.current,E.context=Rr(y,b)),E.state=y.memoizedState,b=c.getDerivedStateFromProps,typeof b=="function"&&(Og(y,c,b,f),E.state=y.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(c=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),c!==E.state&&Bh.enqueueReplaceState(E,E.state,null),Wf(y,f,E,x),E.state=y.memoizedState),typeof E.componentDidMount=="function"&&(y.flags|=4194308)}var lc=[],Eo=0,Za=null,qc=0,Hi=[],nr=0,qr=null,zi=1,ui="";function Vi(y,c){lc[Eo++]=qc,lc[Eo++]=Za,Za=y,qc=c}function cc(y,c,f){Hi[nr++]=zi,Hi[nr++]=ui,Hi[nr++]=qr,qr=y;var x=zi;y=ui;var E=32-Ks(x)-1;x&=~(1<<E),f+=1;var b=32-Ks(c)+E;if(30<b){var P=E-E%5;b=(x&(1<<P)-1).toString(32),x>>=P,E-=P,zi=1<<32-Ks(c)+E|f<<E|x,ui=b+y}else zi=1<<b|f<<E|x,ui=y}function Gg(y){y.return!==null&&(Vi(y,1),cc(y,1,0))}function Jf(y){for(;y===Za;)Za=lc[--Eo],lc[Eo]=null,qc=lc[--Eo],lc[Eo]=null;for(;y===qr;)qr=Hi[--nr],Hi[nr]=null,ui=Hi[--nr],Hi[nr]=null,zi=Hi[--nr],Hi[nr]=null}var Wi=null,zn=null,cn=!1,Bn=!1,ji=null;function qs(y,c){var f=Zs(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=y,c=y.deletions,c===null?(y.deletions=[f],y.flags|=16):c.push(f)}function Ox(y,c){switch(y.tag){case 5:return c=Pn(c,y.type,y.pendingProps),c!==null?(y.stateNode=c,Wi=y,zn=N(c),!0):!1;case 6:return c=Zn(c,y.pendingProps),c!==null?(y.stateNode=c,Wi=y,zn=null,!0):!1;case 13:if(c=xo(c),c!==null){var f=qr!==null?{id:zi,overflow:ui}:null;return y.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=Zs(18,null,null,0),f.stateNode=c,f.return=y,y.child=f,Wi=y,zn=null,!0}return!1;default:return!1}}function Hg(y){return(y.mode&1)!==0&&(y.flags&128)===0}function Kf(y){if(cn){var c=zn;if(c){var f=c;if(!Ox(y,c)){if(Hg(y))throw Error(s(418));c=qa(f);var x=Wi;c&&Ox(y,c)?qs(x,f):(y.flags=y.flags&-4097|2,cn=!1,Wi=y)}}else{if(Hg(y))throw Error(s(418));y.flags=y.flags&-4097|2,cn=!1,Wi=y}}}function zg(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Wi=y}function Lh(y){if(!pe||y!==Wi)return!1;if(!cn)return zg(y),cn=!0,!1;if(y.tag!==3&&(y.tag!==5||ut(y.type)&&!ae(y.type,y.memoizedProps))){var c=zn;if(c){if(Hg(y)){for(y=zn;y;)y=qa(y);throw Error(s(418))}for(;c;)qs(y,c),c=qa(c)}}if(zg(y),y.tag===13){if(!pe)throw Error(s(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));zn=Ye(y)}else zn=Wi?qa(y.stateNode):null;return!0}function ha(){pe&&(zn=Wi=null,Bn=cn=!1)}function uc(y){ji===null?ji=[y]:ji.push(y)}function Qc(y,c,f){if(y=f.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(s(309));var x=f.stateNode}if(!x)throw Error(s(147,y));var E=x,b=""+y;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===b?c.ref:(c=function(P){var k=E.refs;k===Fx&&(k=E.refs={}),P===null?delete k[b]:k[b]=P},c._stringRef=b,c)}if(typeof y!="string")throw Error(s(284));if(!f._owner)throw Error(s(290,y))}return y}function hc(y,c){throw y=Object.prototype.toString.call(c),Error(s(31,y==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":y))}function Yf(y){var c=y._init;return c(y._payload)}function kx(y){function c(Ee,Q){if(y){var ee=Ee.deletions;ee===null?(Ee.deletions=[Q],Ee.flags|=16):ee.push(Q)}}function f(Ee,Q){if(!y)return null;for(;Q!==null;)c(Ee,Q),Q=Q.sibling;return null}function x(Ee,Q){for(Ee=new Map;Q!==null;)Q.key!==null?Ee.set(Q.key,Q):Ee.set(Q.index,Q),Q=Q.sibling;return Ee}function E(Ee,Q){return Ee=Sc(Ee,Q),Ee.index=0,Ee.sibling=null,Ee}function b(Ee,Q,ee){return Ee.index=ee,y?(ee=Ee.alternate,ee!==null?(ee=ee.index,ee<Q?(Ee.flags|=2,Q):ee):(Ee.flags|=2,Q)):(Ee.flags|=1048576,Q)}function P(Ee){return y&&Ee.alternate===null&&(Ee.flags|=2),Ee}function k(Ee,Q,ee,ge){return Q===null||Q.tag!==6?(Q=Jh(ee,Ee.mode,ge),Q.return=Ee,Q):(Q=E(Q,ee),Q.return=Ee,Q)}function $(Ee,Q,ee,ge){var Ie=ee.type;return Ie===u?Ce(Ee,Q,ee.props.children,ge,ee.key):Q!==null&&(Q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===_&&Yf(Ie)===Q.type)?(ge=E(Q,ee.props),ge.ref=Qc(Ee,Q,ee),ge.return=Ee,ge):(ge=Lo(ee.type,ee.key,ee.props,null,Ee.mode,ge),ge.ref=Qc(Ee,Q,ee),ge.return=Ee,ge)}function fe(Ee,Q,ee,ge){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ee.containerInfo||Q.stateNode.implementation!==ee.implementation?(Q=gp(ee,Ee.mode,ge),Q.return=Ee,Q):(Q=E(Q,ee.children||[]),Q.return=Ee,Q)}function Ce(Ee,Q,ee,ge,Ie){return Q===null||Q.tag!==7?(Q=ya(ee,Ee.mode,ge,Ie),Q.return=Ee,Q):(Q=E(Q,ee),Q.return=Ee,Q)}function He(Ee,Q,ee){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Jh(""+Q,Ee.mode,ee),Q.return=Ee,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case a:return ee=Lo(Q.type,Q.key,Q.props,null,Ee.mode,ee),ee.ref=Qc(Ee,null,Q),ee.return=Ee,ee;case l:return Q=gp(Q,Ee.mode,ee),Q.return=Ee,Q;case _:var ge=Q._init;return He(Ee,ge(Q._payload),ee)}if(z(Q)||C(Q))return Q=ya(Q,Ee.mode,ee,null),Q.return=Ee,Q;hc(Ee,Q)}return null}function Ze(Ee,Q,ee,ge){var Ie=Q!==null?Q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number")return Ie!==null?null:k(Ee,Q,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case a:return ee.key===Ie?$(Ee,Q,ee,ge):null;case l:return ee.key===Ie?fe(Ee,Q,ee,ge):null;case _:return Ie=ee._init,Ze(Ee,Q,Ie(ee._payload),ge)}if(z(ee)||C(ee))return Ie!==null?null:Ce(Ee,Q,ee,ge,null);hc(Ee,ee)}return null}function ot(Ee,Q,ee,ge,Ie){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return Ee=Ee.get(ee)||null,k(Q,Ee,""+ge,Ie);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case a:return Ee=Ee.get(ge.key===null?ee:ge.key)||null,$(Q,Ee,ge,Ie);case l:return Ee=Ee.get(ge.key===null?ee:ge.key)||null,fe(Q,Ee,ge,Ie);case _:var qe=ge._init;return ot(Ee,Q,ee,qe(ge._payload),Ie)}if(z(ge)||C(ge))return Ee=Ee.get(ee)||null,Ce(Q,Ee,ge,Ie,null);hc(Q,ge)}return null}function rt(Ee,Q,ee,ge){for(var Ie=null,qe=null,it=Q,ft=Q=0,Nt=null;it!==null&&ft<ee.length;ft++){it.index>ft?(Nt=it,it=null):Nt=it.sibling;var Ut=Ze(Ee,it,ee[ft],ge);if(Ut===null){it===null&&(it=Nt);break}y&&it&&Ut.alternate===null&&c(Ee,it),Q=b(Ut,Q,ft),qe===null?Ie=Ut:qe.sibling=Ut,qe=Ut,it=Nt}if(ft===ee.length)return f(Ee,it),cn&&Vi(Ee,ft),Ie;if(it===null){for(;ft<ee.length;ft++)it=He(Ee,ee[ft],ge),it!==null&&(Q=b(it,Q,ft),qe===null?Ie=it:qe.sibling=it,qe=it);return cn&&Vi(Ee,ft),Ie}for(it=x(Ee,it);ft<ee.length;ft++)Nt=ot(it,Ee,ft,ee[ft],ge),Nt!==null&&(y&&Nt.alternate!==null&&it.delete(Nt.key===null?ft:Nt.key),Q=b(Nt,Q,ft),qe===null?Ie=Nt:qe.sibling=Nt,qe=Nt);return y&&it.forEach(function(qt){return c(Ee,qt)}),cn&&Vi(Ee,ft),Ie}function At(Ee,Q,ee,ge){var Ie=C(ee);if(typeof Ie!="function")throw Error(s(150));if(ee=Ie.call(ee),ee==null)throw Error(s(151));for(var qe=Ie=null,it=Q,ft=Q=0,Nt=null,Ut=ee.next();it!==null&&!Ut.done;ft++,Ut=ee.next()){it.index>ft?(Nt=it,it=null):Nt=it.sibling;var qt=Ze(Ee,it,Ut.value,ge);if(qt===null){it===null&&(it=Nt);break}y&&it&&qt.alternate===null&&c(Ee,it),Q=b(qt,Q,ft),qe===null?Ie=qt:qe.sibling=qt,qe=qt,it=Nt}if(Ut.done)return f(Ee,it),cn&&Vi(Ee,ft),Ie;if(it===null){for(;!Ut.done;ft++,Ut=ee.next())Ut=He(Ee,Ut.value,ge),Ut!==null&&(Q=b(Ut,Q,ft),qe===null?Ie=Ut:qe.sibling=Ut,qe=Ut);return cn&&Vi(Ee,ft),Ie}for(it=x(Ee,it);!Ut.done;ft++,Ut=ee.next())Ut=ot(it,Ee,ft,Ut.value,ge),Ut!==null&&(y&&Ut.alternate!==null&&it.delete(Ut.key===null?ft:Ut.key),Q=b(Ut,Q,ft),qe===null?Ie=Ut:qe.sibling=Ut,qe=Ut);return y&&it.forEach(function(Mc){return c(Ee,Mc)}),cn&&Vi(Ee,ft),Ie}function Fn(Ee,Q,ee,ge){if(typeof ee=="object"&&ee!==null&&ee.type===u&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case a:e:{for(var Ie=ee.key,qe=Q;qe!==null;){if(qe.key===Ie){if(Ie=ee.type,Ie===u){if(qe.tag===7){f(Ee,qe.sibling),Q=E(qe,ee.props.children),Q.return=Ee,Ee=Q;break e}}else if(qe.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===_&&Yf(Ie)===qe.type){f(Ee,qe.sibling),Q=E(qe,ee.props),Q.ref=Qc(Ee,qe,ee),Q.return=Ee,Ee=Q;break e}f(Ee,qe);break}else c(Ee,qe);qe=qe.sibling}ee.type===u?(Q=ya(ee.props.children,Ee.mode,ge,ee.key),Q.return=Ee,Ee=Q):(ge=Lo(ee.type,ee.key,ee.props,null,Ee.mode,ge),ge.ref=Qc(Ee,Q,ee),ge.return=Ee,Ee=ge)}return P(Ee);case l:e:{for(qe=ee.key;Q!==null;){if(Q.key===qe)if(Q.tag===4&&Q.stateNode.containerInfo===ee.containerInfo&&Q.stateNode.implementation===ee.implementation){f(Ee,Q.sibling),Q=E(Q,ee.children||[]),Q.return=Ee,Ee=Q;break e}else{f(Ee,Q);break}else c(Ee,Q);Q=Q.sibling}Q=gp(ee,Ee.mode,ge),Q.return=Ee,Ee=Q}return P(Ee);case _:return qe=ee._init,Fn(Ee,Q,qe(ee._payload),ge)}if(z(ee))return rt(Ee,Q,ee,ge);if(C(ee))return At(Ee,Q,ee,ge);hc(Ee,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,Q!==null&&Q.tag===6?(f(Ee,Q.sibling),Q=E(Q,ee),Q.return=Ee,Ee=Q):(f(Ee,Q),Q=Jh(ee,Ee.mode,ge),Q.return=Ee,Ee=Q),P(Ee)):f(Ee,Q)}return Fn}var Zc=kx(!0),$c=kx(!1),Ih={},bi=Hr(Ih),Ci=Hr(Ih),da=Hr(Ih);function Xi(y){if(y===Ih)throw Error(s(174));return y}function Qs(y,c){Pt(da,c),Pt(Ci,y),Pt(bi,Ih),y=te(c),Vt(bi),Pt(bi,y)}function dc(){Vt(bi),Vt(Ci),Vt(da)}function eu(y){var c=Xi(da.current),f=Xi(bi.current);c=O(f,y.type,c),f!==c&&(Pt(Ci,y),Pt(bi,c))}function Vg(y){Ci.current===y&&(Vt(bi),Vt(Ci))}var Vn=Hr(0);function Hn(y){for(var c=y;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||nc(f)||rc(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===y)break;for(;c.sibling===null;){if(c.return===null||c.return===y)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Dh=[];function qf(){for(var y=0;y<Dh.length;y++){var c=Dh[y];Ne?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Dh.length=0}var Fh=o.ReactCurrentDispatcher,Ji=o.ReactCurrentBatchConfig,hi=0,In=null,an=null,_n=null,pr=!1,fc=!1,$a=0,Qf=0;function Ti(){throw Error(s(321))}function Qr(y,c){if(c===null)return!1;for(var f=0;f<c.length&&f<y.length;f++)if(!oa(y[f],c[f]))return!1;return!0}function Zf(y,c,f,x,E,b){if(hi=b,In=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Fh.current=y===null||y.memoizedState===null?Jg:CP,y=f(x,E),fc){b=0;do{if(fc=!1,$a=0,25<=b)throw Error(s(301));b+=1,_n=an=null,c.updateQueue=null,Fh.current=TP,y=f(x,E)}while(fc)}if(Fh.current=np,c=an!==null&&an.next!==null,hi=0,_n=an=In=null,pr=!1,c)throw Error(s(300));return y}function $f(){var y=$a!==0;return $a=0,y}function wo(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?In.memoizedState=_n=y:_n=_n.next=y,_n}function Zr(){if(an===null){var y=In.alternate;y=y!==null?y.memoizedState:null}else y=an.next;var c=_n===null?In.memoizedState:_n.next;if(c!==null)_n=c,an=y;else{if(y===null)throw Error(s(310));an=y,y={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},_n===null?In.memoizedState=_n=y:_n=_n.next=y}return _n}function Ri(y,c){return typeof c=="function"?c(y):c}function fa(y){var c=Zr(),f=c.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=y;var x=an,E=x.baseQueue,b=f.pending;if(b!==null){if(E!==null){var P=E.next;E.next=b.next,b.next=P}x.baseQueue=E=b,f.pending=null}if(E!==null){b=E.next,x=x.baseState;var k=P=null,$=null,fe=b;do{var Ce=fe.lane;if((hi&Ce)===Ce)$!==null&&($=$.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),x=fe.hasEagerState?fe.eagerState:y(x,fe.action);else{var He={lane:Ce,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};$===null?(k=$=He,P=x):$=$.next=He,In.lanes|=Ce,ga|=Ce}fe=fe.next}while(fe!==null&&fe!==b);$===null?P=x:$.next=k,oa(x,c.memoizedState)||(Rs=!0),c.memoizedState=x,c.baseState=P,c.baseQueue=$,f.lastRenderedState=x}if(y=f.interleaved,y!==null){E=y;do b=E.lane,In.lanes|=b,ga|=b,E=E.next;while(E!==y)}else E===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function tu(y){var c=Zr(),f=c.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=y;var x=f.dispatch,E=f.pending,b=c.memoizedState;if(E!==null){f.pending=null;var P=E=E.next;do b=y(b,P.action),P=P.next;while(P!==E);oa(b,c.memoizedState)||(Rs=!0),c.memoizedState=b,c.baseQueue===null&&(c.baseState=b),f.lastRenderedState=b}return[b,x]}function ep(){}function Gx(y,c){var f=In,x=Zr(),E=c(),b=!oa(x.memoizedState,E);if(b&&(x.memoizedState=E,Rs=!0),x=x.queue,iu(Vx.bind(null,f,x,y),[y]),x.getSnapshot!==c||b||_n!==null&&_n.memoizedState.tag&1){if(f.flags|=2048,nu(9,zx.bind(null,f,x,E,c),void 0,null),Bt===null)throw Error(s(349));hi&30||Hx(f,c,E)}return E}function Hx(y,c,f){y.flags|=16384,y={getSnapshot:c,value:f},c=In.updateQueue,c===null?(c={lastEffect:null,stores:null},In.updateQueue=c,c.stores=[y]):(f=c.stores,f===null?c.stores=[y]:f.push(y))}function zx(y,c,f,x){c.value=f,c.getSnapshot=x,Wx(c)&&zr(y,1,-1)}function Vx(y,c,f){return f(function(){Wx(c)&&zr(y,1,-1)})}function Wx(y){var c=y.getSnapshot;y=y.value;try{var f=c();return!oa(y,f)}catch{return!0}}function Wg(y){var c=wo();return typeof y=="function"&&(y=y()),c.memoizedState=c.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:y},c.queue=y,y=y.dispatch=bP.bind(null,In,y),[c.memoizedState,y]}function nu(y,c,f,x){return y={tag:y,create:c,destroy:f,deps:x,next:null},c=In.updateQueue,c===null?(c={lastEffect:null,stores:null},In.updateQueue=c,c.lastEffect=y.next=y):(f=c.lastEffect,f===null?c.lastEffect=y.next=y:(x=f.next,f.next=y,y.next=x,c.lastEffect=y)),y}function Nh(){return Zr().memoizedState}function tp(y,c,f,x){var E=wo();In.flags|=y,E.memoizedState=nu(1|c,f,void 0,x===void 0?null:x)}function ru(y,c,f,x){var E=Zr();x=x===void 0?null:x;var b=void 0;if(an!==null){var P=an.memoizedState;if(b=P.destroy,x!==null&&Qr(x,P.deps)){E.memoizedState=nu(c,f,b,x);return}}In.flags|=y,E.memoizedState=nu(1|c,f,b,x)}function Uh(y,c){return tp(8390656,8,y,c)}function iu(y,c){return ru(2048,8,y,c)}function Oh(y,c){return ru(4,2,y,c)}function jx(y,c){return ru(4,4,y,c)}function Xx(y,c){if(typeof c=="function")return y=y(),c(y),function(){c(null)};if(c!=null)return y=y(),c.current=y,function(){c.current=null}}function Jx(y,c,f){return f=f!=null?f.concat([y]):null,ru(4,4,Xx.bind(null,c,y),f)}function jg(){}function Xg(y,c){var f=Zr();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&Qr(c,x[1])?x[0]:(f.memoizedState=[y,c],y)}function Kx(y,c){var f=Zr();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&Qr(c,x[1])?x[0]:(y=y(),f.memoizedState=[y,c],y)}function kM(y,c){var f=vn;vn=f!==0&&4>f?f:4,y(!0);var x=Ji.transition;Ji.transition={};try{y(!1),c()}finally{vn=f,Ji.transition=x}}function GM(){return Zr().memoizedState}function HM(y,c,f){var x=cr(y);f={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null},zM(y)?Yx(c,f):(qx(y,c,f),f=ti(),y=zr(y,x,f),y!==null&&Qx(y,c,x))}function bP(y,c,f){var x=cr(y),E={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null};if(zM(y))Yx(c,E);else{qx(y,c,E);var b=y.alternate;if(y.lanes===0&&(b===null||b.lanes===0)&&(b=c.lastRenderedReducer,b!==null))try{var P=c.lastRenderedState,k=b(P,f);if(E.hasEagerState=!0,E.eagerState=k,oa(k,P))return}catch{}finally{}f=ti(),y=zr(y,x,f),y!==null&&Qx(y,c,x)}}function zM(y){var c=y.alternate;return y===In||c!==null&&c===In}function Yx(y,c){fc=pr=!0;var f=y.pending;f===null?c.next=c:(c.next=f.next,f.next=c),y.pending=c}function qx(y,c,f){Bt!==null&&y.mode&1&&!(bt&2)?(y=c.interleaved,y===null?(f.next=f,fr===null?fr=[c]:fr.push(c)):(f.next=y.next,y.next=f),c.interleaved=f):(y=c.pending,y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f)}function Qx(y,c,f){if(f&4194240){var x=c.lanes;x&=y.pendingLanes,f|=x,c.lanes=f,Bx(y,f)}}var np={readContext:li,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useInsertionEffect:Ti,useLayoutEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useMutableSource:Ti,useSyncExternalStore:Ti,useId:Ti,unstable_isNewReconciler:!1},Jg={readContext:li,useCallback:function(y,c){return wo().memoizedState=[y,c===void 0?null:c],y},useContext:li,useEffect:Uh,useImperativeHandle:function(y,c,f){return f=f!=null?f.concat([y]):null,tp(4194308,4,Xx.bind(null,c,y),f)},useLayoutEffect:function(y,c){return tp(4194308,4,y,c)},useInsertionEffect:function(y,c){return tp(4,2,y,c)},useMemo:function(y,c){var f=wo();return c=c===void 0?null:c,y=y(),f.memoizedState=[y,c],y},useReducer:function(y,c,f){var x=wo();return c=f!==void 0?f(c):c,x.memoizedState=x.baseState=c,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:c},x.queue=y,y=y.dispatch=HM.bind(null,In,y),[x.memoizedState,y]},useRef:function(y){var c=wo();return y={current:y},c.memoizedState=y},useState:Wg,useDebugValue:jg,useDeferredValue:function(y){var c=Wg(y),f=c[0],x=c[1];return Uh(function(){var E=Ji.transition;Ji.transition={};try{x(y)}finally{Ji.transition=E}},[y]),f},useTransition:function(){var y=Wg(!1),c=y[0];return y=kM.bind(null,y[1]),wo().memoizedState=y,[c,y]},useMutableSource:function(){},useSyncExternalStore:function(y,c,f){var x=In,E=wo();if(cn){if(f===void 0)throw Error(s(407));f=f()}else{if(f=c(),Bt===null)throw Error(s(349));hi&30||Hx(x,c,f)}E.memoizedState=f;var b={value:f,getSnapshot:c};return E.queue=b,Uh(Vx.bind(null,x,b,y),[y]),x.flags|=2048,nu(9,zx.bind(null,x,b,f,c),void 0,null),f},useId:function(){var y=wo(),c=Bt.identifierPrefix;if(cn){var f=ui,x=zi;f=(x&~(1<<32-Ks(x)-1)).toString(32)+f,c=":"+c+"R"+f,f=$a++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=Qf++,c=":"+c+"r"+f.toString(32)+":";return y.memoizedState=c},unstable_isNewReconciler:!1},CP={readContext:li,useCallback:Xg,useContext:li,useEffect:iu,useImperativeHandle:Jx,useInsertionEffect:Oh,useLayoutEffect:jx,useMemo:Kx,useReducer:fa,useRef:Nh,useState:function(){return fa(Ri)},useDebugValue:jg,useDeferredValue:function(y){var c=fa(Ri),f=c[0],x=c[1];return iu(function(){var E=Ji.transition;Ji.transition={};try{x(y)}finally{Ji.transition=E}},[y]),f},useTransition:function(){var y=fa(Ri)[0],c=Zr().memoizedState;return[y,c]},useMutableSource:ep,useSyncExternalStore:Gx,useId:GM,unstable_isNewReconciler:!1},TP={readContext:li,useCallback:Xg,useContext:li,useEffect:iu,useImperativeHandle:Jx,useInsertionEffect:Oh,useLayoutEffect:jx,useMemo:Kx,useReducer:tu,useRef:Nh,useState:function(){return tu(Ri)},useDebugValue:jg,useDeferredValue:function(y){var c=tu(Ri),f=c[0],x=c[1];return iu(function(){var E=Ji.transition;Ji.transition={};try{x(y)}finally{Ji.transition=E}},[y]),f},useTransition:function(){var y=tu(Ri)[0],c=Zr().memoizedState;return[y,c]},useMutableSource:ep,useSyncExternalStore:Gx,useId:GM,unstable_isNewReconciler:!1};function Zx(y,c){try{var f="",x=c;do f+=Dg(x),x=x.return;while(x);var E=f}catch(b){E=`
Error generating stack: `+b.message+`
`+b.stack}return{value:y,source:c,stack:E}}function rp(y,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var $x=typeof WeakMap=="function"?WeakMap:Map;function VM(y,c,f){f=ua(-1,f),f.tag=3,f.payload={element:null};var x=c.value;return f.callback=function(){rl||(rl=!0,Wh=x),rp(y,c)},f}function e_(y,c,f){f=ua(-1,f),f.tag=3;var x=y.type.getDerivedStateFromError;if(typeof x=="function"){var E=c.value;f.payload=function(){return x(E)},f.callback=function(){rp(y,c)}}var b=y.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(f.callback=function(){rp(y,c),typeof x!="function"&&(va===null?va=new Set([this]):va.add(this));var P=c.stack;this.componentDidCatch(c.value,{componentStack:P!==null?P:""})}),f}function t_(y,c,f){var x=y.pingCache;if(x===null){x=y.pingCache=new $x;var E=new Set;x.set(c,E)}else E=x.get(c),E===void 0&&(E=new Set,x.set(c,E));E.has(f)||(E.add(f),y=ls.bind(null,y,c,f),c.then(y,y))}function n_(y){do{var c;if((c=y.tag===13)&&(c=y.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return y;y=y.return}while(y!==null);return null}function r_(y,c,f,x,E){return y.mode&1?(y.flags|=65536,y.lanes=E,y):(y===c?y.flags|=65536:(y.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=ua(-1,1),c.tag=2,wi(f,c))),f.lanes|=1),y)}function bo(y){y.flags|=4}function Co(y,c){if(y!==null&&y.child===c.child)return!0;if(c.flags&16)return!1;for(y=c.child;y!==null;){if(y.flags&12854||y.subtreeFlags&12854)return!1;y=y.sibling}return!0}var kh,el,pc,su;if(ye)kh=function(y,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)q(y,f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},el=function(){},pc=function(y,c,f,x,E){if(y=y.memoizedProps,y!==x){var b=c.stateNode,P=Xi(bi.current);f=Y(b,f,y,x,E,P),(c.updateQueue=f)&&bo(c)}},su=function(y,c,f,x){f!==x&&bo(c)};else if(me){kh=function(y,c,f,x){for(var E=c.child;E!==null;){if(E.tag===5){var b=E.stateNode;f&&x&&(b=dr(b,E.type,E.memoizedProps,E)),q(y,b)}else if(E.tag===6)b=E.stateNode,f&&x&&(b=kt(b,E.memoizedProps,E)),q(y,b);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)b=E.child,b!==null&&(b.return=E),kh(y,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var ip=function(y,c,f,x){for(var E=c.child;E!==null;){if(E.tag===5){var b=E.stateNode;f&&x&&(b=dr(b,E.type,E.memoizedProps,E)),Lt(y,b)}else if(E.tag===6)b=E.stateNode,f&&x&&(b=kt(b,E.memoizedProps,E)),Lt(y,b);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)b=E.child,b!==null&&(b.return=E),ip(y,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===c)break;for(;E.sibling===null;){if(E.return===null||E.return===c)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};el=function(y,c){var f=c.stateNode;if(!Co(y,c)){y=f.containerInfo;var x=ke(y);ip(x,c,!1,!1),f.pendingChildren=x,bo(c),Rt(y,x)}},pc=function(y,c,f,x,E){var b=y.stateNode,P=y.memoizedProps;if((y=Co(y,c))&&P===x)c.stateNode=b;else{var k=c.stateNode,$=Xi(bi.current),fe=null;P!==x&&(fe=Y(k,f,P,x,E,$)),y&&fe===null?c.stateNode=b:(b=Pe(b,fe,f,P,x,c,y,k),re(b,f,x,E,$)&&bo(c),c.stateNode=b,y?bo(c):kh(b,c,!1,!1))}},su=function(y,c,f,x){f!==x?(y=Xi(da.current),f=Xi(bi.current),c.stateNode=Se(x,y,f,c),bo(c)):c.stateNode=y.stateNode}}else el=function(){},pc=function(){},su=function(){};function Gh(y,c){if(!cn)switch(y.tailMode){case"hidden":c=y.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?y.tail=null:f.sibling=null;break;case"collapsed":f=y.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c||y.tail===null?y.tail=null:y.tail.sibling=null:x.sibling=null}}function Br(y){var c=y.alternate!==null&&y.alternate.child===y.child,f=0,x=0;if(c)for(var E=y.child;E!==null;)f|=E.lanes|E.childLanes,x|=E.subtreeFlags&14680064,x|=E.flags&14680064,E.return=y,E=E.sibling;else for(E=y.child;E!==null;)f|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=y,E=E.sibling;return y.subtreeFlags|=x,y.childLanes=f,c}function Pi(y,c,f){var x=c.pendingProps;switch(Jf(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(c),null;case 1:return er(c.type)&&tr(),Br(c),null;case 3:return x=c.stateNode,dc(),Vt(on),Vt(Kt),qf(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(y===null||y.child===null)&&(Lh(c)?bo(c):y===null||y.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,ji!==null&&(mp(ji),ji=null))),el(y,c),Br(c),null;case 5:Vg(c),f=Xi(da.current);var E=c.type;if(y!==null&&c.stateNode!=null)pc(y,c,E,x,f),y.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(s(166));return Br(c),null}if(y=Xi(bi.current),Lh(c)){if(!pe)throw Error(s(175));y=Z(c.stateNode,c.type,c.memoizedProps,f,y,c,!Bn),c.updateQueue=y,y!==null&&bo(c)}else{var b=G(E,x,f,y,c);kh(b,c,!1,!1),c.stateNode=b,re(b,E,x,f,y)&&bo(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Br(c),null;case 6:if(y&&c.stateNode!=null)su(y,c,y.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(s(166));if(y=Xi(da.current),f=Xi(bi.current),Lh(c)){if(!pe)throw Error(s(176));if(y=c.stateNode,x=c.memoizedProps,(f=de(y,x,c,!Bn))&&(E=Wi,E!==null))switch(b=(E.mode&1)!==0,E.tag){case 3:Dt(E.stateNode.containerInfo,y,x,b);break;case 5:yn(E.type,E.memoizedProps,E.stateNode,y,x,b)}f&&bo(c)}else c.stateNode=Se(x,y,f,c)}return Br(c),null;case 13:if(Vt(Vn),x=c.memoizedState,cn&&zn!==null&&c.mode&1&&!(c.flags&128)){for(y=zn;y;)y=qa(y);return ha(),c.flags|=98560,c}if(x!==null&&x.dehydrated!==null){if(x=Lh(c),y===null){if(!x)throw Error(s(318));if(!pe)throw Error(s(344));if(y=c.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));Fe(y,c)}else ha(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;return Br(c),null}return ji!==null&&(mp(ji),ji=null),c.flags&128?(c.lanes=f,c):(x=x!==null,f=!1,y===null?Lh(c):f=y.memoizedState!==null,x&&!f&&(c.child.flags|=8192,c.mode&1&&(y===null||Vn.current&1?jn===0&&(jn=3):p0())),c.updateQueue!==null&&(c.flags|=4),Br(c),null);case 4:return dc(),el(y,c),y===null&&Ae(c.stateNode.containerInfo),Br(c),null;case 10:return Ng(c.type._context),Br(c),null;case 17:return er(c.type)&&tr(),Br(c),null;case 19:if(Vt(Vn),E=c.memoizedState,E===null)return Br(c),null;if(x=(c.flags&128)!==0,b=E.rendering,b===null)if(x)Gh(E,!1);else{if(jn!==0||y!==null&&y.flags&128)for(y=c.child;y!==null;){if(b=Hn(y),b!==null){for(c.flags|=128,Gh(E,!1),y=b.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=f,x=c.child;x!==null;)f=x,E=y,f.flags&=14680066,b=f.alternate,b===null?(f.childLanes=0,f.lanes=E,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=b.childLanes,f.lanes=b.lanes,f.child=b.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=b.memoizedProps,f.memoizedState=b.memoizedState,f.updateQueue=b.updateQueue,f.type=b.type,E=b.dependencies,f.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),x=x.sibling;return Pt(Vn,Vn.current&1|2),c.child}y=y.sibling}E.tail!==null&&Kr()>pp&&(c.flags|=128,x=!0,Gh(E,!1),c.lanes=4194304)}else{if(!x)if(y=Hn(b),y!==null){if(c.flags|=128,x=!0,y=y.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),Gh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!b.alternate&&!cn)return Br(c),null}else 2*Kr()-E.renderingStartTime>pp&&f!==1073741824&&(c.flags|=128,x=!0,Gh(E,!1),c.lanes=4194304);E.isBackwards?(b.sibling=c.child,c.child=b):(y=E.last,y!==null?y.sibling=b:c.child=b,E.last=b)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=Kr(),c.sibling=null,y=Vn.current,Pt(Vn,x?y&1|2:y&1),c):(Br(c),null);case 22:case 23:return f0(),x=c.memoizedState!==null,y!==null&&y.memoizedState!==null!==x&&(c.flags|=8192),x&&c.mode&1?Rn&1073741824&&(Br(c),ye&&c.subtreeFlags&6&&(c.flags|=8192)):Br(c),null;case 24:return null;case 25:return null}throw Error(s(156,c.tag))}var RP=o.ReactCurrentOwner,Rs=!1;function Dn(y,c,f,x){c.child=y===null?$c(c,null,f,x):Zc(c,y.child,f,x)}function Bi(y,c,f,x,E){f=f.render;var b=c.ref;return ac(c,E),x=Zf(y,c,f,x,b,E),f=$f(),y!==null&&!Rs?(c.updateQueue=y.updateQueue,c.flags&=-2053,y.lanes&=~E,pa(y,c,E)):(cn&&f&&Gg(c),c.flags|=1,Dn(y,c,x,E),c.child)}function i_(y,c,f,x,E){if(y===null){var b=f.type;return typeof b=="function"&&!cs(b)&&b.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=b,s_(y,c,b,x,E)):(y=Lo(f.type,null,x,c,c.mode,E),y.ref=c.ref,y.return=c,c.child=y)}if(b=y.child,!(y.lanes&E)){var P=b.memoizedProps;if(f=f.compare,f=f!==null?f:Ig,f(P,x)&&y.ref===c.ref)return pa(y,c,E)}return c.flags|=1,y=Sc(b,x),y.ref=c.ref,y.return=c,c.child=y}function s_(y,c,f,x,E){if(y!==null&&Ig(y.memoizedProps,x)&&y.ref===c.ref)if(Rs=!1,(y.lanes&E)!==0)y.flags&131072&&(Rs=!0);else return c.lanes=y.lanes,pa(y,c,E);return Kg(y,c,f,x,E)}function o_(y,c,f){var x=c.pendingProps,E=x.children,b=y!==null?y.memoizedState:null;if(x.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null},Pt($r,Rn),Rn|=f;else if(f&1073741824)c.memoizedState={baseLanes:0,cachePool:null},x=b!==null?b.baseLanes:f,Pt($r,Rn),Rn|=x;else return y=b!==null?b.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:y,cachePool:null},c.updateQueue=null,Pt($r,Rn),Rn|=y,null;else b!==null?(x=b.baseLanes|f,c.memoizedState=null):x=f,Pt($r,Rn),Rn|=x;return Dn(y,c,E,f),c.child}function a_(y,c){var f=c.ref;(y===null&&f!==null||y!==null&&y.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function Kg(y,c,f,x,E){var b=er(f)?Ot:Kt.current;return b=Rr(c,b),ac(c,E),f=Zf(y,c,f,x,b,E),x=$f(),y!==null&&!Rs?(c.updateQueue=y.updateQueue,c.flags&=-2053,y.lanes&=~E,pa(y,c,E)):(cn&&x&&Gg(c),c.flags|=1,Dn(y,c,f,E),c.child)}function Yg(y,c,f,x,E){if(er(f)){var b=!0;Uf(c)}else b=!1;if(ac(c,E),c.stateNode===null)y!==null&&(y.alternate=null,c.alternate=null,c.flags|=2),Nx(c,f,x),kg(c,f,x,E),x=!0;else if(y===null){var P=c.stateNode,k=c.memoizedProps;P.props=k;var $=P.context,fe=f.contextType;typeof fe=="object"&&fe!==null?fe=li(fe):(fe=er(f)?Ot:Kt.current,fe=Rr(c,fe));var Ce=f.getDerivedStateFromProps,He=typeof Ce=="function"||typeof P.getSnapshotBeforeUpdate=="function";He||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(k!==x||$!==fe)&&Ux(c,P,x,fe),ci=!1;var Ze=c.memoizedState;P.state=Ze,Wf(c,x,P,E),$=c.memoizedState,k!==x||Ze!==$||on.current||ci?(typeof Ce=="function"&&(Og(c,f,Ce,x),$=c.memoizedState),(k=ci||Xf(c,f,k,x,Ze,$,fe))?(He||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(c.flags|=4194308)):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=$),P.props=x,P.state=$,P.context=fe,x=k):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{P=c.stateNode,Ug(y,c),k=c.memoizedProps,fe=c.type===c.elementType?k:So(c.type,k),P.props=fe,He=c.pendingProps,Ze=P.context,$=f.contextType,typeof $=="object"&&$!==null?$=li($):($=er(f)?Ot:Kt.current,$=Rr(c,$));var ot=f.getDerivedStateFromProps;(Ce=typeof ot=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(k!==He||Ze!==$)&&Ux(c,P,x,$),ci=!1,Ze=c.memoizedState,P.state=Ze,Wf(c,x,P,E);var rt=c.memoizedState;k!==He||Ze!==rt||on.current||ci?(typeof ot=="function"&&(Og(c,f,ot,x),rt=c.memoizedState),(fe=ci||Xf(c,f,fe,x,Ze,rt,$)||!1)?(Ce||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(x,rt,$),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(x,rt,$)),typeof P.componentDidUpdate=="function"&&(c.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof P.componentDidUpdate!="function"||k===y.memoizedProps&&Ze===y.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||k===y.memoizedProps&&Ze===y.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=rt),P.props=x,P.state=rt,P.context=$,x=fe):(typeof P.componentDidUpdate!="function"||k===y.memoizedProps&&Ze===y.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||k===y.memoizedProps&&Ze===y.memoizedState||(c.flags|=1024),x=!1)}return qg(y,c,f,x,b,E)}function qg(y,c,f,x,E,b){a_(y,c);var P=(c.flags&128)!==0;if(!x&&!P)return E&&Of(c,f,!1),pa(y,c,b);x=c.stateNode,RP.current=c;var k=P&&typeof f.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,y!==null&&P?(c.child=Zc(c,y.child,null,b),c.child=Zc(c,null,k,b)):Dn(y,c,k,b),c.memoizedState=x.state,E&&Of(c,f,!0),c.child}function Qg(y){var c=y.stateNode;c.pendingContext?Nf(y,c.pendingContext,c.pendingContext!==c.context):c.context&&Nf(y,c.context,!1),Qs(y,c.containerInfo)}function l_(y,c,f,x,E){return ha(),uc(E),c.flags|=256,Dn(y,c,f,x),c.child}var sp={dehydrated:null,treeContext:null,retryLane:0};function ou(y){return{baseLanes:y,cachePool:null}}function op(y,c,f){var x=c.pendingProps,E=Vn.current,b=!1,P=(c.flags&128)!==0,k;if((k=P)||(k=y!==null&&y.memoizedState===null?!1:(E&2)!==0),k?(b=!0,c.flags&=-129):(y===null||y.memoizedState!==null)&&(E|=1),Pt(Vn,E&1),y===null)return Kf(c),y=c.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(c.mode&1?rc(y)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(E=x.children,y=x.fallback,b?(x=c.mode,b=c.child,E={mode:"hidden",children:E},!(x&1)&&b!==null?(b.childLanes=0,b.pendingProps=E):b=xa(E,x,0,null),y=ya(y,x,f,null),b.return=c,y.return=c,b.sibling=y,c.child=b,c.child.memoizedState=ou(f),c.memoizedState=sp,y):Zg(c,E));if(E=y.memoizedState,E!==null){if(k=E.dehydrated,k!==null){if(P)return c.flags&256?(c.flags&=-257,ap(y,c,f,Error(s(422)))):c.memoizedState!==null?(c.child=y.child,c.flags|=128,null):(b=x.fallback,E=c.mode,x=xa({mode:"visible",children:x.children},E,0,null),b=ya(b,E,f,null),b.flags|=2,x.return=c,b.return=c,x.sibling=b,c.child=x,c.mode&1&&Zc(c,y.child,null,f),c.child.memoizedState=ou(f),c.memoizedState=sp,b);if(!(c.mode&1))c=ap(y,c,f,null);else if(rc(k))c=ap(y,c,f,Error(s(419)));else if(x=(f&y.childLanes)!==0,Rs||x){if(x=Bt,x!==null){switch(f&-f){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}x=b&(x.suspendedLanes|f)?0:b,x!==0&&x!==E.retryLane&&(E.retryLane=x,zr(y,x,-1))}p0(),c=ap(y,c,f,Error(s(421)))}else nc(k)?(c.flags|=128,c.child=y.child,c=KM.bind(null,y),Xc(k,c),c=null):(f=E.treeContext,pe&&(zn=ue(k),Wi=c,cn=!0,ji=null,Bn=!1,f!==null&&(Hi[nr++]=zi,Hi[nr++]=ui,Hi[nr++]=qr,zi=f.id,ui=f.overflow,qr=c)),c=Zg(c,c.pendingProps.children),c.flags|=4096);return c}return b?(x=c_(y,c,x.children,x.fallback,f),b=c.child,E=y.child.memoizedState,b.memoizedState=E===null?ou(f):{baseLanes:E.baseLanes|f,cachePool:null},b.childLanes=y.childLanes&~f,c.memoizedState=sp,x):(f=$g(y,c,x.children,f),c.memoizedState=null,f)}return b?(x=c_(y,c,x.children,x.fallback,f),b=c.child,E=y.child.memoizedState,b.memoizedState=E===null?ou(f):{baseLanes:E.baseLanes|f,cachePool:null},b.childLanes=y.childLanes&~f,c.memoizedState=sp,x):(f=$g(y,c,x.children,f),c.memoizedState=null,f)}function Zg(y,c){return c=xa({mode:"visible",children:c},y.mode,0,null),c.return=y,y.child=c}function $g(y,c,f,x){var E=y.child;return y=E.sibling,f=Sc(E,{mode:"visible",children:f}),!(c.mode&1)&&(f.lanes=x),f.return=c,f.sibling=null,y!==null&&(x=c.deletions,x===null?(c.deletions=[y],c.flags|=16):x.push(y)),c.child=f}function c_(y,c,f,x,E){var b=c.mode;y=y.child;var P=y.sibling,k={mode:"hidden",children:f};return!(b&1)&&c.child!==y?(f=c.child,f.childLanes=0,f.pendingProps=k,c.deletions=null):(f=Sc(y,k),f.subtreeFlags=y.subtreeFlags&14680064),P!==null?x=Sc(P,x):(x=ya(x,b,E,null),x.flags|=2),x.return=c,f.return=c,f.sibling=x,c.child=f,x}function ap(y,c,f,x){return x!==null&&uc(x),Zc(c,y.child,null,f),y=Zg(c,c.pendingProps.children),y.flags|=2,c.memoizedState=null,y}function lp(y,c,f){y.lanes|=c;var x=y.alternate;x!==null&&(x.lanes|=c),zf(y.return,c,f)}function e0(y,c,f,x,E){var b=y.memoizedState;b===null?y.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:E}:(b.isBackwards=c,b.rendering=null,b.renderingStartTime=0,b.last=x,b.tail=f,b.tailMode=E)}function t0(y,c,f){var x=c.pendingProps,E=x.revealOrder,b=x.tail;if(Dn(y,c,x.children,f),x=Vn.current,x&2)x=x&1|2,c.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=c.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&lp(y,f,c);else if(y.tag===19)lp(y,f,c);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===c)break e;for(;y.sibling===null;){if(y.return===null||y.return===c)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}x&=1}if(Pt(Vn,x),!(c.mode&1))c.memoizedState=null;else switch(E){case"forwards":for(f=c.child,E=null;f!==null;)y=f.alternate,y!==null&&Hn(y)===null&&(E=f),f=f.sibling;f=E,f===null?(E=c.child,c.child=null):(E=f.sibling,f.sibling=null),e0(c,!1,E,f,b);break;case"backwards":for(f=null,E=c.child,c.child=null;E!==null;){if(y=E.alternate,y!==null&&Hn(y)===null){c.child=E;break}y=E.sibling,E.sibling=f,f=E,E=y}e0(c,!0,f,null,b);break;case"together":e0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function pa(y,c,f){if(y!==null&&(c.dependencies=y.dependencies),ga|=c.lanes,!(f&c.childLanes))return null;if(y!==null&&c.child!==y.child)throw Error(s(153));if(c.child!==null){for(y=c.child,f=Sc(y,y.pendingProps),c.child=f,f.return=c;y.sibling!==null;)y=y.sibling,f=f.sibling=Sc(y,y.pendingProps),f.return=c;f.sibling=null}return c.child}function tl(y,c,f){switch(c.tag){case 3:Qg(c),ha();break;case 5:eu(c);break;case 1:er(c.type)&&Uf(c);break;case 4:Qs(c,c.stateNode.containerInfo);break;case 10:Fg(c,c.type._context,c.memoizedProps.value);break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(Pt(Vn,Vn.current&1),c.flags|=128,null):f&c.child.childLanes?op(y,c,f):(Pt(Vn,Vn.current&1),y=pa(y,c,f),y!==null?y.sibling:null);Pt(Vn,Vn.current&1);break;case 19:if(x=(f&c.childLanes)!==0,y.flags&128){if(x)return t0(y,c,f);c.flags|=128}var E=c.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Pt(Vn,Vn.current),x)break;return null;case 22:case 23:return c.lanes=0,o_(y,c,f)}return pa(y,c,f)}function PP(y,c){switch(Jf(c),c.tag){case 1:return er(c.type)&&tr(),y=c.flags,y&65536?(c.flags=y&-65537|128,c):null;case 3:return dc(),Vt(on),Vt(Kt),qf(),y=c.flags,y&65536&&!(y&128)?(c.flags=y&-65537|128,c):null;case 5:return Vg(c),null;case 13:if(Vt(Vn),y=c.memoizedState,y!==null&&y.dehydrated!==null){if(c.alternate===null)throw Error(s(340));ha()}return y=c.flags,y&65536?(c.flags=y&-65537|128,c):null;case 19:return Vt(Vn),null;case 4:return dc(),null;case 10:return Ng(c.type._context),null;case 22:case 23:return f0(),null;case 24:return null;default:return null}}var n0=!1,ma=!1,au=typeof WeakSet=="function"?WeakSet:Set,dt=null;function at(y,c){var f=y.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(x){qi(y,c,x)}else f.current=null}function cp(y,c,f){try{f()}catch(x){qi(y,c,x)}}var r0=!1;function WM(y,c){for(D(y.containerInfo),dt=c;dt!==null;)if(y=dt,c=y.child,(y.subtreeFlags&1028)!==0&&c!==null)c.return=y,dt=c;else for(;dt!==null;){y=dt;try{var f=y.alternate;if(y.flags&1024)switch(y.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var x=f.memoizedProps,E=f.memoizedState,b=y.stateNode,P=b.getSnapshotBeforeUpdate(y.elementType===y.type?x:So(y.type,x),E);b.__reactInternalSnapshotBeforeUpdate=P}break;case 3:ye&&xe(y.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(k){qi(y,y.return,k)}if(c=y.sibling,c!==null){c.return=y.return,dt=c;break}dt=y.return}return f=r0,r0=!1,f}function lu(y,c,f){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var E=x=x.next;do{if((E.tag&y)===y){var b=E.destroy;E.destroy=void 0,b!==void 0&&cp(c,f,b)}E=E.next}while(E!==x)}}function To(y,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&y)===y){var x=f.create;f.destroy=x()}f=f.next}while(f!==c)}}function cu(y){var c=y.ref;if(c!==null){var f=y.stateNode;switch(y.tag){case 5:y=X(f);break;default:y=f}typeof c=="function"?c(y):c.current=y}}function i0(y,c,f){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(Bg,c)}catch{}switch(c.tag){case 0:case 11:case 14:case 15:if(y=c.updateQueue,y!==null&&(y=y.lastEffect,y!==null)){var x=y=y.next;do{var E=x,b=E.destroy;E=E.tag,b!==void 0&&(E&2||E&4)&&cp(c,f,b),x=x.next}while(x!==y)}break;case 1:if(at(c,f),y=c.stateNode,typeof y.componentWillUnmount=="function")try{y.props=c.memoizedProps,y.state=c.memoizedState,y.componentWillUnmount()}catch(P){qi(c,f,P)}break;case 5:at(c,f);break;case 4:ye?o0(y,c,f):me&&me&&(c=c.stateNode.containerInfo,f=ke(c),ln(c,f))}}function u_(y,c,f){for(var x=c;;)if(i0(y,x,f),x.child===null||ye&&x.tag===4){if(x===c)break;for(;x.sibling===null;){if(x.return===null||x.return===c)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else x.child.return=x,x=x.child}function h_(y){var c=y.alternate;c!==null&&(y.alternate=null,h_(c)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(c=y.stateNode,c!==null&&De(c)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function d_(y){return y.tag===5||y.tag===3||y.tag===4}function f_(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||d_(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function p_(y){if(ye){e:{for(var c=y.return;c!==null;){if(d_(c))break e;c=c.return}throw Error(s(160))}var f=c;switch(f.tag){case 5:c=f.stateNode,f.flags&32&&(xt(c),f.flags&=-33),f=f_(y),up(y,f,c);break;case 3:case 4:c=f.stateNode.containerInfo,f=f_(y),s0(y,f,c);break;default:throw Error(s(161))}}}function s0(y,c,f){var x=y.tag;if(x===5||x===6)y=y.stateNode,c?je(f,y,c):Ke(f,y);else if(x!==4&&(y=y.child,y!==null))for(s0(y,c,f),y=y.sibling;y!==null;)s0(y,c,f),y=y.sibling}function up(y,c,f){var x=y.tag;if(x===5||x===6)y=y.stateNode,c?Ge(f,y,c):Te(f,y);else if(x!==4&&(y=y.child,y!==null))for(up(y,c,f),y=y.sibling;y!==null;)up(y,c,f),y=y.sibling}function o0(y,c,f){for(var x=c,E=!1,b,P;;){if(!E){E=x.return;e:for(;;){if(E===null)throw Error(s(160));switch(b=E.stateNode,E.tag){case 5:P=!1;break e;case 3:b=b.containerInfo,P=!0;break e;case 4:b=b.containerInfo,P=!0;break e}E=E.return}E=!0}if(x.tag===5||x.tag===6)u_(y,x,f),P?Oe(b,x.stateNode):Le(b,x.stateNode);else if(x.tag===18)P?ct(b,x.stateNode):_t(b,x.stateNode);else if(x.tag===4){if(x.child!==null){b=x.stateNode.containerInfo,P=!0,x.child.return=x,x=x.child;continue}}else if(i0(y,x,f),x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break;for(;x.sibling===null;){if(x.return===null||x.return===c)return;x=x.return,x.tag===4&&(E=!1)}x.sibling.return=x.return,x=x.sibling}}function a0(y,c){if(ye){switch(c.tag){case 0:case 11:case 14:case 15:lu(3,c,c.return),To(3,c),lu(5,c,c.return);return;case 1:return;case 5:var f=c.stateNode;if(f!=null){var x=c.memoizedProps;y=y!==null?y.memoizedProps:x;var E=c.type,b=c.updateQueue;c.updateQueue=null,b!==null&&Ue(f,b,E,y,x,c)}return;case 6:if(c.stateNode===null)throw Error(s(162));f=c.memoizedProps,Be(c.stateNode,y!==null?y.memoizedProps:f,f);return;case 3:pe&&y!==null&&y.memoizedState.isDehydrated&&$e(c.stateNode.containerInfo);return;case 12:return;case 13:Hh(c);return;case 19:Hh(c);return;case 17:return}throw Error(s(163))}switch(c.tag){case 0:case 11:case 14:case 15:lu(3,c,c.return),To(3,c),lu(5,c,c.return);return;case 12:return;case 13:Hh(c);return;case 19:Hh(c);return;case 3:pe&&y!==null&&y.memoizedState.isDehydrated&&$e(c.stateNode.containerInfo);break;case 22:case 23:return}e:if(me){switch(c.tag){case 1:case 5:case 6:break e;case 3:case 4:c=c.stateNode,ln(c.containerInfo,c.pendingChildren);break e}throw Error(s(163))}}function Hh(y){var c=y.updateQueue;if(c!==null){y.updateQueue=null;var f=y.stateNode;f===null&&(f=y.stateNode=new au),c.forEach(function(x){var E=IP.bind(null,y,x);f.has(x)||(f.add(x),x.then(E,E))})}}function l0(y,c){for(dt=c;dt!==null;){c=dt;var f=c.deletions;if(f!==null)for(var x=0;x<f.length;x++){var E=f[x];try{var b=y;ye?o0(b,E,c):u_(b,E,c);var P=E.alternate;P!==null&&(P.return=null),E.return=null}catch(Ie){qi(E,c,Ie)}}if(f=c.child,c.subtreeFlags&12854&&f!==null)f.return=c,dt=f;else for(;dt!==null;){c=dt;try{var k=c.flags;if(k&32&&ye&&xt(c.stateNode),k&512){var $=c.alternate;if($!==null){var fe=$.ref;fe!==null&&(typeof fe=="function"?fe(null):fe.current=null)}}if(k&8192)switch(c.tag){case 13:if(c.memoizedState!==null){var Ce=c.alternate;(Ce===null||Ce.memoizedState===null)&&(Li=Kr())}break;case 22:var He=c.memoizedState!==null,Ze=c.alternate,ot=Ze!==null&&Ze.memoizedState!==null;if(f=c,ye){e:if(x=f,E=He,b=null,ye)for(var rt=x;;){if(rt.tag===5){if(b===null){b=rt;var At=rt.stateNode;E?wt(At):J(rt.stateNode,rt.memoizedProps)}}else if(rt.tag===6){if(b===null){var Fn=rt.stateNode;E?zt(Fn):ce(Fn,rt.memoizedProps)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===x)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===x)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===x)break e;b===rt&&(b=null),rt=rt.return}b===rt&&(b=null),rt.sibling.return=rt.return,rt=rt.sibling}}if(He&&!ot&&f.mode&1){dt=f;for(var Ee=f.child;Ee!==null;){for(f=dt=Ee;dt!==null;){x=dt;var Q=x.child;switch(x.tag){case 0:case 11:case 14:case 15:lu(4,x,x.return);break;case 1:at(x,x.return);var ee=x.stateNode;if(typeof ee.componentWillUnmount=="function"){var ge=x.return;try{ee.props=x.memoizedProps,ee.state=x.memoizedState,ee.componentWillUnmount()}catch(Ie){qi(x,ge,Ie)}}break;case 5:at(x,x.return);break;case 22:if(x.memoizedState!==null){g_(f);continue}}Q!==null?(Q.return=x,dt=Q):g_(f)}Ee=Ee.sibling}}}switch(k&4102){case 2:p_(c),c.flags&=-3;break;case 6:p_(c),c.flags&=-3,a0(c.alternate,c);break;case 4096:c.flags&=-4097;break;case 4100:c.flags&=-4097,a0(c.alternate,c);break;case 4:a0(c.alternate,c)}}catch(Ie){qi(c,c.return,Ie)}if(f=c.sibling,f!==null){f.return=c.return,dt=f;break}dt=c.return}}}function BP(y,c,f){dt=y,jM(y)}function jM(y,c,f){for(var x=(y.mode&1)!==0;dt!==null;){var E=dt,b=E.child;if(E.tag===22&&x){var P=E.memoizedState!==null||n0;if(!P){var k=E.alternate,$=k!==null&&k.memoizedState!==null||ma;k=n0;var fe=ma;if(n0=P,(ma=$)&&!fe)for(dt=E;dt!==null;)P=dt,$=P.child,P.tag===22&&P.memoizedState!==null?v_(E):$!==null?($.return=P,dt=$):v_(E);for(;b!==null;)dt=b,jM(b),b=b.sibling;dt=E,n0=k,ma=fe}m_(y)}else E.subtreeFlags&8772&&b!==null?(b.return=E,dt=b):m_(y)}}function m_(y){for(;dt!==null;){var c=dt;if(c.flags&8772){var f=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:ma||To(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!ma)if(f===null)x.componentDidMount();else{var E=c.elementType===c.type?f.memoizedProps:So(c.type,f.memoizedProps);x.componentDidUpdate(E,f.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var b=c.updateQueue;b!==null&&jf(c,b,x);break;case 3:var P=c.updateQueue;if(P!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=X(c.child.stateNode);break;case 1:f=c.child.stateNode}jf(c,P,f)}break;case 5:var k=c.stateNode;f===null&&c.flags&4&&he(k,c.type,c.memoizedProps,c);break;case 6:break;case 4:break;case 12:break;case 13:if(pe&&c.memoizedState===null){var $=c.alternate;if($!==null){var fe=$.memoizedState;if(fe!==null){var Ce=fe.dehydrated;Ce!==null&&st(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}ma||c.flags&512&&cu(c)}catch(He){qi(c,c.return,He)}}if(c===y){dt=null;break}if(f=c.sibling,f!==null){f.return=c.return,dt=f;break}dt=c.return}}function g_(y){for(;dt!==null;){var c=dt;if(c===y){dt=null;break}var f=c.sibling;if(f!==null){f.return=c.return,dt=f;break}dt=c.return}}function v_(y){for(;dt!==null;){var c=dt;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{To(4,c)}catch($){qi(c,f,$)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var E=c.return;try{x.componentDidMount()}catch($){qi(c,E,$)}}var b=c.return;try{cu(c)}catch($){qi(c,b,$)}break;case 5:var P=c.return;try{cu(c)}catch($){qi(c,P,$)}}}catch($){qi(c,c.return,$)}if(c===y){dt=null;break}var k=c.sibling;if(k!==null){k.return=c.return,dt=k;break}dt=c.return}}var hp=0,uu=1,hu=2,du=3,fu=4;if(typeof Symbol=="function"&&Symbol.for){var mc=Symbol.for;hp=mc("selector.component"),uu=mc("selector.has_pseudo_class"),hu=mc("selector.role"),du=mc("selector.test_id"),fu=mc("selector.text")}function pu(y){var c=le(y);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(s(364));return c}if(y=nt(y),y===null)throw Error(s(362));return y.stateNode.current}function dp(y,c){switch(c.$$typeof){case hp:if(y.type===c.value)return!0;break;case uu:e:{c=c.value,y=[y,0];for(var f=0;f<y.length;){var x=y[f++],E=y[f++],b=c[E];if(x.tag!==5||!F(x)){for(;b!=null&&dp(x,b);)E++,b=c[E];if(E===c.length){c=!0;break e}else for(x=x.child;x!==null;)y.push(x,E),x=x.sibling}}c=!1}return c;case hu:if(y.tag===5&&oe(y.stateNode,c.value))return!0;break;case fu:if((y.tag===5||y.tag===6)&&(y=U(y),y!==null&&0<=y.indexOf(c.value)))return!0;break;case du:if(y.tag===5&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function fp(y){switch(y.$$typeof){case hp:return"<"+(R(y.value)||"Unknown")+">";case uu:return":has("+(fp(y)||"")+")";case hu:return'[role="'+y.value+'"]';case fu:return'"'+y.value+'"';case du:return'[data-testname="'+y.value+'"]';default:throw Error(s(365))}}function c0(y,c){var f=[];y=[y,0];for(var x=0;x<y.length;){var E=y[x++],b=y[x++],P=c[b];if(E.tag!==5||!F(E)){for(;P!=null&&dp(E,P);)b++,P=c[b];if(b===c.length)f.push(E);else for(E=E.child;E!==null;)y.push(E,b),E=E.sibling}}return f}function u0(y,c){if(!Ve)throw Error(s(363));y=pu(y),y=c0(y,c),c=[],y=Array.from(y);for(var f=0;f<y.length;){var x=y[f++];if(x.tag===5)F(x)||c.push(x.stateNode);else for(x=x.child;x!==null;)y.push(x),x=x.sibling}return c}var y_=Math.ceil,h0=o.ReactCurrentDispatcher,zh=o.ReactCurrentOwner,rr=o.ReactCurrentBatchConfig,bt=0,Bt=null,Yt=null,un=0,Rn=0,$r=Hr(0),jn=0,ir=null,ga=0,nl=0,Vh=0,mu=null,ei=null,Li=0,pp=1/0;function gc(){pp=Kr()+500}var rl=!1,Wh=null,va=null,Ro=!1,Po=null,Bo=0,vc=0,gu=null,jh=-1,vu=0;function ti(){return bt&6?Kr():jh!==-1?jh:jh=Kr()}function cr(y){return y.mode&1?bt&2&&un!==0?un&-un:la.transition!==null?(vu===0&&(y=Cg,Cg<<=1,!(Cg&4194240)&&(Cg=64),vu=y),vu):(y=vn,y!==0?y:Re()):1}function zr(y,c,f){if(50<vc)throw vc=0,gu=null,Error(s(185));var x=Ki(y,c);return x===null?null:(Kc(x,c,f),(!(bt&2)||x!==Bt)&&(x===Bt&&(!(bt&2)&&(nl|=c),jn===4&&yc(x,un)),di(x,f),c===1&&bt===0&&!(y.mode&1)&&(gc(),Ys&&aa())),x)}function Ki(y,c){y.lanes|=c;var f=y.alternate;for(f!==null&&(f.lanes|=c),f=y,y=y.return;y!==null;)y.childLanes|=c,f=y.alternate,f!==null&&(f.childLanes|=c),f=y,y=y.return;return f.tag===3?f.stateNode:null}function di(y,c){var f=y.callbackNode;MP(y,c);var x=sc(y,y===Bt?un:0);if(x===0)f!==null&&Pg(f),y.callbackNode=null,y.callbackPriority=0;else if(c=x&-x,y.callbackPriority!==c){if(f!=null&&Pg(f),c===1)y.tag===0?OM(il.bind(null,y)):Lg(il.bind(null,y)),Je?Qe(function(){bt===0&&aa()}):Rg(Pr,aa),f=null;else{switch(xn(x)){case 1:f=Pr;break;case 4:f=Lx;break;case 16:f=Ix;break;case 536870912:f=Dx;break;default:f=Ix}f=M_(f,Yi.bind(null,y))}y.callbackPriority=c,y.callbackNode=f}}function Yi(y,c){if(jh=-1,vu=0,bt&6)throw Error(s(327));var f=y.callbackNode;if(xu()&&y.callbackNode!==f)return null;var x=sc(y,y===Bt?un:0);if(x===0)return null;if(x&30||x&y.expiredLanes||c)c=Xh(y,x);else{c=x;var E=bt;bt|=2;var b=A_();(Bt!==y||un!==c)&&(gc(),sl(y,c));do try{LP();break}catch(k){xc(y,k)}while(1);Hf(),h0.current=b,bt=E,Yt!==null?c=0:(Bt=null,un=0,c=jn)}if(c!==0){if(c===2&&(E=Px(y),E!==0&&(x=E,c=d0(y,E))),c===1)throw f=ir,sl(y,0),yc(y,x),di(y,Kr()),f;if(c===6)yc(y,x);else{if(E=y.current.alternate,!(x&30)&&!x_(E)&&(c=Xh(y,x),c===2&&(b=Px(y),b!==0&&(x=b,c=d0(y,b))),c===1))throw f=ir,sl(y,0),yc(y,x),di(y,Kr()),f;switch(y.finishedWork=E,y.finishedLanes=x,c){case 0:case 1:throw Error(s(345));case 2:_c(y,ei);break;case 3:if(yc(y,x),(x&130023424)===x&&(c=Li+500-Kr(),10<c)){if(sc(y,0)!==0)break;if(E=y.suspendedLanes,(E&x)!==x){ti(),y.pingedLanes|=y.suspendedLanes&E;break}y.timeoutHandle=ve(_c.bind(null,y,ei),c);break}_c(y,ei);break;case 4:if(yc(y,x),(x&4194240)===x)break;for(c=y.eventTimes,E=-1;0<x;){var P=31-Ks(x);b=1<<P,P=c[P],P>E&&(E=P),x&=~b}if(x=E,x=Kr()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*y_(x/1960))-x,10<x){y.timeoutHandle=ve(_c.bind(null,y,ei),x);break}_c(y,ei);break;case 5:_c(y,ei);break;default:throw Error(s(329))}}}return di(y,Kr()),y.callbackNode===f?Yi.bind(null,y):null}function d0(y,c){var f=mu;return y.current.memoizedState.isDehydrated&&(sl(y,c).flags|=256),y=Xh(y,c),y!==2&&(c=ei,ei=f,c!==null&&mp(c)),y}function mp(y){ei===null?ei=y:ei.push.apply(ei,y)}function x_(y){for(var c=y;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var x=0;x<f.length;x++){var E=f[x],b=E.getSnapshot;E=E.value;try{if(!oa(b(),E))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===y)break;for(;c.sibling===null;){if(c.return===null||c.return===y)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function yc(y,c){for(c&=~Vh,c&=~nl,y.suspendedLanes|=c,y.pingedLanes&=~c,y=y.expirationTimes;0<c;){var f=31-Ks(c),x=1<<f;y[f]=-1,c&=~x}}function il(y){if(bt&6)throw Error(s(327));xu();var c=sc(y,0);if(!(c&1))return di(y,Kr()),null;var f=Xh(y,c);if(y.tag!==0&&f===2){var x=Px(y);x!==0&&(c=x,f=d0(y,x))}if(f===1)throw f=ir,sl(y,0),yc(y,c),di(y,Kr()),f;if(f===6)throw Error(s(345));return y.finishedWork=y.current.alternate,y.finishedLanes=c,_c(y,ei),di(y,Kr()),null}function __(y){Po!==null&&Po.tag===0&&!(bt&6)&&xu();var c=bt;bt|=1;var f=rr.transition,x=vn;try{if(rr.transition=null,vn=1,y)return y()}finally{vn=x,rr.transition=f,bt=c,!(bt&6)&&aa()}}function f0(){Rn=$r.current,Vt($r)}function sl(y,c){y.finishedWork=null,y.finishedLanes=0;var f=y.timeoutHandle;if(f!==Xe&&(y.timeoutHandle=Xe,W(f)),Yt!==null)for(f=Yt.return;f!==null;){var x=f;switch(Jf(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&tr();break;case 3:dc(),Vt(on),Vt(Kt),qf();break;case 5:Vg(x);break;case 4:dc();break;case 13:Vt(Vn);break;case 19:Vt(Vn);break;case 10:Ng(x.type._context);break;case 22:case 23:f0()}f=f.return}if(Bt=y,Yt=y=Sc(y.current,null),un=Rn=c,jn=0,ir=null,Vh=nl=ga=0,ei=mu=null,fr!==null){for(c=0;c<fr.length;c++)if(f=fr[c],x=f.interleaved,x!==null){f.interleaved=null;var E=x.next,b=f.pending;if(b!==null){var P=b.next;b.next=E,x.next=P}f.pending=x}fr=null}return y}function xc(y,c){do{var f=Yt;try{if(Hf(),Fh.current=np,pr){for(var x=In.memoizedState;x!==null;){var E=x.queue;E!==null&&(E.pending=null),x=x.next}pr=!1}if(hi=0,_n=an=In=null,fc=!1,$a=0,zh.current=null,f===null||f.return===null){jn=1,ir=c,Yt=null;break}e:{var b=y,P=f.return,k=f,$=c;if(c=un,k.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var fe=$,Ce=k,He=Ce.tag;if(!(Ce.mode&1)&&(He===0||He===11||He===15)){var Ze=Ce.alternate;Ze?(Ce.updateQueue=Ze.updateQueue,Ce.memoizedState=Ze.memoizedState,Ce.lanes=Ze.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var ot=n_(P);if(ot!==null){ot.flags&=-257,r_(ot,P,k,b,c),ot.mode&1&&t_(b,fe,c),c=ot,$=fe;var rt=c.updateQueue;if(rt===null){var At=new Set;At.add($),c.updateQueue=At}else rt.add($);break e}else{if(!(c&1)){t_(b,fe,c),p0();break e}$=Error(s(426))}}else if(cn&&k.mode&1){var Fn=n_(P);if(Fn!==null){!(Fn.flags&65536)&&(Fn.flags|=256),r_(Fn,P,k,b,c),uc($);break e}}b=$,jn!==4&&(jn=2),mu===null?mu=[b]:mu.push(b),$=Zx($,k),k=P;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var Ee=VM(k,$,c);Vf(k,Ee);break e;case 1:b=$;var Q=k.type,ee=k.stateNode;if(!(k.flags&128)&&(typeof Q.getDerivedStateFromError=="function"||ee!==null&&typeof ee.componentDidCatch=="function"&&(va===null||!va.has(ee)))){k.flags|=65536,c&=-c,k.lanes|=c;var ge=e_(k,b,c);Vf(k,ge);break e}}k=k.return}while(k!==null)}S_(f)}catch(Ie){c=Ie,Yt===f&&f!==null&&(Yt=f=f.return);continue}break}while(1)}function A_(){var y=h0.current;return h0.current=np,y===null?np:y}function p0(){(jn===0||jn===3||jn===2)&&(jn=4),Bt===null||!(ga&268435455)&&!(nl&268435455)||yc(Bt,un)}function Xh(y,c){var f=bt;bt|=2;var x=A_();Bt===y&&un===c||sl(y,c);do try{m0();break}catch(E){xc(y,E)}while(1);if(Hf(),bt=f,h0.current=x,Yt!==null)throw Error(s(261));return Bt=null,un=0,jn}function m0(){for(;Yt!==null;)XM(Yt)}function LP(){for(;Yt!==null&&!UM();)XM(Yt)}function XM(y){var c=YM(y.alternate,y,Rn);y.memoizedProps=y.pendingProps,c===null?S_(y):Yt=c,zh.current=null}function S_(y){var c=y;do{var f=c.alternate;if(y=c.return,c.flags&32768){if(f=PP(f,c),f!==null){f.flags&=32767,Yt=f;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{jn=6,Yt=null;return}}else if(f=Pi(f,c,Rn),f!==null){Yt=f;return}if(c=c.sibling,c!==null){Yt=c;return}Yt=c=y}while(c!==null);jn===0&&(jn=5)}function _c(y,c){var f=vn,x=rr.transition;try{rr.transition=null,vn=1,yu(y,c,f)}finally{rr.transition=x,vn=f}return null}function yu(y,c,f){do xu();while(Po!==null);if(bt&6)throw Error(s(327));var x=y.finishedWork,E=y.finishedLanes;if(x===null)return null;if(y.finishedWork=null,y.finishedLanes=0,x===y.current)throw Error(s(177));y.callbackNode=null,y.callbackPriority=0;var b=x.lanes|x.childLanes;if(Gf(y,b),y===Bt&&(Yt=Bt=null,un=0),!(x.subtreeFlags&2064)&&!(x.flags&2064)||Ro||(Ro=!0,M_(Ix,function(){return xu(),null})),b=(x.flags&15990)!==0,x.subtreeFlags&15990||b){b=rr.transition,rr.transition=null;var P=vn;vn=1;var k=bt;bt|=4,zh.current=null,WM(y,x),l0(y,x),V(y.containerInfo),y.current=x,BP(x),EP(),bt=k,vn=P,rr.transition=b}else y.current=x;if(Ro&&(Ro=!1,Po=y,Bo=E),b=y.pendingLanes,b===0&&(va=null),sa(x.stateNode),di(y,Kr()),c!==null)for(f=y.onRecoverableError,x=0;x<c.length;x++)f(c[x]);if(rl)throw rl=!1,y=Wh,Wh=null,y;return Bo&1&&y.tag!==0&&xu(),b=y.pendingLanes,b&1?y===gu?vc++:(vc=0,gu=y):vc=0,aa(),null}function xu(){if(Po!==null){var y=xn(Bo),c=rr.transition,f=vn;try{if(rr.transition=null,vn=16>y?16:y,Po===null)var x=!1;else{if(y=Po,Po=null,Bo=0,bt&6)throw Error(s(331));var E=bt;for(bt|=4,dt=y.current;dt!==null;){var b=dt,P=b.child;if(dt.flags&16){var k=b.deletions;if(k!==null){for(var $=0;$<k.length;$++){var fe=k[$];for(dt=fe;dt!==null;){var Ce=dt;switch(Ce.tag){case 0:case 11:case 15:lu(8,Ce,b)}var He=Ce.child;if(He!==null)He.return=Ce,dt=He;else for(;dt!==null;){Ce=dt;var Ze=Ce.sibling,ot=Ce.return;if(h_(Ce),Ce===fe){dt=null;break}if(Ze!==null){Ze.return=ot,dt=Ze;break}dt=ot}}}var rt=b.alternate;if(rt!==null){var At=rt.child;if(At!==null){rt.child=null;do{var Fn=At.sibling;At.sibling=null,At=Fn}while(At!==null)}}dt=b}}if(b.subtreeFlags&2064&&P!==null)P.return=b,dt=P;else e:for(;dt!==null;){if(b=dt,b.flags&2048)switch(b.tag){case 0:case 11:case 15:lu(9,b,b.return)}var Ee=b.sibling;if(Ee!==null){Ee.return=b.return,dt=Ee;break e}dt=b.return}}var Q=y.current;for(dt=Q;dt!==null;){P=dt;var ee=P.child;if(P.subtreeFlags&2064&&ee!==null)ee.return=P,dt=ee;else e:for(P=Q;dt!==null;){if(k=dt,k.flags&2048)try{switch(k.tag){case 0:case 11:case 15:To(9,k)}}catch(Ie){qi(k,k.return,Ie)}if(k===P){dt=null;break e}var ge=k.sibling;if(ge!==null){ge.return=k.return,dt=ge;break e}dt=k.return}}if(bt=E,aa(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(Bg,y)}catch{}x=!0}return x}finally{vn=f,rr.transition=c}}return!1}function Ac(y,c,f){c=Zx(f,c),c=VM(y,c,1),wi(y,c),c=ti(),y=Ki(y,1),y!==null&&(Kc(y,1,c),di(y,c))}function qi(y,c,f){if(y.tag===3)Ac(y,y,f);else for(;c!==null;){if(c.tag===3){Ac(c,y,f);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(va===null||!va.has(x))){y=Zx(f,y),y=e_(c,y,1),wi(c,y),y=ti(),c=Ki(c,1),c!==null&&(Kc(c,1,y),di(c,y));break}}c=c.return}}function ls(y,c,f){var x=y.pingCache;x!==null&&x.delete(c),c=ti(),y.pingedLanes|=y.suspendedLanes&f,Bt===y&&(un&f)===f&&(jn===4||jn===3&&(un&130023424)===un&&500>Kr()-Li?sl(y,0):Vh|=f),di(y,c)}function JM(y,c){c===0&&(y.mode&1?(c=Jc,Jc<<=1,!(Jc&130023424)&&(Jc=4194304)):c=1);var f=ti();y=Ki(y,c),y!==null&&(Kc(y,c,f),di(y,f))}function KM(y){var c=y.memoizedState,f=0;c!==null&&(f=c.retryLane),JM(y,f)}function IP(y,c){var f=0;switch(y.tag){case 13:var x=y.stateNode,E=y.memoizedState;E!==null&&(f=E.retryLane);break;case 19:x=y.stateNode;break;default:throw Error(s(314))}x!==null&&x.delete(c),JM(y,f)}var YM;YM=function(y,c,f){if(y!==null)if(y.memoizedProps!==c.pendingProps||on.current)Rs=!0;else{if(!(y.lanes&f)&&!(c.flags&128))return Rs=!1,tl(y,c,f);Rs=!!(y.flags&131072)}else Rs=!1,cn&&c.flags&1048576&&cc(c,qc,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;y!==null&&(y.alternate=null,c.alternate=null,c.flags|=2),y=c.pendingProps;var E=Rr(c,Kt.current);ac(c,f),E=Zf(null,c,x,y,E,f);var b=$f();return c.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,er(x)?(b=!0,Uf(c)):b=!1,c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,ca(c),E.updater=Bh,c.stateNode=E,E._reactInternals=c,kg(c,x,y,f),c=qg(null,c,x,!0,b,f)):(c.tag=0,cn&&b&&Gg(c),Dn(null,c,E,f),c=c.child),c;case 16:x=c.elementType;e:{switch(y!==null&&(y.alternate=null,c.alternate=null,c.flags|=2),y=c.pendingProps,E=x._init,x=E(x._payload),c.type=x,E=c.tag=E_(x),y=So(x,y),E){case 0:c=Kg(null,c,x,y,f);break e;case 1:c=Yg(null,c,x,y,f);break e;case 11:c=Bi(null,c,x,y,f);break e;case 14:c=i_(null,c,x,So(x.type,y),f);break e}throw Error(s(306,x,""))}return c;case 0:return x=c.type,E=c.pendingProps,E=c.elementType===x?E:So(x,E),Kg(y,c,x,E,f);case 1:return x=c.type,E=c.pendingProps,E=c.elementType===x?E:So(x,E),Yg(y,c,x,E,f);case 3:e:{if(Qg(c),y===null)throw Error(s(387));x=c.pendingProps,b=c.memoizedState,E=b.element,Ug(y,c),Wf(c,x,null,f);var P=c.memoizedState;if(x=P.element,pe&&b.isDehydrated)if(b={element:x,isDehydrated:!1,cache:P.cache,transitions:P.transitions},c.updateQueue.baseState=b,c.memoizedState=b,c.flags&256){E=Error(s(423)),c=l_(y,c,x,f,E);break e}else if(x!==E){E=Error(s(424)),c=l_(y,c,x,f,E);break e}else for(pe&&(zn=ne(c.stateNode.containerInfo),Wi=c,cn=!0,ji=null,Bn=!1),f=$c(c,null,x,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(ha(),x===E){c=pa(y,c,f);break e}Dn(y,c,x,f)}c=c.child}return c;case 5:return eu(c),y===null&&Kf(c),x=c.type,E=c.pendingProps,b=y!==null?y.memoizedProps:null,P=E.children,ae(x,E)?P=null:b!==null&&ae(x,b)&&(c.flags|=32),a_(y,c),Dn(y,c,P,f),c.child;case 6:return y===null&&Kf(c),null;case 13:return op(y,c,f);case 4:return Qs(c,c.stateNode.containerInfo),x=c.pendingProps,y===null?c.child=Zc(c,null,x,f):Dn(y,c,x,f),c.child;case 11:return x=c.type,E=c.pendingProps,E=c.elementType===x?E:So(x,E),Bi(y,c,x,E,f);case 7:return Dn(y,c,c.pendingProps,f),c.child;case 8:return Dn(y,c,c.pendingProps.children,f),c.child;case 12:return Dn(y,c,c.pendingProps.children,f),c.child;case 10:e:{if(x=c.type._context,E=c.pendingProps,b=c.memoizedProps,P=E.value,Fg(c,x,P),b!==null)if(oa(b.value,P)){if(b.children===E.children&&!on.current){c=pa(y,c,f);break e}}else for(b=c.child,b!==null&&(b.return=c);b!==null;){var k=b.dependencies;if(k!==null){P=b.child;for(var $=k.firstContext;$!==null;){if($.context===x){if(b.tag===1){$=ua(-1,f&-f),$.tag=2;var fe=b.updateQueue;if(fe!==null){fe=fe.shared;var Ce=fe.pending;Ce===null?$.next=$:($.next=Ce.next,Ce.next=$),fe.pending=$}}b.lanes|=f,$=b.alternate,$!==null&&($.lanes|=f),zf(b.return,f,c),k.lanes|=f;break}$=$.next}}else if(b.tag===10)P=b.type===c.type?null:b.child;else if(b.tag===18){if(P=b.return,P===null)throw Error(s(341));P.lanes|=f,k=P.alternate,k!==null&&(k.lanes|=f),zf(P,f,c),P=b.sibling}else P=b.child;if(P!==null)P.return=b;else for(P=b;P!==null;){if(P===c){P=null;break}if(b=P.sibling,b!==null){b.return=P.return,P=b;break}P=P.return}b=P}Dn(y,c,E.children,f),c=c.child}return c;case 9:return E=c.type,x=c.pendingProps.children,ac(c,f),E=li(E),x=x(E),c.flags|=1,Dn(y,c,x,f),c.child;case 14:return x=c.type,E=So(x,c.pendingProps),E=So(x.type,E),i_(y,c,x,E,f);case 15:return s_(y,c,c.type,c.pendingProps,f);case 17:return x=c.type,E=c.pendingProps,E=c.elementType===x?E:So(x,E),y!==null&&(y.alternate=null,c.alternate=null,c.flags|=2),c.tag=1,er(x)?(y=!0,Uf(c)):y=!1,ac(c,f),Nx(c,x,E),kg(c,x,E,f),qg(null,c,x,!0,y,f);case 19:return t0(y,c,f);case 22:return o_(y,c,f)}throw Error(s(156,c.tag))};function M_(y,c){return Rg(y,c)}function qM(y,c,f,x){this.tag=y,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(y,c,f,x){return new qM(y,c,f,x)}function cs(y){return y=y.prototype,!(!y||!y.isReactComponent)}function E_(y){if(typeof y=="function")return cs(y)?1:0;if(y!=null){if(y=y.$$typeof,y===v)return 11;if(y===g)return 14}return 2}function Sc(y,c){var f=y.alternate;return f===null?(f=Zs(y.tag,c,y.key,y.mode),f.elementType=y.elementType,f.type=y.type,f.stateNode=y.stateNode,f.alternate=y,y.alternate=f):(f.pendingProps=c,f.type=y.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=y.flags&14680064,f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,c=y.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=y.sibling,f.index=y.index,f.ref=y.ref,f}function Lo(y,c,f,x,E,b){var P=2;if(x=y,typeof y=="function")cs(y)&&(P=1);else if(typeof y=="string")P=5;else e:switch(y){case u:return ya(f.children,E,b,c);case h:P=8,E|=8;break;case d:return y=Zs(12,f,c,E|2),y.elementType=d,y.lanes=b,y;case S:return y=Zs(13,f,c,E),y.elementType=S,y.lanes=b,y;case M:return y=Zs(19,f,c,E),y.elementType=M,y.lanes=b,y;case A:return xa(f,E,b,c);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case p:P=10;break e;case m:P=9;break e;case v:P=11;break e;case g:P=14;break e;case _:P=16,x=null;break e}throw Error(s(130,y==null?y:typeof y,""))}return c=Zs(P,f,c,E),c.elementType=y,c.type=x,c.lanes=b,c}function ya(y,c,f,x){return y=Zs(7,y,x,c),y.lanes=f,y}function xa(y,c,f,x){return y=Zs(22,y,x,c),y.elementType=A,y.lanes=f,y.stateNode={},y}function Jh(y,c,f){return y=Zs(6,y,null,c),y.lanes=f,y}function gp(y,c,f){return c=Zs(4,y.children!==null?y.children:[],y.key,c),c.lanes=f,c.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},c}function w_(y,c,f,x,E){this.tag=c,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kf(0),this.expirationTimes=kf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kf(0),this.identifierPrefix=x,this.onRecoverableError=E,pe&&(this.mutableSourceEagerHydrationData=null)}function QM(y,c,f,x,E,b,P,k,$){return y=new w_(y,c,f,k,$),c===1?(c=1,b===!0&&(c|=8)):c=0,b=Zs(3,null,null,c),y.current=b,b.stateNode=y,b.memoizedState={element:x,isDehydrated:f,cache:null,transitions:null},ca(b),y}function b_(y){if(!y)return St;y=y._reactInternals;e:{if(I(y)!==y||y.tag!==1)throw Error(s(170));var c=y;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(er(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(s(171))}if(y.tag===1){var f=y.type;if(er(f))return Rx(y,f,c)}return c}function C_(y){var c=y._reactInternals;if(c===void 0)throw typeof y.render=="function"?Error(s(188)):(y=Object.keys(y).join(","),Error(s(268,y)));return y=H(c),y===null?null:y.stateNode}function T_(y,c){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var f=y.retryLane;y.retryLane=f!==0&&f<c?f:c}}function g0(y,c){T_(y,c),(y=y.alternate)&&T_(y,c)}function R_(y){return y=H(y),y===null?null:y.stateNode}function DP(){return null}return e.attemptContinuousHydration=function(y){if(y.tag===13){var c=ti();zr(y,134217728,c),g0(y,134217728)}},e.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var c=ti(),f=cr(y);zr(y,f,c),g0(y,f)}},e.attemptSynchronousHydration=function(y){switch(y.tag){case 3:var c=y.stateNode;if(c.current.memoizedState.isDehydrated){var f=ic(c.pendingLanes);f!==0&&(Bx(c,f|1),di(c,Kr()),!(bt&6)&&(gc(),aa()))}break;case 13:var x=ti();__(function(){return zr(y,1,x)}),g0(y,1)}},e.batchedUpdates=function(y,c){var f=bt;bt|=1;try{return y(c)}finally{bt=f,bt===0&&(gc(),Ys&&aa())}},e.createComponentSelector=function(y){return{$$typeof:hp,value:y}},e.createContainer=function(y,c,f,x,E,b,P){return QM(y,c,!1,null,f,x,E,b,P)},e.createHasPseudoClassSelector=function(y){return{$$typeof:uu,value:y}},e.createHydrationContainer=function(y,c,f,x,E,b,P,k,$){return y=QM(f,x,!0,y,E,b,P,k,$),y.context=b_(null),f=y.current,x=ti(),E=cr(f),b=ua(x,E),b.callback=c??null,wi(f,b),y.current.lanes=E,Kc(y,E,x),di(y,x),y},e.createPortal=function(y,c,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:y,containerInfo:c,implementation:f}},e.createRoleSelector=function(y){return{$$typeof:hu,value:y}},e.createTestNameSelector=function(y){return{$$typeof:du,value:y}},e.createTextSelector=function(y){return{$$typeof:fu,value:y}},e.deferredUpdates=function(y){var c=vn,f=rr.transition;try{return rr.transition=null,vn=16,y()}finally{vn=c,rr.transition=f}},e.discreteUpdates=function(y,c,f,x,E){var b=vn,P=rr.transition;try{return rr.transition=null,vn=1,y(c,f,x,E)}finally{vn=b,rr.transition=P,bt===0&&gc()}},e.findAllNodes=u0,e.findBoundingRects=function(y,c){if(!Ve)throw Error(s(363));c=u0(y,c),y=[];for(var f=0;f<c.length;f++)y.push(It(c[f]));for(c=y.length-1;0<c;c--){f=y[c];for(var x=f.x,E=x+f.width,b=f.y,P=b+f.height,k=c-1;0<=k;k--)if(c!==k){var $=y[k],fe=$.x,Ce=fe+$.width,He=$.y,Ze=He+$.height;if(x>=fe&&b>=He&&E<=Ce&&P<=Ze){y.splice(c,1);break}else if(x!==fe||f.width!==$.width||Ze<b||He>P){if(!(b!==He||f.height!==$.height||Ce<x||fe>E)){fe>x&&($.width+=fe-x,$.x=x),Ce<E&&($.width=E-fe),y.splice(c,1);break}}else{He>b&&($.height+=He-b,$.y=b),Ze<P&&($.height=P-He),y.splice(c,1);break}}}return y},e.findHostInstance=C_,e.findHostInstanceWithNoPortals=function(y){return y=B(y),y=y!==null?j(y):null,y===null?null:y.stateNode},e.findHostInstanceWithWarning=function(y){return C_(y)},e.flushControlled=function(y){var c=bt;bt|=1;var f=rr.transition,x=vn;try{rr.transition=null,vn=1,y()}finally{vn=x,rr.transition=f,bt=c,bt===0&&(gc(),aa())}},e.flushPassiveEffects=xu,e.flushSync=__,e.focusWithin=function(y,c){if(!Ve)throw Error(s(363));for(y=pu(y),c=c0(y,c),c=Array.from(c),y=0;y<c.length;){var f=c[y++];if(!F(f)){if(f.tag===5&&_e(f.stateNode))return!0;for(f=f.child;f!==null;)c.push(f),f=f.sibling}}return!1},e.getCurrentUpdatePriority=function(){return vn},e.getFindAllNodesFailureDescription=function(y,c){if(!Ve)throw Error(s(363));var f=0,x=[];y=[pu(y),0];for(var E=0;E<y.length;){var b=y[E++],P=y[E++],k=c[P];if((b.tag!==5||!F(b))&&(dp(b,k)&&(x.push(fp(k)),P++,P>f&&(f=P)),P<c.length))for(b=b.child;b!==null;)y.push(b,P),b=b.sibling}if(f<c.length){for(y=[];f<c.length;f++)y.push(fp(c[f]));return`findAllNodes was able to match part of the selector:
  `+(x.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},e.getPublicRootInstance=function(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return X(y.child.stateNode);default:return y.child.stateNode}},e.injectIntoDevTools=function(y){if(y={bundleType:y.bundleType,version:y.version,rendererPackageName:y.rendererPackageName,rendererConfig:y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:R_,findFiberByHostInstance:y.findFiberByHostInstance||DP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)y=!0;else{try{Bg=c.inject(y),Ts=c}catch{}y=!!c.checkDCE}}return y},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(y,c,f,x){if(!Ve)throw Error(s(363));y=u0(y,c);var E=Me(y,f,x).disconnect;return{disconnect:function(){E()}}},e.registerMutableSourceForHydration=function(y,c){var f=c._getVersion;f=f(c._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[c,f]:y.mutableSourceEagerHydrationData.push(c,f)},e.runWithPriority=function(y,c){var f=vn;try{return vn=y,c()}finally{vn=f}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(y,c,f,x){var E=c.current,b=ti(),P=cr(E);return f=b_(f),c.context===null?c.context=f:c.pendingContext=f,c=ua(b,P),c.payload={element:y},x=x===void 0?null:x,x!==null&&(c.callback=x),wi(E,c),y=zr(E,P,b),y!==null&&Mo(y,E,P),P},e};oK.exports=gfe;var vfe=oK.exports;const yfe=z3(vfe),WU={},xfe=n=>void Object.assign(WU,n);function _fe(n,e){function t(u,{args:h=[],attach:d,...p},m){let v=`${u[0].toUpperCase()}${u.slice(1)}`,S;if(u==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const M=p.object;S=fv(M,{type:u,root:m,attach:d,primitive:!0})}else{const M=WU[v];if(!M)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");S=fv(new M(...h),{type:u,root:m,attach:d,memoizedProps:{args:h}})}return S.__r3f.attach===void 0&&(S.isBufferGeometry?S.__r3f.attach="geometry":S.isMaterial&&(S.__r3f.attach="material")),v!=="inject"&&GB(S,p),S}function r(u,h){let d=!1;if(h){var p,m;(p=h.__r3f)!=null&&p.attach?kB(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),d=!0),d||(m=u.__r3f)==null||m.objects.push(h),h.__r3f||fv(h,{}),h.__r3f.parent=u,xD(h),pv(h)}}function i(u,h,d){let p=!1;if(h){var m,v;if((m=h.__r3f)!=null&&m.attach)kB(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:h});const S=u.children.filter(g=>g!==h),M=S.indexOf(d);u.children=[...S.slice(0,M),h,...S.slice(M)],p=!0}p||(v=u.__r3f)==null||v.objects.push(h),h.__r3f||fv(h,{}),h.__r3f.parent=u,xD(h),pv(h)}}function s(u,h,d=!1){u&&[...u].forEach(p=>o(h,p,d))}function o(u,h,d){if(h){var p,m,v;if(h.__r3f&&(h.__r3f.parent=null),(p=u.__r3f)!=null&&p.objects&&(u.__r3f.objects=u.__r3f.objects.filter(A=>A!==h)),(m=h.__r3f)!=null&&m.attach)v4(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var S;u.remove(h),(S=h.__r3f)!=null&&S.root&&Rfe(Xb(h),h)}const g=(v=h.__r3f)==null?void 0:v.primitive,_=!g&&(d===void 0?h.dispose!==null:d);if(!g){var M;s((M=h.__r3f)==null?void 0:M.objects,h,_),s(h.children,h,_)}if(delete h.__r3f,_&&h.dispose&&h.type!=="Scene"){const A=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?vD.unstable_scheduleCallback(vD.unstable_IdlePriority,A):A()}pv(u)}}function a(u,h,d,p){var m;const v=(m=u.__r3f)==null?void 0:m.parent;if(!v)return;const S=t(h,d,u.__r3f.root);if(u.children){for(const M of u.children)M.__r3f&&r(S,M);u.children=u.children.filter(M=>!M.__r3f)}u.__r3f.objects.forEach(M=>r(S,M)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(v,u),S.parent&&(S.__r3f.autoRemovedBeforeAppend=!0),r(v,S),S.raycast&&S.__r3f.eventCount&&Xb(S).getState().internal.interaction.push(S),[p,p.alternate].forEach(M=>{M!==null&&(M.stateNode=S,M.ref&&(typeof M.ref=="function"?M.ref(S):M.ref.current=S))})}const l=()=>{};return{reconciler:yfe({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const d=u.getState().scene;d.__r3f&&(d.__r3f.root=u,r(d,h))},removeChildFromContainer:(u,h)=>{h&&o(u.getState().scene,h)},insertInContainerBefore:(u,h,d)=>{if(!h||!d)return;const p=u.getState().scene;p.__r3f&&i(p,h,d)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;return!!((h=u==null?void 0:u.__r3f)!=null?h:{}).handlers},prepareUpdate(u,h,d,p){var m;if(((m=u==null?void 0:u.__r3f)!=null?m:{}).primitive&&p.object&&p.object!==u)return[!0];{const{args:v=[],children:S,...M}=p,{args:g=[],children:_,...A}=d;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((C,R)=>C!==g[R]))return[!0];const w=mK(u,M,A,!0);return w.changes.length?[!1,w]:null}},commitUpdate(u,[h,d],p,m,v,S){h?a(u,p,v,S):GB(u,d)},commitMount(u,h,d,p){var m;const v=(m=u.__r3f)!=null?m:{};u.raycast&&v.handlers&&v.eventCount&&Xb(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>fv(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:d,parent:p}=(h=u.__r3f)!=null?h:{};d&&p&&v4(p,u,d),u.isObject3D&&(u.visible=!1),pv(u)},unhideInstance(u,h){var d;const{attach:p,parent:m}=(d=u.__r3f)!=null?d:{};p&&m&&kB(m,u,p),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),pv(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Iv.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Xn.fun(performance.now)?performance.now:Xn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Xn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Xn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:GB}}var f4,p4;const OB=n=>"colorSpace"in n||"outputColorSpace"in n,cK=()=>{var n;return(n=WU.ColorManagement)!=null?n:null},uK=n=>n&&n.isOrthographicCamera,Afe=n=>n&&n.hasOwnProperty("current"),YS=typeof window<"u"&&((f4=window.document)!=null&&f4.createElement||((p4=window.navigator)==null?void 0:p4.product)==="ReactNative")?we.useLayoutEffect:we.useEffect;function hK(n){const e=we.useRef(n);return YS(()=>void(e.current=n),[n]),e}function Sfe({set:n}){return YS(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class dK extends we.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}dK.getDerivedStateFromError=()=>({error:!0});const fK="__default",m4=new Map,Mfe=n=>n&&!!n.memoized&&!!n.changes;function pK(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const K_=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Xb(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Xn={obj:n=>n===Object(n)&&!Xn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Xn.str(n)||Xn.num(n)||Xn.boo(n))return n===e;const s=Xn.obj(n);if(s&&r==="reference")return n===e;const o=Xn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Xn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Xn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Efe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function wfe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function fv(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function yD(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const g4=/-\d+$/;function kB(n,e,t){if(Xn.str(t)){if(g4.test(t)){const s=t.replace(g4,""),{target:o,key:a}=yD(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=yD(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function v4(n,e,t){var r,i;if(Xn.str(t)){const{target:s,key:o}=yD(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function mK(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){const h=n.__r3f,d=Object.entries(i),p=[];if(u){const v=Object.keys(l);for(let S=0;S<v.length;S++)i.hasOwnProperty(v[S])||d.unshift([v[S],fK+"remove"])}d.forEach(([v,S])=>{var M;if((M=n.__r3f)!=null&&M.primitive&&v==="object"||Xn.equ(S,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,S,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,S,!1,g]);for(const _ in i){const A=i[_];_.startsWith(`${v}-`)&&p.push([_,A,!1,_.split("-")])}});const m={...i};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const bfe=typeof process<"u"&&!1;function GB(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=Mfe(e)?e:mK(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let d=0;d<a.length;d++){let[p,m,v,S]=a[d];if(OB(n)){const _="srgb",A="srgb-linear";p==="encoding"?(p="colorSpace",m=m===3001?_:A):p==="outputEncoding"&&(p="outputColorSpace",m=m===3001?_:A)}let M=n,g=M[p];if(S.length&&(g=S.reduce((_,A)=>_[A],n),!(g&&g.set))){const[_,...A]=S.reverse();M=A.reverse().reduce((w,C)=>w[C],n),p=_}if(m===fK+"remove")if(M.constructor){let _=m4.get(M.constructor);_||(_=new M.constructor,m4.set(M.constructor,_)),m=_[p]}else m=0;if(v&&r)m?r.handlers[p]=m:delete r.handlers[p],r.eventCount=Object.keys(r.handlers).length;else if(g&&g.set&&(g.copy||g instanceof Tm)){if(Array.isArray(m))g.fromArray?g.fromArray(m):g.set(...m);else if(g.copy&&m&&m.constructor&&(bfe?g.constructor.name===m.constructor.name:g.constructor===m.constructor))g.copy(m);else if(m!==void 0){var u;const _=(u=g)==null?void 0:u.isColor;!_&&g.setScalar?g.setScalar(m):g instanceof Tm&&m instanceof Tm?g.mask=m.mask:g.set(m),!cK()&&s&&!s.linear&&_&&g.convertSRGBToLinear()}}else{var h;if(M[p]=m,(h=M[p])!=null&&h.isTexture&&M[p].format===io&&M[p].type===ph&&s){const _=M[p];OB(_)&&OB(s.gl)?_.colorSpace=s.gl.outputColorSpace:_.encoding=s.gl.outputEncoding}}pv(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const d=Xb(n).getState().internal,p=d.interaction.indexOf(n);p>-1&&d.interaction.splice(p,1),r.eventCount&&d.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&xD(n),n}function pv(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function xD(n){n.onUpdate==null||n.onUpdate(n)}function Cfe(n,e){n.manual||(uK(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function nw(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Tfe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Iv.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Iv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Iv.ContinuousEventPriority;default:return Iv.DefaultEventPriority}}function gK(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Rfe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{gK(t.capturedMap,e,r,i)})}function Pfe(n){function e(l){const{internal:u}=n.getState(),h=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function r(l,u){const h=n.getState(),d=new Set,p=[],m=u?u(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const _=K_(m[g]);_&&(_.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function v(g){const _=K_(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var A;_.events.compute==null||_.events.compute(l,_,(A=_.previousRoot)==null?void 0:A.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let S=m.flatMap(v).sort((g,_)=>{const A=K_(g.object),w=K_(_.object);return!A||!w?g.distance-_.distance:w.events.priority-A.events.priority||g.distance-_.distance}).filter(g=>{const _=nw(g);return d.has(_)?!1:(d.add(_),!0)});h.events.filter&&(S=h.events.filter(S,h));for(const g of S){let _=g.object;for(;_;){var M;(M=_.__r3f)!=null&&M.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())d.has(nw(g.intersection))||p.push(g.intersection);return p}function i(l,u,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const S=K_(v.object)||p,{raycaster:M,pointer:g,camera:_,internal:A}=S,w=new se(g.x,g.y,0).unproject(_),C=B=>{var H,K;return(H=(K=A.capturedMap.get(B))==null?void 0:K.has(v.eventObject))!=null?H:!1},R=B=>{const H={intersection:v,target:u.target};A.capturedMap.has(B)?A.capturedMap.get(B).set(v.eventObject,H):A.capturedMap.set(B,new Map([[v.eventObject,H]])),u.target.setPointerCapture(B)},L=B=>{const H=A.capturedMap.get(B);H&&gK(A.capturedMap,v.eventObject,H,B)};let I={};for(let B in u){let H=u[B];typeof H!="function"&&(I[B]=H)}let T={...v,...I,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:w,ray:M.ray,camera:_,stopPropagation(){const B="pointerId"in u&&A.capturedMap.get(u.pointerId);if((!B||B.has(v.eventObject))&&(T.stopped=m.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(H=>H.eventObject===v.eventObject))){const H=l.slice(0,l.indexOf(v));s([...H,v])}},target:{hasPointerCapture:C,setPointerCapture:R,releasePointerCapture:L},currentTarget:{hasPointerCapture:C,setPointerCapture:R,releasePointerCapture:L},nativeEvent:u};if(d(T),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const d=h.eventObject.__r3f,p=d==null?void 0:d.handlers;if(u.hovered.delete(nw(h)),d!=null&&d.eventCount){const m={...h,intersections:l};p.onPointerOut==null||p.onPointerOut(m),p.onPointerLeave==null||p.onPointerLeave(m)}}}function o(l,u){for(let h=0;h<u.length;h++){const d=u[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(u){const{onPointerMissed:h,internal:d}=n.getState();d.lastEvent.current=u;const p=l==="onPointerMove",m=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",v=r(u,p?t:void 0),S=m?e(u):0;l==="onPointerDown"&&(d.initialClick=[u.offsetX,u.offsetY],d.initialHits=v.map(g=>g.eventObject)),m&&!v.length&&S<=2&&(o(u,d.interaction),h&&h(u)),p&&s(v);function M(g){const _=g.eventObject,A=_.__r3f,w=A==null?void 0:A.handlers;if(A!=null&&A.eventCount)if(p){if(w.onPointerOver||w.onPointerEnter||w.onPointerOut||w.onPointerLeave){const C=nw(g),R=d.hovered.get(C);R?R.stopped&&g.stopPropagation():(d.hovered.set(C,g),w.onPointerOver==null||w.onPointerOver(g),w.onPointerEnter==null||w.onPointerEnter(g))}w.onPointerMove==null||w.onPointerMove(g)}else{const C=w[l];C?(!m||d.initialHits.includes(_))&&(o(u,d.interaction.filter(R=>!d.initialHits.includes(R))),C(g)):m&&d.initialHits.includes(_)&&o(u,d.interaction.filter(R=>!d.initialHits.includes(R)))}}i(v,u,S,M)}}return{handlePointer:a}}const vK=n=>!!(n!=null&&n.render),yK=we.createContext(null),Bfe=(n,e)=>{const t=hfe((a,l)=>{const u=new se,h=new se,d=new se;function p(M=l().camera,g=h,_=l().size){const{width:A,height:w,top:C,left:R}=_,L=A/w;g.isVector3?d.copy(g):d.set(...g);const I=M.getWorldPosition(u).distanceTo(d);if(uK(M))return{width:A/M.zoom,height:w/M.zoom,top:C,left:R,factor:1,distance:I,aspect:L};{const T=M.fov*Math.PI/180,B=2*Math.tan(T/2)*I,H=B*(A/w);return{width:H,height:B,top:C,left:R,factor:A/H,distance:I,aspect:L}}}let m;const v=M=>a(g=>({performance:{...g.performance,current:M}})),S=new We;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(M=1)=>n(l(),M),advance:(M,g)=>e(M,g,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new GU,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=l();m&&clearTimeout(m),M.performance.current!==M.performance.min&&v(M.performance.min),m=setTimeout(()=>v(l().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:M=>a(g=>({...g,events:{...g.events,...M}})),setSize:(M,g,_,A,w)=>{const C=l().camera,R={width:M,height:g,top:A||0,left:w||0,updateStyle:_};a(L=>({size:R,viewport:{...L.viewport,...p(C,h,R)}}))},setDpr:M=>a(g=>{const _=pK(M);return{viewport:{...g.viewport,dpr:_,initialDpr:g.viewport.initialDpr||_}}}),setFrameloop:(M="always")=>{const g=l().clock;g.stop(),g.elapsedTime=0,M!=="never"&&(g.start(),g.elapsedTime=0),a(()=>({frameloop:M}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:we.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(M,g,_)=>{const A=l().internal;return A.priority=A.priority+(g>0?1:0),A.subscribers.push({ref:M,priority:g,store:_}),A.subscribers=A.subscribers.sort((w,C)=>w.priority-C.priority),()=>{const w=l().internal;w!=null&&w.subscribers&&(w.priority=w.priority-(g>0?1:0),w.subscribers=w.subscribers.filter(C=>C.ref!==M))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==s){var p;i=l,s=u.dpr,Cfe(a,l),h.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let rw,Lfe=new Set,Ife=new Set,Dfe=new Set;function HB(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Y_(n,e){switch(n){case"before":return HB(Lfe,e);case"after":return HB(Ife,e);case"tail":return HB(Dfe,e)}}let zB,VB;function WB(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),zB=e.internal.subscribers,rw=0;rw<zB.length;rw++)VB=zB[rw],VB.ref.current(VB.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Ffe(n){let e=!1,t=!1,r,i,s;function o(u){i=requestAnimationFrame(o),e=!0,r=0,Y_("before",u),t=!0;for(const d of n.values()){var h;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(r+=WB(u,s))}if(t=!1,Y_("after",u),r===0)return Y_("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,h=1){var d;if(!u)return n.forEach(p=>a(p.store.getState(),h));(d=u.gl.xr)!=null&&d.isPresenting||!u.internal.active||u.frameloop==="never"||(h>1?u.internal.frames=Math.min(60,u.internal.frames+h):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,h=!0,d,p){if(h&&Y_("before",u),d)WB(u,d,p);else for(const m of n.values())WB(u,m.store.getState());h&&Y_("after",u)}return{loop:o,invalidate:a,advance:l}}function xK(){const n=we.useContext(yK);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Nfe(n=t=>t,e){return xK()(n,e)}function Ufe(n,e=0){const t=xK(),r=t.getState().internal.subscribe,i=hK(n);return YS(()=>r(i,e,t),[e,r,t]),null}const y4=new WeakMap;function _K(n,e){return function(t,...r){let i=y4.get(t);return i||(i=new t,y4.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,Efe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function qS(n,e,t,r){const i=Array.isArray(e)?e:[e],s=ffe(_K(t,r),[n,...i],{equal:Xn.equ});return Array.isArray(e)?s:s[0]}qS.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return pfe(_K(t),[n,...r])};qS.clear=function(n,e){const t=Array.isArray(e)?e:[e];return mfe([n,...t])};const Gy=new Map,{invalidate:x4,advance:_4}=Ffe(Gy),{reconciler:jC,applyProps:G0}=_fe(Gy,Tfe),H0={objects:"shallow",strict:!1},Ofe=(n,e)=>{const t=typeof n=="function"?n(e):n;return vK(t)?t:new nU({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function kfe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Gfe(n){const e=Gy.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Bfe(x4,_4),o=t||jC.createContainer(s,Iv.ConcurrentRoot,null,!1,null,"",i,null);e||Gy.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:d,size:p,scene:m,events:v,onCreated:S,shadows:M=!1,linear:g=!1,flat:_=!1,legacy:A=!1,orthographic:w=!1,frameloop:C="always",dpr:R=[1,2],performance:L,raycaster:I,camera:T,onPointerMissed:B}=h,H=s.getState(),K=H.gl;H.gl||H.set({gl:K=Ofe(d,n)});let j=H.raycaster;j||H.set({raycaster:j=new tK});const{params:z,...X}=I||{};if(Xn.equ(X,j,H0)||G0(j,{...X}),Xn.equ(z,j.params,H0)||G0(j,{params:{...j.params,...z}}),!H.camera||H.camera===u&&!Xn.equ(u,T,H0)){u=T;const G=T instanceof WS,q=G?T:w?new hx(0,0,0,0,.1,1e3):new mi(75,0,.1,1e3);G||(q.position.z=5,T&&(G0(q,T),("aspect"in T||"left"in T||"right"in T||"bottom"in T||"top"in T)&&(q.manual=!0,q.updateProjectionMatrix())),!H.camera&&!(T!=null&&T.rotation)&&q.lookAt(0,0,0)),H.set({camera:q}),j.camera=q}if(!H.scene){let G;m!=null&&m.isScene?G=m:(G=new rU,m&&G0(G,m)),H.set({scene:fv(G)})}if(!H.xr){var te;const G=(Y,ae)=>{const Se=s.getState();Se.frameloop!=="never"&&_4(Y,!0,Se,ae)},q=()=>{const Y=s.getState();Y.gl.xr.enabled=Y.gl.xr.isPresenting,Y.gl.xr.setAnimationLoop(Y.gl.xr.isPresenting?G:null),Y.gl.xr.isPresenting||x4(Y)},re={connect(){const Y=s.getState().gl;Y.xr.addEventListener("sessionstart",q),Y.xr.addEventListener("sessionend",q)},disconnect(){const Y=s.getState().gl;Y.xr.removeEventListener("sessionstart",q),Y.xr.removeEventListener("sessionend",q)}};typeof((te=K.xr)==null?void 0:te.addEventListener)=="function"&&re.connect(),H.set({xr:re})}if(K.shadowMap){const G=K.shadowMap.enabled,q=K.shadowMap.type;if(K.shadowMap.enabled=!!M,Xn.boo(M))K.shadowMap.type=J1;else if(Xn.str(M)){var O;const re={basic:FX,percentage:oR,soft:J1,variance:ml};K.shadowMap.type=(O=re[M])!=null?O:J1}else Xn.obj(M)&&Object.assign(K.shadowMap,M);(G!==K.shadowMap.enabled||q!==K.shadowMap.type)&&(K.shadowMap.needsUpdate=!0)}const D=cK();D&&("enabled"in D?D.enabled=!A:"legacyMode"in D&&(D.legacyMode=A)),l||G0(K,{outputEncoding:g?3e3:3001,toneMapping:_?Pl:GN}),H.legacy!==A&&H.set(()=>({legacy:A})),H.linear!==g&&H.set(()=>({linear:g})),H.flat!==_&&H.set(()=>({flat:_})),d&&!Xn.fun(d)&&!vK(d)&&!Xn.equ(d,K,H0)&&G0(K,d),v&&!H.events.handlers&&H.set({events:v(s)});const V=kfe(n,p);return Xn.equ(V,H.size,H0)||H.setSize(V.width,V.height,V.updateStyle,V.top,V.left),R&&H.viewport.dpr!==pK(R)&&H.setDpr(R),H.frameloop!==C&&H.setFrameloop(C),H.onPointerMissed||H.set({onPointerMissed:B}),L&&!Xn.equ(L,H.performance,H0)&&H.set(G=>({performance:{...G.performance,...L}})),a=S,l=!0,this},render(h){return l||this.configure(),jC.updateContainer(mt.jsx(Hfe,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){AK(n)}}}function Hfe({store:n,children:e,onCreated:t,rootElement:r}){return YS(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),mt.jsx(yK.Provider,{value:n,children:e})}function AK(n,e){const t=Gy.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),jC.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),wfe(i),Gy.delete(n),e&&e(n)}catch{}},500)})}}jC.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:we.version});const jB={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function zfe(n){const{handlePointer:e}=Pfe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(jB).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=jB[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=jB[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function A4(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function Vfe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=we.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=we.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,h=we.useRef(!1);we.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,p,m]=we.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:_,top:A,width:w,height:C,bottom:R,right:L,x:I,y:T}=a.current.element.getBoundingClientRect(),B={left:_,top:A,width:w,height:C,bottom:R,right:L,x:I,y:T};a.current.element instanceof HTMLElement&&r&&(B.height=a.current.element.offsetHeight,B.width=a.current.element.offsetWidth),Object.freeze(B),h.current&&!Jfe(a.current.lastBounds,B)&&o(a.current.lastBounds=B)};return[g,u?A4(g,u):g,l?A4(g,l):g]},[o,r,l,u]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function S(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const M=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=SK(g),S())};return jfe(m,!!e),Wfe(p),we.useEffect(()=>{v(),S()},[e,m,p]),we.useEffect(()=>v,[]),[M,s,d]}function Wfe(n){we.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function jfe(n,e){we.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function SK(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...SK(n.parentElement)]}const Xfe=["x","y","top","bottom","left","right","width","height"],Jfe=(n,e)=>Xfe.every(t=>n[t]===e[t]);var Kfe=Object.defineProperty,Yfe=Object.defineProperties,qfe=Object.getOwnPropertyDescriptors,S4=Object.getOwnPropertySymbols,Qfe=Object.prototype.hasOwnProperty,Zfe=Object.prototype.propertyIsEnumerable,M4=(n,e,t)=>e in n?Kfe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,E4=(n,e)=>{for(var t in e||(e={}))Qfe.call(e,t)&&M4(n,t,e[t]);if(S4)for(var t of S4(e))Zfe.call(e,t)&&M4(n,t,e[t]);return n},$fe=(n,e)=>Yfe(n,qfe(e)),w4,b4;typeof window<"u"&&((w4=window.document)!=null&&w4.createElement||((b4=window.navigator)==null?void 0:b4.product)==="ReactNative")?we.useLayoutEffect:we.useEffect;function MK(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=MK(r,e,t);if(i)return i;r=e?null:r.sibling}}function EK(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const C4=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=C4;return}return C4.apply(this,arguments)};const jU=EK(we.createContext(null));class wK extends we.Component{render(){return we.createElement(jU.Provider,{value:this._reactInternals},this.props.children)}}function epe(){const n=we.useContext(jU);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=we.useId();return we.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const r=MK(t,!1,i=>{let s=i.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(r)return r}},[n,e])}function tpe(){const n=epe(),[e]=we.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==jU&&!e.has(r)&&e.set(r,we.useContext(EK(r)))}t=t.return}return e}function npe(){const n=tpe();return we.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>we.createElement(e,null,we.createElement(t.Provider,$fe(E4({},r),{value:n.get(t)}))),e=>we.createElement(wK,E4({},e))),[n])}const rpe=we.forwardRef(function({children:n,fallback:e,resize:t,style:r,gl:i,events:s=zfe,eventSource:o,eventPrefix:a,shadows:l,linear:u,flat:h,legacy:d,orthographic:p,frameloop:m,dpr:v,performance:S,raycaster:M,camera:g,scene:_,onPointerMissed:A,onCreated:w,...C},R){we.useMemo(()=>xfe(lfe),[]);const L=npe(),[I,T]=Vfe({scroll:!0,debounce:{scroll:50,resize:0},...t}),B=we.useRef(null),H=we.useRef(null);we.useImperativeHandle(R,()=>B.current);const K=hK(A),[j,z]=we.useState(!1),[X,te]=we.useState(!1);if(j)throw j;if(X)throw X;const O=we.useRef(null);YS(()=>{const V=B.current;T.width>0&&T.height>0&&V&&(O.current||(O.current=Gfe(V)),O.current.configure({gl:i,events:s,shadows:l,linear:u,flat:h,legacy:d,orthographic:p,frameloop:m,dpr:v,performance:S,raycaster:M,camera:g,scene:_,size:T,onPointerMissed:(...G)=>K.current==null?void 0:K.current(...G),onCreated:G=>{G.events.connect==null||G.events.connect(o?Afe(o)?o.current:o:H.current),a&&G.setEvents({compute:(q,re)=>{const Y=q[a+"X"],ae=q[a+"Y"];re.pointer.set(Y/re.size.width*2-1,-(ae/re.size.height)*2+1),re.raycaster.setFromCamera(re.pointer,re.camera)}}),w==null||w(G)}}),O.current.render(mt.jsx(L,{children:mt.jsx(dK,{set:te,children:mt.jsx(we.Suspense,{fallback:mt.jsx(Sfe,{set:z}),children:n??null})})})))}),we.useEffect(()=>{const V=B.current;if(V)return()=>AK(V)},[]);const D=o?"none":"auto";return mt.jsx("div",{ref:H,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:D,...r},...C,children:mt.jsx("div",{ref:I,style:{width:"100%",height:"100%"},children:mt.jsx("canvas",{ref:B,style:{display:"block"},children:e})})})}),ipe=we.forwardRef(function(n,e){return mt.jsx(wK,{children:mt.jsx(rpe,{...n,ref:e})})}),T4=n=>{let e;const t=new Set,r=(a,l)=>{const u=typeof a=="function"?a(e):a;if(!Object.is(u,e)){const h=e;e=l??(typeof u!="object"||u===null)?u:Object.assign({},e,u),t.forEach(d=>d(e,h))}},i=()=>e,s={setState:r,getState:i,getInitialState:()=>o,subscribe:a=>(t.add(a),()=>t.delete(a))},o=e=n(r,i,s);return s},spe=n=>n?T4(n):T4,ope=n=>n;function ape(n,e=ope){const t=Ga.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return Ga.useDebugValue(t),t}const R4=n=>{const e=spe(n),t=r=>ape(e,r);return Object.assign(t,e),t},lpe=n=>n?R4(n):R4;let q_=0;const cpe=lpe(n=>(Lv.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-q_)/(r-q_)*100})},Lv.onLoad=()=>{n({active:!1})},Lv.onError=e=>n(t=>({errors:[...t.errors,e]})),Lv.onProgress=(e,t,r)=>{t===r&&(q_=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-q_)/(r-q_)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),upe=n=>`Loading ${n.toFixed(2)}%`;function hpe({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:r,dataInterpolation:i=upe,initialState:s=o=>o}){const{active:o,progress:a}=cpe(),l=we.useRef(0),u=we.useRef(0),h=we.useRef(null),[d,p]=we.useState(s(o));we.useEffect(()=>{let v;return o!==d&&(v=setTimeout(()=>p(o),300)),()=>clearTimeout(v)},[d,o]);const m=we.useCallback(()=>{h.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),h.current.innerText=i(l.current),l.current<a&&(u.current=requestAnimationFrame(m)))},[i,a]);return we.useEffect(()=>(m(),()=>cancelAnimationFrame(u.current)),[m]),d?we.createElement("div",{style:{...iw.container,opacity:o?1:0,...n}},we.createElement("div",null,we.createElement("div",{style:{...iw.inner,...e}},we.createElement("div",{style:{...iw.bar,transform:`scaleX(${a/100})`,...t}}),we.createElement("span",{ref:h,style:{...iw.data,...r}})))):null}const iw={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}},dpe=(()=>parseInt(HS.replace(/\D+/g,"")))();function P4(n,e){if(e===MJ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===VC||e===WN){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===VC)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function XC(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const hm="srgb",th="srgb-linear",B4=3001,fpe=3e3;class XU extends Ws{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new ype(t)}),this.register(function(t){return new xpe(t)}),this.register(function(t){return new Tpe(t)}),this.register(function(t){return new Rpe(t)}),this.register(function(t){return new Ppe(t)}),this.register(function(t){return new Ape(t)}),this.register(function(t){return new Spe(t)}),this.register(function(t){return new Mpe(t)}),this.register(function(t){return new Epe(t)}),this.register(function(t){return new vpe(t)}),this.register(function(t){return new wpe(t)}),this.register(function(t){return new _pe(t)}),this.register(function(t){return new Cpe(t)}),this.register(function(t){return new bpe(t)}),this.register(function(t){return new mpe(t)}),this.register(function(t){return new Bpe(t)}),this.register(function(t){return new Lpe(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=Gd.extractUrlBase(e);o=Gd.resolveURL(u,this.path)}else o=Gd.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new qo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(XC(new Uint8Array(e.slice(0,4)))===bK){try{o[fn.KHR_BINARY_GLTF]=new Ipe(e)}catch(u){i&&i(u);return}s=JSON.parse(o[fn.KHR_BINARY_GLTF].content)}else s=JSON.parse(XC(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new Xpe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(h){case fn.KHR_MATERIALS_UNLIT:o[h]=new gpe;break;case fn.KHR_DRACO_MESH_COMPRESSION:o[h]=new Dpe(s,this.dracoLoader);break;case fn.KHR_TEXTURE_TRANSFORM:o[h]=new Fpe;break;case fn.KHR_MESH_QUANTIZATION:o[h]=new Npe;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function ppe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const fn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class mpe{constructor(e){this.parser=e,this.name=fn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,o=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let a;const l=new vt(16777215);o.color!==void 0&&l.setRGB(o.color[0],o.color[1],o.color[2],th);const u=o.range!==void 0?o.range:0;switch(o.type){case"directional":a=new OU(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new UU(l),a.distance=u;break;case"spot":a=new NU(l),a.distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,Fu(a,o),o.intensity!==void 0&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),i=Promise.resolve(a),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,i=r.json.nodes[e],s=(i.extensions&&i.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(o){return r._getNodeRef(t.cache,s,o)})}}class gpe{constructor(){this.name=fn.KHR_MATERIALS_UNLIT}getMaterialType(){return Ho}extendParams(e,t,r){const i=[];e.color=new vt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],th),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,hm))}return Promise.all(i)}}class vpe{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name].emissiveStrength;return i!==void 0&&(t.emissiveIntensity=i),Promise.resolve()}}class ype{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new We(a,a)}return Promise.all(s)}}class xpe{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return t.dispersion=i.dispersion!==void 0?i.dispersion:0,Promise.resolve()}}class _pe{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Ape{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new vt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],th)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,hm)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Spe{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Mpe{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new vt().setRGB(a[0],a[1],a[2],th),Promise.all(s)}}class Epe{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return t.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class wpe{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new vt().setRGB(a[0],a[1],a[2],th),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,hm)),Promise.all(s)}}class bpe{constructor(e){this.parser=e,this.name=fn.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Cpe{constructor(e){this.parser=e,this.name=fn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ka}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Tpe{constructor(e){this.parser=e,this.name=fn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Rpe{constructor(e){this.parser=e,this.name=fn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Ppe{constructor(e){this.parser=e,this.name=fn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Bpe{constructor(e){this.name=fn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,h=i.count,d=i.byteStride,p=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(m),h,d,p,i.mode,i.filter),m})})}else return null}}class Lpe{constructor(e){this.name=fn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const l of i.primitives)if(l.mode!==Ta.TRIANGLES&&l.mode!==Ta.TRIANGLE_STRIP&&l.mode!==Ta.TRIANGLE_FAN&&l.mode!==void 0)return null;const s=r.extensions[this.name].attributes,o=[],a={};for(const l in s)o.push(this.parser.getDependency("accessor",s[l]).then(u=>(a[l]=u,a[l])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(l=>{const u=l.pop(),h=u.isGroup?u.children:[u],d=l[0].count,p=[];for(const m of h){const v=new Wt,S=new se,M=new ns,g=new se(1,1,1),_=new aU(m.geometry,m.material,d);for(let A=0;A<d;A++)a.TRANSLATION&&S.fromBufferAttribute(a.TRANSLATION,A),a.ROTATION&&M.fromBufferAttribute(a.ROTATION,A),a.SCALE&&g.fromBufferAttribute(a.SCALE,A),_.setMatrixAt(A,v.compose(S,M,g));for(const A in a)if(A==="_COLOR_0"){const w=a[A];_.instanceColor=new Jm(w.array,w.itemSize,w.normalized)}else A!=="TRANSLATION"&&A!=="ROTATION"&&A!=="SCALE"&&m.geometry.setAttribute(A,a[A]);Mn.prototype.copy.call(_,m),this.parser.assignFinalMaterial(_),p.push(_)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const bK="glTF",Q_=12,L4={JSON:1313821514,BIN:5130562};class Ipe{constructor(e){this.name=fn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Q_);if(this.header={magic:XC(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==bK)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Q_,i=new DataView(e,Q_);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===L4.JSON){const l=new Uint8Array(e,Q_+s,o);this.content=XC(l)}else if(a===L4.BIN){const l=Q_+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Dpe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=fn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const h in o){const d=_D[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=_D[h]||h.toLowerCase();if(o[h]!==void 0){const p=r.accessors[e.attributes[h]],m=gy[p.componentType];u[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(d,p){i.decodeDracoFile(h,function(m){for(const v in m.attributes){const S=m.attributes[v],M=l[v];M!==void 0&&(S.normalized=M)}d(m)},a,u,th,p)})})}}class Fpe{constructor(){this.name=fn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Npe{constructor(){this.name=fn.KHR_MESH_QUANTIZATION}}class CK extends fx{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,h=i-t,d=(r-t)/h,p=d*d,m=p*d,v=e*u,S=v-u,M=-2*m+3*p,g=m-p,_=1-M,A=g-p+d;for(let w=0;w!==a;w++){const C=o[S+w+a],R=o[S+w+l]*h,L=o[v+w+a],I=o[v+w]*h;s[w]=_*C+A*R+M*L+g*I}return s}}const Upe=new ns;class Ope extends CK{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return Upe.fromArray(s).normalize().toArray(s),s}}const Ta={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},gy={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},I4={9728:Nr,9729:vr,9984:VA,9985:lR,9986:fy,9987:Hc},D4={33071:$i,33648:Dy,10497:lf},XB={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_D={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...dpe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ed={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},kpe={CUBICSPLINE:void 0,LINEAR:Xm,STEP:Ny},JB={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Gpe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new KS({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Gc})),n.DefaultMaterial}function wp(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Fu(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Hpe(n,e,t){let r=!1,i=!1,s=!1;for(let u=0,h=e.length;u<h;u++){const d=e[u];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];if(r){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(i){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],d=u[1],p=u[2];return r&&(n.morphAttributes.position=h),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function zpe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Vpe(n){let e;const t=n.extensions&&n.extensions[fn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+KB(t.attributes):e=n.indices+":"+KB(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+KB(n.targets[r]);return e}function KB(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function AD(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Wpe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const jpe=new Wt;class Xpe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ppe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new H7(this.options.manager):this.textureLoader=new q7(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new qo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return wp(s,a,i),Fu(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,h]of o.children.entries())s(h,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[fn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(Gd.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=XB[i.type],a=gy[i.componentType],l=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new Cn(u,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=XB[i.type],u=gy[i.componentType],h=u.BYTES_PER_ELEMENT,d=h*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let S,M;if(m&&m!==d){const g=Math.floor(p/m),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let A=t.cache.get(_);A||(S=new u(a,g*m,i.count*m/h),A=new XS(S,m/h),t.cache.add(_,A)),M=new cf(A,l,p%m/h,v)}else a===null?S=new u(i.count*l):S=new u(a,p,i.count*l),M=new Cn(S,l,v);if(i.sparse!==void 0){const g=XB.SCALAR,_=gy[i.sparse.indices.componentType],A=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,C=new _(o[1],A,i.sparse.count*g),R=new u(o[2],w,i.sparse.count*l);a!==null&&(M=new Cn(M.array.slice(),M.itemSize,M.normalized));for(let L=0,I=C.length;L<I;L++){const T=C[L];if(M.setX(T,R[L*l]),l>=2&&M.setY(T,R[L*l+1]),l>=3&&M.setZ(T,R[L*l+2]),l>=4&&M.setW(T,R[L*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const t=this.json,r=this.options,i=t.textures[e].source,s=t.images[i];let o=this.textureLoader;if(s.uri){const a=r.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,r).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const d=(s.samplers||{})[o.sampler]||{};return h.magFilter=I4[d.magFilter]||vr,h.minFilter=I4[d.minFilter]||Hc,h.wrapS=D4[d.wrapS]||lf,h.wrapT=D4[d.wrapT]||lf,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){u=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(S){const M=new Er(S);M.needsUpdate=!0,p(M)}),t.load(Gd.resolveURL(d,s.path),v,void 0,m)})}).then(function(d){return u===!0&&a.revokeObjectURL(l),Fu(d,o),d.userData.mimeType=o.mimeType||Wpe(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[fn.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[fn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[fn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===B4?hm:th),"colorSpace"in o?o.colorSpace=i:o.encoding=i===hm?B4:fpe),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new mR,xi.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new bs,xi.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return KS}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[fn.KHR_MATERIALS_UNLIT]){const d=i[fn.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),u.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new vt(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],th),a.opacity=p[3]}d.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",d.baseColorTexture,hm)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=bl);const h=s.alphaMode||JB.OPAQUE;if(h===JB.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===JB.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ho&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new We(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==Ho&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ho){const d=s.emissiveFactor;a.emissive=new vt().setRGB(d[0],d[1],d[2],th)}return s.emissiveTexture!==void 0&&o!==Ho&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,hm)),Promise.all(u).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Fu(d,s),t.associations.set(d,{materials:e}),s.extensions&&wp(i,d,s),d})}createUniqueName(e){const t=An.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[fn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return F4(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],h=Vpe(u),d=i[h];if(d)o.push(d.promise);else{let p;u.extensions&&u.extensions[fn.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=F4(new $t,u,t),i[h]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?Gpe(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,v=h.length;m<v;m++){const S=h[m],M=o[m];let g;const _=u[m];if(M.mode===Ta.TRIANGLES||M.mode===Ta.TRIANGLE_STRIP||M.mode===Ta.TRIANGLE_FAN||M.mode===void 0)g=s.isSkinnedMesh===!0?new sU(S,_):new Ui(S,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),M.mode===Ta.TRIANGLE_STRIP?g.geometry=P4(g.geometry,WN):M.mode===Ta.TRIANGLE_FAN&&(g.geometry=P4(g.geometry,VC));else if(M.mode===Ta.LINES)g=new Wl(S,_);else if(M.mode===Ta.LINE_STRIP)g=new mh(S,_);else if(M.mode===Ta.LINE_LOOP)g=new lU(S,_);else if(M.mode===Ta.POINTS)g=new cU(S,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(g.geometry.morphAttributes).length>0&&zpe(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Fu(g,s),M.extensions&&wp(i,g,M),t.assignFinalMaterial(g),d.push(g)}for(let m=0,v=d.length;m<v;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&wp(i,d[0],s),d[0];const p=new ju;s.extensions&&wp(i,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=d.length;m<v;m++)p.add(d[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new mi(PJ.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new hx(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Fu(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let u=0,h=o.length;u<h;u++){const d=o[u];if(d){a.push(d);const p=new Wt;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new oU(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],u=[],h=[];for(let d=0,p=i.channels.length;d<p;d++){const m=i.channels[d],v=i.samplers[m.sampler],S=m.target,M=S.node,g=i.parameters!==void 0?i.parameters[v.input]:v.input,_=i.parameters!==void 0?i.parameters[v.output]:v.output;S.node!==void 0&&(o.push(this.getDependency("node",M)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",_)),u.push(v),h.push(S))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(d){const p=d[0],m=d[1],v=d[2],S=d[3],M=d[4],g=[];for(let _=0,A=p.length;_<A;_++){const w=p[_],C=m[_],R=v[_],L=S[_],I=M[_];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const T=r._createAnimationTracks(w,C,R,L,I);if(T)for(let B=0;B<T.length;B++)g.push(T[B])}return new ky(s,void 0,g)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,h=a.length;u<h;u++)o.push(r.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const h=u[0],d=u[1],p=u[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,jpe)});for(let m=0,v=d.length;m<v;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let h;if(s.isBone===!0?h=new pR:u.length>1?h=new ju:u.length===1?h=u[0]:h=new Mn,h!==u[0])for(let d=0,p=u.length;d<p;d++)h.add(u[d]);if(s.name&&(h.userData.name=s.name,h.name=o),Fu(h,s),s.extensions&&wp(r,h,s),s.matrix!==void 0){const d=new Wt;d.fromArray(s.matrix),h.applyMatrix4(d)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new ju;r.name&&(s.name=i.createUniqueName(r.name)),Fu(s,r),r.extensions&&wp(t,s,r);const o=r.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,d=l.length;h<d;h++)s.add(l[h]);const u=h=>{const d=new Map;for(const[p,m]of i.associations)(p instanceof xi||p instanceof Er)&&d.set(p,m);return h.traverse(p=>{const m=i.associations.get(p);m!=null&&d.set(p,m)}),d};return i.associations=u(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];ed[s.path]===ed.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let u;switch(ed[s.path]){case ed.weights:u=Ym;break;case ed.rotation:u=uf;break;case ed.position:case ed.scale:u=qm;break;default:switch(r.itemSize){case 1:u=Ym;break;case 2:case 3:default:u=qm;break}break}const h=i.interpolation!==void 0?kpe[i.interpolation]:Xm,d=this._getArrayFromAccessor(r);for(let p=0,m=l.length;p<m;p++){const v=new u(l[p]+"."+ed[s.path],t.array,d,h);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=AD(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){const r=this instanceof uf?Ope:CK;return new r(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Jpe(n,e,t){const r=e.attributes,i=new zl;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new se(l[0],l[1],l[2]),new se(u[0],u[1],u[2])),a.normalized){const h=AD(gy[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new se,l=new se;for(let u=0,h=s.length;u<h;u++){const d=s[u];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const S=AD(gy[p.componentType]);l.multiplyScalar(S)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Vl;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function F4(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=_D[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Fu(n,e),Jpe(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?Hpe(n,e.targets,t):n})}const YB=new WeakMap;class Kpe extends Ws{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new qo(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const r=JSON.stringify(t);if(YB.has(e)){const l=YB.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,h)=>{i._callbacks[s]={resolve:u,reject:h},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),YB.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new $t;e.index&&t.setIndex(new Cn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Cn(o,a))}return t}_loadLibrary(e,t){const r=new qo(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=Ype.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Ype(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(d){h({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(h=>{const d=h.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(d,p,m,u),S=v.attributes.map(M=>M.array.buffer);v.index&&S.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},S)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,u){const h=u.attributeIDs,d=u.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const S={index:null,attributes:[]};for(const M in h){const g=self[d[M]];let _,A;if(u.useUniqueIDs)A=h[M],_=a.GetAttributeByUniqueId(p,A);else{if(A=a.GetAttributeId(p,o[h[M]]),A===-1)continue;_=a.GetAttribute(p,A)}S.attributes.push(i(o,a,p,M,g,_))}return v===o.TRIANGULAR_MESH&&(S.index=r(o,a,p)),o.destroy(p),S}function r(o,a,l){const u=l.num_faces()*3,h=u*4,d=o._malloc(h);a.GetTrianglesUInt32Array(l,h,d);const p=new Uint32Array(o.HEAPF32.buffer,d,u).slice();return o._free(d),{array:p,itemSize:1}}function i(o,a,l,u,h,d){const p=d.num_components(),m=l.num_points()*p,v=m*h.BYTES_PER_ELEMENT,S=s(o,h),M=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,d,S,v,M);const g=new h(o.HEAPF32.buffer,M,m).slice();return o._free(M),{name:u,array:g,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let sw;const qB=()=>{if(sw)return sw;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let v=0;v<d.length;++v){const S=d.charCodeAt(v);p[v]=S>96?S-71:S>64?S-65:S>47?S+4:S>46?63:62}let m=0;for(let v=0;v<d.length;++v)p[m++]=p[v]<60?r[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(d,p,m,v,S,M){const g=s.exports.sbrk,_=m+3&-4,A=g(_*v),w=g(S.length),C=new Uint8Array(s.exports.memory.buffer);C.set(S,w);const R=d(A,m,v,w,S.length);if(R===0&&M&&M(A,_,v),p.set(C.subarray(A,A+m*v)),g(A-g(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return sw={ready:o,supported:!0,decodeVertexBuffer(d,p,m,v,S){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,v,s.exports[u[S]])},decodeIndexBuffer(d,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,v)},decodeIndexSequence(d,p,m,v){l(s.exports.meshopt_decodeIndexSequence,d,p,m,v)},decodeGltfBuffer(d,p,m,v,S,M){l(s.exports[h[S]],d,p,m,v,s.exports[u[M]])}},sw};let ow=null,TK="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function RK(n=!0,e=!0,t){return r=>{t&&t(r),n&&(ow||(ow=new Kpe),ow.setDecoderPath(typeof n=="string"?n:TK),r.setDRACOLoader(ow)),e&&r.setMeshoptDecoder(typeof qB=="function"?qB():qB)}}const MR=(n,e,t,r)=>qS(XU,n,RK(e,t,r));MR.preload=(n,e,t,r)=>qS.preload(XU,n,RK(e,t,r));MR.clear=n=>qS.clear(XU,n);MR.setDecoderPath=n=>{TK=n};var PK={exports:{}},qpe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Qpe=qpe,Zpe=Qpe;function BK(){}function LK(){}LK.resetWarningCache=BK;var $pe=function(){function n(r,i,s,o,a,l){if(l!==Zpe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:LK,resetWarningCache:BK};return t.PropTypes=t,t};PK.exports=$pe();var IK=PK.exports,DK={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},N4=Ga.createContext&&Ga.createContext(DK),Hd=globalThis&&globalThis.__assign||function(){return Hd=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Hd.apply(this,arguments)},eme=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function FK(n){return n&&n.map(function(e,t){return Ga.createElement(e.tag,Hd({key:t},e.attr),FK(e.child))})}function NK(n){return function(e){return Ga.createElement(tme,Hd({attr:Hd({},n.attr)},e),FK(n.child))}}function tme(n){var e=function(t){var r=n.attr,i=n.size,s=n.title,o=eme(n,["attr","size","title"]),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),Ga.createElement("svg",Hd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:Hd(Hd({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Ga.createElement("title",null,s),n.children)};return N4!==void 0?Ga.createElement(N4.Consumer,null,function(t){return e(t)}):e(DK)}function nme(n){return NK({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(n)}function UK(n){return NK({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(n)}const OK=we.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),ER=we.createContext({}),wR=we.createContext(null),bR=typeof document<"u",JU=bR?we.useLayoutEffect:we.useEffect,kK=we.createContext({strict:!1}),KU=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),rme="framerAppearId",GK="data-"+KU(rme);function ime(n,e,t,r){const{visualElement:i}=we.useContext(ER),s=we.useContext(kK),o=we.useContext(wR),a=we.useContext(OK).reducedMotion,l=we.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(n,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;we.useInsertionEffect(()=>{u&&u.update(t,o)});const h=we.useRef(!!(t[GK]&&!window.HandoffComplete));return JU(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),we.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function Dv(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function sme(n,e,t){return we.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Dv(t)&&(t.current=r))},[e])}function ZA(n){return typeof n=="string"||Array.isArray(n)}function CR(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const YU=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qU=["initial",...YU];function TR(n){return CR(n.animate)||qU.some(e=>ZA(n[e]))}function HK(n){return!!(TR(n)||n.variants)}function ome(n,e){if(TR(n)){const{initial:t,animate:r}=n;return{initial:t===!1||ZA(t)?t:void 0,animate:ZA(r)?r:void 0}}return n.inherit!==!1?e:{}}function ame(n){const{initial:e,animate:t}=ome(n,we.useContext(ER));return we.useMemo(()=>({initial:e,animate:t}),[U4(e),U4(t)])}function U4(n){return Array.isArray(n)?n.join(" "):n}const O4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$A={};for(const n in O4)$A[n]={isEnabled:e=>O4[n].some(t=>!!e[t])};function lme(n){for(const e in n)$A[e]={...$A[e],...n[e]}}const QU=we.createContext({}),zK=we.createContext({}),cme=Symbol.for("motionComponentSymbol");function ume({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&lme(n);function s(a,l){let u;const h={...we.useContext(OK),...a,layoutId:hme(a)},{isStatic:d}=h,p=ame(a),m=r(a,d);if(!d&&bR){p.visualElement=ime(i,m,h,e);const v=we.useContext(zK),S=we.useContext(kK).strict;p.visualElement&&(u=p.visualElement.loadFeatures(h,S,n,v))}return we.createElement(ER.Provider,{value:p},u&&p.visualElement?we.createElement(u,{visualElement:p.visualElement,...h}):null,t(i,a,sme(m,p.visualElement,l),m,d,p.visualElement))}const o=we.forwardRef(s);return o[cme]=i,o}function hme({layoutId:n}){const e=we.useContext(QU).id;return e&&n!==void 0?e+"-"+n:n}function dme(n){function e(r,i={}){return ume(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const fme=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ZU(n){return typeof n!="string"||n.includes("-")?!1:!!(fme.indexOf(n)>-1||/[A-Z]/.test(n))}const JC={};function pme(n){Object.assign(JC,n)}const QS=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vg=new Set(QS);function VK(n,{layout:e,layoutId:t}){return vg.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!JC[n]||n==="opacity")}const vo=n=>!!(n&&n.getVelocity),mme={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gme=QS.length;function vme(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let o=0;o<gme;o++){const a=QS[o];if(n[a]!==void 0){const l=mme[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const WK=n=>e=>typeof e=="string"&&e.startsWith(n),jK=WK("--"),SD=WK("var(--"),yme=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,xme=(n,e)=>e&&typeof n=="number"?e.transform(n):n,hf=(n,e,t)=>Math.min(Math.max(t,n),e),yg={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Z1={...yg,transform:n=>hf(0,1,n)},aw={...yg,default:1},$1=n=>Math.round(n*1e5)/1e5,RR=/(-)?([\d]*\.?[\d])+/g,XK=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,_me=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ZS(n){return typeof n=="string"}const $S=n=>({test:e=>ZS(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ld=$S("deg"),Fc=$S("%"),Gt=$S("px"),Ame=$S("vh"),Sme=$S("vw"),k4={...Fc,parse:n=>Fc.parse(n)/100,transform:n=>Fc.transform(n*100)},G4={...yg,transform:Math.round},JK={borderWidth:Gt,borderTopWidth:Gt,borderRightWidth:Gt,borderBottomWidth:Gt,borderLeftWidth:Gt,borderRadius:Gt,radius:Gt,borderTopLeftRadius:Gt,borderTopRightRadius:Gt,borderBottomRightRadius:Gt,borderBottomLeftRadius:Gt,width:Gt,maxWidth:Gt,height:Gt,maxHeight:Gt,size:Gt,top:Gt,right:Gt,bottom:Gt,left:Gt,padding:Gt,paddingTop:Gt,paddingRight:Gt,paddingBottom:Gt,paddingLeft:Gt,margin:Gt,marginTop:Gt,marginRight:Gt,marginBottom:Gt,marginLeft:Gt,rotate:ld,rotateX:ld,rotateY:ld,rotateZ:ld,scale:aw,scaleX:aw,scaleY:aw,scaleZ:aw,skew:ld,skewX:ld,skewY:ld,distance:Gt,translateX:Gt,translateY:Gt,translateZ:Gt,x:Gt,y:Gt,z:Gt,perspective:Gt,transformPerspective:Gt,opacity:Z1,originX:k4,originY:k4,originZ:Gt,zIndex:G4,fillOpacity:Z1,strokeOpacity:Z1,numOctaves:G4};function $U(n,e,t,r){const{style:i,vars:s,transform:o,transformOrigin:a}=n;let l=!1,u=!1,h=!0;for(const d in e){const p=e[d];if(jK(d)){s[d]=p;continue}const m=JK[d],v=xme(p,m);if(vg.has(d)){if(l=!0,o[d]=v,!h)continue;p!==(m.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=v):i[d]=v}if(e.transform||(l||r?i.transform=vme(n.transform,t,h,r):i.transform&&(i.transform="none")),u){const{originX:d="50%",originY:p="50%",originZ:m=0}=a;i.transformOrigin=`${d} ${p} ${m}`}}const eO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function KK(n,e,t){for(const r in e)!vo(e[r])&&!VK(r,t)&&(n[r]=e[r])}function Mme({transformTemplate:n},e,t){return we.useMemo(()=>{const r=eO();return $U(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function Eme(n,e,t){const r=n.style||{},i={};return KK(i,r,n),Object.assign(i,Mme(n,e,t)),n.transformValues?n.transformValues(i):i}function wme(n,e,t){const r={},i=Eme(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const bme=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function KC(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||bme.has(n)}let YK=n=>!KC(n);function Cme(n){n&&(YK=e=>e.startsWith("on")?!KC(e):n(e))}try{Cme(require("@emotion/is-prop-valid").default)}catch{}function Tme(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(YK(i)||t===!0&&KC(i)||!e&&!KC(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function H4(n,e,t){return typeof n=="string"?n:Gt.transform(e+t*n)}function Rme(n,e,t){const r=H4(e,n.x,n.width),i=H4(t,n.y,n.height);return`${r} ${i}`}const Pme={offset:"stroke-dashoffset",array:"stroke-dasharray"},Bme={offset:"strokeDashoffset",array:"strokeDasharray"};function Lme(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Pme:Bme;n[s.offset]=Gt.transform(-r);const o=Gt.transform(e),a=Gt.transform(t);n[s.array]=`${o} ${a}`}function tO(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,d,p){if($U(n,u,h,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:v,dimensions:S}=n;m.transform&&(S&&(v.transform=m.transform),delete m.transform),S&&(i!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=Rme(S,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),o!==void 0&&Lme(m,o,a,l,!1)}const qK=()=>({...eO(),attrs:{}}),nO=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Ime(n,e,t,r){const i=we.useMemo(()=>{const s=qK();return tO(s,e,{enableHardwareAcceleration:!1},nO(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};KK(s,n.style,n),i.style={...s,...i.style}}return i}function Dme(n=!1){return(e,t,r,{latestValues:i},s)=>{const o=(ZU(e)?Ime:wme)(t,i,s,e),a={...Tme(t,typeof e=="string",n),...o,ref:r},{children:l}=t,u=we.useMemo(()=>vo(l)?l.get():l,[l]);return we.createElement(e,{...a,children:u})}}function QK(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const ZK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $K(n,e,t,r){QK(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(ZK.has(i)?i:KU(i),e.attrs[i])}function rO(n,e){const{style:t}=n,r={};for(const i in t)(vo(t[i])||e.style&&vo(e.style[i])||VK(i,n))&&(r[i]=t[i]);return r}function eY(n,e){const t=rO(n,e);for(const r in n)if(vo(n[r])||vo(e[r])){const i=QS.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function iO(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function tY(n){const e=we.useRef(null);return e.current===null&&(e.current=n()),e.current}const YC=n=>Array.isArray(n),Fme=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Nme=n=>YC(n)?n[n.length-1]||0:n;function Jb(n){const e=vo(n)?n.get():n;return Fme(e)?e.toValue():e}function Ume({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const o={latestValues:Ome(r,i,s,n),renderState:e()};return t&&(o.mount=a=>t(r,a,o)),o}const nY=n=>(e,t)=>{const r=we.useContext(ER),i=we.useContext(wR),s=()=>Ume(n,e,r,i);return t?s():tY(s)};function Ome(n,e,t,r){const i={},s=r(n,{});for(const p in s)i[p]=Jb(s[p]);let{initial:o,animate:a}=n;const l=TR(n),u=HK(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!CR(d)&&(Array.isArray(d)?d:[d]).forEach(p=>{const m=iO(n,p);if(!m)return;const{transitionEnd:v,transition:S,...M}=m;for(const g in M){let _=M[g];if(Array.isArray(_)){const A=h?_.length-1:0;_=_[A]}_!==null&&(i[g]=_)}for(const g in v)i[g]=v[g]}),i}const Jr=n=>n;class z4{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function kme(n){let e=new z4,t=new z4,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,h=!1)=>{const d=h&&i,p=d?e:t;return u&&o.add(l),p.add(l)&&d&&i&&(r=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const h=e.order[u];h(l),o.has(h)&&(a.schedule(h),n())}i=!1,s&&(s=!1,a.process(l))}};return a}const lw=["prepare","read","update","preRender","render","postRender"],Gme=40;function Hme(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=lw.reduce((u,h)=>(u[h]=kme(()=>t=!0),u),{}),o=u=>s[u].process(i),a=()=>{const u=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(u-i.timestamp,Gme),1),i.timestamp=u,i.isProcessing=!0,lw.forEach(o),i.isProcessing=!1,t&&e&&(r=!1,n(a))},l=()=>{t=!0,r=!0,i.isProcessing||n(a)};return{schedule:lw.reduce((u,h)=>{const d=s[h];return u[h]=(p,m=!1,v=!1)=>(t||l(),d.schedule(p,m,v)),u},{}),cancel:u=>lw.forEach(h=>s[h].cancel(u)),state:i,steps:s}}const{schedule:qn,cancel:gh,state:_s,steps:QB}=Hme(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jr,!0),zme={useVisualState:nY({scrapeMotionValuesFromProps:eY,createRenderState:qK,onMount:(n,e,{renderState:t,latestValues:r})=>{qn.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),qn.render(()=>{tO(t,r,{enableHardwareAcceleration:!1},nO(e.tagName),n.transformTemplate),$K(e,t)})}})},Vme={useVisualState:nY({scrapeMotionValuesFromProps:rO,createRenderState:eO})};function Wme(n,{forwardMotionProps:e=!1},t,r){return{...ZU(n)?zme:Vme,preloadedFeatures:t,useRender:Dme(e),createVisualElement:r,Component:n}}function Xu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const rY=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function PR(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const jme=n=>e=>rY(e)&&n(e,PR(e));function nh(n,e,t,r){return Xu(n,e,jme(t),r)}const Xme=(n,e)=>t=>e(n(t)),zd=(...n)=>n.reduce(Xme);function iY(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const V4=iY("dragHorizontal"),W4=iY("dragVertical");function sY(n){let e=!1;if(n==="y")e=W4();else if(n==="x")e=V4();else{const t=V4(),r=W4();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function oY(){const n=sY(!0);return n?(n(),!1):!0}let Tf=class{constructor(e){this.isMounted=!1,this.node=e}update(){}};function j4(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||oY())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[r]&&qn.update(()=>a[r](s,o))};return nh(n.current,t,i,{passive:!n.getProps()[r]})}class Jme extends Tf{mount(){this.unmount=zd(j4(this.node,!0),j4(this.node,!1))}unmount(){}}class Kme extends Tf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zd(Xu(this.node.current,"focus",()=>this.onFocus()),Xu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const aY=(n,e)=>e?n===e?!0:aY(n,e.parentElement):!1;function ZB(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,PR(t))}class Yme extends Tf{constructor(){super(...arguments),this.removeStartListeners=Jr,this.removeEndListeners=Jr,this.removeAccessibleListeners=Jr,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=nh(window,"pointerup",(o,a)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:u,globalTapTarget:h}=this.node.getProps();qn.update(()=>{!h&&!aY(this.node.current,o.target)?u&&u(o,a):l&&l(o,a)})},{passive:!(r.onTap||r.onPointerUp)}),s=nh(window,"pointercancel",(o,a)=>this.cancelPress(o,a),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=zd(i,s),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ZB("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&qn.update(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=Xu(this.node.current,"keyup",o),ZB("down",(a,l)=>{this.startPress(a,l)})},t=Xu(this.node.current,"keydown",e),r=()=>{this.isPressing&&ZB("cancel",(s,o)=>this.cancelPress(s,o))},i=Xu(this.node.current,"blur",r);this.removeAccessibleListeners=zd(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&qn.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!oY()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&qn.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=nh(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Xu(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=zd(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const MD=new WeakMap,$B=new WeakMap,qme=n=>{const e=MD.get(n.target);e&&e(n)},Qme=n=>{n.forEach(qme)};function Zme({root:n,...e}){const t=n||document;$B.has(t)||$B.set(t,{});const r=$B.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Qme,{root:n,...e})),r[i]}function $me(n,e,t){const r=Zme(e);return MD.set(n,t),r.observe(n),()=>{MD.delete(n),r.unobserve(n)}}const ege={some:0,all:1};class tge extends Tf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:ege[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=u?h:d;p&&p(l)};return $me(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(nge(e,t))&&this.startObserver()}unmount(){}}function nge({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const rge={inView:{Feature:tge},tap:{Feature:Yme},focus:{Feature:Kme},hover:{Feature:Jme}};function lY(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function ige(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function sge(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function BR(n,e,t){const r=n.getProps();return iO(r,e,t!==void 0?t:r.custom,ige(n),sge(n))}let sO=Jr;const Pm=n=>n*1e3,rh=n=>n/1e3,oge={current:!1},cY=n=>Array.isArray(n)&&typeof n[0]=="number";function uY(n){return!!(!n||typeof n=="string"&&hY[n]||cY(n)||Array.isArray(n)&&n.every(uY))}const P1=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,hY={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:P1([0,.65,.55,1]),circOut:P1([.55,0,1,.45]),backIn:P1([.31,.01,.66,-.59]),backOut:P1([.33,1.53,.69,.99])};function dY(n){if(n)return cY(n)?P1(n):Array.isArray(n)?n.map(dY):hY[n]}function age(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:t};l&&(u.offset=l);const h=dY(a);return Array.isArray(h)&&(u.easing=h),n.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function lge(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const fY=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,cge=1e-7,uge=12;function hge(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=fY(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>cge&&++a<uge);return o}function eM(n,e,t,r){if(n===e&&t===r)return Jr;const i=s=>hge(s,0,1,n,t);return s=>s===0||s===1?s:fY(i(s),e,r)}const dge=eM(.42,0,1,1),fge=eM(0,0,.58,1),pY=eM(.42,0,.58,1),pge=n=>Array.isArray(n)&&typeof n[0]!="number",mY=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,gY=n=>e=>1-n(1-e),oO=n=>1-Math.sin(Math.acos(n)),vY=gY(oO),mge=mY(oO),yY=eM(.33,1.53,.69,.99),aO=gY(yY),gge=mY(aO),vge=n=>(n*=2)<1?.5*aO(n):.5*(2-Math.pow(2,-10*(n-1))),yge={linear:Jr,easeIn:dge,easeInOut:pY,easeOut:fge,circIn:oO,circInOut:mge,circOut:vY,backIn:aO,backInOut:gge,backOut:yY,anticipate:vge},X4=n=>{if(Array.isArray(n)){sO(n.length===4);const[e,t,r,i]=n;return eM(e,t,r,i)}else if(typeof n=="string")return yge[n];return n},lO=(n,e)=>t=>!!(ZS(t)&&_me.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),xY=(n,e,t)=>r=>{if(!ZS(r))return r;const[i,s,o,a]=r.match(RR);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},xge=n=>hf(0,255,n),eL={...yg,transform:n=>Math.round(xge(n))},dm={test:lO("rgb","red"),parse:xY("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+eL.transform(n)+", "+eL.transform(e)+", "+eL.transform(t)+", "+$1(Z1.transform(r))+")"};function _ge(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ED={test:lO("#"),parse:_ge,transform:dm.transform},Fv={test:lO("hsl","hue"),parse:xY("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Fc.transform($1(e))+", "+Fc.transform($1(t))+", "+$1(Z1.transform(r))+")"},Ds={test:n=>dm.test(n)||ED.test(n)||Fv.test(n),parse:n=>dm.test(n)?dm.parse(n):Fv.test(n)?Fv.parse(n):ED.parse(n),transform:n=>ZS(n)?n:n.hasOwnProperty("red")?dm.transform(n):Fv.transform(n)},_r=(n,e,t)=>-t*n+t*e+n;function tL(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Age({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=tL(l,a,n+1/3),s=tL(l,a,n),o=tL(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const nL=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},Sge=[ED,dm,Fv],Mge=n=>Sge.find(e=>e.test(n));function J4(n){const e=Mge(n);let t=e.parse(n);return e===Fv&&(t=Age(t)),t}const _Y=(n,e)=>{const t=J4(n),r=J4(e),i={...t};return s=>(i.red=nL(t.red,r.red,s),i.green=nL(t.green,r.green,s),i.blue=nL(t.blue,r.blue,s),i.alpha=_r(t.alpha,r.alpha,s),dm.transform(i))};function Ege(n){var e,t;return isNaN(n)&&ZS(n)&&(((e=n.match(RR))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(XK))===null||t===void 0?void 0:t.length)||0)>0}const AY={regex:yme,countKey:"Vars",token:"${v}",parse:Jr},SY={regex:XK,countKey:"Colors",token:"${c}",parse:Ds.parse},MY={regex:RR,countKey:"Numbers",token:"${n}",parse:yg.parse};function rL(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function qC(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&rL(t,AY),rL(t,SY),rL(t,MY),t}function EY(n){return qC(n).values}function wY(n){const{values:e,numColors:t,numVars:r,tokenised:i}=qC(n),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(AY.token,o[l]):l<r+t?a=a.replace(SY.token,Ds.transform(o[l])):a=a.replace(MY.token,$1(o[l]));return a}}const wge=n=>typeof n=="number"?0:n;function bge(n){const e=EY(n);return wY(n)(e.map(wge))}const df={test:Ege,parse:EY,createTransformer:wY,getAnimatableNone:bge},bY=(n,e)=>t=>`${t>0?e:n}`;function CY(n,e){return typeof n=="number"?t=>_r(n,e,t):Ds.test(n)?_Y(n,e):n.startsWith("var(")?bY(n,e):RY(n,e)}const TY=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,o)=>CY(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}},Cge=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=CY(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},RY=(n,e)=>{const t=df.createTransformer(e),r=qC(n),i=qC(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?zd(TY(r.values,i.values),t):bY(n,e)},eS=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},K4=(n,e)=>t=>_r(n,e,t);function Tge(n){return typeof n=="number"?K4:typeof n=="string"?Ds.test(n)?_Y:RY:Array.isArray(n)?TY:typeof n=="object"?Cge:K4}function Rge(n,e,t){const r=[],i=t||Tge(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Jr:e;a=zd(l,a)}r.push(a)}return r}function PY(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(sO(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Rge(e,r,i),a=o.length,l=u=>{let h=0;if(a>1)for(;h<n.length-2&&!(u<n[h+1]);h++);const d=eS(n[h],n[h+1],u);return o[h](d)};return t?u=>l(hf(n[0],n[s-1],u)):l}function Pge(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=eS(0,e,r);n.push(_r(t,1,i))}}function Bge(n){const e=[0];return Pge(e,n.length-1),e}function Lge(n,e){return n.map(t=>t*e)}function Ige(n,e){return n.map(()=>e||pY).splice(0,n.length-1)}function QC({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=pge(r)?r.map(X4):X4(r),s={done:!1,value:e[0]},o=Lge(t&&t.length===e.length?t:Bge(e),n),a=PY(o,e,{ease:Array.isArray(i)?i:Ige(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function BY(n,e){return e?n*(1e3/e):0}const Dge=5;function LY(n,e,t){const r=Math.max(e-Dge,0);return BY(t-n(r),e-r)}const iL=.001,Fge=.01,Nge=10,Uge=.05,Oge=1;function kge({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s,o=1-e;o=hf(Uge,Oge,o),n=hf(Fge,Nge,rh(n)),o<1?(i=u=>{const h=u*o,d=h*n,p=h-t,m=wD(u,o),v=Math.exp(-d);return iL-p/m*v},s=u=>{const h=u*o*n,d=h*t+t,p=Math.pow(o,2)*Math.pow(u,2)*n,m=Math.exp(-h),v=wD(Math.pow(u,2),o);return(-i(u)+iL>0?-1:1)*((d-p)*m)/v}):(i=u=>{const h=Math.exp(-u*n),d=(u-t)*n+1;return-iL+h*d},s=u=>{const h=Math.exp(-u*n),d=(t-u)*(n*n);return h*d});const a=5/n,l=Hge(i,s,a);if(n=Pm(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:n}}}const Gge=12;function Hge(n,e,t){let r=t;for(let i=1;i<Gge;i++)r=r-n(r)/e(r);return r}function wD(n,e){return n*Math.sqrt(1-e*e)}const zge=["duration","bounce"],Vge=["stiffness","damping","mass"];function Y4(n,e){return e.some(t=>n[t]!==void 0)}function Wge(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!Y4(n,Vge)&&Y4(n,zge)){const t=kge(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function IY({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:p}=Wge({...r,velocity:-rh(r.velocity||0)}),m=d||0,v=l/(2*Math.sqrt(a*u)),S=s-i,M=rh(Math.sqrt(a/u)),g=Math.abs(S)<5;t||(t=g?.01:2),e||(e=g?.005:.5);let _;if(v<1){const A=wD(M,v);_=w=>{const C=Math.exp(-v*M*w);return s-C*((m+v*M*S)/A*Math.sin(A*w)+S*Math.cos(A*w))}}else if(v===1)_=A=>s-Math.exp(-M*A)*(S+(m+M*S)*A);else{const A=M*Math.sqrt(v*v-1);_=w=>{const C=Math.exp(-v*M*w),R=Math.min(A*w,300);return s-C*((m+v*M*S)*Math.sinh(R)+A*S*Math.cosh(R))/A}}return{calculatedDuration:p&&h||null,next:A=>{const w=_(A);if(p)o.done=A>=h;else{let C=m;A!==0&&(v<1?C=LY(_,A,w):C=0);const R=Math.abs(C)<=t,L=Math.abs(s-w)<=e;o.done=R&&L}return o.value=o.done?s:w,o}}}function q4({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=n[0],p={done:!1,value:d},m=I=>a!==void 0&&I<a||l!==void 0&&I>l,v=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let S=t*e;const M=d+S,g=o===void 0?M:o(M);g!==M&&(S=g-d);const _=I=>-S*Math.exp(-I/r),A=I=>g+_(I),w=I=>{const T=_(I),B=A(I);p.done=Math.abs(T)<=u,p.value=p.done?g:B};let C,R;const L=I=>{m(p.value)&&(C=I,R=IY({keyframes:[p.value,v(p.value)],velocity:LY(A,I,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return L(0),{calculatedDuration:null,next:I=>{let T=!1;return!R&&C===void 0&&(T=!0,w(I),L(I)),C!==void 0&&I>C?R.next(I-C):(!T&&w(I),p)}}}const jge=n=>{const e=({timestamp:t})=>n(t);return{start:()=>qn.update(e,!0),stop:()=>gh(e),now:()=>_s.isProcessing?_s.timestamp:performance.now()}},Q4=2e4;function Z4(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Q4;)e+=t,r=n.next(e);return e>=Q4?1/0:e}const Xge={decay:q4,inertia:q4,tween:QC,keyframes:QC,spring:IY};function ZC({autoplay:n=!0,delay:e=0,driver:t=jge,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:h,onUpdate:d,...p}){let m=1,v=!1,S,M;const g=()=>{M=new Promise(q=>{S=q})};g();let _;const A=Xge[i]||QC;let w;A!==QC&&typeof r[0]!="number"&&(w=PY([0,100],r,{clamp:!1}),r=[0,100]);const C=A({...p,keyframes:r});let R;a==="mirror"&&(R=A({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let L="idle",I=null,T=null,B=null;C.calculatedDuration===null&&s&&(C.calculatedDuration=Z4(C));const{calculatedDuration:H}=C;let K=1/0,j=1/0;H!==null&&(K=H+o,j=K*(s+1)-o);let z=0;const X=q=>{if(T===null)return;m>0&&(T=Math.min(T,q)),m<0&&(T=Math.min(q-j/m,T)),I!==null?z=I:z=Math.round(q-T)*m;const re=z-e*(m>=0?1:-1),Y=m>=0?re<0:re>j;z=Math.max(re,0),L==="finished"&&I===null&&(z=j);let ae=z,Se=C;if(s){const Ne=Math.min(z,j)/K;let ye=Math.floor(Ne),me=Ne%1;!me&&Ne>=1&&(me=1),me===1&&ye--,ye=Math.min(ye,s+1),ye%2&&(a==="reverse"?(me=1-me,o&&(me-=o/K)):a==="mirror"&&(Se=R)),ae=hf(0,1,me)*K}const ve=Y?{done:!1,value:r[0]}:Se.next(ae);w&&(ve.value=w(ve.value));let{done:W}=ve;!Y&&H!==null&&(W=m>=0?z>=j:z<=0);const Xe=I===null&&(L==="finished"||L==="running"&&W);return d&&d(ve.value),Xe&&D(),ve},te=()=>{_&&_.stop(),_=void 0},O=()=>{L="idle",te(),S(),g(),T=B=null},D=()=>{L="finished",h&&h(),te(),S()},V=()=>{if(v)return;_||(_=t(X));const q=_.now();l&&l(),I!==null?T=q-I:(!T||L==="finished")&&(T=q),L==="finished"&&g(),B=T,I=null,L="running",_.start()};n&&V();const G={then(q,re){return M.then(q,re)},get time(){return rh(z)},set time(q){q=Pm(q),z=q,I!==null||!_||m===0?I=q:T=_.now()-q/m},get duration(){const q=C.calculatedDuration===null?Z4(C):C.calculatedDuration;return rh(q)},get speed(){return m},set speed(q){q===m||!_||(m=q,G.time=rh(z))},get state(){return L},play:V,pause:()=>{L="paused",I=z},stop:()=>{v=!0,L!=="idle"&&(L="idle",u&&u(),O())},cancel:()=>{B!==null&&X(B),O()},complete:()=>{L="finished"},sample:q=>(T=0,X(q))};return G}function Jge(n){let e;return()=>(e===void 0&&(e=n()),e)}const Kge=Jge(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Yge=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),cw=10,qge=2e4,Qge=(n,e)=>e.type==="spring"||n==="backgroundColor"||!uY(e.ease);function Zge(n,e,{onUpdate:t,onComplete:r,...i}){if(!(Kge()&&Yge.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let s=!1,o,a,l=!1;const u=()=>{a=new Promise(g=>{o=g})};u();let{keyframes:h,duration:d=300,ease:p,times:m}=i;if(Qge(e,i)){const g=ZC({...i,repeat:0,delay:0});let _={done:!1,value:h[0]};const A=[];let w=0;for(;!_.done&&w<qge;)_=g.sample(w),A.push(_.value),w+=cw;m=void 0,h=A,d=w-cw,p="linear"}const v=age(n.owner.current,e,h,{...i,duration:d,ease:p,times:m}),S=()=>{l=!1,v.cancel()},M=()=>{l=!0,qn.update(S),o(),u()};return v.onfinish=()=>{l||(n.set(lge(h,i)),r&&r(),M())},{then(g,_){return a.then(g,_)},attachTimeline(g){return v.timeline=g,v.onfinish=null,Jr},get time(){return rh(v.currentTime||0)},set time(g){v.currentTime=Pm(g)},get speed(){return v.playbackRate},set speed(g){v.playbackRate=g},get duration(){return rh(d)},play:()=>{s||(v.play(),gh(S))},pause:()=>v.pause(),stop:()=>{if(s=!0,v.playState==="idle")return;const{currentTime:g}=v;if(g){const _=ZC({...i,autoplay:!1});n.setWithVelocity(_.sample(g-cw).value,_.sample(g).value,cw)}M()},complete:()=>{l||v.finish()},cancel:M}}function $ge({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Jr,pause:Jr,stop:Jr,then:s=>(s(),Promise.resolve()),cancel:Jr,complete:Jr});return e?ZC({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const e0e={type:"spring",stiffness:500,damping:25,restSpeed:10},t0e=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),n0e={type:"keyframes",duration:.8},r0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},i0e=(n,{keyframes:e})=>e.length>2?n0e:vg.has(n)?n.startsWith("scale")?t0e(e[1]):e0e:r0e,bD=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(df.test(e)||e==="0")&&!e.startsWith("url(")),s0e=new Set(["brightness","contrast","saturate","opacity"]);function o0e(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(RR)||[];if(!r)return n;const i=t.replace(r,"");let s=s0e.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const a0e=/([a-z-]*)\(.*?\)/g,CD={...df,getAnimatableNone:n=>{const e=n.match(a0e);return e?e.map(o0e).join(" "):n}},l0e={...JK,color:Ds,backgroundColor:Ds,outlineColor:Ds,fill:Ds,stroke:Ds,borderColor:Ds,borderTopColor:Ds,borderRightColor:Ds,borderBottomColor:Ds,borderLeftColor:Ds,filter:CD,WebkitFilter:CD},cO=n=>l0e[n];function DY(n,e){let t=cO(n);return t!==CD&&(t=df),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const FY=n=>/^0[^.\s]+$/.test(n);function c0e(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||FY(n)}function u0e(n,e,t,r){const i=bD(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=r.from!==void 0?r.from:n.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),c0e(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const h=l[u];s[h]=DY(e,a)}return s}function h0e({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}function uO(n,e){return n[e]||n.default||n}const d0e={skipAnimations:!1},hO=(n,e,t,r={})=>i=>{const s=uO(r,n)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Pm(o);const l=u0e(e,n,t,s),u=l[0],h=l[l.length-1],d=bD(n,u),p=bD(n,h);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:v=>{e.set(v),s.onUpdate&&s.onUpdate(v)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(h0e(s)||(m={...m,...i0e(n,m)}),m.duration&&(m.duration=Pm(m.duration)),m.repeatDelay&&(m.repeatDelay=Pm(m.repeatDelay)),!d||!p||oge.current||s.type===!1||d0e.skipAnimations)return $ge(m);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=Zge(e,n,m);if(v)return v}return ZC(m)};function $C(n){return!!(vo(n)&&n.add)}const NY=n=>/^\-?\d*\.?\d+$/.test(n);function dO(n,e){n.indexOf(e)===-1&&n.push(e)}function fO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class pO{constructor(){this.subscriptions=[]}add(e){return dO(this.subscriptions,e),()=>fO(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const f0e=n=>!isNaN(parseFloat(n));class p0e{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=_s;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,qn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>qn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=f0e(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new pO);const r=this.events[e].add(t);return e==="change"?()=>{r(),qn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?BY(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hy(n,e){return new p0e(n,e)}const UY=n=>e=>e.test(n),m0e={test:n=>n==="auto",parse:n=>n},OY=[yg,Gt,Fc,ld,Sme,Ame,m0e],Z_=n=>OY.find(UY(n)),g0e=[...OY,Ds,df],v0e=n=>g0e.find(UY(n));function y0e(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Hy(t))}function x0e(n,e){const t=BR(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const o in s){const a=Nme(s[o]);y0e(n,o,a)}}function _0e(n,e,t){var r,i;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(i=(r=t[l])!==null&&r!==void 0?r:n.readValue(l))!==null&&i!==void 0?i:e[l]),h!=null&&(typeof h=="string"&&(NY(h)||FY(h))?h=parseFloat(h):!v0e(h)&&df.test(u)&&(h=DY(l,u)),n.addValue(l,Hy(h,{owner:n})),t[l]===void 0&&(t[l]=h),h!==null&&n.setBaseTarget(l,h))}}function A0e(n,e){return e?(e[n]||e.default||e).from:void 0}function S0e(n,e,t){const r={};for(const i in n){const s=A0e(i,e);if(s!==void 0)r[i]=s;else{const o=t.getValue(i);o&&(r[i]=o.get())}}return r}function M0e({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function E0e(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function kY(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");r&&(s=r);const u=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const d in a){const p=n.getValue(d),m=a[d];if(!p||m===void 0||h&&M0e(h,d))continue;const v={delay:t,elapsed:0,...uO(s||{},d)};if(window.HandoffAppearAnimations){const g=n.getProps()[GK];if(g){const _=window.HandoffAppearAnimations(g,d,p,qn);_!==null&&(v.elapsed=_,v.isHandoff=!0)}}let S=!v.isHandoff&&!E0e(p,m);if(v.type==="spring"&&(p.getVelocity()||v.velocity)&&(S=!1),p.animation&&(S=!1),S)continue;p.start(hO(d,p,m,n.shouldReduceMotion&&vg.has(d)?{type:!1}:v));const M=p.animation;$C(l)&&(l.add(d),M.then(()=>l.remove(d))),u.push(M)}return o&&Promise.all(u).then(()=>{o&&x0e(n,o)}),u}function TD(n,e,t={}){const r=BR(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(kY(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=i;return w0e(n,e,u+l,h,d,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function w0e(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(n.variantChildren).sort(b0e).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(TD(u,e,{...s,delay:t+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function b0e(n,e){return n.sortNodePosition(e)}function C0e(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>TD(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=TD(n,e,t);else{const i=typeof e=="function"?BR(n,e,t.custom):e;r=Promise.all(kY(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const T0e=[...YU].reverse(),R0e=YU.length;function P0e(n){return e=>Promise.all(e.map(({animation:t,options:r})=>C0e(n,t,r)))}function B0e(n){let e=P0e(n);const t=I0e();let r=!0;const i=(l,u)=>{const h=BR(n,u);if(h){const{transition:d,transitionEnd:p,...m}=h;l={...l,...m,...p}}return l};function s(l){e=l(n)}function o(l,u){const h=n.getProps(),d=n.getVariantContext(!0)||{},p=[],m=new Set;let v={},S=1/0;for(let g=0;g<R0e;g++){const _=T0e[g],A=t[_],w=h[_]!==void 0?h[_]:d[_],C=ZA(w),R=_===u?A.isActive:null;R===!1&&(S=g);let L=w===d[_]&&w!==h[_]&&C;if(L&&r&&n.manuallyAnimateOnMount&&(L=!1),A.protectedKeys={...v},!A.isActive&&R===null||!w&&!A.prevProp||CR(w)||typeof w=="boolean")continue;let I=L0e(A.prevProp,w)||_===u&&A.isActive&&!L&&C||g>S&&C,T=!1;const B=Array.isArray(w)?w:[w];let H=B.reduce(i,{});R===!1&&(H={});const{prevResolvedValues:K={}}=A,j={...K,...H},z=X=>{I=!0,m.has(X)&&(T=!0,m.delete(X)),A.needsAnimating[X]=!0};for(const X in j){const te=H[X],O=K[X];if(v.hasOwnProperty(X))continue;let D=!1;YC(te)&&YC(O)?D=!lY(te,O):D=te!==O,D?te!==void 0?z(X):m.add(X):te!==void 0&&m.has(X)?z(X):A.protectedKeys[X]=!0}A.prevProp=w,A.prevResolvedValues=H,A.isActive&&(v={...v,...H}),r&&n.blockInitialAnimation&&(I=!1),I&&(!L||T)&&p.push(...B.map(X=>({animation:X,options:{type:_,...l}})))}if(m.size){const g={};m.forEach(_=>{const A=n.getBaseTarget(_);A!==void 0&&(g[_]=A)}),p.push({animation:g})}let M=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(M=!1),r=!1,M?e(p):Promise.resolve()}function a(l,u,h){var d;if(t[l].isActive===u)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(m=>{var v;return(v=m.animationState)===null||v===void 0?void 0:v.setActive(l,u)}),t[l].isActive=u;const p=o(h,l);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function L0e(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!lY(e,n):!1}function bp(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function I0e(){return{animate:bp(!0),whileInView:bp(),whileHover:bp(),whileTap:bp(),whileDrag:bp(),whileFocus:bp(),exit:bp()}}class D0e extends Tf{constructor(e){super(e),e.animationState||(e.animationState=B0e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),CR(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let F0e=0;class N0e extends Tf{constructor(){super(...arguments),this.id=F0e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const U0e={animation:{Feature:D0e},exit:{Feature:N0e}},$4=(n,e)=>Math.abs(n-e);function O0e(n,e){const t=$4(n.x,e.x),r=$4(n.y,e.y);return Math.sqrt(t**2+r**2)}class GY{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=oL(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=O0e(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:v}=d,{timestamp:S}=_s;this.history.push({...v,timestamp:S});const{onStart:M,onMove:g}=this.handlers;p||(M&&M(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=sL(p,this.transformPagePoint),qn.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=oL(d.type==="pointercancel"?this.lastMoveEventInfo:sL(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,M),v&&v(d,M)},!rY(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=PR(e),a=sL(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=_s;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=t;h&&h(e,oL(a,this.history)),this.removeListeners=zd(nh(this.contextWindow,"pointermove",this.handlePointerMove),nh(this.contextWindow,"pointerup",this.handlePointerUp),nh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gh(this.updatePoint)}}function sL(n,e){return e?{point:e(n.point)}:n}function eV(n,e){return{x:n.x-e.x,y:n.y-e.y}}function oL({point:n},e){return{point:n,delta:eV(n,HY(e)),offset:eV(n,k0e(e)),velocity:G0e(e,.1)}}function k0e(n){return n[0]}function HY(n){return n[n.length-1]}function G0e(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=HY(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Pm(e)));)t--;if(!r)return{x:0,y:0};const s=rh(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Qo(n){return n.max-n.min}function RD(n,e=0,t=.01){return Math.abs(n-e)<=t}function tV(n,e,t,r=.5){n.origin=r,n.originPoint=_r(e.min,e.max,n.origin),n.scale=Qo(t)/Qo(e),(RD(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=_r(t.min,t.max,n.origin)-n.originPoint,(RD(n.translate)||isNaN(n.translate))&&(n.translate=0)}function eA(n,e,t,r){tV(n.x,e.x,t.x,r?r.originX:void 0),tV(n.y,e.y,t.y,r?r.originY:void 0)}function nV(n,e,t){n.min=t.min+e.min,n.max=n.min+Qo(e)}function H0e(n,e,t){nV(n.x,e.x,t.x),nV(n.y,e.y,t.y)}function rV(n,e,t){n.min=e.min-t.min,n.max=n.min+Qo(e)}function tA(n,e,t){rV(n.x,e.x,t.x),rV(n.y,e.y,t.y)}function z0e(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?_r(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?_r(t,n,r.max):Math.min(n,t)),n}function iV(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function V0e(n,{top:e,left:t,bottom:r,right:i}){return{x:iV(n.x,t,i),y:iV(n.y,e,r)}}function sV(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function W0e(n,e){return{x:sV(n.x,e.x),y:sV(n.y,e.y)}}function j0e(n,e){let t=.5;const r=Qo(n),i=Qo(e);return i>r?t=eS(e.min,e.max-r,n.min):r>i&&(t=eS(n.min,n.max-i,e.min)),hf(0,1,t)}function X0e(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const PD=.35;function J0e(n=PD){return n===!1?n=0:n===!0&&(n=PD),{x:oV(n,"left","right"),y:oV(n,"top","bottom")}}function oV(n,e,t){return{min:aV(n,e),max:aV(n,t)}}function aV(n,e){return typeof n=="number"?n:n[e]||0}const lV=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nv=()=>({x:lV(),y:lV()}),cV=()=>({min:0,max:0}),ii=()=>({x:cV(),y:cV()});function ba(n){return[n("x"),n("y")]}function zY({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function K0e({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Y0e(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function aL(n){return n===void 0||n===1}function BD({scale:n,scaleX:e,scaleY:t}){return!aL(n)||!aL(e)||!aL(t)}function Hp(n){return BD(n)||VY(n)||n.z||n.rotate||n.rotateX||n.rotateY}function VY(n){return uV(n.x)||uV(n.y)}function uV(n){return n&&n!=="0%"}function eT(n,e,t){const r=n-t,i=e*r;return t+i}function hV(n,e,t,r,i){return i!==void 0&&(n=eT(n,i,r)),eT(n,t,r)+e}function LD(n,e=0,t=1,r,i){n.min=hV(n.min,e,t,r,i),n.max=hV(n.max,e,t,r,i)}function WY(n,{x:e,y:t}){LD(n.x,e.translate,e.scale,e.originPoint),LD(n.y,t.translate,t.scale,t.originPoint)}function q0e(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Uv(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,WY(n,o)),r&&Hp(s.latestValues)&&Uv(n,s.latestValues))}e.x=dV(e.x),e.y=dV(e.y)}function dV(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function fd(n,e){n.min=n.min+e,n.max=n.max+e}function fV(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,o=_r(n.min,n.max,s);LD(n,e[t],e[r],o,e.scale)}const Q0e=["x","scaleX","originX"],Z0e=["y","scaleY","originY"];function Uv(n,e){fV(n.x,e,Q0e),fV(n.y,e,Z0e)}function jY(n,e){return zY(Y0e(n.getBoundingClientRect(),e))}function $0e(n,e,t){const r=jY(n,t),{scroll:i}=e;return i&&(fd(r.x,i.offset.x),fd(r.y,i.offset.y)),r}const XY=({current:n})=>n?n.ownerDocument.defaultView:null,eve=new WeakMap;class tve{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ii(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(PR(h,"page").point)},s=(h,d)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=sY(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ba(M=>{let g=this.getAxisMotionValue(M).get()||0;if(Fc.test(g)){const{projection:_}=this.visualElement;if(_&&_.layout){const A=_.layout.layoutBox[M];A&&(g=Qo(A)*(parseFloat(g)/100))}}this.originPoint[M]=g}),v&&qn.update(()=>v(h,d),!1,!0);const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:S}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:M}=d;if(m&&this.currentDirection===null){this.currentDirection=nve(M),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,M),this.updateAxis("y",d.point,M),this.visualElement.render(),S&&S(h,d)},a=(h,d)=>this.stop(h,d),l=()=>ba(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new GY(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:XY(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&qn.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!uw(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=z0e(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Dv(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=V0e(i.layoutBox,t):this.constraints=!1,this.elastic=J0e(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ba(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=X0e(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Dv(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=$0e(r,i.root,this.visualElement.getTransformPagePoint());let o=W0e(i.layout.layoutBox,s);if(t){const a=t(K0e(o));this.hasMutatedConstraints=!!a,a&&(o=zY(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=ba(h=>{if(!uw(h,t,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,v)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(hO(e,r,0,t))}stopAnimation(){ba(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ba(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ba(t=>{const{drag:r}=this.getProps();if(!uw(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-_r(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Dv(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ba(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=j0e({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ba(o=>{if(!uw(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(_r(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;eve.set(this.visualElement,this);const e=this.visualElement.current,t=nh(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Dv(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Xu(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ba(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=PD,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function uw(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function nve(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class rve extends Tf{constructor(e){super(e),this.removeGroupControls=Jr,this.removeListeners=Jr,this.controls=new tve(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jr}unmount(){this.removeGroupControls(),this.removeListeners()}}const pV=n=>(e,t)=>{n&&qn.update(()=>n(e,t))};class ive extends Tf{constructor(){super(...arguments),this.removePointerDownListener=Jr}onPointerDown(e){this.session=new GY(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:XY(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:pV(e),onStart:pV(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&qn.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=nh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function sve(){const n=we.useContext(wR);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=we.useId();return we.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Kb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mV(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const $_={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Gt.test(n))n=parseFloat(n);else return n;const t=mV(n,e.target.x),r=mV(n,e.target.y);return`${t}% ${r}%`}},ove={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=df.parse(n);if(i.length>5)return r;const s=df.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=_r(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class ave extends Ga.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;pme(lve),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Kb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||qn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function JY(n){const[e,t]=sve(),r=we.useContext(QU);return Ga.createElement(ave,{...n,layoutGroup:r,switchLayoutGroup:we.useContext(zK),isPresent:e,safeToRemove:t})}const lve={borderRadius:{...$_,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$_,borderTopRightRadius:$_,borderBottomLeftRadius:$_,borderBottomRightRadius:$_,boxShadow:ove},KY=["TopLeft","TopRight","BottomLeft","BottomRight"],cve=KY.length,gV=n=>typeof n=="string"?parseFloat(n):n,vV=n=>typeof n=="number"||Gt.test(n);function uve(n,e,t,r,i,s){i?(n.opacity=_r(0,t.opacity!==void 0?t.opacity:1,hve(r)),n.opacityExit=_r(e.opacity!==void 0?e.opacity:1,0,dve(r))):s&&(n.opacity=_r(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<cve;o++){const a=`border${KY[o]}Radius`;let l=yV(e,a),u=yV(t,a);l===void 0&&u===void 0||(l||(l=0),u||(u=0),l===0||u===0||vV(l)===vV(u)?(n[a]=Math.max(_r(gV(l),gV(u),r),0),(Fc.test(u)||Fc.test(l))&&(n[a]+="%")):n[a]=u)}(e.rotate||t.rotate)&&(n.rotate=_r(e.rotate||0,t.rotate||0,r))}function yV(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const hve=YY(0,.5,vY),dve=YY(.5,.95,Jr);function YY(n,e,t){return r=>r<n?0:r>e?1:t(eS(n,e,r))}function xV(n,e){n.min=e.min,n.max=e.max}function Aa(n,e){xV(n.x,e.x),xV(n.y,e.y)}function _V(n,e,t,r,i){return n-=e,n=eT(n,1/t,r),i!==void 0&&(n=eT(n,1/i,r)),n}function fve(n,e=0,t=1,r=.5,i,s=n,o=n){if(Fc.test(e)&&(e=parseFloat(e),e=_r(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=_r(s.min,s.max,r);n===s&&(a-=e),n.min=_V(n.min,e,t,a,i),n.max=_V(n.max,e,t,a,i)}function AV(n,e,[t,r,i],s,o){fve(n,e[t],e[r],e[i],e.scale,s,o)}const pve=["x","scaleX","originX"],mve=["y","scaleY","originY"];function SV(n,e,t,r){AV(n.x,e,pve,t?t.x:void 0,r?r.x:void 0),AV(n.y,e,mve,t?t.y:void 0,r?r.y:void 0)}function MV(n){return n.translate===0&&n.scale===1}function qY(n){return MV(n.x)&&MV(n.y)}function gve(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function QY(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function EV(n){return Qo(n.x)/Qo(n.y)}class vve{constructor(){this.members=[]}add(e){dO(this.members,e),e.scheduleRender()}remove(e){if(fO(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wV(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:u,rotateY:h}=t;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const yve=(n,e)=>n.depth-e.depth;class xve{constructor(){this.children=[],this.isDirty=!1}add(e){dO(this.children,e),this.isDirty=!0}remove(e){fO(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yve),this.isDirty=!1,this.children.forEach(e)}}function _ve(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(gh(r),n(s-e))};return qn.read(r,!0),()=>gh(r)}function Ave(n){window.MotionDebug&&window.MotionDebug.record(n)}function Sve(n){return n instanceof SVGElement&&n.tagName!=="svg"}function Mve(n,e,t){const r=vo(n)?n:Hy(n);return r.start(hO("",r,e,t)),r.animation}const bV=["","X","Y","Z"],Eve={visibility:"hidden"},CV=1e3;let wve=0;const zp={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function ZY({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=wve++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zp.totalNodes=zp.resolvedTargetDeltas=zp.recalculatedProjection=0,this.nodes.forEach(Tve),this.nodes.forEach(Ive),this.nodes.forEach(Dve),this.nodes.forEach(Rve),Ave(zp)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new xve)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new pO),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const a=this.eventHandlers.get(s);a&&a.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Sve(s),this.instance=s;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(l||a)&&(this.isLayoutDirty=!0),n){let h;const d=()=>this.root.updateBlockedByResize=!1;n(s,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=_ve(d,250),Kb.hasAnimatedSinceResize&&(Kb.hasAnimatedSinceResize=!1,this.nodes.forEach(RV))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||kve,{onLayoutAnimationStart:S,onLayoutAnimationComplete:M}=u.getProps(),g=!this.targetLayout||!QY(this.targetLayout,m)||p,_=!d&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||d&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,_);const A={...uO(v,"layout"),onPlay:S,onComplete:M};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else d||RV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Fve),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:a}=this.options;if(o===void 0&&!a)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TV);return}this.isUpdating||this.nodes.forEach(Bve),this.isUpdating=!1,this.nodes.forEach(Lve),this.nodes.forEach(bve),this.nodes.forEach(Cve),this.clearAllSnapshots();const s=performance.now();_s.delta=hf(0,1e3/60,s-_s.timestamp),_s.timestamp=s,_s.isProcessing=!0,QB.update.process(_s),QB.preRender.process(_s),QB.render.process(_s),_s.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Pve),this.sharedNodes.forEach(Nve)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ii(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:s,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!qY(this.projectionDelta),a=this.getTransformTemplate(),l=a?a(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;s&&(o||Hp(this.latestValues)||u)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let a=this.removeElementScroll(o);return s&&(a=this.removeTransform(a)),Gve(a),{animationId:this.root.animationId,measuredBox:o,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return ii();const o=s.measureViewportBox(),{scroll:a}=this.root;return a&&(fd(o.x,a.offset.x),fd(o.y,a.offset.y)),o}removeElementScroll(s){const o=ii();Aa(o,s);for(let a=0;a<this.path.length;a++){const l=this.path[a],{scroll:u,options:h}=l;if(l!==this.root&&u&&h.layoutScroll){if(u.isRoot){Aa(o,s);const{scroll:d}=this.root;d&&(fd(o.x,-d.offset.x),fd(o.y,-d.offset.y))}fd(o.x,u.offset.x),fd(o.y,u.offset.y)}}return o}applyTransform(s,o=!1){const a=ii();Aa(a,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Uv(a,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Hp(u.latestValues)&&Uv(a,u.latestValues)}return Hp(this.latestValues)&&Uv(a,this.latestValues),a}removeTransform(s){const o=ii();Aa(o,s);for(let a=0;a<this.path.length;a++){const l=this.path[a];if(!l.instance||!Hp(l.latestValues))continue;BD(l.latestValues)&&l.updateSnapshot();const u=ii(),h=l.measurePageBox();Aa(u,h),SV(o,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return Hp(this.latestValues)&&SV(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_s.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=_s.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ii(),this.relativeTargetOrigin=ii(),tA(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),Aa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ii(),this.targetWithTransforms=ii()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),H0e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Aa(this.target,this.layout.layoutBox),WY(this.target,this.targetDelta)):Aa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ii(),this.relativeTargetOrigin=ii(),tA(this.relativeTargetOrigin,this.target,d.target),Aa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}zp.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||BD(this.parent.latestValues)||VY(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===_s.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Aa(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;q0e(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:m}=o;if(!m){this.projectionTransform&&(this.projectionDelta=Nv(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Nv(),this.projectionDeltaWithTransform=Nv());const v=this.projectionTransform;eA(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=wV(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==d||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),zp.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(s,o=!1){const a=this.snapshot,l=a?a.latestValues:{},u={...this.latestValues},h=Nv();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=ii(),p=a?a.source:void 0,m=this.layout?this.layout.source:void 0,v=p!==m,S=this.getStack(),M=!S||S.members.length<=1,g=!!(v&&!M&&this.options.crossfade===!0&&!this.path.some(Ove));this.animationProgress=0;let _;this.mixTargetDelta=A=>{const w=A/1e3;PV(h.x,s.x,w),PV(h.y,s.y,w),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tA(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Uve(this.relativeTarget,this.relativeTargetOrigin,d,w),_&&gve(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=ii()),Aa(_,this.relativeTarget)),v&&(this.animationValues=u,uve(u,l,this.latestValues,w,g,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qn.update(()=>{Kb.hasAnimatedSinceResize=!0,this.currentAnimation=Mve(0,CV,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(CV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:a,layout:l,latestValues:u}=s;if(!(!o||!a||!l)){if(this!==s&&this.layout&&l&&$Y(this.options.animationType,this.layout.layoutBox,l.layoutBox)){a=this.target||ii();const h=Qo(this.layout.layoutBox.x);a.x.min=s.target.x.min,a.x.max=a.x.min+h;const d=Qo(this.layout.layoutBox.y);a.y.min=s.target.y.min,a.y.max=a.y.min+d}Aa(o,a),Uv(o,u),eA(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new vve),this.sharedNodes.get(s).add(o);const a=o.options.initialPromotionConfig;o.promote({transition:a?a.transition:void 0,preserveFollowOpacity:a&&a.shouldPreserveFollowOpacity?a.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:a}={}){const l=this.getStack();l&&l.promote(this,a),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:a}=s;if((a.rotate||a.rotateX||a.rotateY||a.rotateZ)&&(o=!0),!o)return;const l={};for(let u=0;u<bV.length;u++){const h="rotate"+bV[u];a[h]&&(l[h]=a[h],s.setStaticValue(h,0))}s.render();for(const u in l)s.setStaticValue(u,l[u]);s.scheduleRender()}getProjectionStyles(s){var o,a;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Eve;const l={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=Jb(s==null?void 0:s.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none",l;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Jb(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Hp(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const d=h.animationValues||h.latestValues;this.applyTransformsToTarget(),l.transform=wV(this.projectionDeltaWithTransform,this.treeScale,d),u&&(l.transform=u(d,l.transform));const{x:p,y:m}=this.projectionDelta;l.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,h.animationValues?l.opacity=h===this?(a=(o=d.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&a!==void 0?a:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in JC){if(d[v]===void 0)continue;const{correct:S,applyTo:M}=JC[v],g=l.transform==="none"?d[v]:S(d[v],h);if(M){const _=M.length;for(let A=0;A<_;A++)l[M[A]]=g}else l[v]=g}return this.options.layoutId&&(l.pointerEvents=h===this?Jb(s==null?void 0:s.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(TV),this.root.sharedNodes.clear()}}}function bve(n){n.updateLayout()}function Cve(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?ba(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=Qo(p);p.min=r[d].min,p.max=p.min+m}):$Y(s,t.layoutBox,r)&&ba(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=Qo(r[d]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+m)});const a=Nv();eA(a,r,t.layoutBox);const l=Nv();o?eA(l,n.applyTransform(i,!0),t.measuredBox):eA(l,r,t.layoutBox);const u=!qY(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const v=ii();tA(v,t.layoutBox,p.layoutBox);const S=ii();tA(S,r,m.layoutBox),QY(v,S)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=v,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Tve(n){zp.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Rve(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Pve(n){n.clearSnapshot()}function TV(n){n.clearMeasurements()}function Bve(n){n.isLayoutDirty=!1}function Lve(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function RV(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Ive(n){n.resolveTargetDelta()}function Dve(n){n.calcProjection()}function Fve(n){n.resetRotation()}function Nve(n){n.removeLeadSnapshot()}function PV(n,e,t){n.translate=_r(e.translate,0,t),n.scale=_r(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function BV(n,e,t,r){n.min=_r(e.min,t.min,r),n.max=_r(e.max,t.max,r)}function Uve(n,e,t,r){BV(n.x,e.x,t.x,r),BV(n.y,e.y,t.y,r)}function Ove(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const kve={duration:.45,ease:[.4,0,.1,1]},LV=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),IV=LV("applewebkit/")&&!LV("chrome/")?Math.round:Jr;function DV(n){n.min=IV(n.min),n.max=IV(n.max)}function Gve(n){DV(n.x),DV(n.y)}function $Y(n,e,t){return n==="position"||n==="preserve-aspect"&&!RD(EV(e),EV(t),.2)}const Hve=ZY({attachResizeListener:(n,e)=>Xu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lL={current:void 0},eq=ZY({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!lL.current){const n=new Hve({});n.mount(window),n.setOptions({layoutScroll:!0}),lL.current=n}return lL.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),zve={pan:{Feature:ive},drag:{Feature:rve,ProjectionNode:eq,MeasureLayout:JY}},Vve=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Wve(n){const e=Vve.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function ID(n,e,t=1){const[r,i]=Wve(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return NY(o)?parseFloat(o):o}else return SD(i)?ID(i,e,t+1):i}function jve(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!SD(s))return;const o=ID(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!SD(s))continue;const o=ID(s,r);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const Xve=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),tq=n=>Xve.has(n),Jve=n=>Object.keys(n).some(tq),FV=n=>n===yg||n===Gt,NV=(n,e)=>parseFloat(n.split(", ")[e]),UV=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return NV(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?NV(s[1],n):0}},Kve=new Set(["x","y","z"]),Yve=QS.filter(n=>!Kve.has(n));function qve(n){const e=[];return Yve.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const zy={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:UV(4,13),y:UV(5,14)};zy.translateX=zy.x;zy.translateY=zy.y;const Qve=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=zy[u](r,s)}),e.render();const l=e.measureViewportBox();return t.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),n[u]=zy[u](l,s)}),n},Zve=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(tq);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=n.getValue(l);if(!n.hasValue(l))return;let h=t[l],d=Z_(h);const p=e[l];let m;if(YC(p)){const v=p.length,S=p[0]===null?1:0;h=p[S],d=Z_(h);for(let M=S;M<v&&p[M]!==null;M++)m?sO(Z_(p[M])===m):m=Z_(p[M])}else m=Z_(p);if(d!==m)if(FV(d)&&FV(m)){const v=u.get();typeof v=="string"&&u.set(parseFloat(v)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===Gt&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&m!=null&&m.transform&&(h===0||p===0)?h===0?u.set(m.transform(h)):e[l]=d.transform(p):(o||(s=qve(n),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=Qve(e,n,a);return s.length&&s.forEach(([h,d])=>{n.getValue(h).set(d)}),n.render(),bR&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function $ve(n,e,t,r){return Jve(e)?Zve(n,e,t,r):{target:e,transitionEnd:r}}const eye=(n,e,t,r)=>{const i=jve(n,e,r);return e=i.target,r=i.transitionEnd,$ve(n,e,t,r)},DD={current:null},nq={current:!1};function tye(){if(nq.current=!0,!!bR)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>DD.current=n.matches;n.addListener(e),e()}else DD.current=!1}function nye(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],o=t[i];if(vo(s))n.addValue(i,s),$C(r)&&r.add(i);else if(vo(o))n.addValue(i,Hy(s,{owner:n})),$C(r)&&r.remove(i);else if(o!==s)if(n.hasValue(i)){const a=n.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,Hy(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const OV=new WeakMap,rq=Object.keys($A),rye=rq.length,kV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],iye=qU.length;class sye{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>qn.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=TR(t),this.isVariantNode=HK(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{});for(const d in h){const p=h[d];a[d]!==void 0&&vo(p)&&(p.set(a[d],!1),$C(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,OV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),nq.current||tye(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:DD.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){OV.delete(this.current),this.projection&&this.projection.unmount(),gh(this.notifyUpdate),gh(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=vg.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&qn.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let o,a;for(let l=0;l<rye;l++){const u=rq[l],{isEnabled:h,Feature:d,ProjectionNode:p,MeasureLayout:m}=$A[u];p&&(o=p),h(t)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:h,dragConstraints:d,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!h||d&&Dv(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ii()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<kV.length;r++){const i=kV[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=nye(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<iye;r++){const i=qU[r],s=this.props[i];(ZA(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Hy(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=iO(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!vo(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new pO),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class iq extends sye{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let o=S0e(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),o&&(o=i(o))),s){_0e(this,r,o);const a=eye(this,r,o,t);t=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:t,...r}}}function oye(n){return window.getComputedStyle(n)}class aye extends iq{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(vg.has(t)){const r=cO(t);return r&&r.default||0}else{const r=oye(e),i=(jK(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return jY(e,t)}build(e,t,r,i){$U(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return rO(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;vo(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){QK(e,t,r,i)}}class lye extends iq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(vg.has(t)){const r=cO(t);return r&&r.default||0}return t=ZK.has(t)?t:KU(t),e.getAttribute(t)}measureInstanceViewportBox(){return ii()}scrapeMotionValuesFromProps(e,t){return eY(e,t)}build(e,t,r,i){tO(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){$K(e,t,r,i)}mount(e){this.isSVGTag=nO(e.tagName),super.mount(e)}}const cye=(n,e)=>ZU(n)?new lye(e,{enableHardwareAcceleration:!1}):new aye(e,{enableHardwareAcceleration:!0}),uye={layout:{ProjectionNode:eq,MeasureLayout:JY}},hye={...U0e,...rge,...zve,...uye},ao=dme((n,e)=>Wme(n,e,hye,cye));function sq(){const n=we.useRef(!1);return JU(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function dye(){const n=sq(),[e,t]=we.useState(0),r=we.useCallback(()=>{n.current&&t(e+1)},[e]);return[we.useCallback(()=>qn.postRender(r),[r]),e]}class fye extends we.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pye({children:n,isPresent:e}){const t=we.useId(),r=we.useRef(null),i=we.useRef({width:0,height:0,top:0,left:0});return we.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=t;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),we.createElement(fye,{isPresent:e,childRef:r,sizeRef:i},we.cloneElement(n,{ref:r}))}const cL=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=tY(mye),l=we.useId(),u=we.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[t]);return we.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[t]),we.useEffect(()=>{!t&&!a.size&&r&&r()},[t]),o==="popLayout"&&(n=we.createElement(pye,{isPresent:t},n)),we.createElement(wR.Provider,{value:u},n)};function mye(){return new Map}function gye(n){return we.useEffect(()=>()=>n(),[])}const Vp=n=>n.key||"";function vye(n,e){n.forEach(t=>{const r=Vp(t);e.set(r,t)})}function yye(n){const e=[];return we.Children.forEach(n,t=>{we.isValidElement(t)&&e.push(t)}),e}const FD=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=we.useContext(QU).forceRender||dye()[0],l=sq(),u=yye(n);let h=u;const d=we.useRef(new Map).current,p=we.useRef(h),m=we.useRef(new Map).current,v=we.useRef(!0);if(JU(()=>{v.current=!1,vye(u,m),p.current=h}),gye(()=>{v.current=!0,m.clear(),d.clear()}),v.current)return we.createElement(we.Fragment,null,h.map(_=>we.createElement(cL,{key:Vp(_),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},_)));h=[...h];const S=p.current.map(Vp),M=u.map(Vp),g=S.length;for(let _=0;_<g;_++){const A=S[_];M.indexOf(A)===-1&&!d.has(A)&&d.set(A,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((_,A)=>{if(M.indexOf(A)!==-1)return;const w=m.get(A);if(!w)return;const C=S.indexOf(A);let R=_;if(!R){const L=()=>{d.delete(A);const I=Array.from(m.keys()).filter(T=>!M.includes(T));if(I.forEach(T=>m.delete(T)),p.current=u.filter(T=>{const B=Vp(T);return B===A||I.includes(B)}),!d.size){if(l.current===!1)return;a(),r&&r()}};R=we.createElement(cL,{key:Vp(w),isPresent:!1,onExitComplete:L,custom:e,presenceAffectsLayout:s,mode:o},w),d.set(A,R)}h.splice(C,0,R)}),h=h.map(_=>{const A=_.key;return d.has(A)?_:we.createElement(cL,{key:Vp(_),isPresent:!0,presenceAffectsLayout:s,mode:o},_)}),we.createElement(we.Fragment,null,d.size?h:h.map(_=>we.cloneElement(_)))},GV=800;function oq(n){const e=document.getElementById(n);if(!e)return;const t=e.offsetTop,r=window.scrollY,i=t-r;let s=null;function o(l,u,h,d){return l/=d/2,l<1?h/2*l*l*l+u:(l-=2,h/2*(l*l*l+2)+u)}function a(l){s||(s=l);const u=l-s,h=o(u,r,i,GV);window.scrollTo(0,h),u<GV&&requestAnimationFrame(a)}requestAnimationFrame(a)}const HV=[{id:"story",label:"ストーリー"},{id:"profile",label:"プロフィール"},{id:"content",label:"コンテンツ"},{id:"link",label:"リンク"}];function xye({onSelect:n,isFirst:e,setMenuOpen:t}){const[r,i]=we.useState(!1),s=()=>i(l=>!l);we.useEffect(()=>(document.body.style.overflow=r?"hidden":"",t==null||t(r),()=>document.body.style.overflow=""),[r,t]);const o=l=>{i(!1),n(l),oq(l)},a={hidden:{y:-80,opacity:0},visible:{y:0,opacity:1}};return mt.jsx(FD,{children:mt.jsxs(ao.header,{className:`header ${e?"full":"minimal"}`,initial:"hidden",animate:"visible",exit:"hidden",variants:a,transition:{duration:.4},children:[mt.jsx("img",{src:"/img/logo.png",alt:"logo",className:`logo ${e?"logo-large":""}`,onClick:()=>o("first")}),e&&mt.jsx("nav",{className:"nav desktop-only",children:HV.map(l=>mt.jsx("span",{className:"nav-link",onClick:()=>o(l.id),children:l.label},l.id))}),!e&&!r&&mt.jsx("div",{className:"hamburger",onClick:s,children:mt.jsx(nme,{})}),mt.jsx(FD,{children:r&&mt.jsxs(ao.div,{className:"nav-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[mt.jsx("button",{className:"overlay-close",onClick:s,children:mt.jsx(UK,{size:24})}),HV.map(l=>mt.jsx("span",{className:"overlay-link",onClick:()=>o(l.id),children:l.label},l.id))]})})]},e?"full":"minimal")})}function _ye({id:n,title:e,children:t,motion:{variants:r,transition:i}={},styles:s={}}){return mt.jsx(ao.section,{id:n,className:"section",variants:r,transition:i,initial:"hidden",animate:"visible",style:s,children:mt.jsx(t,{})})}function Aye(){return mt.jsx("div",{className:"first-content"})}const zV={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:20,duration:.4}}},Sye={hidden:{},visible:{transition:{staggerChildren:.05}}};function Mye(){const n="ストーリー",e=`ここにストーリーの内容を入力します。これはダミーテキストです。
物語ははるか昔、静かな村で始まりました。村人たちは毎朝
陽光のもとで作物を育て、家族とともに穏やかな日々を送りました。
しかしある日、空が暗く覆われ、遠くの山から恐ろしい影が現れて…

このダミーテキストは物語のサンプルとして表示しています。
必要に応じて内容を差し替えてください。`,t=r=>r.split("");return mt.jsx("div",{className:"story-content-container",children:mt.jsxs(ao.div,{className:"story-text-wrapper",variants:Sye,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.8},children:[mt.jsx("h3",{className:"story-heading",children:t(n).map((r,i)=>mt.jsx(ao.span,{variants:zV,style:{display:"inline-block"},children:r},`heading-char-${i}`))}),mt.jsx("p",{className:"story-body",children:t(e).map((r,i)=>r===`
`?mt.jsx("br",{},`body-br-${i}`):mt.jsx(ao.span,{variants:zV,style:{display:"inline-block",whiteSpace:"pre-wrap"},children:r},`body-char-${i}`))})]})})}const Eye=[{title:"スキル",content:"プログラミング、デザイン、プロジェクト管理などを行います。",color:"#EBADAD"},{title:"経歴",content:"2020年〜現在: Webエンジニアとして多様なプロジェクトに参加。",color:"#EBEBAD"},{title:"趣味",content:"写真撮影、旅行、読書を楽しんでいます。",color:"#ADEBAD"},{title:"好きな言語",content:"JavaScript, Python, Rust など。",color:"#ADEBEB"},{title:"目標",content:"フルスタックエンジニアとして活躍し、社会に貢献すること。",color:"#ADADEB"},{title:"連絡先",content:`メール: example@example.com
Twitter: @example`,color:"#EBADEB"}];function wye(){const[n,e]=we.useState(null),t=r=>{e(n===r?null:r)};return mt.jsx("div",{className:"profile-container",children:Eye.map((r,i)=>{const s=(i*60-90)*Math.PI/180,o=30,a=50+o*Math.cos(s),l=50+o*Math.sin(s),u=n===i;return mt.jsxs(ao.div,{className:"circle-panel",onClick:()=>t(i),style:{position:"absolute",backgroundColor:r.color,opacity:.8,cursor:"pointer"},animate:{left:u?"50%":`${a}%`,top:u?"50%":`${l}%`,x:"-50%",y:"-50%",width:u?400:200,height:u?400:200},transition:{type:"spring",stiffness:260,damping:20},children:[mt.jsx(ao.div,{className:"panel-title",animate:{fontSize:u?18:14},transition:{duration:.3},children:r.title}),u&&mt.jsx(ao.div,{className:"panel-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:r.content.split(`
`).map((h,d)=>h===""?mt.jsx("br",{},d):mt.jsx("p",{children:h},d))})]},i)})})}var ND={exports:{}},Zm={},UD={exports:{}},Jl={},OD={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;/*!
* Adapted from jQuery UI core
*
* http://jqueryui.com
*
* Copyright 2014 jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*
* http://api.jqueryui.com/category/ui-core/
*/var t="none",r="contents",i=/^(input|select|textarea|button|object|iframe)$/;function s(d,p){return p.getPropertyValue("overflow")!=="visible"||d.scrollWidth<=0&&d.scrollHeight<=0}function o(d){var p=d.offsetWidth<=0&&d.offsetHeight<=0;if(p&&!d.innerHTML)return!0;try{var m=window.getComputedStyle(d),v=m.getPropertyValue("display");return p?v!==r&&s(d,m):v===t}catch{return console.warn("Failed to inspect element style"),!1}}function a(d){for(var p=d,m=d.getRootNode&&d.getRootNode();p&&p!==document.body;){if(m&&p===m&&(p=m.host.parentNode),o(p))return!1;p=p.parentNode}return!0}function l(d,p){var m=d.nodeName.toLowerCase(),v=i.test(m)&&!d.disabled||m==="a"&&d.href||p;return v&&a(d)}function u(d){var p=d.getAttribute("tabindex");p===null&&(p=void 0);var m=isNaN(p);return(m||p>=0)&&l(d,!m)}function h(d){var p=[].slice.call(d.querySelectorAll("*"),0).reduce(function(m,v){return m.concat(v.shadowRoot?h(v.shadowRoot):[v])},[]);return p.filter(u)}n.exports=e.default})(OD,OD.exports);var aq=OD.exports;Object.defineProperty(Jl,"__esModule",{value:!0});Jl.resetState=Rye;Jl.log=Pye;Jl.handleBlur=tS;Jl.handleFocus=nS;Jl.markForFocusLater=Bye;Jl.returnFocus=Lye;Jl.popWithoutFocus=Iye;Jl.setupScopedFocus=Dye;Jl.teardownScopedFocus=Fye;var bye=aq,Cye=Tye(bye);function Tye(n){return n&&n.__esModule?n:{default:n}}var Vy=[],Ov=null,kD=!1;function Rye(){Vy=[]}function Pye(){}function tS(){kD=!0}function nS(){if(kD){if(kD=!1,!Ov)return;setTimeout(function(){if(!Ov.contains(document.activeElement)){var n=(0,Cye.default)(Ov)[0]||Ov;n.focus()}},0)}}function Bye(){Vy.push(document.activeElement)}function Lye(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{Vy.length!==0&&(e=Vy.pop(),e.focus({preventScroll:n}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function Iye(){Vy.length>0&&Vy.pop()}function Dye(n){Ov=n,window.addEventListener?(window.addEventListener("blur",tS,!1),document.addEventListener("focus",nS,!0)):(window.attachEvent("onBlur",tS),document.attachEvent("onFocus",nS))}function Fye(){Ov=null,window.addEventListener?(window.removeEventListener("blur",tS),document.removeEventListener("focus",nS)):(window.detachEvent("onBlur",tS),document.detachEvent("onFocus",nS))}var GD={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=aq,r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return a.activeElement.shadowRoot?s(a.activeElement.shadowRoot):a.activeElement}function o(a,l){var u=(0,r.default)(a);if(!u.length){l.preventDefault();return}var h=void 0,d=l.shiftKey,p=u[0],m=u[u.length-1],v=s();if(a===v){if(!d)return;h=m}if(m===v&&!d&&(h=p),p===v&&d&&(h=m),h){l.preventDefault(),h.focus();return}var S=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),M=S!=null&&S[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(M){var g=u.indexOf(v);if(g>-1&&(g+=d?-1:1),h=u[g],typeof h>"u"){l.preventDefault(),h=d?m:p,h.focus();return}l.preventDefault(),h.focus()}}n.exports=e.default})(GD,GD.exports);var Nye=GD.exports,Kl={},Uye=function(){},Oye=Uye,Bl={},lq={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(n){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),t={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};n.exports?n.exports=t:window.ExecutionEnvironment=t})()})(lq);var kye=lq.exports;Object.defineProperty(Bl,"__esModule",{value:!0});Bl.canUseDOM=Bl.SafeNodeList=Bl.SafeHTMLCollection=void 0;var Gye=kye,Hye=zye(Gye);function zye(n){return n&&n.__esModule?n:{default:n}}var LR=Hye.default,Vye=LR.canUseDOM?window.HTMLElement:{};Bl.SafeHTMLCollection=LR.canUseDOM?window.HTMLCollection:{};Bl.SafeNodeList=LR.canUseDOM?window.NodeList:{};Bl.canUseDOM=LR.canUseDOM;Bl.default=Vye;Object.defineProperty(Kl,"__esModule",{value:!0});Kl.resetState=Kye;Kl.log=Yye;Kl.assertNodeList=cq;Kl.setElement=qye;Kl.validateElement=mO;Kl.hide=Qye;Kl.show=Zye;Kl.documentNotReadyOrSSRTesting=$ye;var Wye=Oye,jye=Jye(Wye),Xye=Bl;function Jye(n){return n&&n.__esModule?n:{default:n}}var La=null;function Kye(){La&&(La.removeAttribute?La.removeAttribute("aria-hidden"):La.length!=null?La.forEach(function(n){return n.removeAttribute("aria-hidden")}):document.querySelectorAll(La).forEach(function(n){return n.removeAttribute("aria-hidden")})),La=null}function Yye(){}function cq(n,e){if(!n||!n.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function qye(n){var e=n;if(typeof e=="string"&&Xye.canUseDOM){var t=document.querySelectorAll(e);cq(t,e),e=t}return La=e||La,La}function mO(n){var e=n||La;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,jye.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function Qye(n){var e=!0,t=!1,r=void 0;try{for(var i=mO(n)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.setAttribute("aria-hidden","true")}}catch(a){t=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}function Zye(n){var e=!0,t=!1,r=void 0;try{for(var i=mO(n)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.removeAttribute("aria-hidden")}}catch(a){t=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}function $ye(){La=null}var px={};Object.defineProperty(px,"__esModule",{value:!0});px.resetState=exe;px.log=txe;var nA={},rA={};function VV(n,e){n.classList.remove(e)}function exe(){var n=document.getElementsByTagName("html")[0];for(var e in nA)VV(n,nA[e]);var t=document.body;for(var r in rA)VV(t,rA[r]);nA={},rA={}}function txe(){}var nxe=function(n,e){return n[e]||(n[e]=0),n[e]+=1,e},rxe=function(n,e){return n[e]&&(n[e]-=1),e},ixe=function(n,e,t){t.forEach(function(r){nxe(e,r),n.add(r)})},sxe=function(n,e,t){t.forEach(function(r){rxe(e,r),e[r]===0&&n.remove(r)})};px.add=function(n,e){return ixe(n.classList,n.nodeName.toLowerCase()=="html"?nA:rA,e.split(" "))};px.remove=function(n,e){return sxe(n.classList,n.nodeName.toLowerCase()=="html"?nA:rA,e.split(" "))};var mx={};Object.defineProperty(mx,"__esModule",{value:!0});mx.log=axe;mx.resetState=lxe;function oxe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var uq=function n(){var e=this;oxe(this,n),this.register=function(t){e.openInstances.indexOf(t)===-1&&(e.openInstances.push(t),e.emit("register"))},this.deregister=function(t){var r=e.openInstances.indexOf(t);r!==-1&&(e.openInstances.splice(r,1),e.emit("deregister"))},this.subscribe=function(t){e.subscribers.push(t)},this.emit=function(t){e.subscribers.forEach(function(r){return r(t,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},tT=new uq;function axe(){console.log("portalOpenInstances ----------"),console.log(tT.openInstances.length),tT.openInstances.forEach(function(n){return console.log(n)}),console.log("end portalOpenInstances ----------")}function lxe(){tT=new uq}mx.default=tT;var gO={};Object.defineProperty(gO,"__esModule",{value:!0});gO.resetState=dxe;gO.log=fxe;var cxe=mx,uxe=hxe(cxe);function hxe(n){return n&&n.__esModule?n:{default:n}}var ys=void 0,gl=void 0,Bm=[];function dxe(){for(var n=[ys,gl],e=0;e<n.length;e++){var t=n[e];t&&t.parentNode&&t.parentNode.removeChild(t)}ys=gl=null,Bm=[]}function fxe(){console.log("bodyTrap ----------"),console.log(Bm.length);for(var n=[ys,gl],e=0;e<n.length;e++){var t=n[e],r=t||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function WV(){Bm.length!==0&&Bm[Bm.length-1].focusContent()}function pxe(n,e){!ys&&!gl&&(ys=document.createElement("div"),ys.setAttribute("data-react-modal-body-trap",""),ys.style.position="absolute",ys.style.opacity="0",ys.setAttribute("tabindex","0"),ys.addEventListener("focus",WV),gl=ys.cloneNode(),gl.addEventListener("focus",WV)),Bm=e,Bm.length>0?(document.body.firstChild!==ys&&document.body.insertBefore(ys,document.body.firstChild),document.body.lastChild!==gl&&document.body.appendChild(gl)):(ys.parentElement&&ys.parentElement.removeChild(ys),gl.parentElement&&gl.parentElement.removeChild(gl))}uxe.default.subscribe(pxe);(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(z){for(var X=1;X<arguments.length;X++){var te=arguments[X];for(var O in te)Object.prototype.hasOwnProperty.call(te,O)&&(z[O]=te[O])}return z},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},i=function(){function z(X,te){for(var O=0;O<te.length;O++){var D=te[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(X,D.key,D)}}return function(X,te,O){return te&&z(X.prototype,te),O&&z(X,O),X}}(),s=we,o=IK,a=C(o),l=Jl,u=w(l),h=Nye,d=C(h),p=Kl,m=w(p),v=px,S=w(v),M=Bl,g=C(M),_=mx,A=C(_);function w(z){if(z&&z.__esModule)return z;var X={};if(z!=null)for(var te in z)Object.prototype.hasOwnProperty.call(z,te)&&(X[te]=z[te]);return X.default=z,X}function C(z){return z&&z.__esModule?z:{default:z}}function R(z,X){if(!(z instanceof X))throw new TypeError("Cannot call a class as a function")}function L(z,X){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:z}function I(z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);z.prototype=Object.create(X&&X.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(z,X):z.__proto__=X)}var T={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},B=function(z){return z.code==="Tab"||z.keyCode===9},H=function(z){return z.code==="Escape"||z.keyCode===27},K=0,j=function(z){I(X,z);function X(te){R(this,X);var O=L(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,te));return O.setOverlayRef=function(D){O.overlay=D,O.props.overlayRef&&O.props.overlayRef(D)},O.setContentRef=function(D){O.content=D,O.props.contentRef&&O.props.contentRef(D)},O.afterClose=function(){var D=O.props,V=D.appElement,G=D.ariaHideApp,q=D.htmlOpenClassName,re=D.bodyOpenClassName,Y=D.parentSelector,ae=Y&&Y().ownerDocument||document;re&&S.remove(ae.body,re),q&&S.remove(ae.getElementsByTagName("html")[0],q),G&&K>0&&(K-=1,K===0&&m.show(V)),O.props.shouldFocusAfterRender&&(O.props.shouldReturnFocusAfterClose?(u.returnFocus(O.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),O.props.onAfterClose&&O.props.onAfterClose(),A.default.deregister(O)},O.open=function(){O.beforeOpen(),O.state.afterOpen&&O.state.beforeClose?(clearTimeout(O.closeTimer),O.setState({beforeClose:!1})):(O.props.shouldFocusAfterRender&&(u.setupScopedFocus(O.node),u.markForFocusLater()),O.setState({isOpen:!0},function(){O.openAnimationFrame=requestAnimationFrame(function(){O.setState({afterOpen:!0}),O.props.isOpen&&O.props.onAfterOpen&&O.props.onAfterOpen({overlayEl:O.overlay,contentEl:O.content})})}))},O.close=function(){O.props.closeTimeoutMS>0?O.closeWithTimeout():O.closeWithoutTimeout()},O.focusContent=function(){return O.content&&!O.contentHasFocus()&&O.content.focus({preventScroll:!0})},O.closeWithTimeout=function(){var D=Date.now()+O.props.closeTimeoutMS;O.setState({beforeClose:!0,closesAt:D},function(){O.closeTimer=setTimeout(O.closeWithoutTimeout,O.state.closesAt-Date.now())})},O.closeWithoutTimeout=function(){O.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},O.afterClose)},O.handleKeyDown=function(D){B(D)&&(0,d.default)(O.content,D),O.props.shouldCloseOnEsc&&H(D)&&(D.stopPropagation(),O.requestClose(D))},O.handleOverlayOnClick=function(D){O.shouldClose===null&&(O.shouldClose=!0),O.shouldClose&&O.props.shouldCloseOnOverlayClick&&(O.ownerHandlesClose()?O.requestClose(D):O.focusContent()),O.shouldClose=null},O.handleContentOnMouseUp=function(){O.shouldClose=!1},O.handleOverlayOnMouseDown=function(D){!O.props.shouldCloseOnOverlayClick&&D.target==O.overlay&&D.preventDefault()},O.handleContentOnClick=function(){O.shouldClose=!1},O.handleContentOnMouseDown=function(){O.shouldClose=!1},O.requestClose=function(D){return O.ownerHandlesClose()&&O.props.onRequestClose(D)},O.ownerHandlesClose=function(){return O.props.onRequestClose},O.shouldBeClosed=function(){return!O.state.isOpen&&!O.state.beforeClose},O.contentHasFocus=function(){return document.activeElement===O.content||O.content.contains(document.activeElement)},O.buildClassName=function(D,V){var G=(typeof V>"u"?"undefined":r(V))==="object"?V:{base:T[D],afterOpen:T[D]+"--after-open",beforeClose:T[D]+"--before-close"},q=G.base;return O.state.afterOpen&&(q=q+" "+G.afterOpen),O.state.beforeClose&&(q=q+" "+G.beforeClose),typeof V=="string"&&V?q+" "+V:q},O.attributesFromObject=function(D,V){return Object.keys(V).reduce(function(G,q){return G[D+"-"+q]=V[q],G},{})},O.state={afterOpen:!1,beforeClose:!1},O.shouldClose=null,O.moveFromContentToOverlay=null,O}return i(X,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(te,O){this.props.isOpen&&!te.isOpen?this.open():!this.props.isOpen&&te.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!O.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var te=this.props,O=te.appElement,D=te.ariaHideApp,V=te.htmlOpenClassName,G=te.bodyOpenClassName,q=te.parentSelector,re=q&&q().ownerDocument||document;G&&S.add(re.body,G),V&&S.add(re.getElementsByTagName("html")[0],V),D&&(K+=1,m.hide(O)),A.default.register(this)}},{key:"render",value:function(){var te=this.props,O=te.id,D=te.className,V=te.overlayClassName,G=te.defaultStyles,q=te.children,re=D?{}:G.content,Y=V?{}:G.overlay;if(this.shouldBeClosed())return null;var ae={ref:this.setOverlayRef,className:this.buildClassName("overlay",V),style:t({},Y,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},Se=t({id:O,ref:this.setContentRef,style:t({},re,this.props.style.content),className:this.buildClassName("content",D),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",t({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),ve=this.props.contentElement(Se,q);return this.props.overlayElement(ae,ve)}}]),X}(s.Component);j.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},j.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(g.default),a.default.instanceOf(M.SafeHTMLCollection),a.default.instanceOf(M.SafeNodeList),a.default.arrayOf(a.default.instanceOf(g.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},e.default=j,n.exports=e.default})(UD,UD.exports);var mxe=UD.exports;function hq(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function dq(n){function e(t){var r=this.constructor.getDerivedStateFromProps(n,t);return r??null}this.setState(e.bind(this))}function fq(n,e){try{var t=this.props,r=this.state;this.props=n,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,r)}finally{this.props=t,this.state=r}}hq.__suppressDeprecationWarning=!0;dq.__suppressDeprecationWarning=!0;fq.__suppressDeprecationWarning=!0;function gxe(n){var e=n.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return n;var t=null,r=null,i=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),t!==null||r!==null||i!==null){var s=n.displayName||n.name,o=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(e.componentWillMount=hq,e.componentWillReceiveProps=dq),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=fq;var a=e.componentDidUpdate;e.componentDidUpdate=function(l,u,h){var d=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;a.call(this,l,u,d)}}return n}const vxe=Object.freeze(Object.defineProperty({__proto__:null,polyfill:gxe},Symbol.toStringTag,{value:"Module"})),yxe=One(vxe);Object.defineProperty(Zm,"__esModule",{value:!0});Zm.bodyOpenClassName=Zm.portalClassName=void 0;var jV=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},xxe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),pq=we,nT=tM(pq),_xe=LX,rT=tM(_xe),Axe=IK,Xt=tM(Axe),Sxe=mxe,XV=tM(Sxe),Mxe=Kl,Exe=bxe(Mxe),wd=Bl,JV=tM(wd),wxe=yxe;function bxe(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function tM(n){return n&&n.__esModule?n:{default:n}}function Cxe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function KV(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Txe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var Rxe=Zm.portalClassName="ReactModalPortal",Pxe=Zm.bodyOpenClassName="ReactModal__Body--open",Wp=wd.canUseDOM&&rT.default.createPortal!==void 0,YV=function(n){return document.createElement(n)},qV=function(){return Wp?rT.default.createPortal:rT.default.unstable_renderSubtreeIntoContainer};function hw(n){return n()}var nM=function(n){Txe(e,n);function e(){var t,r,i,s;Cxe(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=KV(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.removePortal=function(){!Wp&&rT.default.unmountComponentAtNode(i.node);var u=hw(i.props.parentSelector);u&&u.contains(i.node)?u.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(u){i.portal=u},i.renderPortal=function(u){var h=qV(),d=h(i,nT.default.createElement(XV.default,jV({defaultStyles:e.defaultStyles},u)),i.node);i.portalRef(d)},r),KV(i,s)}return xxe(e,[{key:"componentDidMount",value:function(){if(wd.canUseDOM){Wp||(this.node=YV("div")),this.node.className=this.props.portalClassName;var t=hw(this.props.parentSelector);t.appendChild(this.node),!Wp&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(t){var r=hw(t.parentSelector),i=hw(this.props.parentSelector);return{prevParent:r,nextParent:i}}},{key:"componentDidUpdate",value:function(t,r,i){if(wd.canUseDOM){var s=this.props,o=s.isOpen,a=s.portalClassName;t.portalClassName!==a&&(this.node.className=a);var l=i.prevParent,u=i.nextParent;u!==l&&(l.removeChild(this.node),u.appendChild(this.node)),!(!t.isOpen&&!o)&&!Wp&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!wd.canUseDOM||!this.node||!this.portal)){var t=this.portal.state,r=Date.now(),i=t.isOpen&&this.props.closeTimeoutMS&&(t.closesAt||r+this.props.closeTimeoutMS);i?(t.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,i-r)):this.removePortal()}}},{key:"render",value:function(){if(!wd.canUseDOM||!Wp)return null;!this.node&&Wp&&(this.node=YV("div"));var t=qV();return t(nT.default.createElement(XV.default,jV({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(t){Exe.setElement(t)}}]),e}(pq.Component);nM.propTypes={isOpen:Xt.default.bool.isRequired,style:Xt.default.shape({content:Xt.default.object,overlay:Xt.default.object}),portalClassName:Xt.default.string,bodyOpenClassName:Xt.default.string,htmlOpenClassName:Xt.default.string,className:Xt.default.oneOfType([Xt.default.string,Xt.default.shape({base:Xt.default.string.isRequired,afterOpen:Xt.default.string.isRequired,beforeClose:Xt.default.string.isRequired})]),overlayClassName:Xt.default.oneOfType([Xt.default.string,Xt.default.shape({base:Xt.default.string.isRequired,afterOpen:Xt.default.string.isRequired,beforeClose:Xt.default.string.isRequired})]),appElement:Xt.default.oneOfType([Xt.default.instanceOf(JV.default),Xt.default.instanceOf(wd.SafeHTMLCollection),Xt.default.instanceOf(wd.SafeNodeList),Xt.default.arrayOf(Xt.default.instanceOf(JV.default))]),onAfterOpen:Xt.default.func,onRequestClose:Xt.default.func,closeTimeoutMS:Xt.default.number,ariaHideApp:Xt.default.bool,shouldFocusAfterRender:Xt.default.bool,shouldCloseOnOverlayClick:Xt.default.bool,shouldReturnFocusAfterClose:Xt.default.bool,preventScroll:Xt.default.bool,parentSelector:Xt.default.func,aria:Xt.default.object,data:Xt.default.object,role:Xt.default.string,contentLabel:Xt.default.string,shouldCloseOnEsc:Xt.default.bool,overlayRef:Xt.default.func,contentRef:Xt.default.func,id:Xt.default.string,overlayElement:Xt.default.func,contentElement:Xt.default.func};nM.defaultProps={isOpen:!1,portalClassName:Rxe,bodyOpenClassName:Pxe,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(n,e){return nT.default.createElement("div",n,e)},contentElement:function(n,e){return nT.default.createElement("div",n,e)}};nM.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,wxe.polyfill)(nM);Zm.default=nM;(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Zm,r=i(t);function i(s){return s&&s.__esModule?s:{default:s}}e.default=r.default,n.exports=e.default})(ND,ND.exports);var Bxe=ND.exports;const Lxe=z3(Bxe);Lxe.setAppElement("#root");const Ixe=[];function Dxe(){const[n,e]=we.useState(!1),[t,r]=we.useState(""),i=we.useRef(null);function s(d){r(d),e(!0)}function o(){i.current&&(i.current.pause(),i.current.currentTime=0),e(!1),r("")}const a={hidden:{},visible:{transition:{staggerChildren:.1}}},l={hidden:{opacity:0,rotateY:90,transformOrigin:"center"},visible:{opacity:1,rotateY:0,transformOrigin:"center",transition:{duration:.5,ease:"easeOut"}}},u={hidden:{opacity:0},visible:{opacity:1}},h={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}};return mt.jsxs(mt.Fragment,{children:[mt.jsx("div",{className:"content-section-wrapper",children:mt.jsx(ao.div,{className:"video-grid",variants:a,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.3},children:Ixe.map((d,p)=>mt.jsx(ao.div,{className:"video-thumb",onClick:()=>s(d.videoUrl),variants:l,whileHover:{scale:1.05},children:mt.jsx("img",{src:d.thumbnail,alt:`thumb-${p}`,style:{width:"100%",height:"100%",objectFit:"cover"}})},p))})}),mt.jsx(FD,{children:n&&mt.jsx(ao.div,{className:"video-overlay",variants:u,initial:"hidden",animate:"visible",exit:"hidden",onClick:o,children:mt.jsxs(ao.div,{className:"video-modal",variants:h,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},onClick:d=>d.stopPropagation(),children:[mt.jsx("button",{className:"modal-close-btn",onClick:o,children:mt.jsx(UK,{})}),mt.jsx("video",{ref:i,src:t,controls:!0,className:"modal-video"})]})})})]})}function Fxe(){const n=[{icon:"/img/icons/x_icon.png",url:"https://github.com/your-username",qr:"/img/icons/x_qr.png",alt:"X",buttonText:"X",buttonIcon:"/img/icons/link_icon.png"},{icon:"/img/icons/instagram_icon.png",url:"https://twitter.com/your-username",qr:"/img/icons/instagram_qr.png",alt:"Instagram",buttonText:"Instagram",buttonIcon:"/img/icons/link_icon.png"},{icon:"/img/icons/line_stamp.png",url:"https://www.linkedin.com/in/your-username",qr:"/img/icons/stamp_qr.png",alt:"LINEスタンプ",buttonText:"LINEスタンプ",buttonIcon:"/img/icons/link_icon.png"}],[e,t]=we.useState(n.map(()=>({flipped:!1,showButton:!1}))),r=a=>{t(l=>l.map((u,h)=>h===a?{flipped:!0,showButton:!0}:u))},i=a=>{t(l=>l.map((u,h)=>h===a?{flipped:!1,showButton:!1}:u))},s=a=>{window.open(a,"_blank","noopener,noreferrer")},o={y:-10,transition:{type:"spring",stiffness:300,damping:20}};return mt.jsx("div",{className:"link-section-wrapper",children:n.map((a,l)=>{const{flipped:u,showButton:h}=e[l];return mt.jsxs("div",{className:"link-item",children:[mt.jsxs(ao.div,{className:"card-container",animate:{rotateY:u?180:0},transition:{duration:.6,ease:"easeInOut"},whileHover:o,children:[mt.jsx("div",{className:"card-face card-front",onClick:()=>r(l),children:mt.jsx("img",{src:a.icon,alt:a.alt})}),mt.jsx("div",{className:"card-face card-back",onClick:()=>i(l),children:mt.jsx("img",{src:a.qr,alt:`${a.alt} QR`})})]}),h&&mt.jsxs("button",{className:"access-button",onClick:()=>s(a.url),children:[mt.jsx("span",{className:"button-text",children:a.buttonText}),mt.jsx("img",{className:"button-icon",src:a.buttonIcon,alt:"外部リンク"})]})]},l)})})}const uL=[{id:"first",title:"ファーストビュー",component:Aye,motion:{},styles:{},camera:"camera1"},{id:"story",title:"ストーリー",component:Mye,motion:{},camera:"camera2"},{id:"profile",title:"プロフィール",component:wye,motion:{},camera:"camera3"},{id:"content",title:"コンテンツ",component:Dxe,motion:{},camera:"camera4"},{id:"link",title:"リンク",component:Fxe,motion:{},camera:"camera5"}],Nxe="/model.glb";function Uxe({activeCamera:n}){const{camera:e,scene:t,gl:r,size:i}=Nfe(),s=we.useRef(),o=we.useRef({}),a=we.useRef(new se),l=we.useRef(new ns),u=MR(Nxe);return we.useEffect(()=>{r.toneMapping=kN,r.outputEncoding=eh,r.toneMappingExposure=1.5},[r,t]),we.useEffect(()=>{e.setFocalLength(50),e.updateProjectionMatrix(),t.add(u.scene),s.current=new eK(u.scene),u.animations.forEach(d=>{s.current.clipAction(d).play().setLoop(zN)}),u.cameras.forEach(d=>{o.current[d.name]=d});const h=o.current[n];return h&&(e.position.copy(h.position),e.quaternion.copy(h.quaternion),a.current.copy(h.position),l.current.copy(h.quaternion)),u.scene.traverse(d=>{if(d.isMesh){const p=d.material,m=p.map||null,v=new RU({color:p.color||new vt(16777215),map:m});v.envMapIntensity=10,d.material=v}}),()=>{var d;(d=s.current)==null||d.stopAllAction(),s.current=null}},[u,e,t]),we.useEffect(()=>{const h=o.current[n];h&&(a.current.copy(h.position),l.current.copy(h.quaternion))},[n]),Ufe((h,d)=>{var p;(p=s.current)==null||p.update(d),e.aspect=i.width/i.height,e.updateProjectionMatrix(),e.position.lerp(a.current,.05),e.quaternion.slerp(l.current,.05),r.render(t,e)}),null}const QV=[{id:"first",camera:"camera1",title:"ファーストビュー",dummy:"ここはファーストビュー用のテキストです。"},{id:"story",camera:"camera2",title:"ストーリー",dummy:`ここはストーリー用の説明文を入れます。
改行も可能です。`},{id:"profile",camera:"camera3",title:"プロフィール",dummy:"プロフィールのダミー情報です。"},{id:"content",camera:"camera4",title:"コンテンツ",dummy:""},{id:"link",camera:"camera5",title:"リンク",dummy:"こちらはリンクセクションのテキストです。"}];function Oxe(){const[n,e]=we.useState(0),[t,r]=we.useState(!1),i=we.useRef(!1),s=we.useCallback(o=>{i.current||(o.deltaY>50&&n<QV.length-1?(i.current=!0,e(a=>a+1)):o.deltaY<-50&&n>0&&(i.current=!0,e(a=>a-1)))},[n]);return we.useEffect(()=>{oq(QV[n].id);const o=setTimeout(()=>i.current=!1,1e3);return()=>clearTimeout(o)},[n]),mt.jsxs(mt.Fragment,{children:[mt.jsx(xye,{onSelect:o=>e(uL.findIndex(a=>a.id===o)),isFirst:n===0,setMenuOpen:r}),mt.jsx("div",{className:"canvas-container",children:mt.jsxs(ipe,{camera:{fov:38.6,near:.1,far:1e3},children:[mt.jsx("ambientLight",{intensity:.3}),mt.jsx("directionalLight",{intensity:.5,position:[25,40,50]}),mt.jsx(we.Suspense,{fallback:null,children:mt.jsx(Uxe,{activeCamera:uL[n].camera})})]})}),mt.jsx(hpe,{containerStyles:{backgroundColor:"#000",height:"5px"},innerStyles:{backgroundColor:"#fff"},dataStyles:{color:"#fff",fontSize:"0.8rem"},dataInterpolation:o=>`${o.toFixed(0)}%`}),mt.jsx("div",{className:`sections-container${t?" disabled":""}`,onWheel:s,children:uL.map(({id:o,title:a,component:l,motion:u,styles:h})=>mt.jsx(_ye,{id:o,title:a,motion:u,styles:h,children:l},o))}),mt.jsx("img",{src:"/img/return.png",alt:"return",className:"return-button",onClick:()=>e(0)})]})}H2.createRoot(document.getElementById("root")).render(mt.jsx(Ga.StrictMode,{children:mt.jsx(Oxe,{})}));function vO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function kxe(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var mq={exports:{}},IR={},gq={exports:{}},gn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM=Symbol.for("react.element"),Gxe=Symbol.for("react.portal"),Hxe=Symbol.for("react.fragment"),zxe=Symbol.for("react.strict_mode"),Vxe=Symbol.for("react.profiler"),Wxe=Symbol.for("react.provider"),jxe=Symbol.for("react.context"),Xxe=Symbol.for("react.forward_ref"),Jxe=Symbol.for("react.suspense"),Kxe=Symbol.for("react.memo"),Yxe=Symbol.for("react.lazy"),ZV=Symbol.iterator;function qxe(n){return n===null||typeof n!="object"?null:(n=ZV&&n[ZV]||n["@@iterator"],typeof n=="function"?n:null)}var vq={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yq=Object.assign,xq={};function gx(n,e,t){this.props=n,this.context=e,this.refs=xq,this.updater=t||vq}gx.prototype.isReactComponent={};gx.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};gx.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function _q(){}_q.prototype=gx.prototype;function yO(n,e,t){this.props=n,this.context=e,this.refs=xq,this.updater=t||vq}var xO=yO.prototype=new _q;xO.constructor=yO;yq(xO,gx.prototype);xO.isPureReactComponent=!0;var $V=Array.isArray,Aq=Object.prototype.hasOwnProperty,_O={current:null},Sq={key:!0,ref:!0,__self:!0,__source:!0};function Mq(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Aq.call(e,r)&&!Sq.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:rM,type:n,key:s,ref:o,props:i,_owner:_O.current}}function Qxe(n,e){return{$$typeof:rM,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function AO(n){return typeof n=="object"&&n!==null&&n.$$typeof===rM}function Zxe(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var e9=/\/+/g;function hL(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Zxe(""+n.key):e.toString(36)}function Yb(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case rM:case Gxe:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+hL(o,0):r,$V(i)?(t="",n!=null&&(t=n.replace(e9,"$&/")+"/"),Yb(i,e,t,"",function(u){return u})):i!=null&&(AO(i)&&(i=Qxe(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(e9,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",$V(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+hL(s,a);o+=Yb(s,e,t,l,i)}else if(l=qxe(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+hL(s,a++),o+=Yb(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dw(n,e,t){if(n==null)return n;var r=[],i=0;return Yb(n,r,"","",function(s){return e.call(t,s,i++)}),r}function $xe(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var js={current:null},qb={transition:null},e_e={ReactCurrentDispatcher:js,ReactCurrentBatchConfig:qb,ReactCurrentOwner:_O};function Eq(){throw Error("act(...) is not supported in production builds of React.")}gn.Children={map:dw,forEach:function(n,e,t){dw(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return dw(n,function(){e++}),e},toArray:function(n){return dw(n,function(e){return e})||[]},only:function(n){if(!AO(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};gn.Component=gx;gn.Fragment=Hxe;gn.Profiler=Vxe;gn.PureComponent=yO;gn.StrictMode=zxe;gn.Suspense=Jxe;gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e_e;gn.act=Eq;gn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=yq({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=_O.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)Aq.call(e,l)&&!Sq.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:rM,type:n.type,key:i,ref:s,props:r,_owner:o}};gn.createContext=function(n){return n={$$typeof:jxe,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Wxe,_context:n},n.Consumer=n};gn.createElement=Mq;gn.createFactory=function(n){var e=Mq.bind(null,n);return e.type=n,e};gn.createRef=function(){return{current:null}};gn.forwardRef=function(n){return{$$typeof:Xxe,render:n}};gn.isValidElement=AO;gn.lazy=function(n){return{$$typeof:Yxe,_payload:{_status:-1,_result:n},_init:$xe}};gn.memo=function(n,e){return{$$typeof:Kxe,type:n,compare:e===void 0?null:e}};gn.startTransition=function(n){var e=qb.transition;qb.transition={};try{n()}finally{qb.transition=e}};gn.unstable_act=Eq;gn.useCallback=function(n,e){return js.current.useCallback(n,e)};gn.useContext=function(n){return js.current.useContext(n)};gn.useDebugValue=function(){};gn.useDeferredValue=function(n){return js.current.useDeferredValue(n)};gn.useEffect=function(n,e){return js.current.useEffect(n,e)};gn.useId=function(){return js.current.useId()};gn.useImperativeHandle=function(n,e,t){return js.current.useImperativeHandle(n,e,t)};gn.useInsertionEffect=function(n,e){return js.current.useInsertionEffect(n,e)};gn.useLayoutEffect=function(n,e){return js.current.useLayoutEffect(n,e)};gn.useMemo=function(n,e){return js.current.useMemo(n,e)};gn.useReducer=function(n,e,t){return js.current.useReducer(n,e,t)};gn.useRef=function(n){return js.current.useRef(n)};gn.useState=function(n){return js.current.useState(n)};gn.useSyncExternalStore=function(n,e,t){return js.current.useSyncExternalStore(n,e,t)};gn.useTransition=function(){return js.current.useTransition()};gn.version="18.3.1";gq.exports=gn;var be=gq.exports;const za=vO(be);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_e=be,n_e=Symbol.for("react.element"),r_e=Symbol.for("react.fragment"),i_e=Object.prototype.hasOwnProperty,s_e=t_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o_e={key:!0,ref:!0,__self:!0,__source:!0};function wq(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)i_e.call(e,r)&&!o_e.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:n_e,type:n,key:s,ref:o,props:i,_owner:s_e.current}}IR.Fragment=r_e;IR.jsx=wq;IR.jsxs=wq;mq.exports=IR;var gt=mq.exports,HD={},bq={exports:{}},ra={},Cq={exports:{}},Tq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,V){var G=D.length;D.push(V);e:for(;0<G;){var q=G-1>>>1,re=D[q];if(0<i(re,V))D[q]=V,D[G]=re,G=q;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var V=D[0],G=D.pop();if(G!==V){D[0]=G;e:for(var q=0,re=D.length,Y=re>>>1;q<Y;){var ae=2*(q+1)-1,Se=D[ae],ve=ae+1,W=D[ve];if(0>i(Se,G))ve<re&&0>i(W,Se)?(D[q]=W,D[ve]=G,q=ve):(D[q]=Se,D[ae]=G,q=ae);else if(ve<re&&0>i(W,G))D[q]=W,D[ve]=G,q=ve;else break e}}return V}function i(D,V){var G=D.sortIndex-V.sortIndex;return G!==0?G:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,v=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(D){for(var V=t(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=D)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(u)}}function w(D){if(S=!1,A(D),!v)if(t(l)!==null)v=!0,te(C);else{var V=t(u);V!==null&&O(w,V.startTime-D)}}function C(D,V){v=!1,S&&(S=!1,g(I),I=-1),m=!0;var G=p;try{for(A(V),d=t(l);d!==null&&(!(d.expirationTime>V)||D&&!H());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var re=q(d.expirationTime<=V);V=n.unstable_now(),typeof re=="function"?d.callback=re:d===t(l)&&r(l),A(V)}else r(l);d=t(l)}if(d!==null)var Y=!0;else{var ae=t(u);ae!==null&&O(w,ae.startTime-V),Y=!1}return Y}finally{d=null,p=G,m=!1}}var R=!1,L=null,I=-1,T=5,B=-1;function H(){return!(n.unstable_now()-B<T)}function K(){if(L!==null){var D=n.unstable_now();B=D;var V=!0;try{V=L(!0,D)}finally{V?j():(R=!1,L=null)}}else R=!1}var j;if(typeof _=="function")j=function(){_(K)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,X=z.port2;z.port1.onmessage=K,j=function(){X.postMessage(null)}}else j=function(){M(K,0)};function te(D){L=D,R||(R=!0,j())}function O(D,V){I=M(function(){D(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,te(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var G=p;p=V;try{return D()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=p;p=D;try{return V()}finally{p=G}},n.unstable_scheduleCallback=function(D,V,G){var q=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,D){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,D={id:h++,callback:V,priorityLevel:D,startTime:G,expirationTime:re,sortIndex:-1},G>q?(D.sortIndex=G,e(u,D),t(l)===null&&D===t(u)&&(S?(g(I),I=-1):S=!0,O(w,G-q))):(D.sortIndex=re,e(l,D),v||m||(v=!0,te(C))),D},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(D){var V=p;return function(){var G=p;p=V;try{return D.apply(this,arguments)}finally{p=G}}}})(Tq);Cq.exports=Tq;var a_e=Cq.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_e=be,Zo=a_e;function tt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rq=new Set,rS={};function xg(n,e){Wy(n,e),Wy(n+"Capture",e)}function Wy(n,e){for(rS[n]=e,n=0;n<e.length;n++)Rq.add(e[n])}var vh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zD=Object.prototype.hasOwnProperty,c_e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t9={},n9={};function u_e(n){return zD.call(n9,n)?!0:zD.call(t9,n)?!1:c_e.test(n)?n9[n]=!0:(t9[n]=!0,!1)}function h_e(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function d_e(n,e,t,r){if(e===null||typeof e>"u"||h_e(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xs(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var os={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){os[n]=new Xs(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];os[e]=new Xs(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){os[n]=new Xs(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){os[n]=new Xs(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){os[n]=new Xs(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){os[n]=new Xs(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){os[n]=new Xs(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){os[n]=new Xs(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){os[n]=new Xs(n,5,!1,n.toLowerCase(),null,!1,!1)});var SO=/[\-:]([a-z])/g;function MO(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(SO,MO);os[e]=new Xs(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(SO,MO);os[e]=new Xs(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(SO,MO);os[e]=new Xs(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){os[n]=new Xs(n,1,!1,n.toLowerCase(),null,!1,!1)});os.xlinkHref=new Xs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){os[n]=new Xs(n,1,!1,n.toLowerCase(),null,!0,!0)});function EO(n,e,t,r){var i=os.hasOwnProperty(e)?os[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(d_e(e,t,i,r)&&(t=null),r||i===null?u_e(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ch=l_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fw=Symbol.for("react.element"),kv=Symbol.for("react.portal"),Gv=Symbol.for("react.fragment"),wO=Symbol.for("react.strict_mode"),VD=Symbol.for("react.profiler"),Pq=Symbol.for("react.provider"),Bq=Symbol.for("react.context"),bO=Symbol.for("react.forward_ref"),WD=Symbol.for("react.suspense"),jD=Symbol.for("react.suspense_list"),CO=Symbol.for("react.memo"),pd=Symbol.for("react.lazy"),Lq=Symbol.for("react.offscreen"),r9=Symbol.iterator;function e1(n){return n===null||typeof n!="object"?null:(n=r9&&n[r9]||n["@@iterator"],typeof n=="function"?n:null)}var Tr=Object.assign,dL;function B1(n){if(dL===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);dL=e&&e[1]||""}return`
`+dL+n}var fL=!1;function pL(n,e){if(!n||fL)return"";fL=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{fL=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?B1(n):""}function f_e(n){switch(n.tag){case 5:return B1(n.type);case 16:return B1("Lazy");case 13:return B1("Suspense");case 19:return B1("SuspenseList");case 0:case 2:case 15:return n=pL(n.type,!1),n;case 11:return n=pL(n.type.render,!1),n;case 1:return n=pL(n.type,!0),n;default:return""}}function XD(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Gv:return"Fragment";case kv:return"Portal";case VD:return"Profiler";case wO:return"StrictMode";case WD:return"Suspense";case jD:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Bq:return(n.displayName||"Context")+".Consumer";case Pq:return(n._context.displayName||"Context")+".Provider";case bO:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case CO:return e=n.displayName||null,e!==null?e:XD(n.type)||"Memo";case pd:e=n._payload,n=n._init;try{return XD(n(e))}catch{}}return null}function p_e(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return XD(e);case 8:return e===wO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ff(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Iq(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function m_e(n){var e=Iq(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function pw(n){n._valueTracker||(n._valueTracker=m_e(n))}function Dq(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=Iq(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function iT(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function JD(n,e){var t=e.checked;return Tr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function i9(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ff(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fq(n,e){e=e.checked,e!=null&&EO(n,"checked",e,!1)}function KD(n,e){Fq(n,e);var t=ff(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?YD(n,e.type,t):e.hasOwnProperty("defaultValue")&&YD(n,e.type,ff(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function s9(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function YD(n,e,t){(e!=="number"||iT(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var L1=Array.isArray;function vy(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ff(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function qD(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Tr({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function o9(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(tt(92));if(L1(t)){if(1<t.length)throw Error(tt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ff(t)}}function Nq(n,e){var t=ff(e.value),r=ff(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function a9(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Uq(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function QD(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Uq(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mw,Oq=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(mw=mw||document.createElement("div"),mw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mw.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function iS(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var iA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g_e=["Webkit","ms","Moz","O"];Object.keys(iA).forEach(function(n){g_e.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),iA[e]=iA[n]})});function kq(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||iA.hasOwnProperty(n)&&iA[n]?(""+e).trim():e+"px"}function Gq(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=kq(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var v_e=Tr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZD(n,e){if(e){if(v_e[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(tt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tt(62))}}function $D(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eF=null;function TO(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tF=null,yy=null,xy=null;function l9(n){if(n=oM(n)){if(typeof tF!="function")throw Error(tt(280));var e=n.stateNode;e&&(e=OR(e),tF(n.stateNode,n.type,e))}}function Hq(n){yy?xy?xy.push(n):xy=[n]:yy=n}function zq(){if(yy){var n=yy,e=xy;if(xy=yy=null,l9(n),e)for(n=0;n<e.length;n++)l9(e[n])}}function Vq(n,e){return n(e)}function Wq(){}var mL=!1;function jq(n,e,t){if(mL)return n(e,t);mL=!0;try{return Vq(n,e,t)}finally{mL=!1,(yy!==null||xy!==null)&&(Wq(),zq())}}function sS(n,e){var t=n.stateNode;if(t===null)return null;var r=OR(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(tt(231,e,typeof t));return t}var nF=!1;if(vh)try{var t1={};Object.defineProperty(t1,"passive",{get:function(){nF=!0}}),window.addEventListener("test",t1,t1),window.removeEventListener("test",t1,t1)}catch{nF=!1}function y_e(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var sA=!1,sT=null,oT=!1,rF=null,x_e={onError:function(n){sA=!0,sT=n}};function __e(n,e,t,r,i,s,o,a,l){sA=!1,sT=null,y_e.apply(x_e,arguments)}function A_e(n,e,t,r,i,s,o,a,l){if(__e.apply(this,arguments),sA){if(sA){var u=sT;sA=!1,sT=null}else throw Error(tt(198));oT||(oT=!0,rF=u)}}function _g(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Xq(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function c9(n){if(_g(n)!==n)throw Error(tt(188))}function S_e(n){var e=n.alternate;if(!e){if(e=_g(n),e===null)throw Error(tt(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return c9(i),n;if(s===r)return c9(i),e;s=s.sibling}throw Error(tt(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(t.alternate!==r)throw Error(tt(190))}if(t.tag!==3)throw Error(tt(188));return t.stateNode.current===t?n:e}function Jq(n){return n=S_e(n),n!==null?Kq(n):null}function Kq(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Kq(n);if(e!==null)return e;n=n.sibling}return null}var Yq=Zo.unstable_scheduleCallback,u9=Zo.unstable_cancelCallback,M_e=Zo.unstable_shouldYield,E_e=Zo.unstable_requestPaint,Xr=Zo.unstable_now,w_e=Zo.unstable_getCurrentPriorityLevel,RO=Zo.unstable_ImmediatePriority,qq=Zo.unstable_UserBlockingPriority,aT=Zo.unstable_NormalPriority,b_e=Zo.unstable_LowPriority,Qq=Zo.unstable_IdlePriority,DR=null,Nc=null;function C_e(n){if(Nc&&typeof Nc.onCommitFiberRoot=="function")try{Nc.onCommitFiberRoot(DR,n,void 0,(n.current.flags&128)===128)}catch{}}var Ll=Math.clz32?Math.clz32:P_e,T_e=Math.log,R_e=Math.LN2;function P_e(n){return n>>>=0,n===0?32:31-(T_e(n)/R_e|0)|0}var gw=64,vw=4194304;function I1(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function lT(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=I1(a):(s&=o,s!==0&&(r=I1(s)))}else o=t&~i,o!==0?r=I1(o):s!==0&&(r=I1(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Ll(e),i=1<<t,r|=n[t],e&=~i;return r}function B_e(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L_e(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Ll(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=B_e(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function iF(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zq(){var n=gw;return gw<<=1,!(gw&4194240)&&(gw=64),n}function gL(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function iM(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ll(e),n[e]=t}function I_e(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Ll(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function PO(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Ll(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var kn=0;function $q(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var eQ,BO,tQ,nQ,rQ,sF=!1,yw=[],Vd=null,Wd=null,jd=null,oS=new Map,aS=new Map,_d=[],D_e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h9(n,e){switch(n){case"focusin":case"focusout":Vd=null;break;case"dragenter":case"dragleave":Wd=null;break;case"mouseover":case"mouseout":jd=null;break;case"pointerover":case"pointerout":oS.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":aS.delete(e.pointerId)}}function n1(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=oM(e),e!==null&&BO(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function F_e(n,e,t,r,i){switch(e){case"focusin":return Vd=n1(Vd,n,e,t,r,i),!0;case"dragenter":return Wd=n1(Wd,n,e,t,r,i),!0;case"mouseover":return jd=n1(jd,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return oS.set(s,n1(oS.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,aS.set(s,n1(aS.get(s)||null,n,e,t,r,i)),!0}return!1}function iQ(n){var e=fm(n.target);if(e!==null){var t=_g(e);if(t!==null){if(e=t.tag,e===13){if(e=Xq(t),e!==null){n.blockedOn=e,rQ(n.priority,function(){tQ(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qb(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=oF(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);eF=r,t.target.dispatchEvent(r),eF=null}else return e=oM(t),e!==null&&BO(e),n.blockedOn=t,!1;e.shift()}return!0}function d9(n,e,t){Qb(n)&&t.delete(e)}function N_e(){sF=!1,Vd!==null&&Qb(Vd)&&(Vd=null),Wd!==null&&Qb(Wd)&&(Wd=null),jd!==null&&Qb(jd)&&(jd=null),oS.forEach(d9),aS.forEach(d9)}function r1(n,e){n.blockedOn===e&&(n.blockedOn=null,sF||(sF=!0,Zo.unstable_scheduleCallback(Zo.unstable_NormalPriority,N_e)))}function lS(n){function e(i){return r1(i,n)}if(0<yw.length){r1(yw[0],n);for(var t=1;t<yw.length;t++){var r=yw[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Vd!==null&&r1(Vd,n),Wd!==null&&r1(Wd,n),jd!==null&&r1(jd,n),oS.forEach(e),aS.forEach(e),t=0;t<_d.length;t++)r=_d[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<_d.length&&(t=_d[0],t.blockedOn===null);)iQ(t),t.blockedOn===null&&_d.shift()}var _y=Ch.ReactCurrentBatchConfig,cT=!0;function U_e(n,e,t,r){var i=kn,s=_y.transition;_y.transition=null;try{kn=1,LO(n,e,t,r)}finally{kn=i,_y.transition=s}}function O_e(n,e,t,r){var i=kn,s=_y.transition;_y.transition=null;try{kn=4,LO(n,e,t,r)}finally{kn=i,_y.transition=s}}function LO(n,e,t,r){if(cT){var i=oF(n,e,t,r);if(i===null)bL(n,e,r,uT,t),h9(n,r);else if(F_e(i,n,e,t,r))r.stopPropagation();else if(h9(n,r),e&4&&-1<D_e.indexOf(n)){for(;i!==null;){var s=oM(i);if(s!==null&&eQ(s),s=oF(n,e,t,r),s===null&&bL(n,e,r,uT,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else bL(n,e,r,null,t)}}var uT=null;function oF(n,e,t,r){if(uT=null,n=TO(r),n=fm(n),n!==null)if(e=_g(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Xq(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return uT=n,null}function sQ(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(w_e()){case RO:return 1;case qq:return 4;case aT:case b_e:return 16;case Qq:return 536870912;default:return 16}default:return 16}}var bd=null,IO=null,Zb=null;function oQ(){if(Zb)return Zb;var n,e=IO,t=e.length,r,i="value"in bd?bd.value:bd.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Zb=i.slice(n,1<r?1-r:void 0)}function $b(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function xw(){return!0}function f9(){return!1}function ia(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xw:f9,this.isPropagationStopped=f9,this}return Tr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=xw)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=xw)},persist:function(){},isPersistent:xw}),e}var vx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},DO=ia(vx),sM=Tr({},vx,{view:0,detail:0}),k_e=ia(sM),vL,yL,i1,FR=Tr({},sM,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FO,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==i1&&(i1&&n.type==="mousemove"?(vL=n.screenX-i1.screenX,yL=n.screenY-i1.screenY):yL=vL=0,i1=n),vL)},movementY:function(n){return"movementY"in n?n.movementY:yL}}),p9=ia(FR),G_e=Tr({},FR,{dataTransfer:0}),H_e=ia(G_e),z_e=Tr({},sM,{relatedTarget:0}),xL=ia(z_e),V_e=Tr({},vx,{animationName:0,elapsedTime:0,pseudoElement:0}),W_e=ia(V_e),j_e=Tr({},vx,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),X_e=ia(j_e),J_e=Tr({},vx,{data:0}),m9=ia(J_e),K_e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y_e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q_e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q_e(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=q_e[n])?!!e[n]:!1}function FO(){return Q_e}var Z_e=Tr({},sM,{key:function(n){if(n.key){var e=K_e[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=$b(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Y_e[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FO,charCode:function(n){return n.type==="keypress"?$b(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$b(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$_e=ia(Z_e),e1e=Tr({},FR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g9=ia(e1e),t1e=Tr({},sM,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FO}),n1e=ia(t1e),r1e=Tr({},vx,{propertyName:0,elapsedTime:0,pseudoElement:0}),i1e=ia(r1e),s1e=Tr({},FR,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),o1e=ia(s1e),a1e=[9,13,27,32],NO=vh&&"CompositionEvent"in window,oA=null;vh&&"documentMode"in document&&(oA=document.documentMode);var l1e=vh&&"TextEvent"in window&&!oA,aQ=vh&&(!NO||oA&&8<oA&&11>=oA),v9=String.fromCharCode(32),y9=!1;function lQ(n,e){switch(n){case"keyup":return a1e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cQ(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Hv=!1;function c1e(n,e){switch(n){case"compositionend":return cQ(e);case"keypress":return e.which!==32?null:(y9=!0,v9);case"textInput":return n=e.data,n===v9&&y9?null:n;default:return null}}function u1e(n,e){if(Hv)return n==="compositionend"||!NO&&lQ(n,e)?(n=oQ(),Zb=IO=bd=null,Hv=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aQ&&e.locale!=="ko"?null:e.data;default:return null}}var h1e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x9(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!h1e[n.type]:e==="textarea"}function uQ(n,e,t,r){Hq(r),e=hT(e,"onChange"),0<e.length&&(t=new DO("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var aA=null,cS=null;function d1e(n){AQ(n,0)}function NR(n){var e=Wv(n);if(Dq(e))return n}function f1e(n,e){if(n==="change")return e}var hQ=!1;if(vh){var _L;if(vh){var AL="oninput"in document;if(!AL){var _9=document.createElement("div");_9.setAttribute("oninput","return;"),AL=typeof _9.oninput=="function"}_L=AL}else _L=!1;hQ=_L&&(!document.documentMode||9<document.documentMode)}function A9(){aA&&(aA.detachEvent("onpropertychange",dQ),cS=aA=null)}function dQ(n){if(n.propertyName==="value"&&NR(cS)){var e=[];uQ(e,cS,n,TO(n)),jq(d1e,e)}}function p1e(n,e,t){n==="focusin"?(A9(),aA=e,cS=t,aA.attachEvent("onpropertychange",dQ)):n==="focusout"&&A9()}function m1e(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return NR(cS)}function g1e(n,e){if(n==="click")return NR(e)}function v1e(n,e){if(n==="input"||n==="change")return NR(e)}function y1e(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var kl=typeof Object.is=="function"?Object.is:y1e;function uS(n,e){if(kl(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!zD.call(e,i)||!kl(n[i],e[i]))return!1}return!0}function S9(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function M9(n,e){var t=S9(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=S9(t)}}function fQ(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?fQ(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function pQ(){for(var n=window,e=iT();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=iT(n.document)}return e}function UO(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function x1e(n){var e=pQ(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&fQ(t.ownerDocument.documentElement,t)){if(r!==null&&UO(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=M9(t,s);var o=M9(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _1e=vh&&"documentMode"in document&&11>=document.documentMode,zv=null,aF=null,lA=null,lF=!1;function E9(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;lF||zv==null||zv!==iT(r)||(r=zv,"selectionStart"in r&&UO(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lA&&uS(lA,r)||(lA=r,r=hT(aF,"onSelect"),0<r.length&&(e=new DO("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=zv)))}function _w(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Vv={animationend:_w("Animation","AnimationEnd"),animationiteration:_w("Animation","AnimationIteration"),animationstart:_w("Animation","AnimationStart"),transitionend:_w("Transition","TransitionEnd")},SL={},mQ={};vh&&(mQ=document.createElement("div").style,"AnimationEvent"in window||(delete Vv.animationend.animation,delete Vv.animationiteration.animation,delete Vv.animationstart.animation),"TransitionEvent"in window||delete Vv.transitionend.transition);function UR(n){if(SL[n])return SL[n];if(!Vv[n])return n;var e=Vv[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in mQ)return SL[n]=e[t];return n}var gQ=UR("animationend"),vQ=UR("animationiteration"),yQ=UR("animationstart"),xQ=UR("transitionend"),_Q=new Map,w9="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rf(n,e){_Q.set(n,e),xg(e,[n])}for(var ML=0;ML<w9.length;ML++){var EL=w9[ML],A1e=EL.toLowerCase(),S1e=EL[0].toUpperCase()+EL.slice(1);Rf(A1e,"on"+S1e)}Rf(gQ,"onAnimationEnd");Rf(vQ,"onAnimationIteration");Rf(yQ,"onAnimationStart");Rf("dblclick","onDoubleClick");Rf("focusin","onFocus");Rf("focusout","onBlur");Rf(xQ,"onTransitionEnd");Wy("onMouseEnter",["mouseout","mouseover"]);Wy("onMouseLeave",["mouseout","mouseover"]);Wy("onPointerEnter",["pointerout","pointerover"]);Wy("onPointerLeave",["pointerout","pointerover"]);xg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xg("onBeforeInput",["compositionend","keypress","textInput","paste"]);xg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var D1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M1e=new Set("cancel close invalid load scroll toggle".split(" ").concat(D1));function b9(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,A_e(r,e,void 0,n),n.currentTarget=null}function AQ(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;b9(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;b9(i,a,u),s=l}}}if(oT)throw n=rF,oT=!1,rF=null,n}function or(n,e){var t=e[fF];t===void 0&&(t=e[fF]=new Set);var r=n+"__bubble";t.has(r)||(SQ(e,n,2,!1),t.add(r))}function wL(n,e,t){var r=0;e&&(r|=4),SQ(t,n,r,e)}var Aw="_reactListening"+Math.random().toString(36).slice(2);function hS(n){if(!n[Aw]){n[Aw]=!0,Rq.forEach(function(t){t!=="selectionchange"&&(M1e.has(t)||wL(t,!1,n),wL(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Aw]||(e[Aw]=!0,wL("selectionchange",!1,e))}}function SQ(n,e,t,r){switch(sQ(e)){case 1:var i=U_e;break;case 4:i=O_e;break;default:i=LO}t=i.bind(null,e,t,n),i=void 0,!nF||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function bL(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=fm(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}jq(function(){var u=s,h=TO(t),d=[];e:{var p=_Q.get(n);if(p!==void 0){var m=DO,v=n;switch(n){case"keypress":if($b(t)===0)break e;case"keydown":case"keyup":m=$_e;break;case"focusin":v="focus",m=xL;break;case"focusout":v="blur",m=xL;break;case"beforeblur":case"afterblur":m=xL;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=p9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=H_e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=n1e;break;case gQ:case vQ:case yQ:m=W_e;break;case xQ:m=i1e;break;case"scroll":m=k_e;break;case"wheel":m=o1e;break;case"copy":case"cut":case"paste":m=X_e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=g9}var S=(e&4)!==0,M=!S&&n==="scroll",g=S?p!==null?p+"Capture":null:p;S=[];for(var _=u,A;_!==null;){A=_;var w=A.stateNode;if(A.tag===5&&w!==null&&(A=w,g!==null&&(w=sS(_,g),w!=null&&S.push(dS(_,w,A)))),M)break;_=_.return}0<S.length&&(p=new m(p,v,null,t,h),d.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==eF&&(v=t.relatedTarget||t.fromElement)&&(fm(v)||v[yh]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?fm(v):null,v!==null&&(M=_g(v),v!==M||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(S=p9,w="onMouseLeave",g="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(S=g9,w="onPointerLeave",g="onPointerEnter",_="pointer"),M=m==null?p:Wv(m),A=v==null?p:Wv(v),p=new S(w,_+"leave",m,t,h),p.target=M,p.relatedTarget=A,w=null,fm(h)===u&&(S=new S(g,_+"enter",v,t,h),S.target=A,S.relatedTarget=M,w=S),M=w,m&&v)t:{for(S=m,g=v,_=0,A=S;A;A=z0(A))_++;for(A=0,w=g;w;w=z0(w))A++;for(;0<_-A;)S=z0(S),_--;for(;0<A-_;)g=z0(g),A--;for(;_--;){if(S===g||g!==null&&S===g.alternate)break t;S=z0(S),g=z0(g)}S=null}else S=null;m!==null&&C9(d,p,m,S,!1),v!==null&&M!==null&&C9(d,M,v,S,!0)}}e:{if(p=u?Wv(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=f1e;else if(x9(p))if(hQ)C=v1e;else{C=m1e;var R=p1e}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=g1e);if(C&&(C=C(n,u))){uQ(d,C,t,h);break e}R&&R(n,p,u),n==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&YD(p,"number",p.value)}switch(R=u?Wv(u):window,n){case"focusin":(x9(R)||R.contentEditable==="true")&&(zv=R,aF=u,lA=null);break;case"focusout":lA=aF=zv=null;break;case"mousedown":lF=!0;break;case"contextmenu":case"mouseup":case"dragend":lF=!1,E9(d,t,h);break;case"selectionchange":if(_1e)break;case"keydown":case"keyup":E9(d,t,h)}var L;if(NO)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Hv?lQ(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(aQ&&t.locale!=="ko"&&(Hv||I!=="onCompositionStart"?I==="onCompositionEnd"&&Hv&&(L=oQ()):(bd=h,IO="value"in bd?bd.value:bd.textContent,Hv=!0)),R=hT(u,I),0<R.length&&(I=new m9(I,n,null,t,h),d.push({event:I,listeners:R}),L?I.data=L:(L=cQ(t),L!==null&&(I.data=L)))),(L=l1e?c1e(n,t):u1e(n,t))&&(u=hT(u,"onBeforeInput"),0<u.length&&(h=new m9("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=L))}AQ(d,e)})}function dS(n,e,t){return{instance:n,listener:e,currentTarget:t}}function hT(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sS(n,t),s!=null&&r.unshift(dS(n,s,i)),s=sS(n,e),s!=null&&r.push(dS(n,s,i))),n=n.return}return r}function z0(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function C9(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=sS(t,s),l!=null&&o.unshift(dS(t,l,a))):i||(l=sS(t,s),l!=null&&o.push(dS(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var E1e=/\r\n?/g,w1e=/\u0000|\uFFFD/g;function T9(n){return(typeof n=="string"?n:""+n).replace(E1e,`
`).replace(w1e,"")}function Sw(n,e,t){if(e=T9(e),T9(n)!==e&&t)throw Error(tt(425))}function dT(){}var cF=null,uF=null;function hF(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dF=typeof setTimeout=="function"?setTimeout:void 0,b1e=typeof clearTimeout=="function"?clearTimeout:void 0,R9=typeof Promise=="function"?Promise:void 0,C1e=typeof queueMicrotask=="function"?queueMicrotask:typeof R9<"u"?function(n){return R9.resolve(null).then(n).catch(T1e)}:dF;function T1e(n){setTimeout(function(){throw n})}function CL(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),lS(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);lS(e)}function Xd(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function P9(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var yx=Math.random().toString(36).slice(2),Bc="__reactFiber$"+yx,fS="__reactProps$"+yx,yh="__reactContainer$"+yx,fF="__reactEvents$"+yx,R1e="__reactListeners$"+yx,P1e="__reactHandles$"+yx;function fm(n){var e=n[Bc];if(e)return e;for(var t=n.parentNode;t;){if(e=t[yh]||t[Bc]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=P9(n);n!==null;){if(t=n[Bc])return t;n=P9(n)}return e}n=t,t=n.parentNode}return null}function oM(n){return n=n[Bc]||n[yh],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Wv(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(tt(33))}function OR(n){return n[fS]||null}var pF=[],jv=-1;function Pf(n){return{current:n}}function lr(n){0>jv||(n.current=pF[jv],pF[jv]=null,jv--)}function Yn(n,e){jv++,pF[jv]=n.current,n.current=e}var pf={},ws=Pf(pf),po=Pf(!1),$m=pf;function jy(n,e){var t=n.type.contextTypes;if(!t)return pf;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function mo(n){return n=n.childContextTypes,n!=null}function fT(){lr(po),lr(ws)}function B9(n,e,t){if(ws.current!==pf)throw Error(tt(168));Yn(ws,e),Yn(po,t)}function MQ(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(tt(108,p_e(n)||"Unknown",i));return Tr({},t,r)}function pT(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pf,$m=ws.current,Yn(ws,n),Yn(po,po.current),!0}function L9(n,e,t){var r=n.stateNode;if(!r)throw Error(tt(169));t?(n=MQ(n,e,$m),r.__reactInternalMemoizedMergedChildContext=n,lr(po),lr(ws),Yn(ws,n)):lr(po),Yn(po,t)}var ku=null,kR=!1,TL=!1;function EQ(n){ku===null?ku=[n]:ku.push(n)}function B1e(n){kR=!0,EQ(n)}function Bf(){if(!TL&&ku!==null){TL=!0;var n=0,e=kn;try{var t=ku;for(kn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ku=null,kR=!1}catch(i){throw ku!==null&&(ku=ku.slice(n+1)),Yq(RO,Bf),i}finally{kn=e,TL=!1}}return null}var Xv=[],Jv=0,mT=null,gT=0,Na=[],Ua=0,eg=null,Ju=1,Ku="";function jp(n,e){Xv[Jv++]=gT,Xv[Jv++]=mT,mT=n,gT=e}function wQ(n,e,t){Na[Ua++]=Ju,Na[Ua++]=Ku,Na[Ua++]=eg,eg=n;var r=Ju;n=Ku;var i=32-Ll(r)-1;r&=~(1<<i),t+=1;var s=32-Ll(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ju=1<<32-Ll(e)+i|t<<i|r,Ku=s+n}else Ju=1<<s|t<<i|r,Ku=n}function OO(n){n.return!==null&&(jp(n,1),wQ(n,1,0))}function kO(n){for(;n===mT;)mT=Xv[--Jv],Xv[Jv]=null,gT=Xv[--Jv],Xv[Jv]=null;for(;n===eg;)eg=Na[--Ua],Na[Ua]=null,Ku=Na[--Ua],Na[Ua]=null,Ju=Na[--Ua],Na[Ua]=null}var Jo=null,zo=null,hr=!1,El=null;function bQ(n,e){var t=ka(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function I9(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Jo=n,zo=Xd(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Jo=n,zo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=eg!==null?{id:Ju,overflow:Ku}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ka(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Jo=n,zo=null,!0):!1;default:return!1}}function mF(n){return(n.mode&1)!==0&&(n.flags&128)===0}function gF(n){if(hr){var e=zo;if(e){var t=e;if(!I9(n,e)){if(mF(n))throw Error(tt(418));e=Xd(t.nextSibling);var r=Jo;e&&I9(n,e)?bQ(r,t):(n.flags=n.flags&-4097|2,hr=!1,Jo=n)}}else{if(mF(n))throw Error(tt(418));n.flags=n.flags&-4097|2,hr=!1,Jo=n}}}function D9(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Jo=n}function Mw(n){if(n!==Jo)return!1;if(!hr)return D9(n),hr=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!hF(n.type,n.memoizedProps)),e&&(e=zo)){if(mF(n))throw CQ(),Error(tt(418));for(;e;)bQ(n,e),e=Xd(e.nextSibling)}if(D9(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(tt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){zo=Xd(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}zo=null}}else zo=Jo?Xd(n.stateNode.nextSibling):null;return!0}function CQ(){for(var n=zo;n;)n=Xd(n.nextSibling)}function Xy(){zo=Jo=null,hr=!1}function GO(n){El===null?El=[n]:El.push(n)}var L1e=Ch.ReactCurrentBatchConfig;function s1(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(tt(309));var r=t.stateNode}if(!r)throw Error(tt(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(tt(284));if(!t._owner)throw Error(tt(290,n))}return n}function Ew(n,e){throw n=Object.prototype.toString.call(e),Error(tt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function F9(n){var e=n._init;return e(n._payload)}function TQ(n){function e(g,_){if(n){var A=g.deletions;A===null?(g.deletions=[_],g.flags|=16):A.push(_)}}function t(g,_){if(!n)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function r(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function i(g,_){return g=qd(g,_),g.index=0,g.sibling=null,g}function s(g,_,A){return g.index=A,n?(A=g.alternate,A!==null?(A=A.index,A<_?(g.flags|=2,_):A):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,_,A,w){return _===null||_.tag!==6?(_=FL(A,g.mode,w),_.return=g,_):(_=i(_,A),_.return=g,_)}function l(g,_,A,w){var C=A.type;return C===Gv?h(g,_,A.props.children,w,A.key):_!==null&&(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pd&&F9(C)===_.type)?(w=i(_,A.props),w.ref=s1(g,_,A),w.return=g,w):(w=oC(A.type,A.key,A.props,null,g.mode,w),w.ref=s1(g,_,A),w.return=g,w)}function u(g,_,A,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=NL(A,g.mode,w),_.return=g,_):(_=i(_,A.children||[]),_.return=g,_)}function h(g,_,A,w,C){return _===null||_.tag!==7?(_=Im(A,g.mode,w,C),_.return=g,_):(_=i(_,A),_.return=g,_)}function d(g,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=FL(""+_,g.mode,A),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fw:return A=oC(_.type,_.key,_.props,null,g.mode,A),A.ref=s1(g,null,_),A.return=g,A;case kv:return _=NL(_,g.mode,A),_.return=g,_;case pd:var w=_._init;return d(g,w(_._payload),A)}if(L1(_)||e1(_))return _=Im(_,g.mode,A,null),_.return=g,_;Ew(g,_)}return null}function p(g,_,A,w){var C=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return C!==null?null:a(g,_,""+A,w);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case fw:return A.key===C?l(g,_,A,w):null;case kv:return A.key===C?u(g,_,A,w):null;case pd:return C=A._init,p(g,_,C(A._payload),w)}if(L1(A)||e1(A))return C!==null?null:h(g,_,A,w,null);Ew(g,A)}return null}function m(g,_,A,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(A)||null,a(_,g,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case fw:return g=g.get(w.key===null?A:w.key)||null,l(_,g,w,C);case kv:return g=g.get(w.key===null?A:w.key)||null,u(_,g,w,C);case pd:var R=w._init;return m(g,_,A,R(w._payload),C)}if(L1(w)||e1(w))return g=g.get(A)||null,h(_,g,w,C,null);Ew(_,w)}return null}function v(g,_,A,w){for(var C=null,R=null,L=_,I=_=0,T=null;L!==null&&I<A.length;I++){L.index>I?(T=L,L=null):T=L.sibling;var B=p(g,L,A[I],w);if(B===null){L===null&&(L=T);break}n&&L&&B.alternate===null&&e(g,L),_=s(B,_,I),R===null?C=B:R.sibling=B,R=B,L=T}if(I===A.length)return t(g,L),hr&&jp(g,I),C;if(L===null){for(;I<A.length;I++)L=d(g,A[I],w),L!==null&&(_=s(L,_,I),R===null?C=L:R.sibling=L,R=L);return hr&&jp(g,I),C}for(L=r(g,L);I<A.length;I++)T=m(L,g,I,A[I],w),T!==null&&(n&&T.alternate!==null&&L.delete(T.key===null?I:T.key),_=s(T,_,I),R===null?C=T:R.sibling=T,R=T);return n&&L.forEach(function(H){return e(g,H)}),hr&&jp(g,I),C}function S(g,_,A,w){var C=e1(A);if(typeof C!="function")throw Error(tt(150));if(A=C.call(A),A==null)throw Error(tt(151));for(var R=C=null,L=_,I=_=0,T=null,B=A.next();L!==null&&!B.done;I++,B=A.next()){L.index>I?(T=L,L=null):T=L.sibling;var H=p(g,L,B.value,w);if(H===null){L===null&&(L=T);break}n&&L&&H.alternate===null&&e(g,L),_=s(H,_,I),R===null?C=H:R.sibling=H,R=H,L=T}if(B.done)return t(g,L),hr&&jp(g,I),C;if(L===null){for(;!B.done;I++,B=A.next())B=d(g,B.value,w),B!==null&&(_=s(B,_,I),R===null?C=B:R.sibling=B,R=B);return hr&&jp(g,I),C}for(L=r(g,L);!B.done;I++,B=A.next())B=m(L,g,I,B.value,w),B!==null&&(n&&B.alternate!==null&&L.delete(B.key===null?I:B.key),_=s(B,_,I),R===null?C=B:R.sibling=B,R=B);return n&&L.forEach(function(K){return e(g,K)}),hr&&jp(g,I),C}function M(g,_,A,w){if(typeof A=="object"&&A!==null&&A.type===Gv&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case fw:e:{for(var C=A.key,R=_;R!==null;){if(R.key===C){if(C=A.type,C===Gv){if(R.tag===7){t(g,R.sibling),_=i(R,A.props.children),_.return=g,g=_;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===pd&&F9(C)===R.type){t(g,R.sibling),_=i(R,A.props),_.ref=s1(g,R,A),_.return=g,g=_;break e}t(g,R);break}else e(g,R);R=R.sibling}A.type===Gv?(_=Im(A.props.children,g.mode,w,A.key),_.return=g,g=_):(w=oC(A.type,A.key,A.props,null,g.mode,w),w.ref=s1(g,_,A),w.return=g,g=w)}return o(g);case kv:e:{for(R=A.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){t(g,_.sibling),_=i(_,A.children||[]),_.return=g,g=_;break e}else{t(g,_);break}else e(g,_);_=_.sibling}_=NL(A,g.mode,w),_.return=g,g=_}return o(g);case pd:return R=A._init,M(g,_,R(A._payload),w)}if(L1(A))return v(g,_,A,w);if(e1(A))return S(g,_,A,w);Ew(g,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(t(g,_.sibling),_=i(_,A),_.return=g,g=_):(t(g,_),_=FL(A,g.mode,w),_.return=g,g=_),o(g)):t(g,_)}return M}var Jy=TQ(!0),RQ=TQ(!1),vT=Pf(null),yT=null,Kv=null,HO=null;function zO(){HO=Kv=yT=null}function VO(n){var e=vT.current;lr(vT),n._currentValue=e}function vF(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ay(n,e){yT=n,HO=Kv=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(lo=!0),n.firstContext=null)}function Xa(n){var e=n._currentValue;if(HO!==n)if(n={context:n,memoizedValue:e,next:null},Kv===null){if(yT===null)throw Error(tt(308));Kv=n,yT.dependencies={lanes:0,firstContext:n}}else Kv=Kv.next=n;return e}var pm=null;function WO(n){pm===null?pm=[n]:pm.push(n)}function PQ(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,WO(e)):(t.next=i.next,i.next=t),e.interleaved=t,xh(n,r)}function xh(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var md=!1;function jO(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BQ(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ih(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Jd(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,bn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xh(n,t)}return i=r.interleaved,i===null?(e.next=e,WO(r)):(e.next=i.next,i.next=e),r.interleaved=e,xh(n,t)}function eC(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,PO(n,t)}}function N9(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function xT(n,e,t,r){var i=n.updateQueue;md=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,S=a;switch(p=e,m=t,S.tag){case 1:if(v=S.payload,typeof v=="function"){d=v.call(m,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,p=typeof v=="function"?v.call(m,d,p):v,p==null)break e;d=Tr({},d,p);break e;case 2:md=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ng|=o,n.lanes=o,n.memoizedState=d}}function U9(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var aM={},Uc=Pf(aM),pS=Pf(aM),mS=Pf(aM);function mm(n){if(n===aM)throw Error(tt(174));return n}function XO(n,e){switch(Yn(mS,e),Yn(pS,n),Yn(Uc,aM),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:QD(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=QD(e,n)}lr(Uc),Yn(Uc,e)}function Ky(){lr(Uc),lr(pS),lr(mS)}function LQ(n){mm(mS.current);var e=mm(Uc.current),t=QD(e,n.type);e!==t&&(Yn(pS,n),Yn(Uc,t))}function JO(n){pS.current===n&&(lr(Uc),lr(pS))}var gr=Pf(0);function _T(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var RL=[];function KO(){for(var n=0;n<RL.length;n++)RL[n]._workInProgressVersionPrimary=null;RL.length=0}var tC=Ch.ReactCurrentDispatcher,PL=Ch.ReactCurrentBatchConfig,tg=0,wr=null,pi=null,Ni=null,AT=!1,cA=!1,gS=0,I1e=0;function ps(){throw Error(tt(321))}function YO(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!kl(n[t],e[t]))return!1;return!0}function qO(n,e,t,r,i,s){if(tg=s,wr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tC.current=n===null||n.memoizedState===null?U1e:O1e,n=t(r,i),cA){s=0;do{if(cA=!1,gS=0,25<=s)throw Error(tt(301));s+=1,Ni=pi=null,e.updateQueue=null,tC.current=k1e,n=t(r,i)}while(cA)}if(tC.current=ST,e=pi!==null&&pi.next!==null,tg=0,Ni=pi=wr=null,AT=!1,e)throw Error(tt(300));return n}function QO(){var n=gS!==0;return gS=0,n}function Rc(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ni===null?wr.memoizedState=Ni=n:Ni=Ni.next=n,Ni}function Ja(){if(pi===null){var n=wr.alternate;n=n!==null?n.memoizedState:null}else n=pi.next;var e=Ni===null?wr.memoizedState:Ni.next;if(e!==null)Ni=e,pi=n;else{if(n===null)throw Error(tt(310));pi=n,n={memoizedState:pi.memoizedState,baseState:pi.baseState,baseQueue:pi.baseQueue,queue:pi.queue,next:null},Ni===null?wr.memoizedState=Ni=n:Ni=Ni.next=n}return Ni}function vS(n,e){return typeof e=="function"?e(n):e}function BL(n){var e=Ja(),t=e.queue;if(t===null)throw Error(tt(311));t.lastRenderedReducer=n;var r=pi,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((tg&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,wr.lanes|=h,ng|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,kl(r,e.memoizedState)||(lo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,wr.lanes|=s,ng|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function LL(n){var e=Ja(),t=e.queue;if(t===null)throw Error(tt(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);kl(s,e.memoizedState)||(lo=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function IQ(){}function DQ(n,e){var t=wr,r=Ja(),i=e(),s=!kl(r.memoizedState,i);if(s&&(r.memoizedState=i,lo=!0),r=r.queue,ZO(UQ.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Ni!==null&&Ni.memoizedState.tag&1){if(t.flags|=2048,yS(9,NQ.bind(null,t,r,i,e),void 0,null),Gi===null)throw Error(tt(349));tg&30||FQ(t,e,i)}return i}function FQ(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function NQ(n,e,t,r){e.value=t,e.getSnapshot=r,OQ(e)&&kQ(n)}function UQ(n,e,t){return t(function(){OQ(e)&&kQ(n)})}function OQ(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!kl(n,t)}catch{return!0}}function kQ(n){var e=xh(n,1);e!==null&&Il(e,n,1,-1)}function O9(n){var e=Rc();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vS,lastRenderedState:n},e.queue=n,n=n.dispatch=N1e.bind(null,wr,n),[e.memoizedState,n]}function yS(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function GQ(){return Ja().memoizedState}function nC(n,e,t,r){var i=Rc();wr.flags|=n,i.memoizedState=yS(1|e,t,void 0,r===void 0?null:r)}function GR(n,e,t,r){var i=Ja();r=r===void 0?null:r;var s=void 0;if(pi!==null){var o=pi.memoizedState;if(s=o.destroy,r!==null&&YO(r,o.deps)){i.memoizedState=yS(e,t,s,r);return}}wr.flags|=n,i.memoizedState=yS(1|e,t,s,r)}function k9(n,e){return nC(8390656,8,n,e)}function ZO(n,e){return GR(2048,8,n,e)}function HQ(n,e){return GR(4,2,n,e)}function zQ(n,e){return GR(4,4,n,e)}function VQ(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function WQ(n,e,t){return t=t!=null?t.concat([n]):null,GR(4,4,VQ.bind(null,e,n),t)}function $O(){}function jQ(n,e){var t=Ja();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&YO(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function XQ(n,e){var t=Ja();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&YO(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function JQ(n,e,t){return tg&21?(kl(t,e)||(t=Zq(),wr.lanes|=t,ng|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,lo=!0),n.memoizedState=t)}function D1e(n,e){var t=kn;kn=t!==0&&4>t?t:4,n(!0);var r=PL.transition;PL.transition={};try{n(!1),e()}finally{kn=t,PL.transition=r}}function KQ(){return Ja().memoizedState}function F1e(n,e,t){var r=Yd(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},YQ(n))qQ(e,t);else if(t=PQ(n,e,t,r),t!==null){var i=Gs();Il(t,n,r,i),QQ(t,e,r)}}function N1e(n,e,t){var r=Yd(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(YQ(n))qQ(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,kl(a,o)){var l=e.interleaved;l===null?(i.next=i,WO(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=PQ(n,e,i,r),t!==null&&(i=Gs(),Il(t,n,r,i),QQ(t,e,r))}}function YQ(n){var e=n.alternate;return n===wr||e!==null&&e===wr}function qQ(n,e){cA=AT=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function QQ(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,PO(n,t)}}var ST={readContext:Xa,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},U1e={readContext:Xa,useCallback:function(n,e){return Rc().memoizedState=[n,e===void 0?null:e],n},useContext:Xa,useEffect:k9,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,nC(4194308,4,VQ.bind(null,e,n),t)},useLayoutEffect:function(n,e){return nC(4194308,4,n,e)},useInsertionEffect:function(n,e){return nC(4,2,n,e)},useMemo:function(n,e){var t=Rc();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Rc();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=F1e.bind(null,wr,n),[r.memoizedState,n]},useRef:function(n){var e=Rc();return n={current:n},e.memoizedState=n},useState:O9,useDebugValue:$O,useDeferredValue:function(n){return Rc().memoizedState=n},useTransition:function(){var n=O9(!1),e=n[0];return n=D1e.bind(null,n[1]),Rc().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=wr,i=Rc();if(hr){if(t===void 0)throw Error(tt(407));t=t()}else{if(t=e(),Gi===null)throw Error(tt(349));tg&30||FQ(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,k9(UQ.bind(null,r,s,n),[n]),r.flags|=2048,yS(9,NQ.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Rc(),e=Gi.identifierPrefix;if(hr){var t=Ku,r=Ju;t=(r&~(1<<32-Ll(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=gS++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=I1e++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},O1e={readContext:Xa,useCallback:jQ,useContext:Xa,useEffect:ZO,useImperativeHandle:WQ,useInsertionEffect:HQ,useLayoutEffect:zQ,useMemo:XQ,useReducer:BL,useRef:GQ,useState:function(){return BL(vS)},useDebugValue:$O,useDeferredValue:function(n){var e=Ja();return JQ(e,pi.memoizedState,n)},useTransition:function(){var n=BL(vS)[0],e=Ja().memoizedState;return[n,e]},useMutableSource:IQ,useSyncExternalStore:DQ,useId:KQ,unstable_isNewReconciler:!1},k1e={readContext:Xa,useCallback:jQ,useContext:Xa,useEffect:ZO,useImperativeHandle:WQ,useInsertionEffect:HQ,useLayoutEffect:zQ,useMemo:XQ,useReducer:LL,useRef:GQ,useState:function(){return LL(vS)},useDebugValue:$O,useDeferredValue:function(n){var e=Ja();return pi===null?e.memoizedState=n:JQ(e,pi.memoizedState,n)},useTransition:function(){var n=LL(vS)[0],e=Ja().memoizedState;return[n,e]},useMutableSource:IQ,useSyncExternalStore:DQ,useId:KQ,unstable_isNewReconciler:!1};function vl(n,e){if(n&&n.defaultProps){e=Tr({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function yF(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Tr({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var HR={isMounted:function(n){return(n=n._reactInternals)?_g(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Gs(),i=Yd(n),s=ih(r,i);s.payload=e,t!=null&&(s.callback=t),e=Jd(n,s,i),e!==null&&(Il(e,n,i,r),eC(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Gs(),i=Yd(n),s=ih(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Jd(n,s,i),e!==null&&(Il(e,n,i,r),eC(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Gs(),r=Yd(n),i=ih(t,r);i.tag=2,e!=null&&(i.callback=e),e=Jd(n,i,r),e!==null&&(Il(e,n,r,t),eC(e,n,r))}};function G9(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!uS(t,r)||!uS(i,s):!0}function ZQ(n,e,t){var r=!1,i=pf,s=e.contextType;return typeof s=="object"&&s!==null?s=Xa(s):(i=mo(e)?$m:ws.current,r=e.contextTypes,s=(r=r!=null)?jy(n,i):pf),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=HR,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function H9(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&HR.enqueueReplaceState(e,e.state,null)}function xF(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},jO(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Xa(s):(s=mo(e)?$m:ws.current,i.context=jy(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(yF(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&HR.enqueueReplaceState(i,i.state,null),xT(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Yy(n,e){try{var t="",r=e;do t+=f_e(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function IL(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function _F(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var G1e=typeof WeakMap=="function"?WeakMap:Map;function $Q(n,e,t){t=ih(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){ET||(ET=!0,PF=r),_F(n,e)},t}function eZ(n,e,t){t=ih(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){_F(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){_F(n,e),typeof r!="function"&&(Kd===null?Kd=new Set([this]):Kd.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function z9(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new G1e;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=eAe.bind(null,n,e,t),e.then(n,n))}function V9(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function W9(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ih(-1,1),e.tag=2,Jd(t,e,1))),t.lanes|=1),n)}var H1e=Ch.ReactCurrentOwner,lo=!1;function Us(n,e,t,r){e.child=n===null?RQ(e,null,t,r):Jy(e,n.child,t,r)}function j9(n,e,t,r,i){t=t.render;var s=e.ref;return Ay(e,i),r=qO(n,e,t,r,s,i),t=QO(),n!==null&&!lo?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,_h(n,e,i)):(hr&&t&&OO(e),e.flags|=1,Us(n,e,r,i),e.child)}function X9(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!ak(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,tZ(n,e,s,r,i)):(n=oC(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:uS,t(o,r)&&n.ref===e.ref)return _h(n,e,i)}return e.flags|=1,n=qd(s,r),n.ref=e.ref,n.return=e,e.child=n}function tZ(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(uS(s,r)&&n.ref===e.ref)if(lo=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(lo=!0);else return e.lanes=n.lanes,_h(n,e,i)}return AF(n,e,t,r,i)}function nZ(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yn(qv,Oo),Oo|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Yn(qv,Oo),Oo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Yn(qv,Oo),Oo|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Yn(qv,Oo),Oo|=r;return Us(n,e,i,t),e.child}function rZ(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function AF(n,e,t,r,i){var s=mo(t)?$m:ws.current;return s=jy(e,s),Ay(e,i),t=qO(n,e,t,r,s,i),r=QO(),n!==null&&!lo?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,_h(n,e,i)):(hr&&r&&OO(e),e.flags|=1,Us(n,e,t,i),e.child)}function J9(n,e,t,r,i){if(mo(t)){var s=!0;pT(e)}else s=!1;if(Ay(e,i),e.stateNode===null)rC(n,e),ZQ(e,t,r),xF(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Xa(u):(u=mo(t)?$m:ws.current,u=jy(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&H9(e,o,r,u),md=!1;var p=e.memoizedState;o.state=p,xT(e,r,o,i),l=e.memoizedState,a!==r||p!==l||po.current||md?(typeof h=="function"&&(yF(e,t,h,r),l=e.memoizedState),(a=md||G9(e,t,a,r,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BQ(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:vl(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Xa(l):(l=mo(t)?$m:ws.current,l=jy(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&H9(e,o,r,l),md=!1,p=e.memoizedState,o.state=p,xT(e,r,o,i);var v=e.memoizedState;a!==d||p!==v||po.current||md?(typeof m=="function"&&(yF(e,t,m,r),v=e.memoizedState),(u=md||G9(e,t,u,r,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return SF(n,e,t,r,s,i)}function SF(n,e,t,r,i,s){rZ(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&L9(e,t,!1),_h(n,e,s);r=e.stateNode,H1e.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=Jy(e,n.child,null,s),e.child=Jy(e,null,a,s)):Us(n,e,a,s),e.memoizedState=r.state,i&&L9(e,t,!0),e.child}function iZ(n){var e=n.stateNode;e.pendingContext?B9(n,e.pendingContext,e.pendingContext!==e.context):e.context&&B9(n,e.context,!1),XO(n,e.containerInfo)}function K9(n,e,t,r,i){return Xy(),GO(i),e.flags|=256,Us(n,e,t,r),e.child}var MF={dehydrated:null,treeContext:null,retryLane:0};function EF(n){return{baseLanes:n,cachePool:null,transitions:null}}function sZ(n,e,t){var r=e.pendingProps,i=gr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Yn(gr,i&1),n===null)return gF(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=WR(o,r,0,null),n=Im(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=EF(t),e.memoizedState=MF,n):ek(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return z1e(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=qd(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=qd(a,s):(s=Im(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?EF(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=MF,r}return s=n.child,n=s.sibling,r=qd(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function ek(n,e){return e=WR({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function ww(n,e,t,r){return r!==null&&GO(r),Jy(e,n.child,null,t),n=ek(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function z1e(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=IL(Error(tt(422))),ww(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=WR({mode:"visible",children:r.children},i,0,null),s=Im(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Jy(e,n.child,null,o),e.child.memoizedState=EF(o),e.memoizedState=MF,s);if(!(e.mode&1))return ww(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=IL(s,r,void 0),ww(n,e,o,r)}if(a=(o&n.childLanes)!==0,lo||a){if(r=Gi,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xh(n,i),Il(r,n,i,-1))}return ok(),r=IL(Error(tt(421))),ww(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=tAe.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,zo=Xd(i.nextSibling),Jo=e,hr=!0,El=null,n!==null&&(Na[Ua++]=Ju,Na[Ua++]=Ku,Na[Ua++]=eg,Ju=n.id,Ku=n.overflow,eg=e),e=ek(e,r.children),e.flags|=4096,e)}function Y9(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),vF(n.return,e,t)}function DL(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function oZ(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Us(n,e,r.children,t),r=gr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Y9(n,t,e);else if(n.tag===19)Y9(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Yn(gr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&_T(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),DL(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&_T(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}DL(e,!0,t,null,s);break;case"together":DL(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rC(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function _h(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ng|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(tt(153));if(e.child!==null){for(n=e.child,t=qd(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=qd(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function V1e(n,e,t){switch(e.tag){case 3:iZ(e),Xy();break;case 5:LQ(e);break;case 1:mo(e.type)&&pT(e);break;case 4:XO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Yn(vT,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Yn(gr,gr.current&1),e.flags|=128,null):t&e.child.childLanes?sZ(n,e,t):(Yn(gr,gr.current&1),n=_h(n,e,t),n!==null?n.sibling:null);Yn(gr,gr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return oZ(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yn(gr,gr.current),r)break;return null;case 22:case 23:return e.lanes=0,nZ(n,e,t)}return _h(n,e,t)}var aZ,wF,lZ,cZ;aZ=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};wF=function(){};lZ=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,mm(Uc.current);var s=null;switch(t){case"input":i=JD(n,i),r=JD(n,r),s=[];break;case"select":i=Tr({},i,{value:void 0}),r=Tr({},r,{value:void 0}),s=[];break;case"textarea":i=qD(n,i),r=qD(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=dT)}ZD(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(rS.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(rS.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&or("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};cZ=function(n,e,t,r){t!==r&&(e.flags|=4)};function o1(n,e){if(!hr)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function ms(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function W1e(n,e,t){var r=e.pendingProps;switch(kO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ms(e),null;case 1:return mo(e.type)&&fT(),ms(e),null;case 3:return r=e.stateNode,Ky(),lr(po),lr(ws),KO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Mw(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,El!==null&&(IF(El),El=null))),wF(n,e),ms(e),null;case 5:JO(e);var i=mm(mS.current);if(t=e.type,n!==null&&e.stateNode!=null)lZ(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(tt(166));return ms(e),null}if(n=mm(Uc.current),Mw(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Bc]=e,r[fS]=s,n=(e.mode&1)!==0,t){case"dialog":or("cancel",r),or("close",r);break;case"iframe":case"object":case"embed":or("load",r);break;case"video":case"audio":for(i=0;i<D1.length;i++)or(D1[i],r);break;case"source":or("error",r);break;case"img":case"image":case"link":or("error",r),or("load",r);break;case"details":or("toggle",r);break;case"input":i9(r,s),or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},or("invalid",r);break;case"textarea":o9(r,s),or("invalid",r)}ZD(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Sw(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Sw(r.textContent,a,n),i=["children",""+a]):rS.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&or("scroll",r)}switch(t){case"input":pw(r),s9(r,s,!0);break;case"textarea":pw(r),a9(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dT)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Uq(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Bc]=e,n[fS]=r,aZ(n,e,!1,!1),e.stateNode=n;e:{switch(o=$D(t,r),t){case"dialog":or("cancel",n),or("close",n),i=r;break;case"iframe":case"object":case"embed":or("load",n),i=r;break;case"video":case"audio":for(i=0;i<D1.length;i++)or(D1[i],n);i=r;break;case"source":or("error",n),i=r;break;case"img":case"image":case"link":or("error",n),or("load",n),i=r;break;case"details":or("toggle",n),i=r;break;case"input":i9(n,r),i=JD(n,r),or("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Tr({},r,{value:void 0}),or("invalid",n);break;case"textarea":o9(n,r),i=qD(n,r),or("invalid",n);break;default:i=r}ZD(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Gq(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Oq(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&iS(n,l):typeof l=="number"&&iS(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rS.hasOwnProperty(s)?l!=null&&s==="onScroll"&&or("scroll",n):l!=null&&EO(n,s,l,o))}switch(t){case"input":pw(n),s9(n,r,!1);break;case"textarea":pw(n),a9(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ff(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?vy(n,!!r.multiple,s,!1):r.defaultValue!=null&&vy(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=dT)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ms(e),null;case 6:if(n&&e.stateNode!=null)cZ(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(tt(166));if(t=mm(mS.current),mm(Uc.current),Mw(e)){if(r=e.stateNode,t=e.memoizedProps,r[Bc]=e,(s=r.nodeValue!==t)&&(n=Jo,n!==null))switch(n.tag){case 3:Sw(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Sw(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Bc]=e,e.stateNode=r}return ms(e),null;case 13:if(lr(gr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(hr&&zo!==null&&e.mode&1&&!(e.flags&128))CQ(),Xy(),e.flags|=98560,s=!1;else if(s=Mw(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(tt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Bc]=e}else Xy(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ms(e),s=!1}else El!==null&&(IF(El),El=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||gr.current&1?yi===0&&(yi=3):ok())),e.updateQueue!==null&&(e.flags|=4),ms(e),null);case 4:return Ky(),wF(n,e),n===null&&hS(e.stateNode.containerInfo),ms(e),null;case 10:return VO(e.type._context),ms(e),null;case 17:return mo(e.type)&&fT(),ms(e),null;case 19:if(lr(gr),s=e.memoizedState,s===null)return ms(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)o1(s,!1);else{if(yi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=_T(n),o!==null){for(e.flags|=128,o1(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Yn(gr,gr.current&1|2),e.child}n=n.sibling}s.tail!==null&&Xr()>qy&&(e.flags|=128,r=!0,o1(s,!1),e.lanes=4194304)}else{if(!r)if(n=_T(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),o1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!hr)return ms(e),null}else 2*Xr()-s.renderingStartTime>qy&&t!==1073741824&&(e.flags|=128,r=!0,o1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xr(),e.sibling=null,t=gr.current,Yn(gr,r?t&1|2:t&1),e):(ms(e),null);case 22:case 23:return sk(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Oo&1073741824&&(ms(e),e.subtreeFlags&6&&(e.flags|=8192)):ms(e),null;case 24:return null;case 25:return null}throw Error(tt(156,e.tag))}function j1e(n,e){switch(kO(e),e.tag){case 1:return mo(e.type)&&fT(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Ky(),lr(po),lr(ws),KO(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return JO(e),null;case 13:if(lr(gr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(tt(340));Xy()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return lr(gr),null;case 4:return Ky(),null;case 10:return VO(e.type._context),null;case 22:case 23:return sk(),null;case 24:return null;default:return null}}var bw=!1,Ms=!1,X1e=typeof WeakSet=="function"?WeakSet:Set,Et=null;function Yv(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Fr(n,e,r)}else t.current=null}function bF(n,e,t){try{t()}catch(r){Fr(n,e,r)}}var q9=!1;function J1e(n,e){if(cF=cT,n=pQ(),UO(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(uF={focusedElem:n,selectionRange:t},cT=!1,Et=e;Et!==null;)if(e=Et,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Et=n;else for(;Et!==null;){e=Et;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,M=v.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:vl(e.type,S),M);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){Fr(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,Et=n;break}Et=e.return}return v=q9,q9=!1,v}function uA(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&bF(e,t,s)}i=i.next}while(i!==r)}}function zR(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function CF(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function uZ(n){var e=n.alternate;e!==null&&(n.alternate=null,uZ(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Bc],delete e[fS],delete e[fF],delete e[R1e],delete e[P1e])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hZ(n){return n.tag===5||n.tag===3||n.tag===4}function Q9(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hZ(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function TF(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=dT));else if(r!==4&&(n=n.child,n!==null))for(TF(n,e,t),n=n.sibling;n!==null;)TF(n,e,t),n=n.sibling}function RF(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(RF(n,e,t),n=n.sibling;n!==null;)RF(n,e,t),n=n.sibling}var Zi=null,Al=!1;function td(n,e,t){for(t=t.child;t!==null;)dZ(n,e,t),t=t.sibling}function dZ(n,e,t){if(Nc&&typeof Nc.onCommitFiberUnmount=="function")try{Nc.onCommitFiberUnmount(DR,t)}catch{}switch(t.tag){case 5:Ms||Yv(t,e);case 6:var r=Zi,i=Al;Zi=null,td(n,e,t),Zi=r,Al=i,Zi!==null&&(Al?(n=Zi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Zi.removeChild(t.stateNode));break;case 18:Zi!==null&&(Al?(n=Zi,t=t.stateNode,n.nodeType===8?CL(n.parentNode,t):n.nodeType===1&&CL(n,t),lS(n)):CL(Zi,t.stateNode));break;case 4:r=Zi,i=Al,Zi=t.stateNode.containerInfo,Al=!0,td(n,e,t),Zi=r,Al=i;break;case 0:case 11:case 14:case 15:if(!Ms&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bF(t,e,o),i=i.next}while(i!==r)}td(n,e,t);break;case 1:if(!Ms&&(Yv(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Fr(t,e,a)}td(n,e,t);break;case 21:td(n,e,t);break;case 22:t.mode&1?(Ms=(r=Ms)||t.memoizedState!==null,td(n,e,t),Ms=r):td(n,e,t);break;default:td(n,e,t)}}function Z9(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new X1e),e.forEach(function(r){var i=nAe.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function ul(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Zi=a.stateNode,Al=!1;break e;case 3:Zi=a.stateNode.containerInfo,Al=!0;break e;case 4:Zi=a.stateNode.containerInfo,Al=!0;break e}a=a.return}if(Zi===null)throw Error(tt(160));dZ(s,o,i),Zi=null,Al=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Fr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fZ(e,n),e=e.sibling}function fZ(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ul(e,n),bc(n),r&4){try{uA(3,n,n.return),zR(3,n)}catch(S){Fr(n,n.return,S)}try{uA(5,n,n.return)}catch(S){Fr(n,n.return,S)}}break;case 1:ul(e,n),bc(n),r&512&&t!==null&&Yv(t,t.return);break;case 5:if(ul(e,n),bc(n),r&512&&t!==null&&Yv(t,t.return),n.flags&32){var i=n.stateNode;try{iS(i,"")}catch(S){Fr(n,n.return,S)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Fq(i,s),$D(a,o);var u=$D(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?Gq(i,d):h==="dangerouslySetInnerHTML"?Oq(i,d):h==="children"?iS(i,d):EO(i,h,d,u)}switch(a){case"input":KD(i,s);break;case"textarea":Nq(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?vy(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?vy(i,!!s.multiple,s.defaultValue,!0):vy(i,!!s.multiple,s.multiple?[]:"",!1))}i[fS]=s}catch(S){Fr(n,n.return,S)}}break;case 6:if(ul(e,n),bc(n),r&4){if(n.stateNode===null)throw Error(tt(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(S){Fr(n,n.return,S)}}break;case 3:if(ul(e,n),bc(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{lS(e.containerInfo)}catch(S){Fr(n,n.return,S)}break;case 4:ul(e,n),bc(n);break;case 13:ul(e,n),bc(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rk=Xr())),r&4&&Z9(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Ms=(u=Ms)||h,ul(e,n),Ms=u):ul(e,n),bc(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(Et=n,h=n.child;h!==null;){for(d=Et=h;Et!==null;){switch(p=Et,m=p.child,p.tag){case 0:case 11:case 14:case 15:uA(4,p,p.return);break;case 1:Yv(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(S){Fr(r,t,S)}}break;case 5:Yv(p,p.return);break;case 22:if(p.memoizedState!==null){e5(d);continue}}m!==null?(m.return=p,Et=m):e5(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kq("display",o))}catch(S){Fr(n,n.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){Fr(n,n.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ul(e,n),bc(n),r&4&&Z9(n);break;case 21:break;default:ul(e,n),bc(n)}}function bc(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(hZ(t)){var r=t;break e}t=t.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(iS(i,""),r.flags&=-33);var s=Q9(n);RF(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Q9(n);TF(n,a,o);break;default:throw Error(tt(161))}}catch(l){Fr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function K1e(n,e,t){Et=n,pZ(n)}function pZ(n,e,t){for(var r=(n.mode&1)!==0;Et!==null;){var i=Et,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bw;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ms;a=bw;var u=Ms;if(bw=o,(Ms=l)&&!u)for(Et=i;Et!==null;)o=Et,l=o.child,o.tag===22&&o.memoizedState!==null?t5(i):l!==null?(l.return=o,Et=l):t5(i);for(;s!==null;)Et=s,pZ(s),s=s.sibling;Et=i,bw=a,Ms=u}$9(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Et=s):$9(n)}}function $9(n){for(;Et!==null;){var e=Et;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ms||zR(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ms)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:vl(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&U9(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}U9(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&lS(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}Ms||e.flags&512&&CF(e)}catch(p){Fr(e,e.return,p)}}if(e===n){Et=null;break}if(t=e.sibling,t!==null){t.return=e.return,Et=t;break}Et=e.return}}function e5(n){for(;Et!==null;){var e=Et;if(e===n){Et=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Et=t;break}Et=e.return}}function t5(n){for(;Et!==null;){var e=Et;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{zR(4,e)}catch(l){Fr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Fr(e,i,l)}}var s=e.return;try{CF(e)}catch(l){Fr(e,s,l)}break;case 5:var o=e.return;try{CF(e)}catch(l){Fr(e,o,l)}}}catch(l){Fr(e,e.return,l)}if(e===n){Et=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Et=a;break}Et=e.return}}var Y1e=Math.ceil,MT=Ch.ReactCurrentDispatcher,tk=Ch.ReactCurrentOwner,Va=Ch.ReactCurrentBatchConfig,bn=0,Gi=null,ai=null,rs=0,Oo=0,qv=Pf(0),yi=0,xS=null,ng=0,VR=0,nk=0,hA=null,no=null,rk=0,qy=1/0,Nu=null,ET=!1,PF=null,Kd=null,Cw=!1,Cd=null,wT=0,dA=0,BF=null,iC=-1,sC=0;function Gs(){return bn&6?Xr():iC!==-1?iC:iC=Xr()}function Yd(n){return n.mode&1?bn&2&&rs!==0?rs&-rs:L1e.transition!==null?(sC===0&&(sC=Zq()),sC):(n=kn,n!==0||(n=window.event,n=n===void 0?16:sQ(n.type)),n):1}function Il(n,e,t,r){if(50<dA)throw dA=0,BF=null,Error(tt(185));iM(n,t,r),(!(bn&2)||n!==Gi)&&(n===Gi&&(!(bn&2)&&(VR|=t),yi===4&&Ad(n,rs)),go(n,r),t===1&&bn===0&&!(e.mode&1)&&(qy=Xr()+500,kR&&Bf()))}function go(n,e){var t=n.callbackNode;L_e(n,e);var r=lT(n,n===Gi?rs:0);if(r===0)t!==null&&u9(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&u9(t),e===1)n.tag===0?B1e(n5.bind(null,n)):EQ(n5.bind(null,n)),C1e(function(){!(bn&6)&&Bf()}),t=null;else{switch($q(r)){case 1:t=RO;break;case 4:t=qq;break;case 16:t=aT;break;case 536870912:t=Qq;break;default:t=aT}t=SZ(t,mZ.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function mZ(n,e){if(iC=-1,sC=0,bn&6)throw Error(tt(327));var t=n.callbackNode;if(Sy()&&n.callbackNode!==t)return null;var r=lT(n,n===Gi?rs:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=bT(n,r);else{e=r;var i=bn;bn|=2;var s=vZ();(Gi!==n||rs!==e)&&(Nu=null,qy=Xr()+500,Lm(n,e));do try{Z1e();break}catch(a){gZ(n,a)}while(1);zO(),MT.current=s,bn=i,ai!==null?e=0:(Gi=null,rs=0,e=yi)}if(e!==0){if(e===2&&(i=iF(n),i!==0&&(r=i,e=LF(n,i))),e===1)throw t=xS,Lm(n,0),Ad(n,r),go(n,Xr()),t;if(e===6)Ad(n,r);else{if(i=n.current.alternate,!(r&30)&&!q1e(i)&&(e=bT(n,r),e===2&&(s=iF(n),s!==0&&(r=s,e=LF(n,s))),e===1))throw t=xS,Lm(n,0),Ad(n,r),go(n,Xr()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(tt(345));case 2:Xp(n,no,Nu);break;case 3:if(Ad(n,r),(r&130023424)===r&&(e=rk+500-Xr(),10<e)){if(lT(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Gs(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=dF(Xp.bind(null,n,no,Nu),e);break}Xp(n,no,Nu);break;case 4:if(Ad(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Ll(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Xr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Y1e(r/1960))-r,10<r){n.timeoutHandle=dF(Xp.bind(null,n,no,Nu),r);break}Xp(n,no,Nu);break;case 5:Xp(n,no,Nu);break;default:throw Error(tt(329))}}}return go(n,Xr()),n.callbackNode===t?mZ.bind(null,n):null}function LF(n,e){var t=hA;return n.current.memoizedState.isDehydrated&&(Lm(n,e).flags|=256),n=bT(n,e),n!==2&&(e=no,no=t,e!==null&&IF(e)),n}function IF(n){no===null?no=n:no.push.apply(no,n)}function q1e(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!kl(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ad(n,e){for(e&=~nk,e&=~VR,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ll(e),r=1<<t;n[t]=-1,e&=~r}}function n5(n){if(bn&6)throw Error(tt(327));Sy();var e=lT(n,0);if(!(e&1))return go(n,Xr()),null;var t=bT(n,e);if(n.tag!==0&&t===2){var r=iF(n);r!==0&&(e=r,t=LF(n,r))}if(t===1)throw t=xS,Lm(n,0),Ad(n,e),go(n,Xr()),t;if(t===6)throw Error(tt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Xp(n,no,Nu),go(n,Xr()),null}function ik(n,e){var t=bn;bn|=1;try{return n(e)}finally{bn=t,bn===0&&(qy=Xr()+500,kR&&Bf())}}function rg(n){Cd!==null&&Cd.tag===0&&!(bn&6)&&Sy();var e=bn;bn|=1;var t=Va.transition,r=kn;try{if(Va.transition=null,kn=1,n)return n()}finally{kn=r,Va.transition=t,bn=e,!(bn&6)&&Bf()}}function sk(){Oo=qv.current,lr(qv)}function Lm(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,b1e(t)),ai!==null)for(t=ai.return;t!==null;){var r=t;switch(kO(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fT();break;case 3:Ky(),lr(po),lr(ws),KO();break;case 5:JO(r);break;case 4:Ky();break;case 13:lr(gr);break;case 19:lr(gr);break;case 10:VO(r.type._context);break;case 22:case 23:sk()}t=t.return}if(Gi=n,ai=n=qd(n.current,null),rs=Oo=e,yi=0,xS=null,nk=VR=ng=0,no=hA=null,pm!==null){for(e=0;e<pm.length;e++)if(t=pm[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}pm=null}return n}function gZ(n,e){do{var t=ai;try{if(zO(),tC.current=ST,AT){for(var r=wr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}AT=!1}if(tg=0,Ni=pi=wr=null,cA=!1,gS=0,tk.current=null,t===null||t.return===null){yi=1,xS=e,ai=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=rs,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=V9(o);if(m!==null){m.flags&=-257,W9(m,o,a,s,e),m.mode&1&&z9(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var S=new Set;S.add(l),e.updateQueue=S}else v.add(l);break e}else{if(!(e&1)){z9(s,u,e),ok();break e}l=Error(tt(426))}}else if(hr&&a.mode&1){var M=V9(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),W9(M,o,a,s,e),GO(Yy(l,a));break e}}s=l=Yy(l,a),yi!==4&&(yi=2),hA===null?hA=[s]:hA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=$Q(s,l,e);N9(s,g);break e;case 1:a=l;var _=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Kd===null||!Kd.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=eZ(s,a,e);N9(s,w);break e}}s=s.return}while(s!==null)}xZ(t)}catch(C){e=C,ai===t&&t!==null&&(ai=t=t.return);continue}break}while(1)}function vZ(){var n=MT.current;return MT.current=ST,n===null?ST:n}function ok(){(yi===0||yi===3||yi===2)&&(yi=4),Gi===null||!(ng&268435455)&&!(VR&268435455)||Ad(Gi,rs)}function bT(n,e){var t=bn;bn|=2;var r=vZ();(Gi!==n||rs!==e)&&(Nu=null,Lm(n,e));do try{Q1e();break}catch(i){gZ(n,i)}while(1);if(zO(),bn=t,MT.current=r,ai!==null)throw Error(tt(261));return Gi=null,rs=0,yi}function Q1e(){for(;ai!==null;)yZ(ai)}function Z1e(){for(;ai!==null&&!M_e();)yZ(ai)}function yZ(n){var e=AZ(n.alternate,n,Oo);n.memoizedProps=n.pendingProps,e===null?xZ(n):ai=e,tk.current=null}function xZ(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=j1e(t,e),t!==null){t.flags&=32767,ai=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{yi=6,ai=null;return}}else if(t=W1e(t,e,Oo),t!==null){ai=t;return}if(e=e.sibling,e!==null){ai=e;return}ai=e=n}while(e!==null);yi===0&&(yi=5)}function Xp(n,e,t){var r=kn,i=Va.transition;try{Va.transition=null,kn=1,$1e(n,e,t,r)}finally{Va.transition=i,kn=r}return null}function $1e(n,e,t,r){do Sy();while(Cd!==null);if(bn&6)throw Error(tt(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(tt(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(I_e(n,s),n===Gi&&(ai=Gi=null,rs=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Cw||(Cw=!0,SZ(aT,function(){return Sy(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Va.transition,Va.transition=null;var o=kn;kn=1;var a=bn;bn|=4,tk.current=null,J1e(n,t),fZ(t,n),x1e(uF),cT=!!cF,uF=cF=null,n.current=t,K1e(t),E_e(),bn=a,kn=o,Va.transition=s}else n.current=t;if(Cw&&(Cw=!1,Cd=n,wT=i),s=n.pendingLanes,s===0&&(Kd=null),C_e(t.stateNode),go(n,Xr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(ET)throw ET=!1,n=PF,PF=null,n;return wT&1&&n.tag!==0&&Sy(),s=n.pendingLanes,s&1?n===BF?dA++:(dA=0,BF=n):dA=0,Bf(),null}function Sy(){if(Cd!==null){var n=$q(wT),e=Va.transition,t=kn;try{if(Va.transition=null,kn=16>n?16:n,Cd===null)var r=!1;else{if(n=Cd,Cd=null,wT=0,bn&6)throw Error(tt(331));var i=bn;for(bn|=4,Et=n.current;Et!==null;){var s=Et,o=s.child;if(Et.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Et=u;Et!==null;){var h=Et;switch(h.tag){case 0:case 11:case 15:uA(8,h,s)}var d=h.child;if(d!==null)d.return=h,Et=d;else for(;Et!==null;){h=Et;var p=h.sibling,m=h.return;if(uZ(h),h===u){Et=null;break}if(p!==null){p.return=m,Et=p;break}Et=m}}}var v=s.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var M=S.sibling;S.sibling=null,S=M}while(S!==null)}}Et=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Et=o;else e:for(;Et!==null;){if(s=Et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uA(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Et=g;break e}Et=s.return}}var _=n.current;for(Et=_;Et!==null;){o=Et;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Et=A;else e:for(o=_;Et!==null;){if(a=Et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zR(9,a)}}catch(C){Fr(a,a.return,C)}if(a===o){Et=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Et=w;break e}Et=a.return}}if(bn=i,Bf(),Nc&&typeof Nc.onPostCommitFiberRoot=="function")try{Nc.onPostCommitFiberRoot(DR,n)}catch{}r=!0}return r}finally{kn=t,Va.transition=e}}return!1}function r5(n,e,t){e=Yy(t,e),e=$Q(n,e,1),n=Jd(n,e,1),e=Gs(),n!==null&&(iM(n,1,e),go(n,e))}function Fr(n,e,t){if(n.tag===3)r5(n,n,t);else for(;e!==null;){if(e.tag===3){r5(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kd===null||!Kd.has(r))){n=Yy(t,n),n=eZ(e,n,1),e=Jd(e,n,1),n=Gs(),e!==null&&(iM(e,1,n),go(e,n));break}}e=e.return}}function eAe(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Gs(),n.pingedLanes|=n.suspendedLanes&t,Gi===n&&(rs&t)===t&&(yi===4||yi===3&&(rs&130023424)===rs&&500>Xr()-rk?Lm(n,0):nk|=t),go(n,e)}function _Z(n,e){e===0&&(n.mode&1?(e=vw,vw<<=1,!(vw&130023424)&&(vw=4194304)):e=1);var t=Gs();n=xh(n,e),n!==null&&(iM(n,e,t),go(n,t))}function tAe(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),_Z(n,t)}function nAe(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(e),_Z(n,t)}var AZ;AZ=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||po.current)lo=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return lo=!1,V1e(n,e,t);lo=!!(n.flags&131072)}else lo=!1,hr&&e.flags&1048576&&wQ(e,gT,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rC(n,e),n=e.pendingProps;var i=jy(e,ws.current);Ay(e,t),i=qO(null,e,r,n,i,t);var s=QO();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mo(r)?(s=!0,pT(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jO(e),i.updater=HR,e.stateNode=i,i._reactInternals=e,xF(e,r,n,t),e=SF(null,e,r,!0,s,t)):(e.tag=0,hr&&s&&OO(e),Us(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(rC(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=iAe(r),n=vl(r,n),i){case 0:e=AF(null,e,r,n,t);break e;case 1:e=J9(null,e,r,n,t);break e;case 11:e=j9(null,e,r,n,t);break e;case 14:e=X9(null,e,r,vl(r.type,n),t);break e}throw Error(tt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vl(r,i),AF(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vl(r,i),J9(n,e,r,i,t);case 3:e:{if(iZ(e),n===null)throw Error(tt(387));r=e.pendingProps,s=e.memoizedState,i=s.element,BQ(n,e),xT(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Yy(Error(tt(423)),e),e=K9(n,e,r,t,i);break e}else if(r!==i){i=Yy(Error(tt(424)),e),e=K9(n,e,r,t,i);break e}else for(zo=Xd(e.stateNode.containerInfo.firstChild),Jo=e,hr=!0,El=null,t=RQ(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Xy(),r===i){e=_h(n,e,t);break e}Us(n,e,r,t)}e=e.child}return e;case 5:return LQ(e),n===null&&gF(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,hF(r,i)?o=null:s!==null&&hF(r,s)&&(e.flags|=32),rZ(n,e),Us(n,e,o,t),e.child;case 6:return n===null&&gF(e),null;case 13:return sZ(n,e,t);case 4:return XO(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Jy(e,null,r,t):Us(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vl(r,i),j9(n,e,r,i,t);case 7:return Us(n,e,e.pendingProps,t),e.child;case 8:return Us(n,e,e.pendingProps.children,t),e.child;case 12:return Us(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Yn(vT,r._currentValue),r._currentValue=o,s!==null)if(kl(s.value,o)){if(s.children===i.children&&!po.current){e=_h(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ih(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),vF(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),vF(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Us(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ay(e,t),i=Xa(i),r=r(i),e.flags|=1,Us(n,e,r,t),e.child;case 14:return r=e.type,i=vl(r,e.pendingProps),i=vl(r.type,i),X9(n,e,r,i,t);case 15:return tZ(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:vl(r,i),rC(n,e),e.tag=1,mo(r)?(n=!0,pT(e)):n=!1,Ay(e,t),ZQ(e,r,i),xF(e,r,i,t),SF(null,e,r,!0,n,t);case 19:return oZ(n,e,t);case 22:return nZ(n,e,t)}throw Error(tt(156,e.tag))};function SZ(n,e){return Yq(n,e)}function rAe(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ka(n,e,t,r){return new rAe(n,e,t,r)}function ak(n){return n=n.prototype,!(!n||!n.isReactComponent)}function iAe(n){if(typeof n=="function")return ak(n)?1:0;if(n!=null){if(n=n.$$typeof,n===bO)return 11;if(n===CO)return 14}return 2}function qd(n,e){var t=n.alternate;return t===null?(t=ka(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function oC(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")ak(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Gv:return Im(t.children,i,s,e);case wO:o=8,i|=8;break;case VD:return n=ka(12,t,e,i|2),n.elementType=VD,n.lanes=s,n;case WD:return n=ka(13,t,e,i),n.elementType=WD,n.lanes=s,n;case jD:return n=ka(19,t,e,i),n.elementType=jD,n.lanes=s,n;case Lq:return WR(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Pq:o=10;break e;case Bq:o=9;break e;case bO:o=11;break e;case CO:o=14;break e;case pd:o=16,r=null;break e}throw Error(tt(130,n==null?n:typeof n,""))}return e=ka(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Im(n,e,t,r){return n=ka(7,n,r,e),n.lanes=t,n}function WR(n,e,t,r){return n=ka(22,n,r,e),n.elementType=Lq,n.lanes=t,n.stateNode={isHidden:!1},n}function FL(n,e,t){return n=ka(6,n,null,e),n.lanes=t,n}function NL(n,e,t){return e=ka(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function sAe(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gL(0),this.expirationTimes=gL(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gL(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lk(n,e,t,r,i,s,o,a,l){return n=new sAe(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ka(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},jO(s),n}function oAe(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kv,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function MZ(n){if(!n)return pf;n=n._reactInternals;e:{if(_g(n)!==n||n.tag!==1)throw Error(tt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(tt(171))}if(n.tag===1){var t=n.type;if(mo(t))return MQ(n,t,e)}return e}function EZ(n,e,t,r,i,s,o,a,l){return n=lk(t,r,!0,n,i,s,o,a,l),n.context=MZ(null),t=n.current,r=Gs(),i=Yd(t),s=ih(r,i),s.callback=e??null,Jd(t,s,i),n.current.lanes=i,iM(n,i,r),go(n,r),n}function jR(n,e,t,r){var i=e.current,s=Gs(),o=Yd(i);return t=MZ(t),e.context===null?e.context=t:e.pendingContext=t,e=ih(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Jd(i,e,o),n!==null&&(Il(n,i,o,s),eC(n,i,o)),o}function CT(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function i5(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ck(n,e){i5(n,e),(n=n.alternate)&&i5(n,e)}function aAe(){return null}var wZ=typeof reportError=="function"?reportError:function(n){console.error(n)};function uk(n){this._internalRoot=n}XR.prototype.render=uk.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(tt(409));jR(n,e,null,null)};XR.prototype.unmount=uk.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;rg(function(){jR(null,n,null,null)}),e[yh]=null}};function XR(n){this._internalRoot=n}XR.prototype.unstable_scheduleHydration=function(n){if(n){var e=nQ();n={blockedOn:null,target:n,priority:e};for(var t=0;t<_d.length&&e!==0&&e<_d[t].priority;t++);_d.splice(t,0,n),t===0&&iQ(n)}};function hk(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function JR(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function s5(){}function lAe(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=CT(o);s.call(u)}}var o=EZ(e,r,n,0,null,!1,!1,"",s5);return n._reactRootContainer=o,n[yh]=o.current,hS(n.nodeType===8?n.parentNode:n),rg(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=CT(l);a.call(u)}}var l=lk(n,0,!1,null,null,!1,!1,"",s5);return n._reactRootContainer=l,n[yh]=l.current,hS(n.nodeType===8?n.parentNode:n),rg(function(){jR(e,l,t,r)}),l}function KR(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=CT(o);a.call(l)}}jR(e,o,n,i)}else o=lAe(t,e,n,i,r);return CT(o)}eQ=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=I1(e.pendingLanes);t!==0&&(PO(e,t|1),go(e,Xr()),!(bn&6)&&(qy=Xr()+500,Bf()))}break;case 13:rg(function(){var r=xh(n,1);if(r!==null){var i=Gs();Il(r,n,1,i)}}),ck(n,1)}};BO=function(n){if(n.tag===13){var e=xh(n,134217728);if(e!==null){var t=Gs();Il(e,n,134217728,t)}ck(n,134217728)}};tQ=function(n){if(n.tag===13){var e=Yd(n),t=xh(n,e);if(t!==null){var r=Gs();Il(t,n,e,r)}ck(n,e)}};nQ=function(){return kn};rQ=function(n,e){var t=kn;try{return kn=n,e()}finally{kn=t}};tF=function(n,e,t){switch(e){case"input":if(KD(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=OR(r);if(!i)throw Error(tt(90));Dq(r),KD(r,i)}}}break;case"textarea":Nq(n,t);break;case"select":e=t.value,e!=null&&vy(n,!!t.multiple,e,!1)}};Vq=ik;Wq=rg;var cAe={usingClientEntryPoint:!1,Events:[oM,Wv,OR,Hq,zq,ik]},a1={findFiberByHostInstance:fm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uAe={bundleType:a1.bundleType,version:a1.version,rendererPackageName:a1.rendererPackageName,rendererConfig:a1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ch.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Jq(n),n===null?null:n.stateNode},findFiberByHostInstance:a1.findFiberByHostInstance||aAe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tw.isDisabled&&Tw.supportsFiber)try{DR=Tw.inject(uAe),Nc=Tw}catch{}}ra.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cAe;ra.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hk(e))throw Error(tt(200));return oAe(n,e,null,t)};ra.createRoot=function(n,e){if(!hk(n))throw Error(tt(299));var t=!1,r="",i=wZ;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lk(n,1,!1,null,null,t,!1,r,i),n[yh]=e.current,hS(n.nodeType===8?n.parentNode:n),new uk(e)};ra.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(tt(188)):(n=Object.keys(n).join(","),Error(tt(268,n)));return n=Jq(e),n=n===null?null:n.stateNode,n};ra.flushSync=function(n){return rg(n)};ra.hydrate=function(n,e,t){if(!JR(e))throw Error(tt(200));return KR(null,n,e,!0,t)};ra.hydrateRoot=function(n,e,t){if(!hk(n))throw Error(tt(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=wZ;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=EZ(e,null,n,1,t??null,i,!1,s,o),n[yh]=e.current,hS(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new XR(e)};ra.render=function(n,e,t){if(!JR(e))throw Error(tt(200));return KR(null,n,e,!1,t)};ra.unmountComponentAtNode=function(n){if(!JR(n))throw Error(tt(40));return n._reactRootContainer?(rg(function(){KR(null,null,n,!1,function(){n._reactRootContainer=null,n[yh]=null})}),!0):!1};ra.unstable_batchedUpdates=ik;ra.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!JR(t))throw Error(tt(200));if(n==null||n._reactInternals===void 0)throw Error(tt(38));return KR(n,e,t,!1,r)};ra.version="18.3.1-next-f1338f8080-20240426";function bZ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bZ)}catch(n){console.error(n)}}bZ(),bq.exports=ra;var CZ=bq.exports,o5=CZ;HD.createRoot=o5.createRoot,HD.hydrateRoot=o5.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const lM="152",hAe={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},dAe={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},TZ=0,DF=1,RZ=2,fAe=3,PZ=0,YR=1,fA=2,yl=3,Vc=0,Hs=1,Cl=2,pAe=2,sh=0,Dm=1,FF=2,NF=3,UF=4,BZ=5,em=100,LZ=101,IZ=102,OF=103,kF=104,DZ=200,FZ=201,NZ=202,UZ=203,dk=204,fk=205,OZ=206,kZ=207,GZ=208,HZ=209,zZ=210,VZ=0,WZ=1,jZ=2,TT=3,XZ=4,JZ=5,KZ=6,YZ=7,cM=0,qZ=1,QZ=2,Dl=0,pk=1,ZZ=2,$Z=3,mk=4,e$=5,qR=300,mf=301,gf=302,_S=303,AS=304,xx=306,vf=1e3,es=1001,Qy=1002,Ur=1003,SS=1004,mAe=1004,My=1005,gAe=1005,yr=1006,QR=1007,vAe=1007,Wc=1008,yAe=1008,Ah=1009,t$=1010,n$=1011,gk=1012,r$=1013,Td=1014,Yu=1015,Zy=1016,i$=1017,s$=1018,Fm=1020,o$=1021,so=1023,a$=1024,l$=1025,Qd=1026,ig=1027,c$=1028,u$=1029,h$=1030,d$=1031,f$=1033,aC=33776,lC=33777,cC=33778,uC=33779,GF=35840,HF=35841,zF=35842,VF=35843,p$=36196,WF=37492,jF=37496,XF=37808,JF=37809,KF=37810,YF=37811,qF=37812,QF=37813,ZF=37814,$F=37815,e3=37816,t3=37817,n3=37818,r3=37819,i3=37820,s3=37821,hC=36492,m$=36283,o3=36284,a3=36285,l3=36286,g$=2200,vk=2201,v$=2202,$y=2300,sg=2301,dC=2302,gm=2400,vm=2401,MS=2402,ZR=2500,yk=2501,y$=0,xk=1,RT=2,_k=3e3,oh=3001,x$=3200,_$=3201,Lf=0,A$=1,Zd="",Zt="srgb",Gl="srgb-linear",Ak="display-p3",xAe=0,fC=7680,_Ae=7681,AAe=7682,SAe=7683,MAe=34055,EAe=34056,wAe=5386,bAe=512,CAe=513,TAe=514,RAe=515,PAe=516,BAe=517,LAe=518,S$=519,ES=35044,IAe=35048,DAe=35040,FAe=35045,NAe=35049,UAe=35041,OAe=35046,kAe=35050,GAe=35042,HAe="100",c3="300 es",PT=1035;class Th{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const gs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let a5=1234567;const Nm=Math.PI/180,ex=180/Math.PI;function Ko(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(gs[n&255]+gs[n>>8&255]+gs[n>>16&255]+gs[n>>24&255]+"-"+gs[e&255]+gs[e>>8&255]+"-"+gs[e>>16&15|64]+gs[e>>24&255]+"-"+gs[t&63|128]+gs[t>>8&255]+"-"+gs[t>>16&255]+gs[t>>24&255]+gs[r&255]+gs[r>>8&255]+gs[r>>16&255]+gs[r>>24&255]).toLowerCase()}function kr(n,e,t){return Math.max(e,Math.min(t,n))}function Sk(n,e){return(n%e+e)%e}function zAe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function VAe(n,e,t){return n!==e?(t-n)/(e-n):0}function pA(n,e,t){return(1-t)*n+t*e}function WAe(n,e,t,r){return pA(n,e,1-Math.exp(-t*r))}function jAe(n,e=1){return e-Math.abs(Sk(n,e*2)-e)}function XAe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function JAe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function KAe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function YAe(n,e){return n+Math.random()*(e-n)}function qAe(n){return n*(.5-Math.random())}function QAe(n){n!==void 0&&(a5=n);let e=a5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ZAe(n){return n*Nm}function $Ae(n){return n*ex}function u3(n){return(n&n-1)===0&&n!==0}function M$(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function E$(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function eSe(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),h=o((e+r)/2),d=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*h,l*d,l*p,a*u);break;case"YZY":n.set(l*p,a*h,l*d,a*u);break;case"ZXZ":n.set(l*d,l*p,a*h,a*u);break;case"XZX":n.set(a*h,l*v,l*m,a*u);break;case"YXY":n.set(l*m,a*h,l*v,a*u);break;case"ZYZ":n.set(l*v,l*m,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Vo(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function sn(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const w$={DEG2RAD:Nm,RAD2DEG:ex,generateUUID:Ko,clamp:kr,euclideanModulo:Sk,mapLinear:zAe,inverseLerp:VAe,lerp:pA,damp:WAe,pingpong:jAe,smoothstep:XAe,smootherstep:JAe,randInt:KAe,randFloat:YAe,randFloatSpread:qAe,seededRandom:QAe,degToRad:ZAe,radToDeg:$Ae,isPowerOfTwo:u3,ceilPowerOfTwo:M$,floorPowerOfTwo:E$,setQuaternionFromProperEuler:eSe,normalize:sn,denormalize:Vo};class ze{constructor(e=0,t=0){ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(kr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class dn{constructor(){dn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=r,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],h=r[4],d=r[7],p=r[2],m=r[5],v=r[8],S=i[0],M=i[3],g=i[6],_=i[1],A=i[4],w=i[7],C=i[2],R=i[5],L=i[8];return s[0]=o*S+a*_+l*C,s[3]=o*M+a*A+l*R,s[6]=o*g+a*w+l*L,s[1]=u*S+h*_+d*C,s[4]=u*M+h*A+d*R,s[7]=u*g+h*w+d*L,s[2]=p*S+m*_+v*C,s[5]=p*M+m*A+v*R,s[8]=p*g+m*w+v*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-r*s*h+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=h*o-a*u,p=a*l-h*s,m=u*s-o*l,v=t*d+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/v;return e[0]=d*S,e[1]=(i*u-h*r)*S,e[2]=(a*r-i*o)*S,e[3]=p*S,e[4]=(h*t-i*l)*S,e[5]=(i*s-a*t)*S,e[6]=m*S,e[7]=(r*l-u*t)*S,e[8]=(o*t-r*s)*S,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(UL.makeScale(e,t)),this}rotate(e){return this.premultiply(UL.makeRotation(-e)),this}translate(e,t){return this.premultiply(UL.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const UL=new dn;function b$(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const tSe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Qv(n,e){return new tSe[n](e)}function wS(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const l5={};function mA(n){n in l5||(l5[n]=!0,console.warn(n))}function Ey(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function OL(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const nSe=new dn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),rSe=new dn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function iSe(n){return n.convertSRGBToLinear().applyMatrix3(rSe)}function sSe(n){return n.applyMatrix3(nSe).convertLinearToSRGB()}const oSe={[Gl]:n=>n,[Zt]:n=>n.convertSRGBToLinear(),[Ak]:iSe},aSe={[Gl]:n=>n,[Zt]:n=>n.convertLinearToSRGB(),[Ak]:sSe},wa={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Gl},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=oSe[e],i=aSe[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let V0;class Mk{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{V0===void 0&&(V0=wS("canvas")),V0.width=e.width,V0.height=e.height;const r=V0.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=V0}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=wS("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Ey(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Ey(t[r]/255)*255):t[r]=Ey(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ym{constructor(e=null){this.isSource=!0,this.uuid=Ko(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(kL(i[o].image)):s.push(kL(i[o]))}else s=kL(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function kL(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Mk.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let lSe=0;class br extends Th{constructor(e=br.DEFAULT_IMAGE,t=br.DEFAULT_MAPPING,r=es,i=es,s=yr,o=Wc,a=so,l=Ah,u=br.DEFAULT_ANISOTROPY,h=Zd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:lSe++}),this.uuid=Ko(),this.name="",this.source=new ym(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ze(0,0),this.repeat=new ze(1,1),this.center=new ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(mA("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===oh?Zt:Zd),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==qR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case vf:e.x=e.x-Math.floor(e.x);break;case es:e.x=e.x<0?0:1;break;case Qy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case vf:e.y=e.y-Math.floor(e.y);break;case es:e.y=e.y<0?0:1;break;case Qy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return mA("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Zt?oh:_k}set encoding(e){mA("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===oh?Zt:Zd}}br.DEFAULT_IMAGE=null;br.DEFAULT_MAPPING=qR;br.DEFAULT_ANISOTROPY=1;class Un{constructor(e=0,t=0,r=0,i=1){Un.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],h=l[4],d=l[8],p=l[1],m=l[5],v=l[9],S=l[2],M=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-S)<.01&&Math.abs(v-M)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+S)<.1&&Math.abs(v+M)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(u+1)/2,w=(m+1)/2,C=(g+1)/2,R=(h+p)/4,L=(d+S)/4,I=(v+M)/4;return A>w&&A>C?A<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(A),i=R/r,s=L/r):w>C?w<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(w),r=R/i,s=I/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=L/s,i=I/s),this.set(r,i,s,t),this}let _=Math.sqrt((M-v)*(M-v)+(d-S)*(d-S)+(p-h)*(p-h));return Math.abs(_)<.001&&(_=1),this.x=(M-v)/_,this.y=(d-S)/_,this.z=(p-h)/_,this.w=Math.acos((u+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Hl extends Th{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Un(0,0,e,t),this.scissorTest=!1,this.viewport=new Un(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(mA("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===oh?Zt:Zd),this.texture=new br(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:yr,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ym(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class $R extends br{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=es,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class cSe extends Hl{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new $R(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Ek extends br{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ur,this.minFilter=Ur,this.wrapR=es,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class uSe extends Hl{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Ek(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class hSe extends Hl{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class is{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],h=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],S=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=S;return}if(d!==S||l!==p||u!==m||h!==v){let M=1-a;const g=l*p+u*m+h*v+d*S,_=g>=0?1:-1,A=1-g*g;if(A>Number.EPSILON){const C=Math.sqrt(A),R=Math.atan2(C,g*_);M=Math.sin(M*R)/C,a=Math.sin(a*R)/C}const w=a*_;if(l=l*M+p*w,u=u*M+m*w,h=h*M+v*w,d=d*M+S*w,M===1-a){const C=1/Math.sqrt(l*l+u*u+h*h+d*d);l*=C,u*=C,h*=C,d*=C}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],h=r[i+3],d=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+h*d+l*m-u*p,e[t+1]=l*v+h*p+u*d-a*m,e[t+2]=u*v+h*m+a*p-l*d,e[t+3]=h*v-a*d-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),h=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*h*d+u*m*v,this._y=u*m*d-p*h*v,this._z=u*h*v+p*m*d,this._w=u*h*d-p*m*v;break;case"YXZ":this._x=p*h*d+u*m*v,this._y=u*m*d-p*h*v,this._z=u*h*v-p*m*d,this._w=u*h*d+p*m*v;break;case"ZXY":this._x=p*h*d-u*m*v,this._y=u*m*d+p*h*v,this._z=u*h*v+p*m*d,this._w=u*h*d-p*m*v;break;case"ZYX":this._x=p*h*d-u*m*v,this._y=u*m*d+p*h*v,this._z=u*h*v-p*m*d,this._w=u*h*d+p*m*v;break;case"YZX":this._x=p*h*d+u*m*v,this._y=u*m*d+p*h*v,this._z=u*h*v-p*m*d,this._w=u*h*d-p*m*v;break;case"XZY":this._x=p*h*d-u*m*v,this._y=u*m*d-p*h*v,this._z=u*h*v+p*m*d,this._w=u*h*d+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],d=t[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-u)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+u)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+u)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(kr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=r*h+o*a+i*u-s*l,this._y=i*h+o*l+s*a-r*u,this._z=s*h+o*u+r*l-i*a,this._w=o*h-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),d=Math.sin((1-t)*h)/u,p=Math.sin(t*h)/u;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ie{constructor(e=0,t=0,r=0){ie.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(c5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(c5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*r,h=l*r+a*t-s*i,d=l*i+s*r-o*t,p=-s*t-o*r-a*i;return this.x=u*l+p*-s+h*-a-d*-o,this.y=h*l+p*-o+d*-s-u*-a,this.z=d*l+p*-a+u*-o-h*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return GL.copy(this).projectOnVector(e),this.sub(GL)}reflect(e){return this.sub(GL.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(kr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const GL=new ie,c5=new is;class Yl{constructor(e=new ie(1/0,1/0,1/0),t=new ie(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Tu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Tu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Tu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),W0.copy(e.boundingBox),W0.applyMatrix4(e.matrixWorld),this.union(W0);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Tu.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Tu)}else i.boundingBox===null&&i.computeBoundingBox(),W0.copy(i.boundingBox),W0.applyMatrix4(e.matrixWorld),this.union(W0)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Tu),Tu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(l1),Rw.subVectors(this.max,l1),j0.subVectors(e.a,l1),X0.subVectors(e.b,l1),J0.subVectors(e.c,l1),nd.subVectors(X0,j0),rd.subVectors(J0,X0),Cp.subVectors(j0,J0);let t=[0,-nd.z,nd.y,0,-rd.z,rd.y,0,-Cp.z,Cp.y,nd.z,0,-nd.x,rd.z,0,-rd.x,Cp.z,0,-Cp.x,-nd.y,nd.x,0,-rd.y,rd.x,0,-Cp.y,Cp.x,0];return!HL(t,j0,X0,J0,Rw)||(t=[1,0,0,0,1,0,0,0,1],!HL(t,j0,X0,J0,Rw))?!1:(Pw.crossVectors(nd,rd),t=[Pw.x,Pw.y,Pw.z],HL(t,j0,X0,J0,Rw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Tu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Tu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Cu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Cu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Cu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Cu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Cu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Cu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Cu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Cu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Cu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Cu=[new ie,new ie,new ie,new ie,new ie,new ie,new ie,new ie],Tu=new ie,W0=new Yl,j0=new ie,X0=new ie,J0=new ie,nd=new ie,rd=new ie,Cp=new ie,l1=new ie,Rw=new ie,Pw=new ie,Tp=new ie;function HL(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Tp.fromArray(n,s);const a=i.x*Math.abs(Tp.x)+i.y*Math.abs(Tp.y)+i.z*Math.abs(Tp.z),l=e.dot(Tp),u=t.dot(Tp),h=r.dot(Tp);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const dSe=new Yl,c1=new ie,zL=new ie;class ql{constructor(e=new ie,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):dSe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;c1.subVectors(e,this.center);const t=c1.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(c1,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(zL.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(c1.copy(e.center).add(zL)),this.expandByPoint(c1.copy(e.center).sub(zL))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ru=new ie,VL=new ie,Bw=new ie,id=new ie,WL=new ie,Lw=new ie,jL=new ie;class uM{constructor(e=new ie,t=new ie(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ru)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ru.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ru.copy(this.origin).addScaledVector(this.direction,t),Ru.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){VL.copy(e).add(t).multiplyScalar(.5),Bw.copy(t).sub(e).normalize(),id.copy(this.origin).sub(VL);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Bw),a=id.dot(this.direction),l=-id.dot(Bw),u=id.lengthSq(),h=Math.abs(1-o*o);let d,p,m,v;if(h>0)if(d=o*l-a,p=o*a-l,v=s*h,d>=0)if(p>=-v)if(p<=v){const S=1/h;d*=S,p*=S,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+u}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p<=-v?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u):p<=v?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(VL).addScaledVector(Bw,p),m}intersectSphere(e,t){Ru.subVectors(e.center,this.origin);const r=Ru.dot(this.direction),i=Ru.dot(Ru)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(r=(e.min.x-p.x)*u,i=(e.max.x-p.x)*u):(r=(e.max.x-p.x)*u,i=(e.min.x-p.x)*u),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Ru)!==null}intersectTriangle(e,t,r,i,s){WL.subVectors(t,e),Lw.subVectors(r,e),jL.crossVectors(WL,Lw);let o=this.direction.dot(jL),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;id.subVectors(this.origin,e);const l=a*this.direction.dot(Lw.crossVectors(id,Lw));if(l<0)return null;const u=a*this.direction.dot(WL.cross(id));if(u<0||l+u>o)return null;const h=-a*id.dot(jL);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class jt{constructor(){jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,s,o,a,l,u,h,d,p,m,v,S,M){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=h,g[10]=d,g[14]=p,g[3]=m,g[7]=v,g[11]=S,g[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new jt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/K0.setFromMatrixColumn(e,0).length(),s=1/K0.setFromMatrixColumn(e,1).length(),o=1/K0.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,v=a*h,S=a*d;t[0]=l*h,t[4]=-l*d,t[8]=u,t[1]=m+v*u,t[5]=p-S*u,t[9]=-a*l,t[2]=S-p*u,t[6]=v+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,v=u*h,S=u*d;t[0]=p+S*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-v,t[6]=S+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,v=u*h,S=u*d;t[0]=p-S*a,t[4]=-o*d,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*h,t[9]=S-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,v=a*h,S=a*d;t[0]=l*h,t[4]=v*u-m,t[8]=p*u+S,t[1]=l*d,t[5]=S*u+p,t[9]=m*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,v=a*l,S=a*u;t[0]=l*h,t[4]=S-p*d,t[8]=v*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=m*d+v,t[10]=p-S*d}else if(e.order==="XZY"){const p=o*l,m=o*u,v=a*l,S=a*u;t[0]=l*h,t[4]=-d,t[8]=u*h,t[1]=p*d+S,t[5]=o*h,t[9]=m*d-v,t[2]=v*d-m,t[6]=a*h,t[10]=S*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(fSe,e,pSe)}lookAt(e,t,r){const i=this.elements;return Fo.subVectors(e,t),Fo.lengthSq()===0&&(Fo.z=1),Fo.normalize(),sd.crossVectors(r,Fo),sd.lengthSq()===0&&(Math.abs(r.z)===1?Fo.x+=1e-4:Fo.z+=1e-4,Fo.normalize(),sd.crossVectors(r,Fo)),sd.normalize(),Iw.crossVectors(Fo,sd),i[0]=sd.x,i[4]=Iw.x,i[8]=Fo.x,i[1]=sd.y,i[5]=Iw.y,i[9]=Fo.y,i[2]=sd.z,i[6]=Iw.z,i[10]=Fo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],h=r[1],d=r[5],p=r[9],m=r[13],v=r[2],S=r[6],M=r[10],g=r[14],_=r[3],A=r[7],w=r[11],C=r[15],R=i[0],L=i[4],I=i[8],T=i[12],B=i[1],H=i[5],K=i[9],j=i[13],z=i[2],X=i[6],te=i[10],O=i[14],D=i[3],V=i[7],G=i[11],q=i[15];return s[0]=o*R+a*B+l*z+u*D,s[4]=o*L+a*H+l*X+u*V,s[8]=o*I+a*K+l*te+u*G,s[12]=o*T+a*j+l*O+u*q,s[1]=h*R+d*B+p*z+m*D,s[5]=h*L+d*H+p*X+m*V,s[9]=h*I+d*K+p*te+m*G,s[13]=h*T+d*j+p*O+m*q,s[2]=v*R+S*B+M*z+g*D,s[6]=v*L+S*H+M*X+g*V,s[10]=v*I+S*K+M*te+g*G,s[14]=v*T+S*j+M*O+g*q,s[3]=_*R+A*B+w*z+C*D,s[7]=_*L+A*H+w*X+C*V,s[11]=_*I+A*K+w*te+C*G,s[15]=_*T+A*j+w*O+C*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],d=e[6],p=e[10],m=e[14],v=e[3],S=e[7],M=e[11],g=e[15];return v*(+s*l*d-i*u*d-s*a*p+r*u*p+i*a*m-r*l*m)+S*(+t*l*m-t*u*p+s*o*p-i*o*m+i*u*h-s*l*h)+M*(+t*u*d-t*a*m-s*o*d+r*o*m+s*a*h-r*u*h)+g*(-i*a*h-t*l*d+t*a*p+i*o*d-r*o*p+r*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],m=e[11],v=e[12],S=e[13],M=e[14],g=e[15],_=d*M*u-S*p*u+S*l*m-a*M*m-d*l*g+a*p*g,A=v*p*u-h*M*u-v*l*m+o*M*m+h*l*g-o*p*g,w=h*S*u-v*d*u+v*a*m-o*S*m-h*a*g+o*d*g,C=v*d*l-h*S*l-v*a*p+o*S*p+h*a*M-o*d*M,R=t*_+r*A+i*w+s*C;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/R;return e[0]=_*L,e[1]=(S*p*s-d*M*s-S*i*m+r*M*m+d*i*g-r*p*g)*L,e[2]=(a*M*s-S*l*s+S*i*u-r*M*u-a*i*g+r*l*g)*L,e[3]=(d*l*s-a*p*s-d*i*u+r*p*u+a*i*m-r*l*m)*L,e[4]=A*L,e[5]=(h*M*s-v*p*s+v*i*m-t*M*m-h*i*g+t*p*g)*L,e[6]=(v*l*s-o*M*s-v*i*u+t*M*u+o*i*g-t*l*g)*L,e[7]=(o*p*s-h*l*s+h*i*u-t*p*u-o*i*m+t*l*m)*L,e[8]=w*L,e[9]=(v*d*s-h*S*s-v*r*m+t*S*m+h*r*g-t*d*g)*L,e[10]=(o*S*s-v*a*s+v*r*u-t*S*u-o*r*g+t*a*g)*L,e[11]=(h*a*s-o*d*s-h*r*u+t*d*u+o*r*m-t*a*m)*L,e[12]=C*L,e[13]=(h*S*i-v*d*i+v*r*p-t*S*p-h*r*M+t*d*M)*L,e[14]=(v*a*i-o*S*i-v*r*l+t*S*l+o*r*M-t*a*M)*L,e[15]=(o*d*i-h*a*i+h*r*l-t*d*l-o*r*p+t*a*p)*L,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,h*a+r,h*l-i*o,0,u*l-i*a,h*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,d=a+a,p=s*u,m=s*h,v=s*d,S=o*h,M=o*d,g=a*d,_=l*u,A=l*h,w=l*d,C=r.x,R=r.y,L=r.z;return i[0]=(1-(S+g))*C,i[1]=(m+w)*C,i[2]=(v-A)*C,i[3]=0,i[4]=(m-w)*R,i[5]=(1-(p+g))*R,i[6]=(M+_)*R,i[7]=0,i[8]=(v+A)*L,i[9]=(M-_)*L,i[10]=(1-(p+S))*L,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=K0.set(i[0],i[1],i[2]).length();const o=K0.set(i[4],i[5],i[6]).length(),a=K0.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],hl.copy(this);const u=1/s,h=1/o,d=1/a;return hl.elements[0]*=u,hl.elements[1]*=u,hl.elements[2]*=u,hl.elements[4]*=h,hl.elements[5]*=h,hl.elements[6]*=h,hl.elements[8]*=d,hl.elements[9]*=d,hl.elements[10]*=d,t.setFromRotationMatrix(hl),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){const a=this.elements,l=2*s/(t-e),u=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=u,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),u=1/(r-i),h=1/(o-s),d=(t+e)*l,p=(r+i)*u,m=(o+s)*h;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const K0=new ie,hl=new jt,fSe=new ie(0,0,0),pSe=new ie(1,1,1),sd=new ie,Iw=new ie,Fo=new ie,u5=new jt,h5=new is;class hM{constructor(e=0,t=0,r=0,i=hM.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],h=i[9],d=i[2],p=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(kr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-kr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(kr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-kr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(kr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-kr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return u5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(u5,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return h5.setFromEuler(this),this.setFromQuaternion(h5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}hM.DEFAULT_ORDER="XYZ";class Um{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let mSe=0;const d5=new ie,Y0=new is,Pu=new jt,Dw=new ie,u1=new ie,gSe=new ie,vSe=new is,f5=new ie(1,0,0),p5=new ie(0,1,0),m5=new ie(0,0,1),ySe={type:"added"},g5={type:"removed"};class En extends Th{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mSe++}),this.uuid=Ko(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=En.DEFAULT_UP.clone();const e=new ie,t=new hM,r=new is,i=new ie(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new jt},normalMatrix:{value:new dn}}),this.matrix=new jt,this.matrixWorld=new jt,this.matrixAutoUpdate=En.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=En.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Um,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Y0.setFromAxisAngle(e,t),this.quaternion.multiply(Y0),this}rotateOnWorldAxis(e,t){return Y0.setFromAxisAngle(e,t),this.quaternion.premultiply(Y0),this}rotateX(e){return this.rotateOnAxis(f5,e)}rotateY(e){return this.rotateOnAxis(p5,e)}rotateZ(e){return this.rotateOnAxis(m5,e)}translateOnAxis(e,t){return d5.copy(e).applyQuaternion(this.quaternion),this.position.add(d5.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(f5,e)}translateY(e){return this.translateOnAxis(p5,e)}translateZ(e){return this.translateOnAxis(m5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Pu.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Dw.copy(e):Dw.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),u1.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pu.lookAt(u1,Dw,this.up):Pu.lookAt(Dw,u1,this.up),this.quaternion.setFromRotationMatrix(Pu),i&&(Pu.extractRotation(i.matrixWorld),Y0.setFromRotationMatrix(Pu),this.quaternion.premultiply(Y0.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ySe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(g5)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(g5)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Pu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Pu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(u1,e,gSe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(u1,vSe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}En.DEFAULT_UP=new ie(0,1,0);En.DEFAULT_MATRIX_AUTO_UPDATE=!0;En.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const dl=new ie,Bu=new ie,XL=new ie,Lu=new ie,q0=new ie,Q0=new ie,v5=new ie,JL=new ie,KL=new ie,YL=new ie;let Fw=!1;class ro{constructor(e=new ie,t=new ie,r=new ie){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),dl.subVectors(e,t),i.cross(dl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){dl.subVectors(i,t),Bu.subVectors(r,t),XL.subVectors(e,t);const o=dl.dot(dl),a=dl.dot(Bu),l=dl.dot(XL),u=Bu.dot(Bu),h=Bu.dot(XL),d=o*u-a*a;if(d===0)return s.set(-2,-1,-1);const p=1/d,m=(u*l-a*h)*p,v=(o*h-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Lu),Lu.x>=0&&Lu.y>=0&&Lu.x+Lu.y<=1}static getUV(e,t,r,i,s,o,a,l){return Fw===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Fw=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Lu),l.setScalar(0),l.addScaledVector(s,Lu.x),l.addScaledVector(o,Lu.y),l.addScaledVector(a,Lu.z),l}static isFrontFacing(e,t,r,i){return dl.subVectors(r,t),Bu.subVectors(e,t),dl.cross(Bu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return dl.subVectors(this.c,this.b),Bu.subVectors(this.a,this.b),dl.cross(Bu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ro.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ro.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return Fw===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Fw=!0),ro.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return ro.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return ro.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ro.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;q0.subVectors(i,r),Q0.subVectors(s,r),JL.subVectors(e,r);const l=q0.dot(JL),u=Q0.dot(JL);if(l<=0&&u<=0)return t.copy(r);KL.subVectors(e,i);const h=q0.dot(KL),d=Q0.dot(KL);if(h>=0&&d<=h)return t.copy(i);const p=l*d-h*u;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(r).addScaledVector(q0,o);YL.subVectors(e,s);const m=q0.dot(YL),v=Q0.dot(YL);if(v>=0&&m<=v)return t.copy(s);const S=m*u-l*v;if(S<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(r).addScaledVector(Q0,a);const M=h*v-m*d;if(M<=0&&d-h>=0&&m-v>=0)return v5.subVectors(s,i),a=(d-h)/(d-h+(m-v)),t.copy(i).addScaledVector(v5,a);const g=1/(M+S+p);return o=S*g,a=p*g,t.copy(r).addScaledVector(q0,o).addScaledVector(Q0,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let xSe=0;class _i extends Th{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:xSe++}),this.uuid=Ko(),this.name="",this.type="Material",this.blending=Dm,this.side=Vc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=dk,this.blendDst=fk,this.blendEquation=em,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=TT,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=S$,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fC,this.stencilZFail=fC,this.stencilZPass=fC,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Dm&&(r.blending=this.blending),this.side!==Vc&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const C$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fl={h:0,s:0,l:0},Nw={h:0,s:0,l:0};function qL(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class yt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Zt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,wa.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=wa.workingColorSpace){return this.r=e,this.g=t,this.b=r,wa.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=wa.workingColorSpace){if(e=Sk(e,1),t=kr(t,0,1),r=kr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=qL(o,s,e+1/3),this.g=qL(o,s,e),this.b=qL(o,s,e-1/3)}return wa.toWorkingColorSpace(this,i),this}setStyle(e,t=Zt){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Zt){const r=C$[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ey(e.r),this.g=Ey(e.g),this.b=Ey(e.b),this}copyLinearToSRGB(e){return this.r=OL(e.r),this.g=OL(e.g),this.b=OL(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zt){return wa.fromWorkingColorSpace(vs.copy(this),e),Math.round(kr(vs.r*255,0,255))*65536+Math.round(kr(vs.g*255,0,255))*256+Math.round(kr(vs.b*255,0,255))}getHexString(e=Zt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=wa.workingColorSpace){wa.fromWorkingColorSpace(vs.copy(this),t);const r=vs.r,i=vs.g,s=vs.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=h<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=wa.workingColorSpace){return wa.fromWorkingColorSpace(vs.copy(this),t),e.r=vs.r,e.g=vs.g,e.b=vs.b,e}getStyle(e=Zt){wa.fromWorkingColorSpace(vs.copy(this),e);const t=vs.r,r=vs.g,i=vs.b;return e!==Zt?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(fl),fl.h+=e,fl.s+=t,fl.l+=r,this.setHSL(fl.h,fl.s,fl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(fl),e.getHSL(Nw);const r=pA(fl.h,Nw.h,t),i=pA(fl.s,Nw.s,t),s=pA(fl.l,Nw.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vs=new yt;yt.NAMES=C$;class Wo extends _i{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hu=_Se();function _Se(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function eo(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=kr(n,-65504,65504),Hu.floatView[0]=n;const e=Hu.uint32View[0],t=e>>23&511;return Hu.baseTable[t]+((e&8388607)>>Hu.shiftTable[t])}function F1(n){const e=n>>10;return Hu.uint32View[0]=Hu.mantissaTable[Hu.offsetTable[e]+(n&1023)]+Hu.exponentTable[e],Hu.floatView[0]}const ASe={toHalfFloat:eo,fromHalfFloat:F1},ri=new ie,Uw=new ze;class Tn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=ES,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Uw.fromBufferAttribute(this,t),Uw.applyMatrix3(e),this.setXY(t,Uw.x,Uw.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.applyMatrix3(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.applyMatrix4(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.applyNormalMatrix(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.transformDirection(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Vo(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Vo(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Vo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Vo(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array),s=sn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ES&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class SSe extends Tn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class MSe extends Tn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class ESe extends Tn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class wSe extends Tn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class wk extends Tn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class bSe extends Tn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class bk extends Tn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class CSe extends Tn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=F1(this.array[e*this.itemSize]);return this.normalized&&(t=Vo(t,this.array)),t}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize]=eo(t),this}getY(e){let t=F1(this.array[e*this.itemSize+1]);return this.normalized&&(t=Vo(t,this.array)),t}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+1]=eo(t),this}getZ(e){let t=F1(this.array[e*this.itemSize+2]);return this.normalized&&(t=Vo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+2]=eo(t),this}getW(e){let t=F1(this.array[e*this.itemSize+3]);return this.normalized&&(t=Vo(t,this.array)),t}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.array[e*this.itemSize+3]=eo(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array)),this.array[e+0]=eo(t),this.array[e+1]=eo(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array)),this.array[e+0]=eo(t),this.array[e+1]=eo(r),this.array[e+2]=eo(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array),s=sn(s,this.array)),this.array[e+0]=eo(t),this.array[e+1]=eo(r),this.array[e+2]=eo(i),this.array[e+3]=eo(s),this}}class Tt extends Tn{constructor(e,t,r){super(new Float32Array(e),t,r)}}class TSe extends Tn{constructor(e,t,r){super(new Float64Array(e),t,r)}}let RSe=0;const Sa=new jt,QL=new En,Z0=new ie,No=new Yl,h1=new Yl,Di=new ie;class en extends Th{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:RSe++}),this.uuid=Ko(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(b$(e)?bk:wk)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new dn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Sa.makeRotationFromQuaternion(e),this.applyMatrix4(Sa),this}rotateX(e){return Sa.makeRotationX(e),this.applyMatrix4(Sa),this}rotateY(e){return Sa.makeRotationY(e),this.applyMatrix4(Sa),this}rotateZ(e){return Sa.makeRotationZ(e),this.applyMatrix4(Sa),this}translate(e,t,r){return Sa.makeTranslation(e,t,r),this.applyMatrix4(Sa),this}scale(e,t,r){return Sa.makeScale(e,t,r),this.applyMatrix4(Sa),this}lookAt(e){return QL.lookAt(e),QL.updateMatrix(),this.applyMatrix4(QL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Z0).negate(),this.translate(Z0.x,Z0.y,Z0.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Tt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ie(-1/0,-1/0,-1/0),new ie(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];No.setFromBufferAttribute(s),this.morphTargetsRelative?(Di.addVectors(this.boundingBox.min,No.min),this.boundingBox.expandByPoint(Di),Di.addVectors(this.boundingBox.max,No.max),this.boundingBox.expandByPoint(Di)):(this.boundingBox.expandByPoint(No.min),this.boundingBox.expandByPoint(No.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ql);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ie,1/0);return}if(e){const r=this.boundingSphere.center;if(No.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];h1.setFromBufferAttribute(a),this.morphTargetsRelative?(Di.addVectors(No.min,h1.min),No.expandByPoint(Di),Di.addVectors(No.max,h1.max),No.expandByPoint(Di)):(No.expandByPoint(h1.min),No.expandByPoint(h1.max))}No.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Di.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Di));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)Di.fromBufferAttribute(a,u),l&&(Z0.fromBufferAttribute(e,u),Di.add(Z0)),i=Math.max(i,r.distanceToSquared(Di))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Tn(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],h=[];for(let B=0;B<a;B++)u[B]=new ie,h[B]=new ie;const d=new ie,p=new ie,m=new ie,v=new ze,S=new ze,M=new ze,g=new ie,_=new ie;function A(B,H,K){d.fromArray(i,B*3),p.fromArray(i,H*3),m.fromArray(i,K*3),v.fromArray(o,B*2),S.fromArray(o,H*2),M.fromArray(o,K*2),p.sub(d),m.sub(d),S.sub(v),M.sub(v);const j=1/(S.x*M.y-M.x*S.y);isFinite(j)&&(g.copy(p).multiplyScalar(M.y).addScaledVector(m,-S.y).multiplyScalar(j),_.copy(m).multiplyScalar(S.x).addScaledVector(p,-M.x).multiplyScalar(j),u[B].add(g),u[H].add(g),u[K].add(g),h[B].add(_),h[H].add(_),h[K].add(_))}let w=this.groups;w.length===0&&(w=[{start:0,count:r.length}]);for(let B=0,H=w.length;B<H;++B){const K=w[B],j=K.start,z=K.count;for(let X=j,te=j+z;X<te;X+=3)A(r[X+0],r[X+1],r[X+2])}const C=new ie,R=new ie,L=new ie,I=new ie;function T(B){L.fromArray(s,B*3),I.copy(L);const H=u[B];C.copy(H),C.sub(L.multiplyScalar(L.dot(H))).normalize(),R.crossVectors(I,H);const j=R.dot(h[B])<0?-1:1;l[B*4]=C.x,l[B*4+1]=C.y,l[B*4+2]=C.z,l[B*4+3]=j}for(let B=0,H=w.length;B<H;++B){const K=w[B],j=K.start,z=K.count;for(let X=j,te=j+z;X<te;X+=3)T(r[X+0]),T(r[X+1]),T(r[X+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Tn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new ie,s=new ie,o=new ie,a=new ie,l=new ie,u=new ie,h=new ie,d=new ie;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),S=e.getX(p+1),M=e.getX(p+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,S),o.fromBufferAttribute(t,M),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,S),u.fromBufferAttribute(r,M),a.add(h),l.add(h),u.add(h),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(S,l.x,l.y,l.z),r.setXYZ(M,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)i.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(i,s),h.cross(d),r.setXYZ(p+0,h.x,h.y,h.z),r.setXYZ(p+1,h.x,h.y,h.z),r.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Di.fromBufferAttribute(e,t),Di.normalize(),e.setXYZ(t,Di.x,Di.y,Di.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,d=a.normalized,p=new u.constructor(l.length*h);let m=0,v=0;for(let S=0,M=l.length;S<M;S++){a.isInterleavedBufferAttribute?m=l[S]*a.data.stride+a.offset:m=l[S]*h;for(let g=0;g<h;g++)p[v++]=u[m++]}return new Tn(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new en,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,d=u.length;h<d;h++){const p=u[h],m=e(p,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d];h.push(m.toJSON(e.data))}h.length>0&&(i[l]=h,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const h=i[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],d=s[u];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const y5=new jt,Cc=new uM,Ow=new ql,x5=new ie,$0=new ie,ev=new ie,tv=new ie,ZL=new ie,kw=new ie,Gw=new ze,Hw=new ze,zw=new ze,_5=new ie,A5=new ie,S5=new ie,Vw=new ie,Ww=new ie;class Oi extends En{constructor(e=new en,t=new Wo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){kw.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],d=s[l];h!==0&&(ZL.fromBufferAttribute(d,e),o?kw.addScaledVector(ZL,h):kw.addScaledVector(ZL.sub(t),h))}t.add(kw)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Ow.copy(r.boundingSphere),Ow.applyMatrix4(s),Cc.copy(e.ray).recast(e.near),!(Ow.containsPoint(Cc.origin)===!1&&(Cc.intersectSphere(Ow,x5)===null||Cc.origin.distanceToSquared(x5)>(e.far-e.near)**2))&&(y5.copy(s).invert(),Cc.copy(e.ray).applyMatrix4(y5),!(r.boundingBox!==null&&Cc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t)))}_computeIntersections(e,t){let r;const i=this.geometry,s=this.material,o=i.index,a=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,h=i.attributes.normal,d=i.groups,p=i.drawRange;if(o!==null)if(Array.isArray(s))for(let m=0,v=d.length;m<v;m++){const S=d[m],M=s[S.materialIndex],g=Math.max(S.start,p.start),_=Math.min(o.count,Math.min(S.start+S.count,p.start+p.count));for(let A=g,w=_;A<w;A+=3){const C=o.getX(A),R=o.getX(A+1),L=o.getX(A+2);r=jw(this,M,e,Cc,l,u,h,C,R,L),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const m=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let S=m,M=v;S<M;S+=3){const g=o.getX(S),_=o.getX(S+1),A=o.getX(S+2);r=jw(this,s,e,Cc,l,u,h,g,_,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}else if(a!==void 0)if(Array.isArray(s))for(let m=0,v=d.length;m<v;m++){const S=d[m],M=s[S.materialIndex],g=Math.max(S.start,p.start),_=Math.min(a.count,Math.min(S.start+S.count,p.start+p.count));for(let A=g,w=_;A<w;A+=3){const C=A,R=A+1,L=A+2;r=jw(this,M,e,Cc,l,u,h,C,R,L),r&&(r.faceIndex=Math.floor(A/3),r.face.materialIndex=S.materialIndex,t.push(r))}}else{const m=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let S=m,M=v;S<M;S+=3){const g=S,_=S+1,A=S+2;r=jw(this,s,e,Cc,l,u,h,g,_,A),r&&(r.faceIndex=Math.floor(S/3),t.push(r))}}}}function PSe(n,e,t,r,i,s,o,a){let l;if(e.side===Hs?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Vc,a),l===null)return null;Ww.copy(a),Ww.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Ww);return u<t.near||u>t.far?null:{distance:u,point:Ww.clone(),object:n}}function jw(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,$0),n.getVertexPosition(l,ev),n.getVertexPosition(u,tv);const h=PSe(n,e,t,r,$0,ev,tv,Vw);if(h){i&&(Gw.fromBufferAttribute(i,a),Hw.fromBufferAttribute(i,l),zw.fromBufferAttribute(i,u),h.uv=ro.getInterpolation(Vw,$0,ev,tv,Gw,Hw,zw,new ze)),s&&(Gw.fromBufferAttribute(s,a),Hw.fromBufferAttribute(s,l),zw.fromBufferAttribute(s,u),h.uv1=ro.getInterpolation(Vw,$0,ev,tv,Gw,Hw,zw,new ze),h.uv2=h.uv1),o&&(_5.fromBufferAttribute(o,a),A5.fromBufferAttribute(o,l),S5.fromBufferAttribute(o,u),h.normal=ro.getInterpolation(Vw,$0,ev,tv,_5,A5,S5,new ie),h.normal.dot(r.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new ie,materialIndex:0};ro.getNormal($0,ev,tv,d.normal),h.face=d}return h}class If extends en{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],d=[];let p=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Tt(u,3)),this.setAttribute("normal",new Tt(h,3)),this.setAttribute("uv",new Tt(d,2));function v(S,M,g,_,A,w,C,R,L,I,T){const B=w/L,H=C/I,K=w/2,j=C/2,z=R/2,X=L+1,te=I+1;let O=0,D=0;const V=new ie;for(let G=0;G<te;G++){const q=G*H-j;for(let re=0;re<X;re++){const Y=re*B-K;V[S]=Y*_,V[M]=q*A,V[g]=z,u.push(V.x,V.y,V.z),V[S]=0,V[M]=0,V[g]=R>0?1:-1,h.push(V.x,V.y,V.z),d.push(re/L),d.push(1-G/I),O+=1}}for(let G=0;G<I;G++)for(let q=0;q<L;q++){const re=p+q+X*G,Y=p+q+X*(G+1),ae=p+(q+1)+X*(G+1),Se=p+(q+1)+X*G;l.push(re,Y,Se),l.push(Y,ae,Se),D+=6}a.addGroup(m,D,T),m+=D,p+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new If(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function tx(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Is(n){const e={};for(let t=0;t<n.length;t++){const r=tx(n[t]);for(const i in r)e[i]=r[i]}return e}function BSe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function T$(n){return n.getRenderTarget()===null?n.outputColorSpace:Gl}const R$={clone:tx,merge:Is};var LSe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ISe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jc extends _i{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=LSe,this.fragmentShader=ISe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tx(e.uniforms),this.uniformsGroups=BSe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class dM extends En{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new jt,this.projectionMatrix=new jt,this.projectionMatrixInverse=new jt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class gi extends dM{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=ex*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Nm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ex*2*Math.atan(Math.tan(Nm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Nm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const nv=-90,rv=1;class P$ extends En{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new gi(nv,rv,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new gi(nv,rv,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new gi(nv,rv,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new gi(nv,rv,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new gi(nv,rv,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new gi(nv,rv,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,u]=this.children,h=e.getRenderTarget(),d=e.toneMapping,p=e.xr.enabled;e.toneMapping=Dl,e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=m,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(h),e.toneMapping=d,e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class fM extends br{constructor(e,t,r,i,s,o,a,l,u,h){e=e!==void 0?e:[],t=t!==void 0?t:mf,super(e,t,r,i,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class B$ extends Hl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(mA("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===oh?Zt:Zd),this.texture=new fM(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:yr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new If(5,5,5),s=new jc({name:"CubemapFromEquirect",uniforms:tx(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Hs,blending:sh});s.uniforms.tEquirect.value=t;const o=new Oi(i,s),a=t.minFilter;return t.minFilter===Wc&&(t.minFilter=yr),new P$(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const $L=new ie,DSe=new ie,FSe=new dn;class gd{constructor(e=new ie(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=$L.subVectors(r,t).cross(DSe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta($L),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||FSe.getNormalMatrix(e),i=this.coplanarPoint($L).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Rp=new ql,Xw=new ie;class eP{constructor(e=new gd,t=new gd,r=new gd,i=new gd,s=new gd,o=new gd){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],h=r[6],d=r[7],p=r[8],m=r[9],v=r[10],S=r[11],M=r[12],g=r[13],_=r[14],A=r[15];return t[0].setComponents(a-i,d-l,S-p,A-M).normalize(),t[1].setComponents(a+i,d+l,S+p,A+M).normalize(),t[2].setComponents(a+s,d+u,S+m,A+g).normalize(),t[3].setComponents(a-s,d-u,S-m,A-g).normalize(),t[4].setComponents(a-o,d-h,S-v,A-_).normalize(),t[5].setComponents(a+o,d+h,S+v,A+_).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Rp.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Rp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Rp)}intersectsSprite(e){return Rp.center.set(0,0,0),Rp.radius=.7071067811865476,Rp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Rp)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Xw.x=i.normal.x>0?e.max.x:e.min.x,Xw.y=i.normal.y>0?e.max.y:e.min.y,Xw.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Xw)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function L$(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function NSe(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,h){const d=u.array,p=u.usage,m=n.createBuffer();n.bindBuffer(h,m),n.bufferData(h,d,p),u.onUploadCallback();let v;if(d instanceof Float32Array)v=n.FLOAT;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)v=n.SHORT;else if(d instanceof Uint32Array)v=n.UNSIGNED_INT;else if(d instanceof Int32Array)v=n.INT;else if(d instanceof Int8Array)v=n.BYTE;else if(d instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:m,type:v,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,h,d){const p=h.array,m=h.updateRange;n.bindBuffer(d,u),m.count===-1?n.bufferSubData(d,0,p):(t?n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(d,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),h.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h&&(n.deleteBuffer(h.buffer),r.delete(u))}function l(u,h){if(u.isGLBufferAttribute){const p=r.get(u);(!p||p.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=r.get(u);d===void 0?r.set(u,i(u,h)):d.version<u.version&&(s(d.buffer,u,h),d.version=u.version)}return{get:o,remove:a,update:l}}class _x extends en{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,h=l+1,d=e/a,p=t/l,m=[],v=[],S=[],M=[];for(let g=0;g<h;g++){const _=g*p-o;for(let A=0;A<u;A++){const w=A*d-s;v.push(w,-_,0),S.push(0,0,1),M.push(A/a),M.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const A=_+u*g,w=_+u*(g+1),C=_+1+u*(g+1),R=_+1+u*g;m.push(A,w,R),m.push(w,C,R)}this.setIndex(m),this.setAttribute("position",new Tt(v,3)),this.setAttribute("normal",new Tt(S,3)),this.setAttribute("uv",new Tt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _x(e.width,e.height,e.widthSegments,e.heightSegments)}}var USe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,OSe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kSe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,GSe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,HSe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,zSe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,VSe="vec3 transformed = vec3( position );",WSe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,jSe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,XSe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,JSe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,KSe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,YSe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,qSe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,QSe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ZSe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$Se=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,eMe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,tMe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,nMe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,rMe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,iMe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,sMe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,oMe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,aMe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,lMe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,cMe="gl_FragColor = linearToOutputTexel( gl_FragColor );",uMe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,hMe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,dMe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,fMe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,pMe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,mMe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,gMe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,vMe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,yMe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,xMe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,_Me=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,AMe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,SMe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,MMe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,EMe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,wMe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,bMe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,CMe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,TMe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,RMe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,PMe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,BMe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,LMe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,IMe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,DMe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,FMe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,NMe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,UMe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,OMe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,kMe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,GMe=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,HMe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,zMe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,VMe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WMe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,jMe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,XMe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,JMe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,KMe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,YMe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,qMe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,QMe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ZMe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$Me=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eEe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,tEe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,nEe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,rEe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,iEe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,sEe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,oEe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,aEe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,lEe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cEe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,uEe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,hEe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,dEe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,fEe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,pEe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,mEe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,gEe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,vEe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yEe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,xEe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,_Ee=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,AEe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,SEe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,MEe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,EEe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,wEe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,bEe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,CEe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,TEe=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,REe=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,PEe=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,BEe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const LEe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,IEe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,DEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,FEe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,NEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,UEe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,OEe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,kEe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,GEe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,HEe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,zEe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,VEe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,WEe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jEe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,XEe=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,JEe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KEe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YEe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qEe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,QEe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZEe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$Ee=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ewe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,twe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nwe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,rwe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iwe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,swe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,owe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,awe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lwe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cwe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,uwe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hwe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,nn={alphamap_fragment:USe,alphamap_pars_fragment:OSe,alphatest_fragment:kSe,alphatest_pars_fragment:GSe,aomap_fragment:HSe,aomap_pars_fragment:zSe,begin_vertex:VSe,beginnormal_vertex:WSe,bsdfs:jSe,iridescence_fragment:XSe,bumpmap_pars_fragment:JSe,clipping_planes_fragment:KSe,clipping_planes_pars_fragment:YSe,clipping_planes_pars_vertex:qSe,clipping_planes_vertex:QSe,color_fragment:ZSe,color_pars_fragment:$Se,color_pars_vertex:eMe,color_vertex:tMe,common:nMe,cube_uv_reflection_fragment:rMe,defaultnormal_vertex:iMe,displacementmap_pars_vertex:sMe,displacementmap_vertex:oMe,emissivemap_fragment:aMe,emissivemap_pars_fragment:lMe,encodings_fragment:cMe,encodings_pars_fragment:uMe,envmap_fragment:hMe,envmap_common_pars_fragment:dMe,envmap_pars_fragment:fMe,envmap_pars_vertex:pMe,envmap_physical_pars_fragment:bMe,envmap_vertex:mMe,fog_vertex:gMe,fog_pars_vertex:vMe,fog_fragment:yMe,fog_pars_fragment:xMe,gradientmap_pars_fragment:_Me,lightmap_fragment:AMe,lightmap_pars_fragment:SMe,lights_lambert_fragment:MMe,lights_lambert_pars_fragment:EMe,lights_pars_begin:wMe,lights_toon_fragment:CMe,lights_toon_pars_fragment:TMe,lights_phong_fragment:RMe,lights_phong_pars_fragment:PMe,lights_physical_fragment:BMe,lights_physical_pars_fragment:LMe,lights_fragment_begin:IMe,lights_fragment_maps:DMe,lights_fragment_end:FMe,logdepthbuf_fragment:NMe,logdepthbuf_pars_fragment:UMe,logdepthbuf_pars_vertex:OMe,logdepthbuf_vertex:kMe,map_fragment:GMe,map_pars_fragment:HMe,map_particle_fragment:zMe,map_particle_pars_fragment:VMe,metalnessmap_fragment:WMe,metalnessmap_pars_fragment:jMe,morphcolor_vertex:XMe,morphnormal_vertex:JMe,morphtarget_pars_vertex:KMe,morphtarget_vertex:YMe,normal_fragment_begin:qMe,normal_fragment_maps:QMe,normal_pars_fragment:ZMe,normal_pars_vertex:$Me,normal_vertex:eEe,normalmap_pars_fragment:tEe,clearcoat_normal_fragment_begin:nEe,clearcoat_normal_fragment_maps:rEe,clearcoat_pars_fragment:iEe,iridescence_pars_fragment:sEe,output_fragment:oEe,packing:aEe,premultiplied_alpha_fragment:lEe,project_vertex:cEe,dithering_fragment:uEe,dithering_pars_fragment:hEe,roughnessmap_fragment:dEe,roughnessmap_pars_fragment:fEe,shadowmap_pars_fragment:pEe,shadowmap_pars_vertex:mEe,shadowmap_vertex:gEe,shadowmask_pars_fragment:vEe,skinbase_vertex:yEe,skinning_pars_vertex:xEe,skinning_vertex:_Ee,skinnormal_vertex:AEe,specularmap_fragment:SEe,specularmap_pars_fragment:MEe,tonemapping_fragment:EEe,tonemapping_pars_fragment:wEe,transmission_fragment:bEe,transmission_pars_fragment:CEe,uv_pars_fragment:TEe,uv_pars_vertex:REe,uv_vertex:PEe,worldpos_vertex:BEe,background_vert:LEe,background_frag:IEe,backgroundCube_vert:DEe,backgroundCube_frag:FEe,cube_vert:NEe,cube_frag:UEe,depth_vert:OEe,depth_frag:kEe,distanceRGBA_vert:GEe,distanceRGBA_frag:HEe,equirect_vert:zEe,equirect_frag:VEe,linedashed_vert:WEe,linedashed_frag:jEe,meshbasic_vert:XEe,meshbasic_frag:JEe,meshlambert_vert:KEe,meshlambert_frag:YEe,meshmatcap_vert:qEe,meshmatcap_frag:QEe,meshnormal_vert:ZEe,meshnormal_frag:$Ee,meshphong_vert:ewe,meshphong_frag:twe,meshphysical_vert:nwe,meshphysical_frag:rwe,meshtoon_vert:iwe,meshtoon_frag:swe,points_vert:owe,points_frag:awe,shadow_vert:lwe,shadow_frag:cwe,sprite_vert:uwe,sprite_frag:hwe},lt={common:{diffuse:{value:new yt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new dn},alphaMap:{value:null},alphaMapTransform:{value:new dn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new dn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new dn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new dn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new dn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new dn},normalScale:{value:new ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new dn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new dn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new dn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new dn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new dn}},sprite:{diffuse:{value:new yt(16777215)},opacity:{value:1},center:{value:new ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new dn},alphaMap:{value:null},alphaTest:{value:0}}},wl={basic:{uniforms:Is([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:Is([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new yt(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:Is([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new yt(0)},specular:{value:new yt(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:Is([lt.common,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.roughnessmap,lt.metalnessmap,lt.fog,lt.lights,{emissive:{value:new yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:Is([lt.common,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.gradientmap,lt.fog,lt.lights,{emissive:{value:new yt(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:Is([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:Is([lt.points,lt.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:Is([lt.common,lt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:Is([lt.common,lt.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:Is([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:Is([lt.sprite,lt.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new dn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:Is([lt.common,lt.displacementmap,{referencePosition:{value:new ie},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:Is([lt.lights,lt.fog,{color:{value:new yt(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};wl.physical={uniforms:Is([wl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new dn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new dn},clearcoatNormalScale:{value:new ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new dn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new dn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new dn},sheen:{value:0},sheenColor:{value:new yt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new dn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new dn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new dn},transmissionSamplerSize:{value:new ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new dn},attenuationDistance:{value:0},attenuationColor:{value:new yt(0)},specularColor:{value:new yt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new dn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new dn}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const Jw={r:0,b:0,g:0};function dwe(n,e,t,r,i,s,o){const a=new yt(0);let l=s===!0?0:1,u,h,d=null,p=0,m=null;function v(M,g){let _=!1,A=g.isScene===!0?g.background:null;switch(A&&A.isTexture&&(A=(g.backgroundBlurriness>0?t:e).get(A)),A===null?S(a,l):A&&A.isColor&&(S(A,1),_=!0),n.xr.getEnvironmentBlendMode()){case"opaque":_=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),_=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),_=!0;break}(n.autoClear||_)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),A&&(A.isCubeTexture||A.mapping===xx)?(h===void 0&&(h=new Oi(new If(1,1,1),new jc({name:"BackgroundCubeMaterial",uniforms:tx(wl.backgroundCube.uniforms),vertexShader:wl.backgroundCube.vertexShader,fragmentShader:wl.backgroundCube.fragmentShader,side:Hs,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(R,L,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=A,h.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=A.colorSpace!==Zt,(d!==A||p!==A.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=A,p=A.version,m=n.toneMapping),h.layers.enableAll(),M.unshift(h,h.geometry,h.material,0,0,null)):A&&A.isTexture&&(u===void 0&&(u=new Oi(new _x(2,2),new jc({name:"BackgroundMaterial",uniforms:tx(wl.background.uniforms),vertexShader:wl.background.vertexShader,fragmentShader:wl.background.fragmentShader,side:Vc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=A,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=A.colorSpace!==Zt,A.matrixAutoUpdate===!0&&A.updateMatrix(),u.material.uniforms.uvTransform.value.copy(A.matrix),(d!==A||p!==A.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=A,p=A.version,m=n.toneMapping),u.layers.enableAll(),M.unshift(u,u.geometry,u.material,0,0,null))}function S(M,g){M.getRGB(Jw,T$(n)),r.buffers.color.setClear(Jw.r,Jw.g,Jw.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(M,g=1){a.set(M),l=g,S(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,S(a,l)},render:v}}function fwe(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=M(null);let u=l,h=!1;function d(z,X,te,O,D){let V=!1;if(o){const G=S(O,te,X);u!==G&&(u=G,m(u.object)),V=g(z,O,te,D),V&&_(z,O,te,D)}else{const G=X.wireframe===!0;(u.geometry!==O.id||u.program!==te.id||u.wireframe!==G)&&(u.geometry=O.id,u.program=te.id,u.wireframe=G,V=!0)}D!==null&&t.update(D,n.ELEMENT_ARRAY_BUFFER),(V||h)&&(h=!1,I(z,X,te,O),D!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(D).buffer))}function p(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(z){return r.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function v(z){return r.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function S(z,X,te){const O=te.wireframe===!0;let D=a[z.id];D===void 0&&(D={},a[z.id]=D);let V=D[X.id];V===void 0&&(V={},D[X.id]=V);let G=V[O];return G===void 0&&(G=M(p()),V[O]=G),G}function M(z){const X=[],te=[],O=[];for(let D=0;D<i;D++)X[D]=0,te[D]=0,O[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:te,attributeDivisors:O,object:z,attributes:{},index:null}}function g(z,X,te,O){const D=u.attributes,V=X.attributes;let G=0;const q=te.getAttributes();for(const re in q)if(q[re].location>=0){const ae=D[re];let Se=V[re];if(Se===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(Se=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(Se=z.instanceColor)),ae===void 0||ae.attribute!==Se||Se&&ae.data!==Se.data)return!0;G++}return u.attributesNum!==G||u.index!==O}function _(z,X,te,O){const D={},V=X.attributes;let G=0;const q=te.getAttributes();for(const re in q)if(q[re].location>=0){let ae=V[re];ae===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(ae=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(ae=z.instanceColor));const Se={};Se.attribute=ae,ae&&ae.data&&(Se.data=ae.data),D[re]=Se,G++}u.attributes=D,u.attributesNum=G,u.index=O}function A(){const z=u.newAttributes;for(let X=0,te=z.length;X<te;X++)z[X]=0}function w(z){C(z,0)}function C(z,X){const te=u.newAttributes,O=u.enabledAttributes,D=u.attributeDivisors;te[z]=1,O[z]===0&&(n.enableVertexAttribArray(z),O[z]=1),D[z]!==X&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,X),D[z]=X)}function R(){const z=u.newAttributes,X=u.enabledAttributes;for(let te=0,O=X.length;te<O;te++)X[te]!==z[te]&&(n.disableVertexAttribArray(te),X[te]=0)}function L(z,X,te,O,D,V){r.isWebGL2===!0&&(te===n.INT||te===n.UNSIGNED_INT)?n.vertexAttribIPointer(z,X,te,D,V):n.vertexAttribPointer(z,X,te,O,D,V)}function I(z,X,te,O){if(r.isWebGL2===!1&&(z.isInstancedMesh||O.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const D=O.attributes,V=te.getAttributes(),G=X.defaultAttributeValues;for(const q in V){const re=V[q];if(re.location>=0){let Y=D[q];if(Y===void 0&&(q==="instanceMatrix"&&z.instanceMatrix&&(Y=z.instanceMatrix),q==="instanceColor"&&z.instanceColor&&(Y=z.instanceColor)),Y!==void 0){const ae=Y.normalized,Se=Y.itemSize,ve=t.get(Y);if(ve===void 0)continue;const W=ve.buffer,Xe=ve.type,Ne=ve.bytesPerElement;if(Y.isInterleavedBufferAttribute){const ye=Y.data,me=ye.stride,pe=Y.offset;if(ye.isInstancedInterleavedBuffer){for(let le=0;le<re.locationSize;le++)C(re.location+le,ye.meshPerAttribute);z.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let le=0;le<re.locationSize;le++)w(re.location+le);n.bindBuffer(n.ARRAY_BUFFER,W);for(let le=0;le<re.locationSize;le++)L(re.location+le,Se/re.locationSize,Xe,ae,me*Ne,(pe+Se/re.locationSize*le)*Ne)}else{if(Y.isInstancedBufferAttribute){for(let ye=0;ye<re.locationSize;ye++)C(re.location+ye,Y.meshPerAttribute);z.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let ye=0;ye<re.locationSize;ye++)w(re.location+ye);n.bindBuffer(n.ARRAY_BUFFER,W);for(let ye=0;ye<re.locationSize;ye++)L(re.location+ye,Se/re.locationSize,Xe,ae,Se*Ne,Se/re.locationSize*ye*Ne)}}else if(G!==void 0){const ae=G[q];if(ae!==void 0)switch(ae.length){case 2:n.vertexAttrib2fv(re.location,ae);break;case 3:n.vertexAttrib3fv(re.location,ae);break;case 4:n.vertexAttrib4fv(re.location,ae);break;default:n.vertexAttrib1fv(re.location,ae)}}}}R()}function T(){K();for(const z in a){const X=a[z];for(const te in X){const O=X[te];for(const D in O)v(O[D].object),delete O[D];delete X[te]}delete a[z]}}function B(z){if(a[z.id]===void 0)return;const X=a[z.id];for(const te in X){const O=X[te];for(const D in O)v(O[D].object),delete O[D];delete X[te]}delete a[z.id]}function H(z){for(const X in a){const te=a[X];if(te[z.id]===void 0)continue;const O=te[z.id];for(const D in O)v(O[D].object),delete O[D];delete te[z.id]}}function K(){j(),h=!0,u!==l&&(u=l,m(u.object))}function j(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:K,resetDefaultState:j,dispose:T,releaseStatesOfGeometry:B,releaseStatesOfProgram:H,initAttributes:A,enableAttribute:w,disableUnusedAttributes:R}}function pwe(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,h){n.drawArrays(s,u,h),t.update(h,s,1)}function l(u,h,d){if(d===0)return;let p,m;if(i)p=n,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,u,h,d),t.update(h,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function mwe(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const L=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(L.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(L){if(L==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";L="mediump"}return L==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),S=n.getParameter(n.MAX_VERTEX_ATTRIBS),M=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),A=p>0,w=o||e.has("OES_texture_float"),C=A&&w,R=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:S,maxVertexUniforms:M,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:A,floatFragmentTextures:w,floatVertexTextures:C,maxSamples:R}}function gwe(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new gd,a=new dn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const v=d.clippingPlanes,S=d.clipIntersection,M=d.clipShadows,g=n.get(d);if(!i||v===null||v.length===0||s&&!M)s?h(null):u();else{const _=s?0:r,A=_*4;let w=g.clippingState||null;l.value=w,w=h(v,p,A,m);for(let C=0;C!==A;++C)w[C]=t[C];g.clippingState=w,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function h(d,p,m,v){const S=d!==null?d.length:0;let M=null;if(S!==0){if(M=l.value,v!==!0||M===null){const g=m+S*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(M===null||M.length<g)&&(M=new Float32Array(g));for(let A=0,w=m;A!==S;++A,w+=4)o.copy(d[A]).applyMatrix4(_,a),o.normal.toArray(M,w),M[w+3]=o.constant}l.value=M,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,M}}function vwe(n){let e=new WeakMap;function t(o,a){return a===_S?o.mapping=mf:a===AS&&(o.mapping=gf),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===_S||a===AS)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new B$(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Ax extends dM{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Zv=4,M5=[.125,.215,.35,.446,.526,.582],tm=20,e2=new Ax,E5=new yt;let t2=null;const Jp=(1+Math.sqrt(5))/2,iv=1/Jp,w5=[new ie(1,1,1),new ie(-1,1,1),new ie(1,1,-1),new ie(-1,1,-1),new ie(0,Jp,iv),new ie(0,Jp,-iv),new ie(iv,0,Jp),new ie(-iv,0,Jp),new ie(Jp,iv,0),new ie(-Jp,iv,0)];class h3{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){t2=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=T5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=C5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(t2),e.scissorTest=!1,Kw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===mf||e.mapping===gf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),t2=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:yr,minFilter:yr,generateMipmaps:!1,type:Zy,format:so,colorSpace:Gl,depthBuffer:!1},i=b5(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=b5(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ywe(s)),this._blurMaterial=xwe(s,e,t)}return i}_compileMaterial(e){const t=new Oi(this._lodPlanes[0],e);this._renderer.compile(t,e2)}_sceneToCubeUV(e,t,r,i){const a=new gi(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(E5),h.toneMapping=Dl,h.autoClear=!1;const m=new Wo({name:"PMREM.Background",side:Hs,depthWrite:!1,depthTest:!1}),v=new Oi(new If,m);let S=!1;const M=e.background;M?M.isColor&&(m.color.copy(M),e.background=null,S=!0):(m.color.copy(E5),S=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):_===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const A=this._cubeSize;Kw(i,_*A,g>2?A:0,A,A),h.setRenderTarget(i),S&&h.render(v,a),h.render(e,a)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=M}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===mf||e.mapping===gf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=T5()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=C5());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Oi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Kw(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,e2)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=w5[(i-1)%w5.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new Oi(this._lodPlanes[i],u),p=u.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*tm-1),S=s/v,M=isFinite(s)?1+Math.floor(h*S):tm;M>tm&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${tm}`);const g=[];let _=0;for(let L=0;L<tm;++L){const I=L/S,T=Math.exp(-I*I/2);g.push(T),L===0?_+=T:L<M&&(_+=2*T)}for(let L=0;L<g.length;L++)g[L]=g[L]/_;p.envMap.value=e.texture,p.samples.value=M,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:A}=this;p.dTheta.value=v,p.mipInt.value=A-r;const w=this._sizeLods[i],C=3*w*(i>A-Zv?i-A+Zv:0),R=4*(this._cubeSize-w);Kw(t,C,R,3*w,2*w),l.setRenderTarget(t),l.render(d,e2)}}function ywe(n){const e=[],t=[],r=[];let i=n;const s=n-Zv+1+M5.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Zv?l=M5[o-n+Zv-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),h=-u,d=1+u,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,v=6,S=3,M=2,g=1,_=new Float32Array(S*v*m),A=new Float32Array(M*v*m),w=new Float32Array(g*v*m);for(let R=0;R<m;R++){const L=R%3*2/3-1,I=R>2?0:-1,T=[L,I,0,L+2/3,I,0,L+2/3,I+1,0,L,I,0,L+2/3,I+1,0,L,I+1,0];_.set(T,S*v*R),A.set(p,M*v*R);const B=[R,R,R,R,R,R];w.set(B,g*v*R)}const C=new en;C.setAttribute("position",new Tn(_,S)),C.setAttribute("uv",new Tn(A,M)),C.setAttribute("faceIndex",new Tn(w,g)),e.push(C),i>Zv&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function b5(n,e,t){const r=new Hl(n,e,t);return r.texture.mapping=xx,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Kw(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function xwe(n,e,t){const r=new Float32Array(tm),i=new ie(0,1,0);return new jc({name:"SphericalGaussianBlur",defines:{n:tm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Ck(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:sh,depthTest:!1,depthWrite:!1})}function C5(){return new jc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ck(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:sh,depthTest:!1,depthWrite:!1})}function T5(){return new jc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ck(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:sh,depthTest:!1,depthWrite:!1})}function Ck(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _we(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===_S||l===AS,h=l===mf||l===gf;if(u||h)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new h3(n)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(u&&d&&d.height>0||h&&d&&i(d)){t===null&&(t=new h3(n));const p=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function Awe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Swe(n,e,t,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const v in m){const S=m[v];for(let M=0,g=S.length;M<g;M++)e.update(S[M],n.ARRAY_BUFFER)}}function u(d){const p=[],m=d.index,v=d.attributes.position;let S=0;if(m!==null){const _=m.array;S=m.version;for(let A=0,w=_.length;A<w;A+=3){const C=_[A+0],R=_[A+1],L=_[A+2];p.push(C,R,R,L,L,C)}}else{const _=v.array;S=v.version;for(let A=0,w=_.length/3-1;A<w;A+=3){const C=A+0,R=A+1,L=A+2;p.push(C,R,R,L,L,C)}}const M=new(b$(p)?bk:wk)(p,1);M.version=S;const g=s.get(d);g&&e.remove(g),s.set(d,M)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function Mwe(n,e,t,r){const i=r.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function h(p,m){n.drawElements(s,m,a,p*l),t.update(m,s,1)}function d(p,m,v){if(v===0)return;let S,M;if(i)S=n,M="drawElementsInstanced";else if(S=e.get("ANGLE_instanced_arrays"),M="drawElementsInstancedANGLE",S===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}S[M](s,m,a,p*l,v),t.update(m,s,v)}this.setMode=o,this.setIndex=u,this.render=h,this.renderInstances=d}function Ewe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function wwe(n,e){return n[0]-e[0]}function bwe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Cwe(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Un,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,h,d){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,S=v!==void 0?v.length:0;let M=s.get(h);if(M===void 0||M.count!==S){let X=function(){j.dispose(),s.delete(h),h.removeEventListener("dispose",X)};var m=X;M!==void 0&&M.texture.dispose();const A=h.morphAttributes.position!==void 0,w=h.morphAttributes.normal!==void 0,C=h.morphAttributes.color!==void 0,R=h.morphAttributes.position||[],L=h.morphAttributes.normal||[],I=h.morphAttributes.color||[];let T=0;A===!0&&(T=1),w===!0&&(T=2),C===!0&&(T=3);let B=h.attributes.position.count*T,H=1;B>e.maxTextureSize&&(H=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const K=new Float32Array(B*H*4*S),j=new $R(K,B,H,S);j.type=Yu,j.needsUpdate=!0;const z=T*4;for(let te=0;te<S;te++){const O=R[te],D=L[te],V=I[te],G=B*H*4*te;for(let q=0;q<O.count;q++){const re=q*z;A===!0&&(o.fromBufferAttribute(O,q),K[G+re+0]=o.x,K[G+re+1]=o.y,K[G+re+2]=o.z,K[G+re+3]=0),w===!0&&(o.fromBufferAttribute(D,q),K[G+re+4]=o.x,K[G+re+5]=o.y,K[G+re+6]=o.z,K[G+re+7]=0),C===!0&&(o.fromBufferAttribute(V,q),K[G+re+8]=o.x,K[G+re+9]=o.y,K[G+re+10]=o.z,K[G+re+11]=V.itemSize===4?o.w:1)}}M={count:S,texture:j,size:new ze(B,H)},s.set(h,M),h.addEventListener("dispose",X)}let g=0;for(let A=0;A<p.length;A++)g+=p[A];const _=h.morphTargetsRelative?1:1-g;d.getUniforms().setValue(n,"morphTargetBaseInfluence",_),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}else{const v=p===void 0?0:p.length;let S=r[h.id];if(S===void 0||S.length!==v){S=[];for(let w=0;w<v;w++)S[w]=[w,0];r[h.id]=S}for(let w=0;w<v;w++){const C=S[w];C[0]=w,C[1]=p[w]}S.sort(bwe);for(let w=0;w<8;w++)w<v&&S[w][1]?(a[w][0]=S[w][0],a[w][1]=S[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(wwe);const M=h.morphAttributes.position,g=h.morphAttributes.normal;let _=0;for(let w=0;w<8;w++){const C=a[w],R=C[0],L=C[1];R!==Number.MAX_SAFE_INTEGER&&L?(M&&h.getAttribute("morphTarget"+w)!==M[R]&&h.setAttribute("morphTarget"+w,M[R]),g&&h.getAttribute("morphNormal"+w)!==g[R]&&h.setAttribute("morphNormal"+w,g[R]),i[w]=L,_+=L):(M&&h.hasAttribute("morphTarget"+w)===!0&&h.deleteAttribute("morphTarget"+w),g&&h.hasAttribute("morphNormal"+w)===!0&&h.deleteAttribute("morphNormal"+w),i[w]=0)}const A=h.morphTargetsRelative?1:1-_;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function Twe(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,h=l.geometry,d=e.get(l,h);return i.get(d)!==u&&(e.update(d),i.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER)),d}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const I$=new br,D$=new $R,F$=new Ek,N$=new fM,R5=[],P5=[],B5=new Float32Array(16),L5=new Float32Array(9),I5=new Float32Array(4);function Sx(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=R5[i];if(s===void 0&&(s=new Float32Array(i),R5[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Mi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Ei(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function tP(n,e){let t=P5[e];t===void 0&&(t=new Int32Array(e),P5[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Rwe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Pwe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mi(t,e))return;n.uniform2fv(this.addr,e),Ei(t,e)}}function Bwe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Mi(t,e))return;n.uniform3fv(this.addr,e),Ei(t,e)}}function Lwe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mi(t,e))return;n.uniform4fv(this.addr,e),Ei(t,e)}}function Iwe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Mi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ei(t,e)}else{if(Mi(t,r))return;I5.set(r),n.uniformMatrix2fv(this.addr,!1,I5),Ei(t,r)}}function Dwe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Mi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ei(t,e)}else{if(Mi(t,r))return;L5.set(r),n.uniformMatrix3fv(this.addr,!1,L5),Ei(t,r)}}function Fwe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Mi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ei(t,e)}else{if(Mi(t,r))return;B5.set(r),n.uniformMatrix4fv(this.addr,!1,B5),Ei(t,r)}}function Nwe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Uwe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mi(t,e))return;n.uniform2iv(this.addr,e),Ei(t,e)}}function Owe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mi(t,e))return;n.uniform3iv(this.addr,e),Ei(t,e)}}function kwe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mi(t,e))return;n.uniform4iv(this.addr,e),Ei(t,e)}}function Gwe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Hwe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Mi(t,e))return;n.uniform2uiv(this.addr,e),Ei(t,e)}}function zwe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Mi(t,e))return;n.uniform3uiv(this.addr,e),Ei(t,e)}}function Vwe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Mi(t,e))return;n.uniform4uiv(this.addr,e),Ei(t,e)}}function Wwe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||I$,i)}function jwe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||F$,i)}function Xwe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||N$,i)}function Jwe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||D$,i)}function Kwe(n){switch(n){case 5126:return Rwe;case 35664:return Pwe;case 35665:return Bwe;case 35666:return Lwe;case 35674:return Iwe;case 35675:return Dwe;case 35676:return Fwe;case 5124:case 35670:return Nwe;case 35667:case 35671:return Uwe;case 35668:case 35672:return Owe;case 35669:case 35673:return kwe;case 5125:return Gwe;case 36294:return Hwe;case 36295:return zwe;case 36296:return Vwe;case 35678:case 36198:case 36298:case 36306:case 35682:return Wwe;case 35679:case 36299:case 36307:return jwe;case 35680:case 36300:case 36308:case 36293:return Xwe;case 36289:case 36303:case 36311:case 36292:return Jwe}}function Ywe(n,e){n.uniform1fv(this.addr,e)}function qwe(n,e){const t=Sx(e,this.size,2);n.uniform2fv(this.addr,t)}function Qwe(n,e){const t=Sx(e,this.size,3);n.uniform3fv(this.addr,t)}function Zwe(n,e){const t=Sx(e,this.size,4);n.uniform4fv(this.addr,t)}function $we(n,e){const t=Sx(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ebe(n,e){const t=Sx(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function tbe(n,e){const t=Sx(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function nbe(n,e){n.uniform1iv(this.addr,e)}function rbe(n,e){n.uniform2iv(this.addr,e)}function ibe(n,e){n.uniform3iv(this.addr,e)}function sbe(n,e){n.uniform4iv(this.addr,e)}function obe(n,e){n.uniform1uiv(this.addr,e)}function abe(n,e){n.uniform2uiv(this.addr,e)}function lbe(n,e){n.uniform3uiv(this.addr,e)}function cbe(n,e){n.uniform4uiv(this.addr,e)}function ube(n,e,t){const r=this.cache,i=e.length,s=tP(t,i);Mi(r,s)||(n.uniform1iv(this.addr,s),Ei(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||I$,s[o])}function hbe(n,e,t){const r=this.cache,i=e.length,s=tP(t,i);Mi(r,s)||(n.uniform1iv(this.addr,s),Ei(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||F$,s[o])}function dbe(n,e,t){const r=this.cache,i=e.length,s=tP(t,i);Mi(r,s)||(n.uniform1iv(this.addr,s),Ei(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||N$,s[o])}function fbe(n,e,t){const r=this.cache,i=e.length,s=tP(t,i);Mi(r,s)||(n.uniform1iv(this.addr,s),Ei(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||D$,s[o])}function pbe(n){switch(n){case 5126:return Ywe;case 35664:return qwe;case 35665:return Qwe;case 35666:return Zwe;case 35674:return $we;case 35675:return ebe;case 35676:return tbe;case 5124:case 35670:return nbe;case 35667:case 35671:return rbe;case 35668:case 35672:return ibe;case 35669:case 35673:return sbe;case 5125:return obe;case 36294:return abe;case 36295:return lbe;case 36296:return cbe;case 35678:case 36198:case 36298:case 36306:case 35682:return ube;case 35679:case 36299:case 36307:return hbe;case 35680:case 36300:case 36308:case 36293:return dbe;case 36289:case 36303:case 36311:case 36292:return fbe}}class mbe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=Kwe(t.type)}}class gbe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=pbe(t.type)}}class vbe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const n2=/(\w+)(\])?(\[|\.)?/g;function D5(n,e){n.seq.push(e),n.map[e.id]=e}function ybe(n,e,t){const r=n.name,i=r.length;for(n2.lastIndex=0;;){const s=n2.exec(r),o=n2.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){D5(t,u===void 0?new mbe(a,n,e):new gbe(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new vbe(a),D5(t,d)),t=d}}}class pC{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);ybe(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function F5(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let xbe=0;function _be(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Abe(n){switch(n){case Gl:return["Linear","( value )"];case Zt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function N5(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+_be(n.getShaderSource(e),o)}else return i}function Sbe(n,e){const t=Abe(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Mbe(n,e){let t;switch(e){case pk:t="Linear";break;case ZZ:t="Reinhard";break;case $Z:t="OptimizedCineon";break;case mk:t="ACESFilmic";break;case e$:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Ebe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(N1).join(`
`)}function wbe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function bbe(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function N1(n){return n!==""}function U5(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function O5(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Cbe=/^[ \t]*#include +<([\w\d./]+)>/gm;function d3(n){return n.replace(Cbe,Tbe)}function Tbe(n,e){const t=nn[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return d3(t)}const Rbe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function k5(n){return n.replace(Rbe,Pbe)}function Pbe(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function G5(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Bbe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===YR?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===fA?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===yl&&(e="SHADOWMAP_TYPE_VSM"),e}function Lbe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case mf:case gf:e="ENVMAP_TYPE_CUBE";break;case xx:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Ibe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case gf:e="ENVMAP_MODE_REFRACTION";break}return e}function Dbe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case cM:e="ENVMAP_BLENDING_MULTIPLY";break;case qZ:e="ENVMAP_BLENDING_MIX";break;case QZ:e="ENVMAP_BLENDING_ADD";break}return e}function Fbe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Nbe(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Bbe(t),u=Lbe(t),h=Ibe(t),d=Dbe(t),p=Fbe(t),m=t.isWebGL2?"":Ebe(t),v=wbe(s),S=i.createProgram();let M,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=[v].filter(N1).join(`
`),M.length>0&&(M+=`
`),g=[m,v].filter(N1).join(`
`),g.length>0&&(g+=`
`)):(M=[G5(t),"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(N1).join(`
`),g=[m,G5(t),"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Dl?"#define TONE_MAPPING":"",t.toneMapping!==Dl?nn.tonemapping_pars_fragment:"",t.toneMapping!==Dl?Mbe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nn.encodings_pars_fragment,Sbe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(N1).join(`
`)),o=d3(o),o=U5(o,t),o=O5(o,t),a=d3(a),a=U5(a,t),a=O5(a,t),o=k5(o),a=k5(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,M=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,g=["#define varying in",t.glslVersion===c3?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===c3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const A=_+M+o,w=_+g+a,C=F5(i,i.VERTEX_SHADER,A),R=F5(i,i.FRAGMENT_SHADER,w);if(i.attachShader(S,C),i.attachShader(S,R),t.index0AttributeName!==void 0?i.bindAttribLocation(S,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(S,0,"position"),i.linkProgram(S),n.debug.checkShaderErrors){const T=i.getProgramInfoLog(S).trim(),B=i.getShaderInfoLog(C).trim(),H=i.getShaderInfoLog(R).trim();let K=!0,j=!0;if(i.getProgramParameter(S,i.LINK_STATUS)===!1)if(K=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,S,C,R);else{const z=N5(i,C,"vertex"),X=N5(i,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(S,i.VALIDATE_STATUS)+`

Program Info Log: `+T+`
`+z+`
`+X)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(B===""||H==="")&&(j=!1);j&&(this.diagnostics={runnable:K,programLog:T,vertexShader:{log:B,prefix:M},fragmentShader:{log:H,prefix:g}})}i.deleteShader(C),i.deleteShader(R);let L;this.getUniforms=function(){return L===void 0&&(L=new pC(i,S)),L};let I;return this.getAttributes=function(){return I===void 0&&(I=bbe(i,S)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(S),this.program=void 0},this.name=t.shaderName,this.id=xbe++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=C,this.fragmentShader=R,this}let Ube=0;class Obe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new kbe(e),t.set(e,r)),r}}class kbe{constructor(e){this.id=Ube++,this.code=e,this.usedTimes=0}}function Gbe(n,e,t,r,i,s,o){const a=new Um,l=new Obe,u=[],h=i.isWebGL2,d=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(T){return T===1?"uv1":T===2?"uv2":T===3?"uv3":"uv"}function M(T,B,H,K,j){const z=K.fog,X=j.geometry,te=T.isMeshStandardMaterial?K.environment:null,O=(T.isMeshStandardMaterial?t:e).get(T.envMap||te),D=O&&O.mapping===xx?O.image.height:null,V=v[T.type];T.precision!==null&&(m=i.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));const G=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,q=G!==void 0?G.length:0;let re=0;X.morphAttributes.position!==void 0&&(re=1),X.morphAttributes.normal!==void 0&&(re=2),X.morphAttributes.color!==void 0&&(re=3);let Y,ae,Se,ve;if(V){const Lt=wl[V];Y=Lt.vertexShader,ae=Lt.fragmentShader}else Y=T.vertexShader,ae=T.fragmentShader,l.update(T),Se=l.getVertexShaderID(T),ve=l.getFragmentShaderID(T);const W=n.getRenderTarget(),Xe=j.isInstancedMesh===!0,Ne=!!T.map,ye=!!T.matcap,me=!!O,pe=!!T.aoMap,le=!!T.lightMap,Ae=!!T.bumpMap,Re=!!T.normalMap,De=!!T.displacementMap,Je=!!T.emissiveMap,Qe=!!T.metalnessMap,Ve=!!T.roughnessMap,nt=T.clearcoat>0,It=T.iridescence>0,U=T.sheen>0,F=T.transmission>0,oe=nt&&!!T.clearcoatMap,_e=nt&&!!T.clearcoatNormalMap,Me=nt&&!!T.clearcoatRoughnessMap,Te=It&&!!T.iridescenceMap,Ke=It&&!!T.iridescenceThicknessMap,Be=U&&!!T.sheenColorMap,he=U&&!!T.sheenRoughnessMap,Ue=!!T.specularMap,Ge=!!T.specularColorMap,je=!!T.specularIntensityMap,Le=F&&!!T.transmissionMap,Oe=F&&!!T.thicknessMap,xt=!!T.gradientMap,wt=!!T.alphaMap,zt=T.alphaTest>0,J=!!T.extensions,ce=!!X.attributes.uv1,xe=!!X.attributes.uv2,Pe=!!X.attributes.uv3;return{isWebGL2:h,shaderID:V,shaderName:T.type,vertexShader:Y,fragmentShader:ae,defines:T.defines,customVertexShaderID:Se,customFragmentShaderID:ve,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:m,instancing:Xe,instancingColor:Xe&&j.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:W===null?n.outputColorSpace:W.isXRRenderTarget===!0?W.texture.colorSpace:Gl,map:Ne,matcap:ye,envMap:me,envMapMode:me&&O.mapping,envMapCubeUVHeight:D,aoMap:pe,lightMap:le,bumpMap:Ae,normalMap:Re,displacementMap:p&&De,emissiveMap:Je,normalMapObjectSpace:Re&&T.normalMapType===A$,normalMapTangentSpace:Re&&T.normalMapType===Lf,metalnessMap:Qe,roughnessMap:Ve,clearcoat:nt,clearcoatMap:oe,clearcoatNormalMap:_e,clearcoatRoughnessMap:Me,iridescence:It,iridescenceMap:Te,iridescenceThicknessMap:Ke,sheen:U,sheenColorMap:Be,sheenRoughnessMap:he,specularMap:Ue,specularColorMap:Ge,specularIntensityMap:je,transmission:F,transmissionMap:Le,thicknessMap:Oe,gradientMap:xt,opaque:T.transparent===!1&&T.blending===Dm,alphaMap:wt,alphaTest:zt,combine:T.combine,mapUv:Ne&&S(T.map.channel),aoMapUv:pe&&S(T.aoMap.channel),lightMapUv:le&&S(T.lightMap.channel),bumpMapUv:Ae&&S(T.bumpMap.channel),normalMapUv:Re&&S(T.normalMap.channel),displacementMapUv:De&&S(T.displacementMap.channel),emissiveMapUv:Je&&S(T.emissiveMap.channel),metalnessMapUv:Qe&&S(T.metalnessMap.channel),roughnessMapUv:Ve&&S(T.roughnessMap.channel),clearcoatMapUv:oe&&S(T.clearcoatMap.channel),clearcoatNormalMapUv:_e&&S(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Me&&S(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Te&&S(T.iridescenceMap.channel),iridescenceThicknessMapUv:Ke&&S(T.iridescenceThicknessMap.channel),sheenColorMapUv:Be&&S(T.sheenColorMap.channel),sheenRoughnessMapUv:he&&S(T.sheenRoughnessMap.channel),specularMapUv:Ue&&S(T.specularMap.channel),specularColorMapUv:Ge&&S(T.specularColorMap.channel),specularIntensityMapUv:je&&S(T.specularIntensityMap.channel),transmissionMapUv:Le&&S(T.transmissionMap.channel),thicknessMapUv:Oe&&S(T.thicknessMap.channel),alphaMapUv:wt&&S(T.alphaMap.channel),vertexTangents:Re&&!!X.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!X.attributes.color&&X.attributes.color.itemSize===4,vertexUv1s:ce,vertexUv2s:xe,vertexUv3s:Pe,pointsUvs:j.isPoints===!0&&!!X.attributes.uv&&(Ne||wt),fog:!!z,useFog:T.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:j.isSkinnedMesh===!0,morphTargets:X.morphAttributes.position!==void 0,morphNormals:X.morphAttributes.normal!==void 0,morphColors:X.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:re,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numSpotLightMaps:B.spotLightMap.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numSpotLightShadowsWithMaps:B.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&H.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:Dl,useLegacyLights:n.useLegacyLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Cl,flipSided:T.side===Hs,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:J&&T.extensions.derivatives===!0,extensionFragDepth:J&&T.extensions.fragDepth===!0,extensionDrawBuffers:J&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:J&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function g(T){const B=[];if(T.shaderID?B.push(T.shaderID):(B.push(T.customVertexShaderID),B.push(T.customFragmentShaderID)),T.defines!==void 0)for(const H in T.defines)B.push(H),B.push(T.defines[H]);return T.isRawShaderMaterial===!1&&(_(B,T),A(B,T),B.push(n.outputColorSpace)),B.push(T.customProgramCacheKey),B.join()}function _(T,B){T.push(B.precision),T.push(B.outputColorSpace),T.push(B.envMapMode),T.push(B.envMapCubeUVHeight),T.push(B.mapUv),T.push(B.alphaMapUv),T.push(B.lightMapUv),T.push(B.aoMapUv),T.push(B.bumpMapUv),T.push(B.normalMapUv),T.push(B.displacementMapUv),T.push(B.emissiveMapUv),T.push(B.metalnessMapUv),T.push(B.roughnessMapUv),T.push(B.clearcoatMapUv),T.push(B.clearcoatNormalMapUv),T.push(B.clearcoatRoughnessMapUv),T.push(B.iridescenceMapUv),T.push(B.iridescenceThicknessMapUv),T.push(B.sheenColorMapUv),T.push(B.sheenRoughnessMapUv),T.push(B.specularMapUv),T.push(B.specularColorMapUv),T.push(B.specularIntensityMapUv),T.push(B.transmissionMapUv),T.push(B.thicknessMapUv),T.push(B.combine),T.push(B.fogExp2),T.push(B.sizeAttenuation),T.push(B.morphTargetsCount),T.push(B.morphAttributeCount),T.push(B.numDirLights),T.push(B.numPointLights),T.push(B.numSpotLights),T.push(B.numSpotLightMaps),T.push(B.numHemiLights),T.push(B.numRectAreaLights),T.push(B.numDirLightShadows),T.push(B.numPointLightShadows),T.push(B.numSpotLightShadows),T.push(B.numSpotLightShadowsWithMaps),T.push(B.shadowMapType),T.push(B.toneMapping),T.push(B.numClippingPlanes),T.push(B.numClipIntersection),T.push(B.depthPacking)}function A(T,B){a.disableAll(),B.isWebGL2&&a.enable(0),B.supportsVertexTextures&&a.enable(1),B.instancing&&a.enable(2),B.instancingColor&&a.enable(3),B.matcap&&a.enable(4),B.envMap&&a.enable(5),B.normalMapObjectSpace&&a.enable(6),B.normalMapTangentSpace&&a.enable(7),B.clearcoat&&a.enable(8),B.iridescence&&a.enable(9),B.alphaTest&&a.enable(10),B.vertexColors&&a.enable(11),B.vertexAlphas&&a.enable(12),B.vertexUv1s&&a.enable(13),B.vertexUv2s&&a.enable(14),B.vertexUv3s&&a.enable(15),B.vertexTangents&&a.enable(16),T.push(a.mask),a.disableAll(),B.fog&&a.enable(0),B.useFog&&a.enable(1),B.flatShading&&a.enable(2),B.logarithmicDepthBuffer&&a.enable(3),B.skinning&&a.enable(4),B.morphTargets&&a.enable(5),B.morphNormals&&a.enable(6),B.morphColors&&a.enable(7),B.premultipliedAlpha&&a.enable(8),B.shadowMapEnabled&&a.enable(9),B.useLegacyLights&&a.enable(10),B.doubleSided&&a.enable(11),B.flipSided&&a.enable(12),B.useDepthPacking&&a.enable(13),B.dithering&&a.enable(14),B.transmission&&a.enable(15),B.sheen&&a.enable(16),B.opaque&&a.enable(17),B.pointsUvs&&a.enable(18),T.push(a.mask)}function w(T){const B=v[T.type];let H;if(B){const K=wl[B];H=R$.clone(K.uniforms)}else H=T.uniforms;return H}function C(T,B){let H;for(let K=0,j=u.length;K<j;K++){const z=u[K];if(z.cacheKey===B){H=z,++H.usedTimes;break}}return H===void 0&&(H=new Nbe(n,B,T,s),u.push(H)),H}function R(T){if(--T.usedTimes===0){const B=u.indexOf(T);u[B]=u[u.length-1],u.pop(),T.destroy()}}function L(T){l.remove(T)}function I(){l.dispose()}return{getParameters:M,getProgramCacheKey:g,getUniforms:w,acquireProgram:C,releaseProgram:R,releaseShaderCache:L,programs:u,dispose:I}}function Hbe(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function zbe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function H5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function z5(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(d,p,m,v,S,M){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:v,renderOrder:d.renderOrder,z:S,group:M},n[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=d.renderOrder,g.z=S,g.group=M),e++,g}function a(d,p,m,v,S,M){const g=o(d,p,m,v,S,M);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(d,p,m,v,S,M){const g=o(d,p,m,v,S,M);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function u(d,p){t.length>1&&t.sort(d||zbe),r.length>1&&r.sort(p||H5),i.length>1&&i.sort(p||H5)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:h,sort:u}}function Vbe(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new z5,n.set(r,[o])):i>=s.length?(o=new z5,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Wbe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ie,color:new yt};break;case"SpotLight":t={position:new ie,direction:new ie,color:new yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ie,color:new yt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ie,skyColor:new yt,groundColor:new yt};break;case"RectAreaLight":t={color:new yt,position:new ie,halfWidth:new ie,halfHeight:new ie};break}return n[e.id]=t,t}}}function jbe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Xbe=0;function Jbe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Kbe(n,e){const t=new Wbe,r=jbe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let h=0;h<9;h++)i.probe.push(new ie);const s=new ie,o=new jt,a=new jt;function l(h,d){let p=0,m=0,v=0;for(let H=0;H<9;H++)i.probe[H].set(0,0,0);let S=0,M=0,g=0,_=0,A=0,w=0,C=0,R=0,L=0,I=0;h.sort(Jbe);const T=d===!0?Math.PI:1;for(let H=0,K=h.length;H<K;H++){const j=h[H],z=j.color,X=j.intensity,te=j.distance,O=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)p+=z.r*X*T,m+=z.g*X*T,v+=z.b*X*T;else if(j.isLightProbe)for(let D=0;D<9;D++)i.probe[D].addScaledVector(j.sh.coefficients[D],X);else if(j.isDirectionalLight){const D=t.get(j);if(D.color.copy(j.color).multiplyScalar(j.intensity*T),j.castShadow){const V=j.shadow,G=r.get(j);G.shadowBias=V.bias,G.shadowNormalBias=V.normalBias,G.shadowRadius=V.radius,G.shadowMapSize=V.mapSize,i.directionalShadow[S]=G,i.directionalShadowMap[S]=O,i.directionalShadowMatrix[S]=j.shadow.matrix,w++}i.directional[S]=D,S++}else if(j.isSpotLight){const D=t.get(j);D.position.setFromMatrixPosition(j.matrixWorld),D.color.copy(z).multiplyScalar(X*T),D.distance=te,D.coneCos=Math.cos(j.angle),D.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),D.decay=j.decay,i.spot[g]=D;const V=j.shadow;if(j.map&&(i.spotLightMap[L]=j.map,L++,V.updateMatrices(j),j.castShadow&&I++),i.spotLightMatrix[g]=V.matrix,j.castShadow){const G=r.get(j);G.shadowBias=V.bias,G.shadowNormalBias=V.normalBias,G.shadowRadius=V.radius,G.shadowMapSize=V.mapSize,i.spotShadow[g]=G,i.spotShadowMap[g]=O,R++}g++}else if(j.isRectAreaLight){const D=t.get(j);D.color.copy(z).multiplyScalar(X),D.halfWidth.set(j.width*.5,0,0),D.halfHeight.set(0,j.height*.5,0),i.rectArea[_]=D,_++}else if(j.isPointLight){const D=t.get(j);if(D.color.copy(j.color).multiplyScalar(j.intensity*T),D.distance=j.distance,D.decay=j.decay,j.castShadow){const V=j.shadow,G=r.get(j);G.shadowBias=V.bias,G.shadowNormalBias=V.normalBias,G.shadowRadius=V.radius,G.shadowMapSize=V.mapSize,G.shadowCameraNear=V.camera.near,G.shadowCameraFar=V.camera.far,i.pointShadow[M]=G,i.pointShadowMap[M]=O,i.pointShadowMatrix[M]=j.shadow.matrix,C++}i.point[M]=D,M++}else if(j.isHemisphereLight){const D=t.get(j);D.skyColor.copy(j.color).multiplyScalar(X*T),D.groundColor.copy(j.groundColor).multiplyScalar(X*T),i.hemi[A]=D,A++}}_>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=lt.LTC_FLOAT_1,i.rectAreaLTC2=lt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=lt.LTC_HALF_1,i.rectAreaLTC2=lt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=m,i.ambient[2]=v;const B=i.hash;(B.directionalLength!==S||B.pointLength!==M||B.spotLength!==g||B.rectAreaLength!==_||B.hemiLength!==A||B.numDirectionalShadows!==w||B.numPointShadows!==C||B.numSpotShadows!==R||B.numSpotMaps!==L)&&(i.directional.length=S,i.spot.length=g,i.rectArea.length=_,i.point.length=M,i.hemi.length=A,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=R,i.spotShadowMap.length=R,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=R+L-I,i.spotLightMap.length=L,i.numSpotLightShadowsWithMaps=I,B.directionalLength=S,B.pointLength=M,B.spotLength=g,B.rectAreaLength=_,B.hemiLength=A,B.numDirectionalShadows=w,B.numPointShadows=C,B.numSpotShadows=R,B.numSpotMaps=L,i.version=Xbe++)}function u(h,d){let p=0,m=0,v=0,S=0,M=0;const g=d.matrixWorldInverse;for(let _=0,A=h.length;_<A;_++){const w=h[_];if(w.isDirectionalLight){const C=i.directional[p];C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),p++}else if(w.isSpotLight){const C=i.spot[v];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),v++}else if(w.isRectAreaLight){const C=i.rectArea[S];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(w.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(w.width*.5,0,0),C.halfHeight.set(0,w.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),S++}else if(w.isPointLight){const C=i.point[m];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),m++}else if(w.isHemisphereLight){const C=i.hemi[M];C.direction.setFromMatrixPosition(w.matrixWorld),C.direction.transformDirection(g),M++}}}return{setup:l,setupView:u,state:i}}function V5(n,e){const t=new Kbe(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(d){r.push(d)}function a(d){i.push(d)}function l(d){t.setup(r,d)}function u(d){t.setupView(r,d)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function Ybe(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new V5(n,e),t.set(s,[l])):o>=a.length?(l=new V5(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class Tk extends _i{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=x$,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Rk extends _i{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const qbe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Qbe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Zbe(n,e,t){let r=new eP;const i=new ze,s=new ze,o=new Un,a=new Tk({depthPacking:_$}),l=new Rk,u={},h=t.maxTextureSize,d={[Vc]:Hs,[Hs]:Vc,[Cl]:Cl},p=new jc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ze},radius:{value:4}},vertexShader:qbe,fragmentShader:Qbe}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new en;v.setAttribute("position",new Tn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Oi(v,p),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=YR;let g=this.type;this.render=function(C,R,L){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||C.length===0)return;const I=n.getRenderTarget(),T=n.getActiveCubeFace(),B=n.getActiveMipmapLevel(),H=n.state;H.setBlending(sh),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const K=g!==yl&&this.type===yl,j=g===yl&&this.type!==yl;for(let z=0,X=C.length;z<X;z++){const te=C[z],O=te.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;i.copy(O.mapSize);const D=O.getFrameExtents();if(i.multiply(D),s.copy(O.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/D.x),i.x=s.x*D.x,O.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/D.y),i.y=s.y*D.y,O.mapSize.y=s.y)),O.map===null||K===!0||j===!0){const G=this.type!==yl?{minFilter:Ur,magFilter:Ur}:{};O.map!==null&&O.map.dispose(),O.map=new Hl(i.x,i.y,G),O.map.texture.name=te.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();const V=O.getViewportCount();for(let G=0;G<V;G++){const q=O.getViewport(G);o.set(s.x*q.x,s.y*q.y,s.x*q.z,s.y*q.w),H.viewport(o),O.updateMatrices(te,G),r=O.getFrustum(),w(R,L,O.camera,te,this.type)}O.isPointLightShadow!==!0&&this.type===yl&&_(O,L),O.needsUpdate=!1}g=this.type,M.needsUpdate=!1,n.setRenderTarget(I,T,B)};function _(C,R){const L=e.update(S);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new Hl(i.x,i.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(R,null,L,p,S,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(R,null,L,m,S,null)}function A(C,R,L,I){let T=null;const B=L.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(B!==void 0)T=B;else if(T=L.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const H=T.uuid,K=R.uuid;let j=u[H];j===void 0&&(j={},u[H]=j);let z=j[K];z===void 0&&(z=T.clone(),j[K]=z),T=z}if(T.visible=R.visible,T.wireframe=R.wireframe,I===yl?T.side=R.shadowSide!==null?R.shadowSide:R.side:T.side=R.shadowSide!==null?R.shadowSide:d[R.side],T.alphaMap=R.alphaMap,T.alphaTest=R.alphaTest,T.map=R.map,T.clipShadows=R.clipShadows,T.clippingPlanes=R.clippingPlanes,T.clipIntersection=R.clipIntersection,T.displacementMap=R.displacementMap,T.displacementScale=R.displacementScale,T.displacementBias=R.displacementBias,T.wireframeLinewidth=R.wireframeLinewidth,T.linewidth=R.linewidth,L.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const H=n.properties.get(T);H.light=L}return T}function w(C,R,L,I,T){if(C.visible===!1)return;if(C.layers.test(R.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&T===yl)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,C.matrixWorld);const K=e.update(C),j=C.material;if(Array.isArray(j)){const z=K.groups;for(let X=0,te=z.length;X<te;X++){const O=z[X],D=j[O.materialIndex];if(D&&D.visible){const V=A(C,D,I,T);n.renderBufferDirect(L,null,K,V,C,O)}}}else if(j.visible){const z=A(C,j,I,T);n.renderBufferDirect(L,null,K,z,C,null)}}const H=C.children;for(let K=0,j=H.length;K<j;K++)w(H[K],R,L,I,T)}}function $be(n,e,t){const r=t.isWebGL2;function i(){let J=!1;const ce=new Un;let xe=null;const Pe=new Un(0,0,0,0);return{setMask:function(ke){xe!==ke&&!J&&(n.colorMask(ke,ke,ke,ke),xe=ke)},setLocked:function(ke){J=ke},setClear:function(ke,Lt,Rt,ln,dr){dr===!0&&(ke*=ln,Lt*=ln,Rt*=ln),ce.set(ke,Lt,Rt,ln),Pe.equals(ce)===!1&&(n.clearColor(ke,Lt,Rt,ln),Pe.copy(ce))},reset:function(){J=!1,xe=null,Pe.set(-1,0,0,0)}}}function s(){let J=!1,ce=null,xe=null,Pe=null;return{setTest:function(ke){ke?W(n.DEPTH_TEST):Xe(n.DEPTH_TEST)},setMask:function(ke){ce!==ke&&!J&&(n.depthMask(ke),ce=ke)},setFunc:function(ke){if(xe!==ke){switch(ke){case VZ:n.depthFunc(n.NEVER);break;case WZ:n.depthFunc(n.ALWAYS);break;case jZ:n.depthFunc(n.LESS);break;case TT:n.depthFunc(n.LEQUAL);break;case XZ:n.depthFunc(n.EQUAL);break;case JZ:n.depthFunc(n.GEQUAL);break;case KZ:n.depthFunc(n.GREATER);break;case YZ:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}xe=ke}},setLocked:function(ke){J=ke},setClear:function(ke){Pe!==ke&&(n.clearDepth(ke),Pe=ke)},reset:function(){J=!1,ce=null,xe=null,Pe=null}}}function o(){let J=!1,ce=null,xe=null,Pe=null,ke=null,Lt=null,Rt=null,ln=null,dr=null;return{setTest:function(kt){J||(kt?W(n.STENCIL_TEST):Xe(n.STENCIL_TEST))},setMask:function(kt){ce!==kt&&!J&&(n.stencilMask(kt),ce=kt)},setFunc:function(kt,Pn,Zn){(xe!==kt||Pe!==Pn||ke!==Zn)&&(n.stencilFunc(kt,Pn,Zn),xe=kt,Pe=Pn,ke=Zn)},setOp:function(kt,Pn,Zn){(Lt!==kt||Rt!==Pn||ln!==Zn)&&(n.stencilOp(kt,Pn,Zn),Lt=kt,Rt=Pn,ln=Zn)},setLocked:function(kt){J=kt},setClear:function(kt){dr!==kt&&(n.clearStencil(kt),dr=kt)},reset:function(){J=!1,ce=null,xe=null,Pe=null,ke=null,Lt=null,Rt=null,ln=null,dr=null}}}const a=new i,l=new s,u=new o,h=new WeakMap,d=new WeakMap;let p={},m={},v=new WeakMap,S=[],M=null,g=!1,_=null,A=null,w=null,C=null,R=null,L=null,I=null,T=!1,B=null,H=null,K=null,j=null,z=null;const X=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let te=!1,O=0;const D=n.getParameter(n.VERSION);D.indexOf("WebGL")!==-1?(O=parseFloat(/^WebGL (\d)/.exec(D)[1]),te=O>=1):D.indexOf("OpenGL ES")!==-1&&(O=parseFloat(/^OpenGL ES (\d)/.exec(D)[1]),te=O>=2);let V=null,G={};const q=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),Y=new Un().fromArray(q),ae=new Un().fromArray(re);function Se(J,ce,xe,Pe){const ke=new Uint8Array(4),Lt=n.createTexture();n.bindTexture(J,Lt),n.texParameteri(J,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(J,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Rt=0;Rt<xe;Rt++)r&&(J===n.TEXTURE_3D||J===n.TEXTURE_2D_ARRAY)?n.texImage3D(ce,0,n.RGBA,1,1,Pe,0,n.RGBA,n.UNSIGNED_BYTE,ke):n.texImage2D(ce+Rt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ke);return Lt}const ve={};ve[n.TEXTURE_2D]=Se(n.TEXTURE_2D,n.TEXTURE_2D,1),ve[n.TEXTURE_CUBE_MAP]=Se(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(ve[n.TEXTURE_2D_ARRAY]=Se(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ve[n.TEXTURE_3D]=Se(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),W(n.DEPTH_TEST),l.setFunc(TT),De(!1),Je(DF),W(n.CULL_FACE),Ae(sh);function W(J){p[J]!==!0&&(n.enable(J),p[J]=!0)}function Xe(J){p[J]!==!1&&(n.disable(J),p[J]=!1)}function Ne(J,ce){return m[J]!==ce?(n.bindFramebuffer(J,ce),m[J]=ce,r&&(J===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=ce),J===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=ce)),!0):!1}function ye(J,ce){let xe=S,Pe=!1;if(J)if(xe=v.get(ce),xe===void 0&&(xe=[],v.set(ce,xe)),J.isWebGLMultipleRenderTargets){const ke=J.texture;if(xe.length!==ke.length||xe[0]!==n.COLOR_ATTACHMENT0){for(let Lt=0,Rt=ke.length;Lt<Rt;Lt++)xe[Lt]=n.COLOR_ATTACHMENT0+Lt;xe.length=ke.length,Pe=!0}}else xe[0]!==n.COLOR_ATTACHMENT0&&(xe[0]=n.COLOR_ATTACHMENT0,Pe=!0);else xe[0]!==n.BACK&&(xe[0]=n.BACK,Pe=!0);Pe&&(t.isWebGL2?n.drawBuffers(xe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(xe))}function me(J){return M!==J?(n.useProgram(J),M=J,!0):!1}const pe={[em]:n.FUNC_ADD,[LZ]:n.FUNC_SUBTRACT,[IZ]:n.FUNC_REVERSE_SUBTRACT};if(r)pe[OF]=n.MIN,pe[kF]=n.MAX;else{const J=e.get("EXT_blend_minmax");J!==null&&(pe[OF]=J.MIN_EXT,pe[kF]=J.MAX_EXT)}const le={[DZ]:n.ZERO,[FZ]:n.ONE,[NZ]:n.SRC_COLOR,[dk]:n.SRC_ALPHA,[zZ]:n.SRC_ALPHA_SATURATE,[GZ]:n.DST_COLOR,[OZ]:n.DST_ALPHA,[UZ]:n.ONE_MINUS_SRC_COLOR,[fk]:n.ONE_MINUS_SRC_ALPHA,[HZ]:n.ONE_MINUS_DST_COLOR,[kZ]:n.ONE_MINUS_DST_ALPHA};function Ae(J,ce,xe,Pe,ke,Lt,Rt,ln){if(J===sh){g===!0&&(Xe(n.BLEND),g=!1);return}if(g===!1&&(W(n.BLEND),g=!0),J!==BZ){if(J!==_||ln!==T){if((A!==em||R!==em)&&(n.blendEquation(n.FUNC_ADD),A=em,R=em),ln)switch(J){case Dm:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case FF:n.blendFunc(n.ONE,n.ONE);break;case NF:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case UF:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case Dm:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case FF:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case NF:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case UF:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}w=null,C=null,L=null,I=null,_=J,T=ln}return}ke=ke||ce,Lt=Lt||xe,Rt=Rt||Pe,(ce!==A||ke!==R)&&(n.blendEquationSeparate(pe[ce],pe[ke]),A=ce,R=ke),(xe!==w||Pe!==C||Lt!==L||Rt!==I)&&(n.blendFuncSeparate(le[xe],le[Pe],le[Lt],le[Rt]),w=xe,C=Pe,L=Lt,I=Rt),_=J,T=!1}function Re(J,ce){J.side===Cl?Xe(n.CULL_FACE):W(n.CULL_FACE);let xe=J.side===Hs;ce&&(xe=!xe),De(xe),J.blending===Dm&&J.transparent===!1?Ae(sh):Ae(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.premultipliedAlpha),l.setFunc(J.depthFunc),l.setTest(J.depthTest),l.setMask(J.depthWrite),a.setMask(J.colorWrite);const Pe=J.stencilWrite;u.setTest(Pe),Pe&&(u.setMask(J.stencilWriteMask),u.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),u.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),Ve(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?W(n.SAMPLE_ALPHA_TO_COVERAGE):Xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function De(J){B!==J&&(J?n.frontFace(n.CW):n.frontFace(n.CCW),B=J)}function Je(J){J!==TZ?(W(n.CULL_FACE),J!==H&&(J===DF?n.cullFace(n.BACK):J===RZ?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Xe(n.CULL_FACE),H=J}function Qe(J){J!==K&&(te&&n.lineWidth(J),K=J)}function Ve(J,ce,xe){J?(W(n.POLYGON_OFFSET_FILL),(j!==ce||z!==xe)&&(n.polygonOffset(ce,xe),j=ce,z=xe)):Xe(n.POLYGON_OFFSET_FILL)}function nt(J){J?W(n.SCISSOR_TEST):Xe(n.SCISSOR_TEST)}function It(J){J===void 0&&(J=n.TEXTURE0+X-1),V!==J&&(n.activeTexture(J),V=J)}function U(J,ce,xe){xe===void 0&&(V===null?xe=n.TEXTURE0+X-1:xe=V);let Pe=G[xe];Pe===void 0&&(Pe={type:void 0,texture:void 0},G[xe]=Pe),(Pe.type!==J||Pe.texture!==ce)&&(V!==xe&&(n.activeTexture(xe),V=xe),n.bindTexture(J,ce||ve[J]),Pe.type=J,Pe.texture=ce)}function F(){const J=G[V];J!==void 0&&J.type!==void 0&&(n.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function _e(){try{n.compressedTexImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Me(){try{n.texSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Te(){try{n.texSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ke(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Be(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function he(){try{n.texStorage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ue(){try{n.texStorage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Ge(){try{n.texImage2D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function je(){try{n.texImage3D.apply(n,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Le(J){Y.equals(J)===!1&&(n.scissor(J.x,J.y,J.z,J.w),Y.copy(J))}function Oe(J){ae.equals(J)===!1&&(n.viewport(J.x,J.y,J.z,J.w),ae.copy(J))}function xt(J,ce){let xe=d.get(ce);xe===void 0&&(xe=new WeakMap,d.set(ce,xe));let Pe=xe.get(J);Pe===void 0&&(Pe=n.getUniformBlockIndex(ce,J.name),xe.set(J,Pe))}function wt(J,ce){const Pe=d.get(ce).get(J);h.get(ce)!==Pe&&(n.uniformBlockBinding(ce,Pe,J.__bindingPointIndex),h.set(ce,Pe))}function zt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},V=null,G={},m={},v=new WeakMap,S=[],M=null,g=!1,_=null,A=null,w=null,C=null,R=null,L=null,I=null,T=!1,B=null,H=null,K=null,j=null,z=null,Y.set(0,0,n.canvas.width,n.canvas.height),ae.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:W,disable:Xe,bindFramebuffer:Ne,drawBuffers:ye,useProgram:me,setBlending:Ae,setMaterial:Re,setFlipSided:De,setCullFace:Je,setLineWidth:Qe,setPolygonOffset:Ve,setScissorTest:nt,activeTexture:It,bindTexture:U,unbindTexture:F,compressedTexImage2D:oe,compressedTexImage3D:_e,texImage2D:Ge,texImage3D:je,updateUBOMapping:xt,uniformBlockBinding:wt,texStorage2D:he,texStorage3D:Ue,texSubImage2D:Me,texSubImage3D:Te,compressedTexSubImage2D:Ke,compressedTexSubImage3D:Be,scissor:Le,viewport:Oe,reset:zt}}function eCe(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let S;const M=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(U,F){return g?new OffscreenCanvas(U,F):wS("canvas")}function A(U,F,oe,_e){let Me=1;if((U.width>_e||U.height>_e)&&(Me=_e/Math.max(U.width,U.height)),Me<1||F===!0)if(typeof HTMLImageElement<"u"&&U instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&U instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&U instanceof ImageBitmap){const Te=F?E$:Math.floor,Ke=Te(Me*U.width),Be=Te(Me*U.height);S===void 0&&(S=_(Ke,Be));const he=oe?_(Ke,Be):S;return he.width=Ke,he.height=Be,he.getContext("2d").drawImage(U,0,0,Ke,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+U.width+"x"+U.height+") to ("+Ke+"x"+Be+")."),he}else return"data"in U&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+U.width+"x"+U.height+")."),U;return U}function w(U){return u3(U.width)&&u3(U.height)}function C(U){return a?!1:U.wrapS!==es||U.wrapT!==es||U.minFilter!==Ur&&U.minFilter!==yr}function R(U,F){return U.generateMipmaps&&F&&U.minFilter!==Ur&&U.minFilter!==yr}function L(U){n.generateMipmap(U)}function I(U,F,oe,_e,Me=!1){if(a===!1)return F;if(U!==null){if(n[U]!==void 0)return n[U];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+U+"'")}let Te=F;return F===n.RED&&(oe===n.FLOAT&&(Te=n.R32F),oe===n.HALF_FLOAT&&(Te=n.R16F),oe===n.UNSIGNED_BYTE&&(Te=n.R8)),F===n.RG&&(oe===n.FLOAT&&(Te=n.RG32F),oe===n.HALF_FLOAT&&(Te=n.RG16F),oe===n.UNSIGNED_BYTE&&(Te=n.RG8)),F===n.RGBA&&(oe===n.FLOAT&&(Te=n.RGBA32F),oe===n.HALF_FLOAT&&(Te=n.RGBA16F),oe===n.UNSIGNED_BYTE&&(Te=_e===Zt&&Me===!1?n.SRGB8_ALPHA8:n.RGBA8),oe===n.UNSIGNED_SHORT_4_4_4_4&&(Te=n.RGBA4),oe===n.UNSIGNED_SHORT_5_5_5_1&&(Te=n.RGB5_A1)),(Te===n.R16F||Te===n.R32F||Te===n.RG16F||Te===n.RG32F||Te===n.RGBA16F||Te===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function T(U,F,oe){return R(U,oe)===!0||U.isFramebufferTexture&&U.minFilter!==Ur&&U.minFilter!==yr?Math.log2(Math.max(F.width,F.height))+1:U.mipmaps!==void 0&&U.mipmaps.length>0?U.mipmaps.length:U.isCompressedTexture&&Array.isArray(U.image)?F.mipmaps.length:1}function B(U){return U===Ur||U===SS||U===My?n.NEAREST:n.LINEAR}function H(U){const F=U.target;F.removeEventListener("dispose",H),j(F),F.isVideoTexture&&v.delete(F)}function K(U){const F=U.target;F.removeEventListener("dispose",K),X(F)}function j(U){const F=r.get(U);if(F.__webglInit===void 0)return;const oe=U.source,_e=M.get(oe);if(_e){const Me=_e[F.__cacheKey];Me.usedTimes--,Me.usedTimes===0&&z(U),Object.keys(_e).length===0&&M.delete(oe)}r.remove(U)}function z(U){const F=r.get(U);n.deleteTexture(F.__webglTexture);const oe=U.source,_e=M.get(oe);delete _e[F.__cacheKey],o.memory.textures--}function X(U){const F=U.texture,oe=r.get(U),_e=r.get(F);if(_e.__webglTexture!==void 0&&(n.deleteTexture(_e.__webglTexture),o.memory.textures--),U.depthTexture&&U.depthTexture.dispose(),U.isWebGLCubeRenderTarget)for(let Me=0;Me<6;Me++)n.deleteFramebuffer(oe.__webglFramebuffer[Me]),oe.__webglDepthbuffer&&n.deleteRenderbuffer(oe.__webglDepthbuffer[Me]);else{if(n.deleteFramebuffer(oe.__webglFramebuffer),oe.__webglDepthbuffer&&n.deleteRenderbuffer(oe.__webglDepthbuffer),oe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(oe.__webglMultisampledFramebuffer),oe.__webglColorRenderbuffer)for(let Me=0;Me<oe.__webglColorRenderbuffer.length;Me++)oe.__webglColorRenderbuffer[Me]&&n.deleteRenderbuffer(oe.__webglColorRenderbuffer[Me]);oe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(oe.__webglDepthRenderbuffer)}if(U.isWebGLMultipleRenderTargets)for(let Me=0,Te=F.length;Me<Te;Me++){const Ke=r.get(F[Me]);Ke.__webglTexture&&(n.deleteTexture(Ke.__webglTexture),o.memory.textures--),r.remove(F[Me])}r.remove(F),r.remove(U)}let te=0;function O(){te=0}function D(){const U=te;return U>=l&&console.warn("THREE.WebGLTextures: Trying to use "+U+" texture units while this GPU supports only "+l),te+=1,U}function V(U){const F=[];return F.push(U.wrapS),F.push(U.wrapT),F.push(U.wrapR||0),F.push(U.magFilter),F.push(U.minFilter),F.push(U.anisotropy),F.push(U.internalFormat),F.push(U.format),F.push(U.type),F.push(U.generateMipmaps),F.push(U.premultiplyAlpha),F.push(U.flipY),F.push(U.unpackAlignment),F.push(U.colorSpace),F.join()}function G(U,F){const oe=r.get(U);if(U.isVideoTexture&&nt(U),U.isRenderTargetTexture===!1&&U.version>0&&oe.__version!==U.version){const _e=U.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Xe(oe,U,F);return}}t.bindTexture(n.TEXTURE_2D,oe.__webglTexture,n.TEXTURE0+F)}function q(U,F){const oe=r.get(U);if(U.version>0&&oe.__version!==U.version){Xe(oe,U,F);return}t.bindTexture(n.TEXTURE_2D_ARRAY,oe.__webglTexture,n.TEXTURE0+F)}function re(U,F){const oe=r.get(U);if(U.version>0&&oe.__version!==U.version){Xe(oe,U,F);return}t.bindTexture(n.TEXTURE_3D,oe.__webglTexture,n.TEXTURE0+F)}function Y(U,F){const oe=r.get(U);if(U.version>0&&oe.__version!==U.version){Ne(oe,U,F);return}t.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture,n.TEXTURE0+F)}const ae={[vf]:n.REPEAT,[es]:n.CLAMP_TO_EDGE,[Qy]:n.MIRRORED_REPEAT},Se={[Ur]:n.NEAREST,[SS]:n.NEAREST_MIPMAP_NEAREST,[My]:n.NEAREST_MIPMAP_LINEAR,[yr]:n.LINEAR,[QR]:n.LINEAR_MIPMAP_NEAREST,[Wc]:n.LINEAR_MIPMAP_LINEAR};function ve(U,F,oe){if(oe?(n.texParameteri(U,n.TEXTURE_WRAP_S,ae[F.wrapS]),n.texParameteri(U,n.TEXTURE_WRAP_T,ae[F.wrapT]),(U===n.TEXTURE_3D||U===n.TEXTURE_2D_ARRAY)&&n.texParameteri(U,n.TEXTURE_WRAP_R,ae[F.wrapR]),n.texParameteri(U,n.TEXTURE_MAG_FILTER,Se[F.magFilter]),n.texParameteri(U,n.TEXTURE_MIN_FILTER,Se[F.minFilter])):(n.texParameteri(U,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(U,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(U===n.TEXTURE_3D||U===n.TEXTURE_2D_ARRAY)&&n.texParameteri(U,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(F.wrapS!==es||F.wrapT!==es)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(U,n.TEXTURE_MAG_FILTER,B(F.magFilter)),n.texParameteri(U,n.TEXTURE_MIN_FILTER,B(F.minFilter)),F.minFilter!==Ur&&F.minFilter!==yr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const _e=e.get("EXT_texture_filter_anisotropic");if(F.magFilter===Ur||F.minFilter!==My&&F.minFilter!==Wc||F.type===Yu&&e.has("OES_texture_float_linear")===!1||a===!1&&F.type===Zy&&e.has("OES_texture_half_float_linear")===!1)return;(F.anisotropy>1||r.get(F).__currentAnisotropy)&&(n.texParameterf(U,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,i.getMaxAnisotropy())),r.get(F).__currentAnisotropy=F.anisotropy)}}function W(U,F){let oe=!1;U.__webglInit===void 0&&(U.__webglInit=!0,F.addEventListener("dispose",H));const _e=F.source;let Me=M.get(_e);Me===void 0&&(Me={},M.set(_e,Me));const Te=V(F);if(Te!==U.__cacheKey){Me[Te]===void 0&&(Me[Te]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,oe=!0),Me[Te].usedTimes++;const Ke=Me[U.__cacheKey];Ke!==void 0&&(Me[U.__cacheKey].usedTimes--,Ke.usedTimes===0&&z(F)),U.__cacheKey=Te,U.__webglTexture=Me[Te].texture}return oe}function Xe(U,F,oe){let _e=n.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),F.isData3DTexture&&(_e=n.TEXTURE_3D);const Me=W(U,F),Te=F.source;t.bindTexture(_e,U.__webglTexture,n.TEXTURE0+oe);const Ke=r.get(Te);if(Te.version!==Ke.__version||Me===!0){t.activeTexture(n.TEXTURE0+oe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Be=C(F)&&w(F.image)===!1;let he=A(F.image,Be,!1,h);he=It(F,he);const Ue=w(he)||a,Ge=s.convert(F.format,F.colorSpace);let je=s.convert(F.type),Le=I(F.internalFormat,Ge,je,F.colorSpace);ve(_e,F,Ue);let Oe;const xt=F.mipmaps,wt=a&&F.isVideoTexture!==!0,zt=Ke.__version===void 0||Me===!0,J=T(F,he,Ue);if(F.isDepthTexture)Le=n.DEPTH_COMPONENT,a?F.type===Yu?Le=n.DEPTH_COMPONENT32F:F.type===Td?Le=n.DEPTH_COMPONENT24:F.type===Fm?Le=n.DEPTH24_STENCIL8:Le=n.DEPTH_COMPONENT16:F.type===Yu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),F.format===Qd&&Le===n.DEPTH_COMPONENT&&F.type!==gk&&F.type!==Td&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),F.type=Td,je=s.convert(F.type)),F.format===ig&&Le===n.DEPTH_COMPONENT&&(Le=n.DEPTH_STENCIL,F.type!==Fm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),F.type=Fm,je=s.convert(F.type))),zt&&(wt?t.texStorage2D(n.TEXTURE_2D,1,Le,he.width,he.height):t.texImage2D(n.TEXTURE_2D,0,Le,he.width,he.height,0,Ge,je,null));else if(F.isDataTexture)if(xt.length>0&&Ue){wt&&zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,xt[0].width,xt[0].height);for(let ce=0,xe=xt.length;ce<xe;ce++)Oe=xt[ce],wt?t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Oe.width,Oe.height,Ge,je,Oe.data):t.texImage2D(n.TEXTURE_2D,ce,Le,Oe.width,Oe.height,0,Ge,je,Oe.data);F.generateMipmaps=!1}else wt?(zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,he.width,he.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,he.width,he.height,Ge,je,he.data)):t.texImage2D(n.TEXTURE_2D,0,Le,he.width,he.height,0,Ge,je,he.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){wt&&zt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,J,Le,xt[0].width,xt[0].height,he.depth);for(let ce=0,xe=xt.length;ce<xe;ce++)Oe=xt[ce],F.format!==so?Ge!==null?wt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,Oe.width,Oe.height,he.depth,Ge,Oe.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ce,Le,Oe.width,Oe.height,he.depth,0,Oe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,Oe.width,Oe.height,he.depth,Ge,je,Oe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ce,Le,Oe.width,Oe.height,he.depth,0,Ge,je,Oe.data)}else{wt&&zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,xt[0].width,xt[0].height);for(let ce=0,xe=xt.length;ce<xe;ce++)Oe=xt[ce],F.format!==so?Ge!==null?wt?t.compressedTexSubImage2D(n.TEXTURE_2D,ce,0,0,Oe.width,Oe.height,Ge,Oe.data):t.compressedTexImage2D(n.TEXTURE_2D,ce,Le,Oe.width,Oe.height,0,Oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wt?t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Oe.width,Oe.height,Ge,je,Oe.data):t.texImage2D(n.TEXTURE_2D,ce,Le,Oe.width,Oe.height,0,Ge,je,Oe.data)}else if(F.isDataArrayTexture)wt?(zt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,J,Le,he.width,he.height,he.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,he.width,he.height,he.depth,Ge,je,he.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Le,he.width,he.height,he.depth,0,Ge,je,he.data);else if(F.isData3DTexture)wt?(zt&&t.texStorage3D(n.TEXTURE_3D,J,Le,he.width,he.height,he.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,he.width,he.height,he.depth,Ge,je,he.data)):t.texImage3D(n.TEXTURE_3D,0,Le,he.width,he.height,he.depth,0,Ge,je,he.data);else if(F.isFramebufferTexture){if(zt)if(wt)t.texStorage2D(n.TEXTURE_2D,J,Le,he.width,he.height);else{let ce=he.width,xe=he.height;for(let Pe=0;Pe<J;Pe++)t.texImage2D(n.TEXTURE_2D,Pe,Le,ce,xe,0,Ge,je,null),ce>>=1,xe>>=1}}else if(xt.length>0&&Ue){wt&&zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,xt[0].width,xt[0].height);for(let ce=0,xe=xt.length;ce<xe;ce++)Oe=xt[ce],wt?t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Ge,je,Oe):t.texImage2D(n.TEXTURE_2D,ce,Le,Ge,je,Oe);F.generateMipmaps=!1}else wt?(zt&&t.texStorage2D(n.TEXTURE_2D,J,Le,he.width,he.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ge,je,he)):t.texImage2D(n.TEXTURE_2D,0,Le,Ge,je,he);R(F,Ue)&&L(_e),Ke.__version=Te.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function Ne(U,F,oe){if(F.image.length!==6)return;const _e=W(U,F),Me=F.source;t.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture,n.TEXTURE0+oe);const Te=r.get(Me);if(Me.version!==Te.__version||_e===!0){t.activeTexture(n.TEXTURE0+oe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,F.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,F.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Ke=F.isCompressedTexture||F.image[0].isCompressedTexture,Be=F.image[0]&&F.image[0].isDataTexture,he=[];for(let ce=0;ce<6;ce++)!Ke&&!Be?he[ce]=A(F.image[ce],!1,!0,u):he[ce]=Be?F.image[ce].image:F.image[ce],he[ce]=It(F,he[ce]);const Ue=he[0],Ge=w(Ue)||a,je=s.convert(F.format,F.colorSpace),Le=s.convert(F.type),Oe=I(F.internalFormat,je,Le,F.colorSpace),xt=a&&F.isVideoTexture!==!0,wt=Te.__version===void 0||_e===!0;let zt=T(F,Ue,Ge);ve(n.TEXTURE_CUBE_MAP,F,Ge);let J;if(Ke){xt&&wt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,zt,Oe,Ue.width,Ue.height);for(let ce=0;ce<6;ce++){J=he[ce].mipmaps;for(let xe=0;xe<J.length;xe++){const Pe=J[xe];F.format!==so?je!==null?xt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe,0,0,Pe.width,Pe.height,je,Pe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe,Oe,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe,0,0,Pe.width,Pe.height,je,Le,Pe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe,Oe,Pe.width,Pe.height,0,je,Le,Pe.data)}}}else{J=F.mipmaps,xt&&wt&&(J.length>0&&zt++,t.texStorage2D(n.TEXTURE_CUBE_MAP,zt,Oe,he[0].width,he[0].height));for(let ce=0;ce<6;ce++)if(Be){xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,he[ce].width,he[ce].height,je,Le,he[ce].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,Oe,he[ce].width,he[ce].height,0,je,Le,he[ce].data);for(let xe=0;xe<J.length;xe++){const ke=J[xe].image[ce].image;xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe+1,0,0,ke.width,ke.height,je,Le,ke.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe+1,Oe,ke.width,ke.height,0,je,Le,ke.data)}}else{xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,0,0,je,Le,he[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,0,Oe,je,Le,he[ce]);for(let xe=0;xe<J.length;xe++){const Pe=J[xe];xt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe+1,0,0,je,Le,Pe.image[ce]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ce,xe+1,Oe,je,Le,Pe.image[ce])}}}R(F,Ge)&&L(n.TEXTURE_CUBE_MAP),Te.__version=Me.version,F.onUpdate&&F.onUpdate(F)}U.__version=F.version}function ye(U,F,oe,_e,Me){const Te=s.convert(oe.format,oe.colorSpace),Ke=s.convert(oe.type),Be=I(oe.internalFormat,Te,Ke,oe.colorSpace);r.get(F).__hasExternalTextures||(Me===n.TEXTURE_3D||Me===n.TEXTURE_2D_ARRAY?t.texImage3D(Me,0,Be,F.width,F.height,F.depth,0,Te,Ke,null):t.texImage2D(Me,0,Be,F.width,F.height,0,Te,Ke,null)),t.bindFramebuffer(n.FRAMEBUFFER,U),Ve(F)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,Me,r.get(oe).__webglTexture,0,Qe(F)):(Me===n.TEXTURE_2D||Me>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,Me,r.get(oe).__webglTexture,0),t.bindFramebuffer(n.FRAMEBUFFER,null)}function me(U,F,oe){if(n.bindRenderbuffer(n.RENDERBUFFER,U),F.depthBuffer&&!F.stencilBuffer){let _e=n.DEPTH_COMPONENT16;if(oe||Ve(F)){const Me=F.depthTexture;Me&&Me.isDepthTexture&&(Me.type===Yu?_e=n.DEPTH_COMPONENT32F:Me.type===Td&&(_e=n.DEPTH_COMPONENT24));const Te=Qe(F);Ve(F)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Te,_e,F.width,F.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Te,_e,F.width,F.height)}else n.renderbufferStorage(n.RENDERBUFFER,_e,F.width,F.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,U)}else if(F.depthBuffer&&F.stencilBuffer){const _e=Qe(F);oe&&Ve(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,F.width,F.height):Ve(F)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,n.DEPTH24_STENCIL8,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,U)}else{const _e=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Me=0;Me<_e.length;Me++){const Te=_e[Me],Ke=s.convert(Te.format,Te.colorSpace),Be=s.convert(Te.type),he=I(Te.internalFormat,Ke,Be,Te.colorSpace),Ue=Qe(F);oe&&Ve(F)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,he,F.width,F.height):Ve(F)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ue,he,F.width,F.height):n.renderbufferStorage(n.RENDERBUFFER,he,F.width,F.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function pe(U,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,U),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),G(F.depthTexture,0);const _e=r.get(F.depthTexture).__webglTexture,Me=Qe(F);if(F.depthTexture.format===Qd)Ve(F)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,_e,0);else if(F.depthTexture.format===ig)Ve(F)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0,Me):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,_e,0);else throw new Error("Unknown depthTexture format")}function le(U){const F=r.get(U),oe=U.isWebGLCubeRenderTarget===!0;if(U.depthTexture&&!F.__autoAllocateDepthBuffer){if(oe)throw new Error("target.depthTexture not supported in Cube render targets");pe(F.__webglFramebuffer,U)}else if(oe){F.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer[_e]),F.__webglDepthbuffer[_e]=n.createRenderbuffer(),me(F.__webglDepthbuffer[_e],U,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer=n.createRenderbuffer(),me(F.__webglDepthbuffer,U,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(U,F,oe){const _e=r.get(U);F!==void 0&&ye(_e.__webglFramebuffer,U,U.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D),oe!==void 0&&le(U)}function Re(U){const F=U.texture,oe=r.get(U),_e=r.get(F);U.addEventListener("dispose",K),U.isWebGLMultipleRenderTargets!==!0&&(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=F.version,o.memory.textures++);const Me=U.isWebGLCubeRenderTarget===!0,Te=U.isWebGLMultipleRenderTargets===!0,Ke=w(U)||a;if(Me){oe.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)oe.__webglFramebuffer[Be]=n.createFramebuffer()}else{if(oe.__webglFramebuffer=n.createFramebuffer(),Te)if(i.drawBuffers){const Be=U.texture;for(let he=0,Ue=Be.length;he<Ue;he++){const Ge=r.get(Be[he]);Ge.__webglTexture===void 0&&(Ge.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&U.samples>0&&Ve(U)===!1){const Be=Te?F:[F];oe.__webglMultisampledFramebuffer=n.createFramebuffer(),oe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,oe.__webglMultisampledFramebuffer);for(let he=0;he<Be.length;he++){const Ue=Be[he];oe.__webglColorRenderbuffer[he]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,oe.__webglColorRenderbuffer[he]);const Ge=s.convert(Ue.format,Ue.colorSpace),je=s.convert(Ue.type),Le=I(Ue.internalFormat,Ge,je,Ue.colorSpace,U.isXRRenderTarget===!0),Oe=Qe(U);n.renderbufferStorageMultisample(n.RENDERBUFFER,Oe,Le,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+he,n.RENDERBUFFER,oe.__webglColorRenderbuffer[he])}n.bindRenderbuffer(n.RENDERBUFFER,null),U.depthBuffer&&(oe.__webglDepthRenderbuffer=n.createRenderbuffer(),me(oe.__webglDepthRenderbuffer,U,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Me){t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),ve(n.TEXTURE_CUBE_MAP,F,Ke);for(let Be=0;Be<6;Be++)ye(oe.__webglFramebuffer[Be],U,F,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Be);R(F,Ke)&&L(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Te){const Be=U.texture;for(let he=0,Ue=Be.length;he<Ue;he++){const Ge=Be[he],je=r.get(Ge);t.bindTexture(n.TEXTURE_2D,je.__webglTexture),ve(n.TEXTURE_2D,Ge,Ke),ye(oe.__webglFramebuffer,U,Ge,n.COLOR_ATTACHMENT0+he,n.TEXTURE_2D),R(Ge,Ke)&&L(n.TEXTURE_2D)}t.unbindTexture()}else{let Be=n.TEXTURE_2D;(U.isWebGL3DRenderTarget||U.isWebGLArrayRenderTarget)&&(a?Be=U.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Be,_e.__webglTexture),ve(Be,F,Ke),ye(oe.__webglFramebuffer,U,F,n.COLOR_ATTACHMENT0,Be),R(F,Ke)&&L(Be),t.unbindTexture()}U.depthBuffer&&le(U)}function De(U){const F=w(U)||a,oe=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let _e=0,Me=oe.length;_e<Me;_e++){const Te=oe[_e];if(R(Te,F)){const Ke=U.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Be=r.get(Te).__webglTexture;t.bindTexture(Ke,Be),L(Ke),t.unbindTexture()}}}function Je(U){if(a&&U.samples>0&&Ve(U)===!1){const F=U.isWebGLMultipleRenderTargets?U.texture:[U.texture],oe=U.width,_e=U.height;let Me=n.COLOR_BUFFER_BIT;const Te=[],Ke=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Be=r.get(U),he=U.isWebGLMultipleRenderTargets===!0;if(he)for(let Ue=0;Ue<F.length;Ue++)t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Be.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Be.__webglFramebuffer);for(let Ue=0;Ue<F.length;Ue++){Te.push(n.COLOR_ATTACHMENT0+Ue),U.depthBuffer&&Te.push(Ke);const Ge=Be.__ignoreDepthValues!==void 0?Be.__ignoreDepthValues:!1;if(Ge===!1&&(U.depthBuffer&&(Me|=n.DEPTH_BUFFER_BIT),U.stencilBuffer&&(Me|=n.STENCIL_BUFFER_BIT)),he&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Be.__webglColorRenderbuffer[Ue]),Ge===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Ke]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Ke])),he){const je=r.get(F[Ue]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,je,0)}n.blitFramebuffer(0,0,oe,_e,0,0,oe,_e,Me,n.NEAREST),m&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Te)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),he)for(let Ue=0;Ue<F.length;Ue++){t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,Be.__webglColorRenderbuffer[Ue]);const Ge=r.get(F[Ue]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Be.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,Ge,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Be.__webglMultisampledFramebuffer)}}function Qe(U){return Math.min(d,U.samples)}function Ve(U){const F=r.get(U);return a&&U.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function nt(U){const F=o.render.frame;v.get(U)!==F&&(v.set(U,F),U.update())}function It(U,F){const oe=U.colorSpace,_e=U.format,Me=U.type;return U.isCompressedTexture===!0||U.format===PT||oe!==Gl&&oe!==Zd&&(oe===Zt?a===!1?e.has("EXT_sRGB")===!0&&_e===so?(U.format=PT,U.minFilter=yr,U.generateMipmaps=!1):F=Mk.sRGBToLinear(F):(_e!==so||Me!==Ah)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",oe)),F}this.allocateTextureUnit=D,this.resetTextureUnits=O,this.setTexture2D=G,this.setTexture2DArray=q,this.setTexture3D=re,this.setTextureCube=Y,this.rebindTextures=Ae,this.setupRenderTarget=Re,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=Je,this.setupDepthRenderbuffer=le,this.setupFrameBufferTexture=ye,this.useMultisampledRTT=Ve}function U$(n,e,t){const r=t.isWebGL2;function i(s,o=Zd){let a;if(s===Ah)return n.UNSIGNED_BYTE;if(s===i$)return n.UNSIGNED_SHORT_4_4_4_4;if(s===s$)return n.UNSIGNED_SHORT_5_5_5_1;if(s===t$)return n.BYTE;if(s===n$)return n.SHORT;if(s===gk)return n.UNSIGNED_SHORT;if(s===r$)return n.INT;if(s===Td)return n.UNSIGNED_INT;if(s===Yu)return n.FLOAT;if(s===Zy)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===o$)return n.ALPHA;if(s===so)return n.RGBA;if(s===a$)return n.LUMINANCE;if(s===l$)return n.LUMINANCE_ALPHA;if(s===Qd)return n.DEPTH_COMPONENT;if(s===ig)return n.DEPTH_STENCIL;if(s===PT)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===c$)return n.RED;if(s===u$)return n.RED_INTEGER;if(s===h$)return n.RG;if(s===d$)return n.RG_INTEGER;if(s===f$)return n.RGBA_INTEGER;if(s===aC||s===lC||s===cC||s===uC)if(o===Zt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===aC)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===lC)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===cC)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===uC)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===aC)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===lC)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===cC)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===uC)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===GF||s===HF||s===zF||s===VF)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===GF)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===HF)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===zF)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===VF)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===p$)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===WF||s===jF)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===WF)return o===Zt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===jF)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===XF||s===JF||s===KF||s===YF||s===qF||s===QF||s===ZF||s===$F||s===e3||s===t3||s===n3||s===r3||s===i3||s===s3)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===XF)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===JF)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===KF)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===YF)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===qF)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===QF)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===ZF)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===$F)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===e3)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===t3)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===n3)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===r3)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===i3)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===s3)return o===Zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===hC)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===hC)return o===Zt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===m$||s===o3||s===a3||s===l3)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===hC)return a.COMPRESSED_RED_RGTC1_EXT;if(s===o3)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===a3)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===l3)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Fm?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class O$ extends gi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class qu extends En{constructor(){super(),this.isGroup=!0,this.type="Group"}}const tCe={type:"move"};class r2{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ie,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ie),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ie,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ie),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const S of e.hand.values()){const M=t.getJointPose(S,r),g=this._getHandJoint(u,S);M!==null&&(g.matrix.fromArray(M.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=M.radius),g.visible=M!==null}const h=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,v=.005;u.inputState.pinching&&p>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(tCe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new qu;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class k$ extends br{constructor(e,t,r,i,s,o,a,l,u,h){if(h=h!==void 0?h:Qd,h!==Qd&&h!==ig)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===Qd&&(r=Td),r===void 0&&h===ig&&(r=Fm),super(null,i,s,o,a,l,h,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ur,this.minFilter=l!==void 0?l:Ur,this.flipY=!1,this.generateMipmaps=!1}}class nCe extends Th{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,d=null,p=null,m=null,v=null;const S=t.getContextAttributes();let M=null,g=null;const _=[],A=[],w=new Set,C=new Map,R=new gi;R.layers.enable(1),R.viewport=new Un;const L=new gi;L.layers.enable(2),L.viewport=new Un;const I=[R,L],T=new O$;T.layers.enable(1),T.layers.enable(2);let B=null,H=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let ae=_[Y];return ae===void 0&&(ae=new r2,_[Y]=ae),ae.getTargetRaySpace()},this.getControllerGrip=function(Y){let ae=_[Y];return ae===void 0&&(ae=new r2,_[Y]=ae),ae.getGripSpace()},this.getHand=function(Y){let ae=_[Y];return ae===void 0&&(ae=new r2,_[Y]=ae),ae.getHandSpace()};function K(Y){const ae=A.indexOf(Y.inputSource);if(ae===-1)return;const Se=_[ae];Se!==void 0&&(Se.update(Y.inputSource,Y.frame,u||o),Se.dispatchEvent({type:Y.type,data:Y.inputSource}))}function j(){i.removeEventListener("select",K),i.removeEventListener("selectstart",K),i.removeEventListener("selectend",K),i.removeEventListener("squeeze",K),i.removeEventListener("squeezestart",K),i.removeEventListener("squeezeend",K),i.removeEventListener("end",j),i.removeEventListener("inputsourceschange",z);for(let Y=0;Y<_.length;Y++){const ae=A[Y];ae!==null&&(A[Y]=null,_[Y].disconnect(ae))}B=null,H=null,e.setRenderTarget(M),m=null,p=null,d=null,i=null,g=null,re.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){s=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){a=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(Y){u=Y},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(Y){if(i=Y,i!==null){if(M=e.getRenderTarget(),i.addEventListener("select",K),i.addEventListener("selectstart",K),i.addEventListener("selectend",K),i.addEventListener("squeeze",K),i.addEventListener("squeezestart",K),i.addEventListener("squeezeend",K),i.addEventListener("end",j),i.addEventListener("inputsourceschange",z),S.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ae={antialias:i.renderState.layers===void 0?S.antialias:!0,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,ae),i.updateRenderState({baseLayer:m}),g=new Hl(m.framebufferWidth,m.framebufferHeight,{format:so,type:Ah,colorSpace:e.outputColorSpace,stencilBuffer:S.stencil})}else{let ae=null,Se=null,ve=null;S.depth&&(ve=S.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ae=S.stencil?ig:Qd,Se=S.stencil?Fm:Td);const W={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:s};d=new XRWebGLBinding(i,t),p=d.createProjectionLayer(W),i.updateRenderState({layers:[p]}),g=new Hl(p.textureWidth,p.textureHeight,{format:so,type:Ah,depthTexture:new k$(p.textureWidth,p.textureHeight,Se,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:S.stencil,colorSpace:e.outputColorSpace,samples:S.antialias?4:0});const Xe=e.properties.get(g);Xe.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),re.setContext(i),re.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function z(Y){for(let ae=0;ae<Y.removed.length;ae++){const Se=Y.removed[ae],ve=A.indexOf(Se);ve>=0&&(A[ve]=null,_[ve].disconnect(Se))}for(let ae=0;ae<Y.added.length;ae++){const Se=Y.added[ae];let ve=A.indexOf(Se);if(ve===-1){for(let Xe=0;Xe<_.length;Xe++)if(Xe>=A.length){A.push(Se),ve=Xe;break}else if(A[Xe]===null){A[Xe]=Se,ve=Xe;break}if(ve===-1)break}const W=_[ve];W&&W.connect(Se)}}const X=new ie,te=new ie;function O(Y,ae,Se){X.setFromMatrixPosition(ae.matrixWorld),te.setFromMatrixPosition(Se.matrixWorld);const ve=X.distanceTo(te),W=ae.projectionMatrix.elements,Xe=Se.projectionMatrix.elements,Ne=W[14]/(W[10]-1),ye=W[14]/(W[10]+1),me=(W[9]+1)/W[5],pe=(W[9]-1)/W[5],le=(W[8]-1)/W[0],Ae=(Xe[8]+1)/Xe[0],Re=Ne*le,De=Ne*Ae,Je=ve/(-le+Ae),Qe=Je*-le;ae.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(Qe),Y.translateZ(Je),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert();const Ve=Ne+Je,nt=ye+Je,It=Re-Qe,U=De+(ve-Qe),F=me*ye/nt*Ve,oe=pe*ye/nt*Ve;Y.projectionMatrix.makePerspective(It,U,F,oe,Ve,nt),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}function D(Y,ae){ae===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(ae.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(i===null)return;T.near=L.near=R.near=Y.near,T.far=L.far=R.far=Y.far,(B!==T.near||H!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),B=T.near,H=T.far);const ae=Y.parent,Se=T.cameras;D(T,ae);for(let ve=0;ve<Se.length;ve++)D(Se[ve],ae);Se.length===2?O(T,R,L):T.projectionMatrix.copy(R.projectionMatrix),V(Y,T,ae)};function V(Y,ae,Se){Se===null?Y.matrix.copy(ae.matrixWorld):(Y.matrix.copy(Se.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(ae.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0);const ve=Y.children;for(let W=0,Xe=ve.length;W<Xe;W++)ve[W].updateMatrixWorld(!0);Y.projectionMatrix.copy(ae.projectionMatrix),Y.projectionMatrixInverse.copy(ae.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=ex*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(Y){l=Y,p!==null&&(p.fixedFoveation=Y),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Y)},this.getPlanes=function(){return w};let G=null;function q(Y,ae){if(h=ae.getViewerPose(u||o),v=ae,h!==null){const Se=h.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let ve=!1;Se.length!==T.cameras.length&&(T.cameras.length=0,ve=!0);for(let W=0;W<Se.length;W++){const Xe=Se[W];let Ne=null;if(m!==null)Ne=m.getViewport(Xe);else{const me=d.getViewSubImage(p,Xe);Ne=me.viewport,W===0&&(e.setRenderTargetTextures(g,me.colorTexture,p.ignoreDepthValues?void 0:me.depthStencilTexture),e.setRenderTarget(g))}let ye=I[W];ye===void 0&&(ye=new gi,ye.layers.enable(W),ye.viewport=new Un,I[W]=ye),ye.matrix.fromArray(Xe.transform.matrix),ye.matrix.decompose(ye.position,ye.quaternion,ye.scale),ye.projectionMatrix.fromArray(Xe.projectionMatrix),ye.projectionMatrixInverse.copy(ye.projectionMatrix).invert(),ye.viewport.set(Ne.x,Ne.y,Ne.width,Ne.height),W===0&&(T.matrix.copy(ye.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),ve===!0&&T.cameras.push(ye)}}for(let Se=0;Se<_.length;Se++){const ve=A[Se],W=_[Se];ve!==null&&W!==void 0&&W.update(ve,ae,u||o)}if(G&&G(Y,ae),ae.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:ae.detectedPlanes});let Se=null;for(const ve of w)ae.detectedPlanes.has(ve)||(Se===null&&(Se=[]),Se.push(ve));if(Se!==null)for(const ve of Se)w.delete(ve),C.delete(ve),r.dispatchEvent({type:"planeremoved",data:ve});for(const ve of ae.detectedPlanes)if(!w.has(ve))w.add(ve),C.set(ve,ae.lastChangedTime),r.dispatchEvent({type:"planeadded",data:ve});else{const W=C.get(ve);ve.lastChangedTime>W&&(C.set(ve,ve.lastChangedTime),r.dispatchEvent({type:"planechanged",data:ve}))}}v=null}const re=new L$;re.setAnimationLoop(q),this.setAnimationLoop=function(Y){G=Y},this.dispose=function(){}}}function rCe(n,e){function t(M,g){M.matrixAutoUpdate===!0&&M.updateMatrix(),g.value.copy(M.matrix)}function r(M,g){g.color.getRGB(M.fogColor.value,T$(n)),g.isFog?(M.fogNear.value=g.near,M.fogFar.value=g.far):g.isFogExp2&&(M.fogDensity.value=g.density)}function i(M,g,_,A,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(M,g):g.isMeshToonMaterial?(s(M,g),d(M,g)):g.isMeshPhongMaterial?(s(M,g),h(M,g)):g.isMeshStandardMaterial?(s(M,g),p(M,g),g.isMeshPhysicalMaterial&&m(M,g,w)):g.isMeshMatcapMaterial?(s(M,g),v(M,g)):g.isMeshDepthMaterial?s(M,g):g.isMeshDistanceMaterial?(s(M,g),S(M,g)):g.isMeshNormalMaterial?s(M,g):g.isLineBasicMaterial?(o(M,g),g.isLineDashedMaterial&&a(M,g)):g.isPointsMaterial?l(M,g,_,A):g.isSpriteMaterial?u(M,g):g.isShadowMaterial?(M.color.value.copy(g.color),M.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(M,g){M.opacity.value=g.opacity,g.color&&M.diffuse.value.copy(g.color),g.emissive&&M.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(M.map.value=g.map,t(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap,t(g.alphaMap,M.alphaMapTransform)),g.bumpMap&&(M.bumpMap.value=g.bumpMap,t(g.bumpMap,M.bumpMapTransform),M.bumpScale.value=g.bumpScale,g.side===Hs&&(M.bumpScale.value*=-1)),g.normalMap&&(M.normalMap.value=g.normalMap,t(g.normalMap,M.normalMapTransform),M.normalScale.value.copy(g.normalScale),g.side===Hs&&M.normalScale.value.negate()),g.displacementMap&&(M.displacementMap.value=g.displacementMap,t(g.displacementMap,M.displacementMapTransform),M.displacementScale.value=g.displacementScale,M.displacementBias.value=g.displacementBias),g.emissiveMap&&(M.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,M.emissiveMapTransform)),g.specularMap&&(M.specularMap.value=g.specularMap,t(g.specularMap,M.specularMapTransform)),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest);const _=e.get(g).envMap;if(_&&(M.envMap.value=_,M.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=g.reflectivity,M.ior.value=g.ior,M.refractionRatio.value=g.refractionRatio),g.lightMap){M.lightMap.value=g.lightMap;const A=n.useLegacyLights===!0?Math.PI:1;M.lightMapIntensity.value=g.lightMapIntensity*A,t(g.lightMap,M.lightMapTransform)}g.aoMap&&(M.aoMap.value=g.aoMap,M.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,M.aoMapTransform))}function o(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,g.map&&(M.map.value=g.map,t(g.map,M.mapTransform))}function a(M,g){M.dashSize.value=g.dashSize,M.totalSize.value=g.dashSize+g.gapSize,M.scale.value=g.scale}function l(M,g,_,A){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.size.value=g.size*_,M.scale.value=A*.5,g.map&&(M.map.value=g.map,t(g.map,M.uvTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function u(M,g){M.diffuse.value.copy(g.color),M.opacity.value=g.opacity,M.rotation.value=g.rotation,g.map&&(M.map.value=g.map,t(g.map,M.mapTransform)),g.alphaMap&&(M.alphaMap.value=g.alphaMap),g.alphaTest>0&&(M.alphaTest.value=g.alphaTest)}function h(M,g){M.specular.value.copy(g.specular),M.shininess.value=Math.max(g.shininess,1e-4)}function d(M,g){g.gradientMap&&(M.gradientMap.value=g.gradientMap)}function p(M,g){M.metalness.value=g.metalness,g.metalnessMap&&(M.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,M.metalnessMapTransform)),M.roughness.value=g.roughness,g.roughnessMap&&(M.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,M.roughnessMapTransform)),e.get(g).envMap&&(M.envMapIntensity.value=g.envMapIntensity)}function m(M,g,_){M.ior.value=g.ior,g.sheen>0&&(M.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),M.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(M.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,M.sheenColorMapTransform)),g.sheenRoughnessMap&&(M.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,M.sheenRoughnessMapTransform))),g.clearcoat>0&&(M.clearcoat.value=g.clearcoat,M.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(M.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,M.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(M.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Hs&&M.clearcoatNormalScale.value.negate())),g.iridescence>0&&(M.iridescence.value=g.iridescence,M.iridescenceIOR.value=g.iridescenceIOR,M.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(M.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,M.iridescenceMapTransform)),g.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),g.transmission>0&&(M.transmission.value=g.transmission,M.transmissionSamplerMap.value=_.texture,M.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(M.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,M.transmissionMapTransform)),M.thickness.value=g.thickness,g.thicknessMap&&(M.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=g.attenuationDistance,M.attenuationColor.value.copy(g.attenuationColor)),M.specularIntensity.value=g.specularIntensity,M.specularColor.value.copy(g.specularColor),g.specularColorMap&&(M.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,M.specularColorMapTransform)),g.specularIntensityMap&&(M.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,M.specularIntensityMapTransform))}function v(M,g){g.matcap&&(M.matcap.value=g.matcap)}function S(M,g){const _=e.get(g).light;M.referencePosition.value.setFromMatrixPosition(_.matrixWorld),M.nearDistance.value=_.shadow.camera.near,M.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function iCe(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(_,A){const w=A.program;r.uniformBlockBinding(_,w)}function u(_,A){let w=i[_.id];w===void 0&&(v(_),w=h(_),i[_.id]=w,_.addEventListener("dispose",M));const C=A.program;r.updateUBOMapping(_,C);const R=e.render.frame;s[_.id]!==R&&(p(_),s[_.id]=R)}function h(_){const A=d();_.__bindingPointIndex=A;const w=n.createBuffer(),C=_.__size,R=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,C,R),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,A,w),w}function d(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const A=i[_.id],w=_.uniforms,C=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,A);for(let R=0,L=w.length;R<L;R++){const I=w[R];if(m(I,R,C)===!0){const T=I.__offset,B=Array.isArray(I.value)?I.value:[I.value];let H=0;for(let K=0;K<B.length;K++){const j=B[K],z=S(j);typeof j=="number"?(I.__data[0]=j,n.bufferSubData(n.UNIFORM_BUFFER,T+H,I.__data)):j.isMatrix3?(I.__data[0]=j.elements[0],I.__data[1]=j.elements[1],I.__data[2]=j.elements[2],I.__data[3]=j.elements[0],I.__data[4]=j.elements[3],I.__data[5]=j.elements[4],I.__data[6]=j.elements[5],I.__data[7]=j.elements[0],I.__data[8]=j.elements[6],I.__data[9]=j.elements[7],I.__data[10]=j.elements[8],I.__data[11]=j.elements[0]):(j.toArray(I.__data,H),H+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,T,I.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(_,A,w){const C=_.value;if(w[A]===void 0){if(typeof C=="number")w[A]=C;else{const R=Array.isArray(C)?C:[C],L=[];for(let I=0;I<R.length;I++)L.push(R[I].clone());w[A]=L}return!0}else if(typeof C=="number"){if(w[A]!==C)return w[A]=C,!0}else{const R=Array.isArray(w[A])?w[A]:[w[A]],L=Array.isArray(C)?C:[C];for(let I=0;I<R.length;I++){const T=R[I];if(T.equals(L[I])===!1)return T.copy(L[I]),!0}}return!1}function v(_){const A=_.uniforms;let w=0;const C=16;let R=0;for(let L=0,I=A.length;L<I;L++){const T=A[L],B={boundary:0,storage:0},H=Array.isArray(T.value)?T.value:[T.value];for(let K=0,j=H.length;K<j;K++){const z=H[K],X=S(z);B.boundary+=X.boundary,B.storage+=X.storage}if(T.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=w,L>0){R=w%C;const K=C-R;R!==0&&K-B.boundary<0&&(w+=C-R,T.__offset=w)}w+=B.storage}return R=w%C,R>0&&(w+=C-R),_.__size=w,_.__cache={},this}function S(_){const A={boundary:0,storage:0};return typeof _=="number"?(A.boundary=4,A.storage=4):_.isVector2?(A.boundary=8,A.storage=8):_.isVector3||_.isColor?(A.boundary=16,A.storage=12):_.isVector4?(A.boundary=16,A.storage=16):_.isMatrix3?(A.boundary=48,A.storage=48):_.isMatrix4?(A.boundary=64,A.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),A}function M(_){const A=_.target;A.removeEventListener("dispose",M);const w=o.indexOf(A.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(i[A.id]),delete i[A.id],delete s[A.id]}function g(){for(const _ in i)n.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:u,dispose:g}}function sCe(){const n=wS("canvas");return n.style.display="block",n}class Pk{constructor(e={}){const{canvas:t=sCe(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;let m=null,v=null;const S=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Zt,this.useLegacyLights=!0,this.toneMapping=Dl,this.toneMappingExposure=1;const g=this;let _=!1,A=0,w=0,C=null,R=-1,L=null;const I=new Un,T=new Un;let B=null,H=t.width,K=t.height,j=1,z=null,X=null;const te=new Un(0,0,H,K),O=new Un(0,0,H,K);let D=!1;const V=new eP;let G=!1,q=!1,re=null;const Y=new jt,ae=new ie,Se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ve(){return C===null?j:1}let W=r;function Xe(N,ne){for(let ue=0;ue<N.length;ue++){const Z=N[ue],de=t.getContext(Z,ne);if(de!==null)return de}return null}try{const N={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${lM}`),t.addEventListener("webglcontextlost",Oe,!1),t.addEventListener("webglcontextrestored",xt,!1),t.addEventListener("webglcontextcreationerror",wt,!1),W===null){const ne=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&ne.shift(),W=Xe(ne,N),W===null)throw Xe(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}W.getShaderPrecisionFormat===void 0&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(N){throw console.error("THREE.WebGLRenderer: "+N.message),N}let Ne,ye,me,pe,le,Ae,Re,De,Je,Qe,Ve,nt,It,U,F,oe,_e,Me,Te,Ke,Be,he,Ue,Ge;function je(){Ne=new Awe(W),ye=new mwe(W,Ne,e),Ne.init(ye),he=new U$(W,Ne,ye),me=new $be(W,Ne,ye),pe=new Ewe(W),le=new Hbe,Ae=new eCe(W,Ne,me,le,ye,he,pe),Re=new vwe(g),De=new _we(g),Je=new NSe(W,ye),Ue=new fwe(W,Ne,Je,ye),Qe=new Swe(W,Je,pe,Ue),Ve=new Twe(W,Qe,Je,pe),Te=new Cwe(W,ye,Ae),oe=new gwe(le),nt=new Gbe(g,Re,De,Ne,ye,Ue,oe),It=new rCe(g,le),U=new Vbe,F=new Ybe(Ne,ye),Me=new dwe(g,Re,De,me,Ve,p,l),_e=new Zbe(g,Ve,ye),Ge=new iCe(W,pe,ye,me),Ke=new pwe(W,Ne,pe,ye),Be=new Mwe(W,Ne,pe,ye),pe.programs=nt.programs,g.capabilities=ye,g.extensions=Ne,g.properties=le,g.renderLists=U,g.shadowMap=_e,g.state=me,g.info=pe}je();const Le=new nCe(g,W);this.xr=Le,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const N=Ne.get("WEBGL_lose_context");N&&N.loseContext()},this.forceContextRestore=function(){const N=Ne.get("WEBGL_lose_context");N&&N.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(N){N!==void 0&&(j=N,this.setSize(H,K,!1))},this.getSize=function(N){return N.set(H,K)},this.setSize=function(N,ne,ue=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=N,K=ne,t.width=Math.floor(N*j),t.height=Math.floor(ne*j),ue===!0&&(t.style.width=N+"px",t.style.height=ne+"px"),this.setViewport(0,0,N,ne)},this.getDrawingBufferSize=function(N){return N.set(H*j,K*j).floor()},this.setDrawingBufferSize=function(N,ne,ue){H=N,K=ne,j=ue,t.width=Math.floor(N*ue),t.height=Math.floor(ne*ue),this.setViewport(0,0,N,ne)},this.getCurrentViewport=function(N){return N.copy(I)},this.getViewport=function(N){return N.copy(te)},this.setViewport=function(N,ne,ue,Z){N.isVector4?te.set(N.x,N.y,N.z,N.w):te.set(N,ne,ue,Z),me.viewport(I.copy(te).multiplyScalar(j).floor())},this.getScissor=function(N){return N.copy(O)},this.setScissor=function(N,ne,ue,Z){N.isVector4?O.set(N.x,N.y,N.z,N.w):O.set(N,ne,ue,Z),me.scissor(T.copy(O).multiplyScalar(j).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(N){me.setScissorTest(D=N)},this.setOpaqueSort=function(N){z=N},this.setTransparentSort=function(N){X=N},this.getClearColor=function(N){return N.copy(Me.getClearColor())},this.setClearColor=function(){Me.setClearColor.apply(Me,arguments)},this.getClearAlpha=function(){return Me.getClearAlpha()},this.setClearAlpha=function(){Me.setClearAlpha.apply(Me,arguments)},this.clear=function(N=!0,ne=!0,ue=!0){let Z=0;N&&(Z|=W.COLOR_BUFFER_BIT),ne&&(Z|=W.DEPTH_BUFFER_BIT),ue&&(Z|=W.STENCIL_BUFFER_BIT),W.clear(Z)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Oe,!1),t.removeEventListener("webglcontextrestored",xt,!1),t.removeEventListener("webglcontextcreationerror",wt,!1),U.dispose(),F.dispose(),le.dispose(),Re.dispose(),De.dispose(),Ve.dispose(),Ue.dispose(),Ge.dispose(),nt.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",ke),Le.removeEventListener("sessionend",Lt),re&&(re.dispose(),re=null),Rt.stop()};function Oe(N){N.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function xt(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const N=pe.autoReset,ne=_e.enabled,ue=_e.autoUpdate,Z=_e.needsUpdate,de=_e.type;je(),pe.autoReset=N,_e.enabled=ne,_e.autoUpdate=ue,_e.needsUpdate=Z,_e.type=de}function wt(N){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",N.statusMessage)}function zt(N){const ne=N.target;ne.removeEventListener("dispose",zt),J(ne)}function J(N){ce(N),le.remove(N)}function ce(N){const ne=le.get(N).programs;ne!==void 0&&(ne.forEach(function(ue){nt.releaseProgram(ue)}),N.isShaderMaterial&&nt.releaseShaderCache(N))}this.renderBufferDirect=function(N,ne,ue,Z,de,Fe){ne===null&&(ne=Se);const Ye=de.isMesh&&de.matrixWorld.determinant()<0,$e=rc(N,ne,ue,Z,de);me.setMaterial(Z,Ye);let st=ue.index,_t=1;Z.wireframe===!0&&(st=Qe.getWireframeAttribute(ue),_t=2);const ct=ue.drawRange,ut=ue.attributes.position;let Dt=ct.start*_t,yn=(ct.start+ct.count)*_t;Fe!==null&&(Dt=Math.max(Dt,Fe.start*_t),yn=Math.min(yn,(Fe.start+Fe.count)*_t)),st!==null?(Dt=Math.max(Dt,0),yn=Math.min(yn,st.count)):ut!=null&&(Dt=Math.max(Dt,0),yn=Math.min(yn,ut.count));const Ln=yn-Dt;if(Ln<0||Ln===1/0)return;Ue.setup(de,Z,$e,ue,st);let $n,Ft=Ke;if(st!==null&&($n=Je.get(st),Ft=Be,Ft.setIndex($n)),de.isMesh)Z.wireframe===!0?(me.setLineWidth(Z.wireframeLinewidth*ve()),Ft.setMode(W.LINES)):Ft.setMode(W.TRIANGLES);else if(de.isLine){let ht=Z.linewidth;ht===void 0&&(ht=1),me.setLineWidth(ht*ve()),de.isLineSegments?Ft.setMode(W.LINES):de.isLineLoop?Ft.setMode(W.LINE_LOOP):Ft.setMode(W.LINE_STRIP)}else de.isPoints?Ft.setMode(W.POINTS):de.isSprite&&Ft.setMode(W.TRIANGLES);if(de.isInstancedMesh)Ft.renderInstances(Dt,Ln,de.count);else if(ue.isInstancedBufferGeometry){const ht=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,_o=Math.min(ue.instanceCount,ht);Ft.renderInstances(Dt,Ln,_o)}else Ft.render(Dt,Ln)},this.compile=function(N,ne){function ue(Z,de,Fe){Z.transparent===!0&&Z.side===Cl&&Z.forceSinglePass===!1?(Z.side=Hs,Z.needsUpdate=!0,xo(Z,de,Fe),Z.side=Vc,Z.needsUpdate=!0,xo(Z,de,Fe),Z.side=Cl):xo(Z,de,Fe)}v=F.get(N),v.init(),M.push(v),N.traverseVisible(function(Z){Z.isLight&&Z.layers.test(ne.layers)&&(v.pushLight(Z),Z.castShadow&&v.pushShadow(Z))}),v.setupLights(g.useLegacyLights),N.traverse(function(Z){const de=Z.material;if(de)if(Array.isArray(de))for(let Fe=0;Fe<de.length;Fe++){const Ye=de[Fe];ue(Ye,N,Z)}else ue(de,N,Z)}),M.pop(),v=null};let xe=null;function Pe(N){xe&&xe(N)}function ke(){Rt.stop()}function Lt(){Rt.start()}const Rt=new L$;Rt.setAnimationLoop(Pe),typeof self<"u"&&Rt.setContext(self),this.setAnimationLoop=function(N){xe=N,Le.setAnimationLoop(N),N===null?Rt.stop():Rt.start()},Le.addEventListener("sessionstart",ke),Le.addEventListener("sessionend",Lt),this.render=function(N,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;N.matrixWorldAutoUpdate===!0&&N.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(ne),ne=Le.getCamera()),N.isScene===!0&&N.onBeforeRender(g,N,ne,C),v=F.get(N,M.length),v.init(),M.push(v),Y.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),V.setFromProjectionMatrix(Y),q=this.localClippingEnabled,G=oe.init(this.clippingPlanes,q),m=U.get(N,S.length),m.init(),S.push(m),ln(N,ne,0,g.sortObjects),m.finish(),g.sortObjects===!0&&m.sort(z,X),G===!0&&oe.beginShadows();const ue=v.state.shadowsArray;if(_e.render(ue,N,ne),G===!0&&oe.endShadows(),this.info.autoReset===!0&&this.info.reset(),Me.render(m,N),v.setupLights(g.useLegacyLights),ne.isArrayCamera){const Z=ne.cameras;for(let de=0,Fe=Z.length;de<Fe;de++){const Ye=Z[de];dr(m,N,Ye,Ye.viewport)}}else dr(m,N,ne);C!==null&&(Ae.updateMultisampleRenderTarget(C),Ae.updateRenderTargetMipmap(C)),N.isScene===!0&&N.onAfterRender(g,N,ne),Ue.resetDefaultState(),R=-1,L=null,M.pop(),M.length>0?v=M[M.length-1]:v=null,S.pop(),S.length>0?m=S[S.length-1]:m=null};function ln(N,ne,ue,Z){if(N.visible===!1)return;if(N.layers.test(ne.layers)){if(N.isGroup)ue=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&&N.update(ne);else if(N.isLight)v.pushLight(N),N.castShadow&&v.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||V.intersectsSprite(N)){Z&&ae.setFromMatrixPosition(N.matrixWorld).applyMatrix4(Y);const Ye=Ve.update(N),$e=N.material;$e.visible&&m.push(N,Ye,$e,ue,ae.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&&(!N.frustumCulled||V.intersectsObject(N))){N.isSkinnedMesh&&N.skeleton.frame!==pe.render.frame&&(N.skeleton.update(),N.skeleton.frame=pe.render.frame);const Ye=Ve.update(N),$e=N.material;if(Z&&(Ye.boundingSphere===null&&Ye.computeBoundingSphere(),ae.copy(Ye.boundingSphere.center).applyMatrix4(N.matrixWorld).applyMatrix4(Y)),Array.isArray($e)){const st=Ye.groups;for(let _t=0,ct=st.length;_t<ct;_t++){const ut=st[_t],Dt=$e[ut.materialIndex];Dt&&Dt.visible&&m.push(N,Ye,Dt,ue,ae.z,ut)}}else $e.visible&&m.push(N,Ye,$e,ue,ae.z,null)}}const Fe=N.children;for(let Ye=0,$e=Fe.length;Ye<$e;Ye++)ln(Fe[Ye],ne,ue,Z)}function dr(N,ne,ue,Z){const de=N.opaque,Fe=N.transmissive,Ye=N.transparent;v.setupLightsView(ue),G===!0&&oe.setGlobalState(g.clippingPlanes,ue),Fe.length>0&&kt(de,Fe,ne,ue),Z&&me.viewport(I.copy(Z)),de.length>0&&Pn(de,ne,ue),Fe.length>0&&Pn(Fe,ne,ue),Ye.length>0&&Pn(Ye,ne,ue),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1)}function kt(N,ne,ue,Z){if(re===null){const $e=ye.isWebGL2;re=new Hl(1024,1024,{generateMipmaps:!0,type:Ne.has("EXT_color_buffer_half_float")?Zy:Ah,minFilter:Wc,samples:$e&&a===!0?4:0})}const de=g.getRenderTarget();g.setRenderTarget(re),g.clear();const Fe=g.toneMapping;g.toneMapping=Dl,Pn(N,ue,Z),Ae.updateMultisampleRenderTarget(re),Ae.updateRenderTargetMipmap(re);let Ye=!1;for(let $e=0,st=ne.length;$e<st;$e++){const _t=ne[$e],ct=_t.object,ut=_t.geometry,Dt=_t.material,yn=_t.group;if(Dt.side===Cl&&ct.layers.test(Z.layers)){const Ln=Dt.side;Dt.side=Hs,Dt.needsUpdate=!0,Zn(ct,ue,Z,ut,Dt,yn),Dt.side=Ln,Dt.needsUpdate=!0,Ye=!0}}Ye===!0&&(Ae.updateMultisampleRenderTarget(re),Ae.updateRenderTargetMipmap(re)),g.setRenderTarget(de),g.toneMapping=Fe}function Pn(N,ne,ue){const Z=ne.isScene===!0?ne.overrideMaterial:null;for(let de=0,Fe=N.length;de<Fe;de++){const Ye=N[de],$e=Ye.object,st=Ye.geometry,_t=Z===null?Ye.material:Z,ct=Ye.group;$e.layers.test(ue.layers)&&Zn($e,ne,ue,st,_t,ct)}}function Zn(N,ne,ue,Z,de,Fe){N.onBeforeRender(g,ne,ue,Z,de,Fe),N.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),de.onBeforeRender(g,ne,ue,Z,N,Fe),de.transparent===!0&&de.side===Cl&&de.forceSinglePass===!1?(de.side=Hs,de.needsUpdate=!0,g.renderBufferDirect(ue,ne,Z,de,N,Fe),de.side=Vc,de.needsUpdate=!0,g.renderBufferDirect(ue,ne,Z,de,N,Fe),de.side=Cl):g.renderBufferDirect(ue,ne,Z,de,N,Fe),N.onAfterRender(g,ne,ue,Z,de,Fe)}function xo(N,ne,ue){ne.isScene!==!0&&(ne=Se);const Z=le.get(N),de=v.state.lights,Fe=v.state.shadowsArray,Ye=de.state.version,$e=nt.getParameters(N,de.state,Fe,ne,ue),st=nt.getProgramCacheKey($e);let _t=Z.programs;Z.environment=N.isMeshStandardMaterial?ne.environment:null,Z.fog=ne.fog,Z.envMap=(N.isMeshStandardMaterial?De:Re).get(N.envMap||Z.environment),_t===void 0&&(N.addEventListener("dispose",zt),_t=new Map,Z.programs=_t);let ct=_t.get(st);if(ct!==void 0){if(Z.currentProgram===ct&&Z.lightsStateVersion===Ye)return nc(N,$e),ct}else $e.uniforms=nt.getUniforms(N),N.onBuild(ue,$e,g),N.onBeforeCompile($e,g),ct=nt.acquireProgram($e,st),_t.set(st,ct),Z.uniforms=$e.uniforms;const ut=Z.uniforms;(!N.isShaderMaterial&&!N.isRawShaderMaterial||N.clipping===!0)&&(ut.clippingPlanes=oe.uniform),nc(N,$e),Z.needsLights=qa(N),Z.lightsStateVersion=Ye,Z.needsLights&&(ut.ambientLightColor.value=de.state.ambient,ut.lightProbe.value=de.state.probe,ut.directionalLights.value=de.state.directional,ut.directionalLightShadows.value=de.state.directionalShadow,ut.spotLights.value=de.state.spot,ut.spotLightShadows.value=de.state.spotShadow,ut.rectAreaLights.value=de.state.rectArea,ut.ltc_1.value=de.state.rectAreaLTC1,ut.ltc_2.value=de.state.rectAreaLTC2,ut.pointLights.value=de.state.point,ut.pointLightShadows.value=de.state.pointShadow,ut.hemisphereLights.value=de.state.hemi,ut.directionalShadowMap.value=de.state.directionalShadowMap,ut.directionalShadowMatrix.value=de.state.directionalShadowMatrix,ut.spotShadowMap.value=de.state.spotShadowMap,ut.spotLightMatrix.value=de.state.spotLightMatrix,ut.spotLightMap.value=de.state.spotLightMap,ut.pointShadowMap.value=de.state.pointShadowMap,ut.pointShadowMatrix.value=de.state.pointShadowMatrix);const Dt=ct.getUniforms(),yn=pC.seqWithValue(Dt.seq,ut);return Z.currentProgram=ct,Z.uniformsList=yn,ct}function nc(N,ne){const ue=le.get(N);ue.outputColorSpace=ne.outputColorSpace,ue.instancing=ne.instancing,ue.skinning=ne.skinning,ue.morphTargets=ne.morphTargets,ue.morphNormals=ne.morphNormals,ue.morphColors=ne.morphColors,ue.morphTargetsCount=ne.morphTargetsCount,ue.numClippingPlanes=ne.numClippingPlanes,ue.numIntersection=ne.numClipIntersection,ue.vertexAlphas=ne.vertexAlphas,ue.vertexTangents=ne.vertexTangents,ue.toneMapping=ne.toneMapping}function rc(N,ne,ue,Z,de){ne.isScene!==!0&&(ne=Se),Ae.resetTextureUnits();const Fe=ne.fog,Ye=Z.isMeshStandardMaterial?ne.environment:null,$e=C===null?g.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:Gl,st=(Z.isMeshStandardMaterial?De:Re).get(Z.envMap||Ye),_t=Z.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,ct=!!Z.normalMap&&!!ue.attributes.tangent,ut=!!ue.morphAttributes.position,Dt=!!ue.morphAttributes.normal,yn=!!ue.morphAttributes.color,Ln=Z.toneMapped?g.toneMapping:Dl,$n=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Ft=$n!==void 0?$n.length:0,ht=le.get(Z),_o=v.state.lights;if(G===!0&&(q===!0||N!==L)){const Ot=N===L&&Z.id===R;oe.setState(Z,N,Ot)}let Gn=!1;Z.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==_o.state.version||ht.outputColorSpace!==$e||de.isInstancedMesh&&ht.instancing===!1||!de.isInstancedMesh&&ht.instancing===!0||de.isSkinnedMesh&&ht.skinning===!1||!de.isSkinnedMesh&&ht.skinning===!0||ht.envMap!==st||Z.fog===!0&&ht.fog!==Fe||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==oe.numPlanes||ht.numIntersection!==oe.numIntersection)||ht.vertexAlphas!==_t||ht.vertexTangents!==ct||ht.morphTargets!==ut||ht.morphNormals!==Dt||ht.morphColors!==yn||ht.toneMapping!==Ln||ye.isWebGL2===!0&&ht.morphTargetsCount!==Ft)&&(Gn=!0):(Gn=!0,ht.__version=Z.version);let Wn=ht.currentProgram;Gn===!0&&(Wn=xo(Z,ne,de));let Hr=!1,Vt=!1,Pt=!1;const St=Wn.getUniforms(),Kt=ht.uniforms;if(me.useProgram(Wn.program)&&(Hr=!0,Vt=!0,Pt=!0),Z.id!==R&&(R=Z.id,Vt=!0),Hr||L!==N){if(St.setValue(W,"projectionMatrix",N.projectionMatrix),ye.logarithmicDepthBuffer&&St.setValue(W,"logDepthBufFC",2/(Math.log(N.far+1)/Math.LN2)),L!==N&&(L=N,Vt=!0,Pt=!0),Z.isShaderMaterial||Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshStandardMaterial||Z.envMap){const Ot=St.map.cameraPosition;Ot!==void 0&&Ot.setValue(W,ae.setFromMatrixPosition(N.matrixWorld))}(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial)&&St.setValue(W,"isOrthographic",N.isOrthographicCamera===!0),(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial||Z.isShadowMaterial||de.isSkinnedMesh)&&St.setValue(W,"viewMatrix",N.matrixWorldInverse)}if(de.isSkinnedMesh){St.setOptional(W,de,"bindMatrix"),St.setOptional(W,de,"bindMatrixInverse");const Ot=de.skeleton;Ot&&(ye.floatVertexTextures?(Ot.boneTexture===null&&Ot.computeBoneTexture(),St.setValue(W,"boneTexture",Ot.boneTexture,Ae),St.setValue(W,"boneTextureSize",Ot.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const on=ue.morphAttributes;if((on.position!==void 0||on.normal!==void 0||on.color!==void 0&&ye.isWebGL2===!0)&&Te.update(de,ue,Wn),(Vt||ht.receiveShadow!==de.receiveShadow)&&(ht.receiveShadow=de.receiveShadow,St.setValue(W,"receiveShadow",de.receiveShadow)),Z.isMeshGouraudMaterial&&Z.envMap!==null&&(Kt.envMap.value=st,Kt.flipEnvMap.value=st.isCubeTexture&&st.isRenderTargetTexture===!1?-1:1),Vt&&(St.setValue(W,"toneMappingExposure",g.toneMappingExposure),ht.needsLights&&Xc(Kt,Pt),Fe&&Z.fog===!0&&It.refreshFogUniforms(Kt,Fe),It.refreshMaterialUniforms(Kt,Z,j,K,re),pC.upload(W,ht.uniformsList,Kt,Ae)),Z.isShaderMaterial&&Z.uniformsNeedUpdate===!0&&(pC.upload(W,ht.uniformsList,Kt,Ae),Z.uniformsNeedUpdate=!1),Z.isSpriteMaterial&&St.setValue(W,"center",de.center),St.setValue(W,"modelViewMatrix",de.modelViewMatrix),St.setValue(W,"normalMatrix",de.normalMatrix),St.setValue(W,"modelMatrix",de.matrixWorld),Z.isShaderMaterial||Z.isRawShaderMaterial){const Ot=Z.uniformsGroups;for(let Rr=0,er=Ot.length;Rr<er;Rr++)if(ye.isWebGL2){const tr=Ot[Rr];Ge.update(tr,Wn),Ge.bind(tr,Wn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Wn}function Xc(N,ne){N.ambientLightColor.needsUpdate=ne,N.lightProbe.needsUpdate=ne,N.directionalLights.needsUpdate=ne,N.directionalLightShadows.needsUpdate=ne,N.pointLights.needsUpdate=ne,N.pointLightShadows.needsUpdate=ne,N.spotLights.needsUpdate=ne,N.spotLightShadows.needsUpdate=ne,N.rectAreaLights.needsUpdate=ne,N.hemisphereLights.needsUpdate=ne}function qa(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&&N.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(N,ne,ue){le.get(N.texture).__webglTexture=ne,le.get(N.depthTexture).__webglTexture=ue;const Z=le.get(N);Z.__hasExternalTextures=!0,Z.__hasExternalTextures&&(Z.__autoAllocateDepthBuffer=ue===void 0,Z.__autoAllocateDepthBuffer||Ne.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Z.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(N,ne){const ue=le.get(N);ue.__webglFramebuffer=ne,ue.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(N,ne=0,ue=0){C=N,A=ne,w=ue;let Z=!0,de=null,Fe=!1,Ye=!1;if(N){const st=le.get(N);st.__useDefaultFramebuffer!==void 0?(me.bindFramebuffer(W.FRAMEBUFFER,null),Z=!1):st.__webglFramebuffer===void 0?Ae.setupRenderTarget(N):st.__hasExternalTextures&&Ae.rebindTextures(N,le.get(N.texture).__webglTexture,le.get(N.depthTexture).__webglTexture);const _t=N.texture;(_t.isData3DTexture||_t.isDataArrayTexture||_t.isCompressedArrayTexture)&&(Ye=!0);const ct=le.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(de=ct[ne],Fe=!0):ye.isWebGL2&&N.samples>0&&Ae.useMultisampledRTT(N)===!1?de=le.get(N).__webglMultisampledFramebuffer:de=ct,I.copy(N.viewport),T.copy(N.scissor),B=N.scissorTest}else I.copy(te).multiplyScalar(j).floor(),T.copy(O).multiplyScalar(j).floor(),B=D;if(me.bindFramebuffer(W.FRAMEBUFFER,de)&&ye.drawBuffers&&Z&&me.drawBuffers(N,de),me.viewport(I),me.scissor(T),me.setScissorTest(B),Fe){const st=le.get(N.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+ne,st.__webglTexture,ue)}else if(Ye){const st=le.get(N.texture),_t=ne||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,st.__webglTexture,ue||0,_t)}R=-1},this.readRenderTargetPixels=function(N,ne,ue,Z,de,Fe,Ye){if(!(N&&N.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let $e=le.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&&Ye!==void 0&&($e=$e[Ye]),$e){me.bindFramebuffer(W.FRAMEBUFFER,$e);try{const st=N.texture,_t=st.format,ct=st.type;if(_t!==so&&he.convert(_t)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ut=ct===Zy&&(Ne.has("EXT_color_buffer_half_float")||ye.isWebGL2&&Ne.has("EXT_color_buffer_float"));if(ct!==Ah&&he.convert(ct)!==W.getParameter(W.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ct===Yu&&(ye.isWebGL2||Ne.has("OES_texture_float")||Ne.has("WEBGL_color_buffer_float")))&&!ut){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=N.width-Z&&ue>=0&&ue<=N.height-de&&W.readPixels(ne,ue,Z,de,he.convert(_t),he.convert(ct),Fe)}finally{const st=C!==null?le.get(C).__webglFramebuffer:null;me.bindFramebuffer(W.FRAMEBUFFER,st)}}},this.copyFramebufferToTexture=function(N,ne,ue=0){const Z=Math.pow(2,-ue),de=Math.floor(ne.image.width*Z),Fe=Math.floor(ne.image.height*Z);Ae.setTexture2D(ne,0),W.copyTexSubImage2D(W.TEXTURE_2D,ue,0,0,N.x,N.y,de,Fe),me.unbindTexture()},this.copyTextureToTexture=function(N,ne,ue,Z=0){const de=ne.image.width,Fe=ne.image.height,Ye=he.convert(ue.format),$e=he.convert(ue.type);Ae.setTexture2D(ue,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,ue.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,ue.unpackAlignment),ne.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,Z,N.x,N.y,de,Fe,Ye,$e,ne.image.data):ne.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,Z,N.x,N.y,ne.mipmaps[0].width,ne.mipmaps[0].height,Ye,ne.mipmaps[0].data):W.texSubImage2D(W.TEXTURE_2D,Z,N.x,N.y,Ye,$e,ne.image),Z===0&&ue.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),me.unbindTexture()},this.copyTextureToTexture3D=function(N,ne,ue,Z,de=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Fe=N.max.x-N.min.x+1,Ye=N.max.y-N.min.y+1,$e=N.max.z-N.min.z+1,st=he.convert(Z.format),_t=he.convert(Z.type);let ct;if(Z.isData3DTexture)Ae.setTexture3D(Z,0),ct=W.TEXTURE_3D;else if(Z.isDataArrayTexture)Ae.setTexture2DArray(Z,0),ct=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,Z.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,Z.unpackAlignment);const ut=W.getParameter(W.UNPACK_ROW_LENGTH),Dt=W.getParameter(W.UNPACK_IMAGE_HEIGHT),yn=W.getParameter(W.UNPACK_SKIP_PIXELS),Ln=W.getParameter(W.UNPACK_SKIP_ROWS),$n=W.getParameter(W.UNPACK_SKIP_IMAGES),Ft=ue.isCompressedTexture?ue.mipmaps[0]:ue.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,Ft.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Ft.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,N.min.x),W.pixelStorei(W.UNPACK_SKIP_ROWS,N.min.y),W.pixelStorei(W.UNPACK_SKIP_IMAGES,N.min.z),ue.isDataTexture||ue.isData3DTexture?W.texSubImage3D(ct,de,ne.x,ne.y,ne.z,Fe,Ye,$e,st,_t,Ft.data):ue.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),W.compressedTexSubImage3D(ct,de,ne.x,ne.y,ne.z,Fe,Ye,$e,st,Ft.data)):W.texSubImage3D(ct,de,ne.x,ne.y,ne.z,Fe,Ye,$e,st,_t,Ft),W.pixelStorei(W.UNPACK_ROW_LENGTH,ut),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Dt),W.pixelStorei(W.UNPACK_SKIP_PIXELS,yn),W.pixelStorei(W.UNPACK_SKIP_ROWS,Ln),W.pixelStorei(W.UNPACK_SKIP_IMAGES,$n),de===0&&Z.generateMipmaps&&W.generateMipmap(ct),me.unbindTexture()},this.initTexture=function(N){N.isCubeTexture?Ae.setTextureCube(N,0):N.isData3DTexture?Ae.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?Ae.setTexture2DArray(N,0):Ae.setTexture2D(N,0),me.unbindTexture()},this.resetState=function(){A=0,w=0,C=null,me.reset(),Ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Zt?oh:_k}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===oh?Zt:Gl}}class G$ extends Pk{}G$.prototype.isWebGL1Renderer=!0;class nP{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new yt(e),this.density=t}clone(){return new nP(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class rP{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new yt(e),this.near=t,this.far=r}clone(){return new rP(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let Bk=class extends En{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}};class pM{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ES,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ko()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ko()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Bs=new ie;class yf{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Bs.fromBufferAttribute(this,t),Bs.applyMatrix4(e),this.setXYZ(t,Bs.x,Bs.y,Bs.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Bs.fromBufferAttribute(this,t),Bs.applyNormalMatrix(e),this.setXYZ(t,Bs.x,Bs.y,Bs.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Bs.fromBufferAttribute(this,t),Bs.transformDirection(e),this.setXYZ(t,Bs.x,Bs.y,Bs.z);return this}setX(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=sn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Vo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Vo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Vo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Vo(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=sn(t,this.array),r=sn(r,this.array),i=sn(i,this.array),s=sn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Tn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new yf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Lk extends _i{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new yt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let sv;const d1=new ie,ov=new ie,av=new ie,lv=new ze,f1=new ze,H$=new jt,Yw=new ie,p1=new ie,qw=new ie,W5=new ze,i2=new ze,j5=new ze;class z$ extends En{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",sv===void 0){sv=new en;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new pM(t,5);sv.setIndex([0,1,2,0,2,3]),sv.setAttribute("position",new yf(r,3,0,!1)),sv.setAttribute("uv",new yf(r,2,3,!1))}this.geometry=sv,this.material=e!==void 0?e:new Lk,this.center=new ze(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ov.setFromMatrixScale(this.matrixWorld),H$.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),av.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ov.multiplyScalar(-av.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Qw(Yw.set(-.5,-.5,0),av,o,ov,i,s),Qw(p1.set(.5,-.5,0),av,o,ov,i,s),Qw(qw.set(.5,.5,0),av,o,ov,i,s),W5.set(0,0),i2.set(1,0),j5.set(1,1);let a=e.ray.intersectTriangle(Yw,p1,qw,!1,d1);if(a===null&&(Qw(p1.set(-.5,.5,0),av,o,ov,i,s),i2.set(0,1),a=e.ray.intersectTriangle(Yw,qw,p1,!1,d1),a===null))return;const l=e.ray.origin.distanceTo(d1);l<e.near||l>e.far||t.push({distance:l,point:d1.clone(),uv:ro.getInterpolation(d1,Yw,p1,qw,W5,i2,j5,new ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Qw(n,e,t,r,i,s){lv.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(f1.x=s*lv.x-i*lv.y,f1.y=i*lv.x+s*lv.y):f1.copy(lv),n.copy(e),n.x+=f1.x,n.y+=f1.y,n.applyMatrix4(H$)}const Zw=new ie,X5=new ie;class V$ extends En{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Zw.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Zw);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Zw.setFromMatrixPosition(e.matrixWorld),X5.setFromMatrixPosition(this.matrixWorld);const r=Zw.distanceTo(X5)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const J5=new ie,K5=new Un,Y5=new Un,oCe=new ie,q5=new jt,cv=new ie;class Ik extends Oi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new jt,this.bindMatrixInverse=new jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Yl),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)cv.fromBufferAttribute(t,r),this.applyBoneTransform(r,cv),this.boundingBox.expandByPoint(cv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ql),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)cv.fromBufferAttribute(t,r),this.applyBoneTransform(r,cv),this.boundingSphere.expandByPoint(cv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Un,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;K5.fromBufferAttribute(i.attributes.skinIndex,e),Y5.fromBufferAttribute(i.attributes.skinWeight,e),J5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=Y5.getComponent(s);if(o!==0){const a=K5.getComponent(s);q5.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(oCe.copy(J5).applyMatrix4(q5),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class iP extends En{constructor(){super(),this.isBone=!0,this.type="Bone"}}class wy extends br{constructor(e=null,t=1,r=1,i,s,o,a,l,u=Ur,h=Ur,d,p){super(null,o,a,l,u,h,i,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Q5=new jt,aCe=new jt;class mM{constructor(e=[],t=[]){this.uuid=Ko(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new jt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:aCe;Q5.multiplyMatrices(a,t[s]),Q5.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new mM(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=M$(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new wy(t,e,e,so,Yu);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new iP),this.bones.push(o),this.boneInverses.push(new jt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class og extends Tn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const uv=new jt,Z5=new jt,$w=[],$5=new Yl,lCe=new jt,m1=new Oi,g1=new ql;class Dk extends Oi{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new og(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,lCe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Yl),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,uv),$5.copy(e.boundingBox).applyMatrix4(uv),this.boundingBox.union($5)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ql),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,uv),g1.copy(e.boundingSphere).applyMatrix4(uv),this.boundingSphere.union(g1)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(m1.geometry=this.geometry,m1.material=this.material,m1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),g1.copy(this.boundingSphere),g1.applyMatrix4(r),e.ray.intersectsSphere(g1)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,uv),Z5.multiplyMatrices(r,uv),m1.matrixWorld=Z5,m1.raycast(e,$w);for(let o=0,a=$w.length;o<a;o++){const l=$w[o];l.instanceId=s,l.object=this,t.push(l)}$w.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new og(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Cs extends _i{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new yt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const e8=new ie,t8=new ie,n8=new jt,s2=new uM,eb=new ql;class Sh extends En{constructor(e=new en,t=new Cs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)e8.fromBufferAttribute(t,i-1),t8.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=e8.distanceTo(t8);e.setAttribute("lineDistance",new Tt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),eb.copy(r.boundingSphere),eb.applyMatrix4(i),eb.radius+=s,e.ray.intersectsSphere(eb)===!1)return;n8.copy(i).invert(),s2.copy(e.ray).applyMatrix4(n8);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new ie,h=new ie,d=new ie,p=new ie,m=this.isLineSegments?2:1,v=r.index,M=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),_=Math.min(v.count,o.start+o.count);for(let A=g,w=_-1;A<w;A+=m){const C=v.getX(A),R=v.getX(A+1);if(u.fromBufferAttribute(M,C),h.fromBufferAttribute(M,R),s2.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(p);I<e.near||I>e.far||t.push({distance:I,point:d.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),_=Math.min(M.count,o.start+o.count);for(let A=g,w=_-1;A<w;A+=m){if(u.fromBufferAttribute(M,A),h.fromBufferAttribute(M,A+1),s2.distanceSqToSegment(u,h,p,d)>l)continue;p.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(p);R<e.near||R>e.far||t.push({distance:R,point:d.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const r8=new ie,i8=new ie;class Ql extends Sh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)r8.fromBufferAttribute(t,i),i8.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+r8.distanceTo(i8);e.setAttribute("lineDistance",new Tt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Fk extends Sh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class sP extends _i{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new yt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const s8=new jt,f3=new uM,tb=new ql,nb=new ie;class Nk extends En{constructor(e=new en,t=new sP){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),tb.copy(r.boundingSphere),tb.applyMatrix4(i),tb.radius+=s,e.ray.intersectsSphere(tb)===!1)return;s8.copy(i).invert(),f3.copy(e.ray).applyMatrix4(s8);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,d=r.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let v=p,S=m;v<S;v++){const M=u.getX(v);nb.fromBufferAttribute(d,M),o8(nb,M,l,i,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let v=p,S=m;v<S;v++)nb.fromBufferAttribute(d,v),o8(nb,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function o8(n,e,t,r,i,s,o){const a=f3.distanceSqToPoint(n);if(a<t){const l=new ie;f3.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class cCe extends br{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:yr,this.magFilter=s!==void 0?s:yr,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class uCe extends br{constructor(e,t,r){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=Ur,this.minFilter=Ur,this.generateMipmaps=!1,this.needsUpdate=!0}}class Uk extends br{constructor(e,t,r,i,s,o,a,l,u,h,d,p){super(null,o,a,l,u,h,i,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class hCe extends Uk{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=es}}class dCe extends br{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Zl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const h=r[i],p=r[i+1]-h,m=(o-h)/p;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new ze:new ie);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new ie,i=[],s=[],o=[],a=new ie,l=new jt;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new ie)}s[0]=new ie,o[0]=new ie;let u=Number.MAX_VALUE;const h=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);h<=u&&(u=h,r.set(1,0,0)),d<=u&&(u=d,r.set(0,1,0)),p<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(kr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(kr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class oP extends Zl{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new ze,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*h-m*d+this.aX,u=p*d+m*h+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class W$ extends oP{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Ok(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,d){let p=(o-s)/u-(a-s)/(u+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const rb=new ie,o2=new Ok,a2=new Ok,l2=new Ok;class j$ extends Zl{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new ie){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=i[(a-1)%s]:(rb.subVectors(i[0],i[1]).add(i[0]),u=rb);const d=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?h=i[(a+2)%s]:(rb.subVectors(i[s-1],i[s-2]).add(i[s-1]),h=rb),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(d),m),S=Math.pow(d.distanceToSquared(p),m),M=Math.pow(p.distanceToSquared(h),m);S<1e-4&&(S=1),v<1e-4&&(v=S),M<1e-4&&(M=S),o2.initNonuniformCatmullRom(u.x,d.x,p.x,h.x,v,S,M),a2.initNonuniformCatmullRom(u.y,d.y,p.y,h.y,v,S,M),l2.initNonuniformCatmullRom(u.z,d.z,p.z,h.z,v,S,M)}else this.curveType==="catmullrom"&&(o2.initCatmullRom(u.x,d.x,p.x,h.x,this.tension),a2.initCatmullRom(u.y,d.y,p.y,h.y,this.tension),l2.initCatmullRom(u.z,d.z,p.z,h.z,this.tension));return r.set(o2.calc(l),a2.calc(l),l2.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ie().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function a8(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function fCe(n,e){const t=1-n;return t*t*e}function pCe(n,e){return 2*(1-n)*n*e}function mCe(n,e){return n*n*e}function gA(n,e,t,r){return fCe(n,e)+pCe(n,t)+mCe(n,r)}function gCe(n,e){const t=1-n;return t*t*t*e}function vCe(n,e){const t=1-n;return 3*t*t*n*e}function yCe(n,e){return 3*(1-n)*n*n*e}function xCe(n,e){return n*n*n*e}function vA(n,e,t,r,i){return gCe(n,e)+vCe(n,t)+yCe(n,r)+xCe(n,i)}class kk extends Zl{constructor(e=new ze,t=new ze,r=new ze,i=new ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ze){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(vA(e,i.x,s.x,o.x,a.x),vA(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class X$ extends Zl{constructor(e=new ie,t=new ie,r=new ie,i=new ie){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ie){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(vA(e,i.x,s.x,o.x,a.x),vA(e,i.y,s.y,o.y,a.y),vA(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class aP extends Zl{constructor(e=new ze,t=new ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ze){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class J$ extends Zl{constructor(e=new ie,t=new ie){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ie){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ie){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gk extends Zl{constructor(e=new ze,t=new ze,r=new ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ze){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(gA(e,i.x,s.x,o.x),gA(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hk extends Zl{constructor(e=new ie,t=new ie,r=new ie){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ie){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(gA(e,i.x,s.x,o.x),gA(e,i.y,s.y,o.y),gA(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zk extends Zl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new ze){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],h=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(a8(a,l.x,u.x,h.x,d.x),a8(a,l.y,u.y,h.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ze().fromArray(i))}return this}}var Vk=Object.freeze({__proto__:null,ArcCurve:W$,CatmullRomCurve3:j$,CubicBezierCurve:kk,CubicBezierCurve3:X$,EllipseCurve:oP,LineCurve:aP,LineCurve3:J$,QuadraticBezierCurve:Gk,QuadraticBezierCurve3:Hk,SplineCurve:zk});class K$ extends Zl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new aP(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new Vk[i.type]().fromJSON(i))}return this}}class bS extends K${constructor(e){super(),this.type="Path",this.currentPoint=new ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new aP(this.currentPoint.clone(),new ze(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new Gk(this.currentPoint.clone(),new ze(e,t),new ze(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new kk(this.currentPoint.clone(),new ze(e,t),new ze(r,i),new ze(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new zk(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new oP(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Mx extends en{constructor(e=[new ze(0,-.5),new ze(.5,0),new ze(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=kr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/t,d=new ie,p=new ze,m=new ie,v=new ie,S=new ie;let M=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:M=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-M,m.z=g*0,S.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(S.x,S.y,S.z);break;default:M=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-M,m.z=g*0,v.copy(m),m.x+=S.x,m.y+=S.y,m.z+=S.z,m.normalize(),l.push(m.x,m.y,m.z),S.copy(v)}for(let _=0;_<=t;_++){const A=r+_*h*i,w=Math.sin(A),C=Math.cos(A);for(let R=0;R<=e.length-1;R++){d.x=e[R].x*w,d.y=e[R].y,d.z=e[R].x*C,o.push(d.x,d.y,d.z),p.x=_/t,p.y=R/(e.length-1),a.push(p.x,p.y);const L=l[3*R+0]*w,I=l[3*R+1],T=l[3*R+0]*C;u.push(L,I,T)}}for(let _=0;_<t;_++)for(let A=0;A<e.length-1;A++){const w=A+_*e.length,C=w,R=w+e.length,L=w+e.length+1,I=w+1;s.push(C,R,I),s.push(L,I,R)}this.setIndex(s),this.setAttribute("position",new Tt(o,3)),this.setAttribute("uv",new Tt(a,2)),this.setAttribute("normal",new Tt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mx(e.points,e.segments,e.phiStart,e.phiLength)}}class gM extends Mx{constructor(e=1,t=1,r=4,i=8){const s=new bS;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new gM(e.radius,e.length,e.capSegments,e.radialSegments)}}class vM extends en{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new ie,h=new ze;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=r+d/t*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Tt(o,3)),this.setAttribute("normal",new Tt(a,3)),this.setAttribute("uv",new Tt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vM(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ag extends en{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const h=[],d=[],p=[],m=[];let v=0;const S=[],M=r/2;let g=0;_(),o===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(h),this.setAttribute("position",new Tt(d,3)),this.setAttribute("normal",new Tt(p,3)),this.setAttribute("uv",new Tt(m,2));function _(){const w=new ie,C=new ie;let R=0;const L=(t-e)/r;for(let I=0;I<=s;I++){const T=[],B=I/s,H=B*(t-e)+e;for(let K=0;K<=i;K++){const j=K/i,z=j*l+a,X=Math.sin(z),te=Math.cos(z);C.x=H*X,C.y=-B*r+M,C.z=H*te,d.push(C.x,C.y,C.z),w.set(X,L,te).normalize(),p.push(w.x,w.y,w.z),m.push(j,1-B),T.push(v++)}S.push(T)}for(let I=0;I<i;I++)for(let T=0;T<s;T++){const B=S[T][I],H=S[T+1][I],K=S[T+1][I+1],j=S[T][I+1];h.push(B,H,j),h.push(H,K,j),R+=6}u.addGroup(g,R,0),g+=R}function A(w){const C=v,R=new ze,L=new ie;let I=0;const T=w===!0?e:t,B=w===!0?1:-1;for(let K=1;K<=i;K++)d.push(0,M*B,0),p.push(0,B,0),m.push(.5,.5),v++;const H=v;for(let K=0;K<=i;K++){const z=K/i*l+a,X=Math.cos(z),te=Math.sin(z);L.x=T*te,L.y=M*B,L.z=T*X,d.push(L.x,L.y,L.z),p.push(0,B,0),R.x=X*.5+.5,R.y=te*.5*B+.5,m.push(R.x,R.y),v++}for(let K=0;K<i;K++){const j=C+K,z=H+K;w===!0?h.push(z,z+1,j):h.push(z+1,z,j),I+=3}u.addGroup(g,I,w===!0?1:2),g+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ag(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yM extends Ag{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new yM(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Rh extends en{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),h(),this.setAttribute("position",new Tt(s,3)),this.setAttribute("normal",new Tt(s.slice(),3)),this.setAttribute("uv",new Tt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const A=new ie,w=new ie,C=new ie;for(let R=0;R<t.length;R+=3)m(t[R+0],A),m(t[R+1],w),m(t[R+2],C),l(A,w,C,_)}function l(_,A,w,C){const R=C+1,L=[];for(let I=0;I<=R;I++){L[I]=[];const T=_.clone().lerp(w,I/R),B=A.clone().lerp(w,I/R),H=R-I;for(let K=0;K<=H;K++)K===0&&I===R?L[I][K]=T:L[I][K]=T.clone().lerp(B,K/H)}for(let I=0;I<R;I++)for(let T=0;T<2*(R-I)-1;T++){const B=Math.floor(T/2);T%2===0?(p(L[I][B+1]),p(L[I+1][B]),p(L[I][B])):(p(L[I][B+1]),p(L[I+1][B+1]),p(L[I+1][B]))}}function u(_){const A=new ie;for(let w=0;w<s.length;w+=3)A.x=s[w+0],A.y=s[w+1],A.z=s[w+2],A.normalize().multiplyScalar(_),s[w+0]=A.x,s[w+1]=A.y,s[w+2]=A.z}function h(){const _=new ie;for(let A=0;A<s.length;A+=3){_.x=s[A+0],_.y=s[A+1],_.z=s[A+2];const w=M(_)/2/Math.PI+.5,C=g(_)/Math.PI+.5;o.push(w,1-C)}v(),d()}function d(){for(let _=0;_<o.length;_+=6){const A=o[_+0],w=o[_+2],C=o[_+4],R=Math.max(A,w,C),L=Math.min(A,w,C);R>.9&&L<.1&&(A<.2&&(o[_+0]+=1),w<.2&&(o[_+2]+=1),C<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,A){const w=_*3;A.x=e[w+0],A.y=e[w+1],A.z=e[w+2]}function v(){const _=new ie,A=new ie,w=new ie,C=new ie,R=new ze,L=new ze,I=new ze;for(let T=0,B=0;T<s.length;T+=9,B+=6){_.set(s[T+0],s[T+1],s[T+2]),A.set(s[T+3],s[T+4],s[T+5]),w.set(s[T+6],s[T+7],s[T+8]),R.set(o[B+0],o[B+1]),L.set(o[B+2],o[B+3]),I.set(o[B+4],o[B+5]),C.copy(_).add(A).add(w).divideScalar(3);const H=M(C);S(R,B+0,_,H),S(L,B+2,A,H),S(I,B+4,w,H)}}function S(_,A,w,C){C<0&&_.x===1&&(o[A]=_.x-1),w.x===0&&w.z===0&&(o[A]=C/2/Math.PI+.5)}function M(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rh(e.vertices,e.indices,e.radius,e.details)}}class xM extends Rh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xM(e.radius,e.detail)}}const ib=new ie,sb=new ie,c2=new ie,ob=new ro;class Y$ extends en{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Nm*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:S,b:M,c:g}=ob;if(S.fromBufferAttribute(a,u[0]),M.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),ob.getNormal(c2),d[0]=`${Math.round(S.x*i)},${Math.round(S.y*i)},${Math.round(S.z*i)}`,d[1]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,d[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const A=(_+1)%3,w=d[_],C=d[A],R=ob[h[_]],L=ob[h[A]],I=`${w}_${C}`,T=`${C}_${w}`;T in p&&p[T]?(c2.dot(p[T].normal)<=s&&(m.push(R.x,R.y,R.z),m.push(L.x,L.y,L.z)),p[T]=null):I in p||(p[I]={index0:u[_],index1:u[A],normal:c2.clone()})}}for(const v in p)if(p[v]){const{index0:S,index1:M}=p[v];ib.fromBufferAttribute(a,S),sb.fromBufferAttribute(a,M),m.push(ib.x,ib.y,ib.z),m.push(sb.x,sb.y,sb.z)}this.setAttribute("position",new Tt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Om extends bS{constructor(e){super(e),this.uuid=Ko(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new bS().fromJSON(i))}return this}}const _Ce={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=q$(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,h,d,p,m;if(r&&(s=wCe(n,e,s,t)),n.length>80*t){a=u=n[0],l=h=n[1];for(let v=t;v<i;v+=t)d=n[v],p=n[v+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>h&&(h=p);m=Math.max(u-a,h-l),m=m!==0?32767/m:0}return CS(s,o,t,a,l,m,0),o}};function q$(n,e,t,r,i){let s,o;if(i===NCe(n,e,t,r)>0)for(s=e;s<t;s+=r)o=l8(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=l8(s,n[s],n[s+1],o);return o&&lP(o,o.next)&&(RS(o),o=o.next),o}function ag(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(lP(t,t.next)||Ar(t.prev,t,t.next)===0)){if(RS(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function CS(n,e,t,r,i,s,o){if(!n)return;!o&&s&&PCe(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?SCe(n,r,i,s):ACe(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),RS(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=MCe(ag(n),e,t),CS(n,e,t,r,i,s,2)):o===2&&ECe(n,e,t,r,i,s):CS(ag(n),e,t,r,i,s,1);break}}}function ACe(n){const e=n.prev,t=n,r=n.next;if(Ar(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,h=i<s?i<o?i:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let v=r.next;for(;v!==e;){if(v.x>=h&&v.x<=p&&v.y>=d&&v.y<=m&&$v(i,a,s,l,o,u,v.x,v.y)&&Ar(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function SCe(n,e,t,r){const i=n.prev,s=n,o=n.next;if(Ar(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,h=i.y,d=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,v=h<d?h<p?h:p:d<p?d:p,S=a>l?a>u?a:u:l>u?l:u,M=h>d?h>p?h:p:d>p?d:p,g=p3(m,v,e,t,r),_=p3(S,M,e,t,r);let A=n.prevZ,w=n.nextZ;for(;A&&A.z>=g&&w&&w.z<=_;){if(A.x>=m&&A.x<=S&&A.y>=v&&A.y<=M&&A!==i&&A!==o&&$v(a,h,l,d,u,p,A.x,A.y)&&Ar(A.prev,A,A.next)>=0||(A=A.prevZ,w.x>=m&&w.x<=S&&w.y>=v&&w.y<=M&&w!==i&&w!==o&&$v(a,h,l,d,u,p,w.x,w.y)&&Ar(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;A&&A.z>=g;){if(A.x>=m&&A.x<=S&&A.y>=v&&A.y<=M&&A!==i&&A!==o&&$v(a,h,l,d,u,p,A.x,A.y)&&Ar(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;w&&w.z<=_;){if(w.x>=m&&w.x<=S&&w.y>=v&&w.y<=M&&w!==i&&w!==o&&$v(a,h,l,d,u,p,w.x,w.y)&&Ar(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function MCe(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!lP(i,s)&&Q$(i,r,r.next,s)&&TS(i,s)&&TS(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),RS(r),RS(r.next),r=n=s),r=r.next}while(r!==n);return ag(r)}function ECe(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&ICe(o,a)){let l=Z$(o,a);o=ag(o,o.next),l=ag(l,l.next),CS(o,e,t,r,i,s,0),CS(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function wCe(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=q$(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(LCe(u));for(i.sort(bCe),s=0;s<i.length;s++)t=CCe(i[s],t);return t}function bCe(n,e){return n.x-e.x}function CCe(n,e){const t=TCe(n,e);if(!t)return e;const r=Z$(t,n);return ag(r,r.next),ag(t,t.next)}function TCe(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>r&&(r=p,i=t.x<t.next.x?t:t.next,p===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let h=1/0,d;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&$v(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),TS(t,n)&&(d<h||d===h&&(t.x>i.x||t.x===i.x&&RCe(i,t)))&&(i=t,h=d)),t=t.next;while(t!==a);return i}function RCe(n,e){return Ar(n.prev,n,e.prev)<0&&Ar(e.next,n,n.next)<0}function PCe(n,e,t,r){let i=n;do i.z===0&&(i.z=p3(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,BCe(i)}function BCe(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function p3(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function LCe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function $v(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function ICe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!DCe(n,e)&&(TS(n,e)&&TS(e,n)&&FCe(n,e)&&(Ar(n.prev,n,e.prev)||Ar(n,e.prev,e))||lP(n,e)&&Ar(n.prev,n,n.next)>0&&Ar(e.prev,e,e.next)>0)}function Ar(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function lP(n,e){return n.x===e.x&&n.y===e.y}function Q$(n,e,t,r){const i=lb(Ar(n,e,t)),s=lb(Ar(n,e,r)),o=lb(Ar(t,r,n)),a=lb(Ar(t,r,e));return!!(i!==s&&o!==a||i===0&&ab(n,t,e)||s===0&&ab(n,r,e)||o===0&&ab(t,n,r)||a===0&&ab(t,e,r))}function ab(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function lb(n){return n>0?1:n<0?-1:0}function DCe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Q$(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function TS(n,e){return Ar(n.prev,n,n.next)<0?Ar(n,e,n.next)>=0&&Ar(n,n.prev,e)>=0:Ar(n,e,n.prev)<0||Ar(n,n.next,e)<0}function FCe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function Z$(n,e){const t=new m3(n.i,n.x,n.y),r=new m3(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function l8(n,e,t,r){const i=new m3(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function RS(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function m3(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function NCe(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Oc{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Oc.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];c8(e),u8(r,e);let o=e.length;t.forEach(c8);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,u8(r,t[l]);const a=_Ce.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function c8(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function u8(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class _M extends en{constructor(e=new Om([new ze(.5,.5),new ze(-.5,.5),new ze(-.5,-.5),new ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Tt(i,3)),this.setAttribute("uv",new Tt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,S=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:UCe;let A,w=!1,C,R,L,I;g&&(A=g.getSpacedPoints(h),w=!0,p=!1,C=g.computeFrenetFrames(h,!1),R=new ie,L=new ie,I=new ie),p||(M=0,m=0,v=0,S=0);const T=a.extractPoints(u);let B=T.shape;const H=T.holes;if(!Oc.isClockWise(B)){B=B.reverse();for(let pe=0,le=H.length;pe<le;pe++){const Ae=H[pe];Oc.isClockWise(Ae)&&(H[pe]=Ae.reverse())}}const j=Oc.triangulateShape(B,H),z=B;for(let pe=0,le=H.length;pe<le;pe++){const Ae=H[pe];B=B.concat(Ae)}function X(pe,le,Ae){return le||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().addScaledVector(le,Ae)}const te=B.length,O=j.length;function D(pe,le,Ae){let Re,De,Je;const Qe=pe.x-le.x,Ve=pe.y-le.y,nt=Ae.x-pe.x,It=Ae.y-pe.y,U=Qe*Qe+Ve*Ve,F=Qe*It-Ve*nt;if(Math.abs(F)>Number.EPSILON){const oe=Math.sqrt(U),_e=Math.sqrt(nt*nt+It*It),Me=le.x-Ve/oe,Te=le.y+Qe/oe,Ke=Ae.x-It/_e,Be=Ae.y+nt/_e,he=((Ke-Me)*It-(Be-Te)*nt)/(Qe*It-Ve*nt);Re=Me+Qe*he-pe.x,De=Te+Ve*he-pe.y;const Ue=Re*Re+De*De;if(Ue<=2)return new ze(Re,De);Je=Math.sqrt(Ue/2)}else{let oe=!1;Qe>Number.EPSILON?nt>Number.EPSILON&&(oe=!0):Qe<-Number.EPSILON?nt<-Number.EPSILON&&(oe=!0):Math.sign(Ve)===Math.sign(It)&&(oe=!0),oe?(Re=-Ve,De=Qe,Je=Math.sqrt(U)):(Re=Qe,De=Ve,Je=Math.sqrt(U/2))}return new ze(Re/Je,De/Je)}const V=[];for(let pe=0,le=z.length,Ae=le-1,Re=pe+1;pe<le;pe++,Ae++,Re++)Ae===le&&(Ae=0),Re===le&&(Re=0),V[pe]=D(z[pe],z[Ae],z[Re]);const G=[];let q,re=V.concat();for(let pe=0,le=H.length;pe<le;pe++){const Ae=H[pe];q=[];for(let Re=0,De=Ae.length,Je=De-1,Qe=Re+1;Re<De;Re++,Je++,Qe++)Je===De&&(Je=0),Qe===De&&(Qe=0),q[Re]=D(Ae[Re],Ae[Je],Ae[Qe]);G.push(q),re=re.concat(q)}for(let pe=0;pe<M;pe++){const le=pe/M,Ae=m*Math.cos(le*Math.PI/2),Re=v*Math.sin(le*Math.PI/2)+S;for(let De=0,Je=z.length;De<Je;De++){const Qe=X(z[De],V[De],Re);W(Qe.x,Qe.y,-Ae)}for(let De=0,Je=H.length;De<Je;De++){const Qe=H[De];q=G[De];for(let Ve=0,nt=Qe.length;Ve<nt;Ve++){const It=X(Qe[Ve],q[Ve],Re);W(It.x,It.y,-Ae)}}}const Y=v+S;for(let pe=0;pe<te;pe++){const le=p?X(B[pe],re[pe],Y):B[pe];w?(L.copy(C.normals[0]).multiplyScalar(le.x),R.copy(C.binormals[0]).multiplyScalar(le.y),I.copy(A[0]).add(L).add(R),W(I.x,I.y,I.z)):W(le.x,le.y,0)}for(let pe=1;pe<=h;pe++)for(let le=0;le<te;le++){const Ae=p?X(B[le],re[le],Y):B[le];w?(L.copy(C.normals[pe]).multiplyScalar(Ae.x),R.copy(C.binormals[pe]).multiplyScalar(Ae.y),I.copy(A[pe]).add(L).add(R),W(I.x,I.y,I.z)):W(Ae.x,Ae.y,d/h*pe)}for(let pe=M-1;pe>=0;pe--){const le=pe/M,Ae=m*Math.cos(le*Math.PI/2),Re=v*Math.sin(le*Math.PI/2)+S;for(let De=0,Je=z.length;De<Je;De++){const Qe=X(z[De],V[De],Re);W(Qe.x,Qe.y,d+Ae)}for(let De=0,Je=H.length;De<Je;De++){const Qe=H[De];q=G[De];for(let Ve=0,nt=Qe.length;Ve<nt;Ve++){const It=X(Qe[Ve],q[Ve],Re);w?W(It.x,It.y+A[h-1].y,A[h-1].x+Ae):W(It.x,It.y,d+Ae)}}}ae(),Se();function ae(){const pe=i.length/3;if(p){let le=0,Ae=te*le;for(let Re=0;Re<O;Re++){const De=j[Re];Xe(De[2]+Ae,De[1]+Ae,De[0]+Ae)}le=h+M*2,Ae=te*le;for(let Re=0;Re<O;Re++){const De=j[Re];Xe(De[0]+Ae,De[1]+Ae,De[2]+Ae)}}else{for(let le=0;le<O;le++){const Ae=j[le];Xe(Ae[2],Ae[1],Ae[0])}for(let le=0;le<O;le++){const Ae=j[le];Xe(Ae[0]+te*h,Ae[1]+te*h,Ae[2]+te*h)}}r.addGroup(pe,i.length/3-pe,0)}function Se(){const pe=i.length/3;let le=0;ve(z,le),le+=z.length;for(let Ae=0,Re=H.length;Ae<Re;Ae++){const De=H[Ae];ve(De,le),le+=De.length}r.addGroup(pe,i.length/3-pe,1)}function ve(pe,le){let Ae=pe.length;for(;--Ae>=0;){const Re=Ae;let De=Ae-1;De<0&&(De=pe.length-1);for(let Je=0,Qe=h+M*2;Je<Qe;Je++){const Ve=te*Je,nt=te*(Je+1),It=le+Re+Ve,U=le+De+Ve,F=le+De+nt,oe=le+Re+nt;Ne(It,U,F,oe)}}}function W(pe,le,Ae){l.push(pe),l.push(le),l.push(Ae)}function Xe(pe,le,Ae){ye(pe),ye(le),ye(Ae);const Re=i.length/3,De=_.generateTopUV(r,i,Re-3,Re-2,Re-1);me(De[0]),me(De[1]),me(De[2])}function Ne(pe,le,Ae,Re){ye(pe),ye(le),ye(Re),ye(le),ye(Ae),ye(Re);const De=i.length/3,Je=_.generateSideWallUV(r,i,De-6,De-3,De-2,De-1);me(Je[0]),me(Je[1]),me(Je[3]),me(Je[1]),me(Je[2]),me(Je[3])}function ye(pe){i.push(l[pe*3+0]),i.push(l[pe*3+1]),i.push(l[pe*3+2])}function me(pe){s.push(pe.x),s.push(pe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return OCe(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Vk[i.type]().fromJSON(i)),new _M(r,e.options)}}const UCe={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],h=e[i*3+1];return[new ze(s,o),new ze(a,l),new ze(u,h)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],h=e[r*3+1],d=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],S=e[s*3],M=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new ze(o,1-l),new ze(u,1-d),new ze(p,1-v),new ze(S,1-g)]:[new ze(a,1-l),new ze(h,1-d),new ze(m,1-v),new ze(M,1-g)]}};function OCe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class AM extends Rh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new AM(e.radius,e.detail)}}class Ex extends Rh{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ex(e.radius,e.detail)}}class SM extends en{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],h=[];let d=e;const p=(t-e)/i,m=new ie,v=new ze;for(let S=0;S<=i;S++){for(let M=0;M<=r;M++){const g=s+M/r*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y)}d+=p}for(let S=0;S<i;S++){const M=S*(r+1);for(let g=0;g<r;g++){const _=g+M,A=_,w=_+r+1,C=_+r+2,R=_+1;a.push(A,w,R),a.push(w,C,R)}}this.setIndex(a),this.setAttribute("position",new Tt(l,3)),this.setAttribute("normal",new Tt(u,3)),this.setAttribute("uv",new Tt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SM(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class MM extends en{constructor(e=new Om([new ze(0,.5),new ze(-.5,-.5),new ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Tt(i,3)),this.setAttribute("normal",new Tt(s,3)),this.setAttribute("uv",new Tt(o,2));function u(h){const d=i.length/3,p=h.extractPoints(t);let m=p.shape;const v=p.holes;Oc.isClockWise(m)===!1&&(m=m.reverse());for(let M=0,g=v.length;M<g;M++){const _=v[M];Oc.isClockWise(_)===!0&&(v[M]=_.reverse())}const S=Oc.triangulateShape(m,v);for(let M=0,g=v.length;M<g;M++){const _=v[M];m=m.concat(_)}for(let M=0,g=m.length;M<g;M++){const _=m[M];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let M=0,g=S.length;M<g;M++){const _=S[M],A=_[0]+d,w=_[1]+d,C=_[2]+d;r.push(A,w,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return kCe(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new MM(r,e.curveSegments)}}function kCe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class wx extends en{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const h=[],d=new ie,p=new ie,m=[],v=[],S=[],M=[];for(let g=0;g<=r;g++){const _=[],A=g/r;let w=0;g===0&&o===0?w=.5/t:g===r&&l===Math.PI&&(w=-.5/t);for(let C=0;C<=t;C++){const R=C/t;d.x=-e*Math.cos(i+R*s)*Math.sin(o+A*a),d.y=e*Math.cos(o+A*a),d.z=e*Math.sin(i+R*s)*Math.sin(o+A*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),S.push(p.x,p.y,p.z),M.push(R+w,1-A),_.push(u++)}h.push(_)}for(let g=0;g<r;g++)for(let _=0;_<t;_++){const A=h[g][_+1],w=h[g][_],C=h[g+1][_],R=h[g+1][_+1];(g!==0||o>0)&&m.push(A,w,R),(g!==r-1||l<Math.PI)&&m.push(w,C,R)}this.setIndex(m),this.setAttribute("position",new Tt(v,3)),this.setAttribute("normal",new Tt(S,3)),this.setAttribute("uv",new Tt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wx(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class EM extends Rh{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new EM(e.radius,e.detail)}}class wM extends en{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],h=new ie,d=new ie,p=new ie;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const S=v/i*s,M=m/r*Math.PI*2;d.x=(e+t*Math.cos(M))*Math.cos(S),d.y=(e+t*Math.cos(M))*Math.sin(S),d.z=t*Math.sin(M),a.push(d.x,d.y,d.z),h.x=e*Math.cos(S),h.y=e*Math.sin(S),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(v/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const S=(i+1)*m+v-1,M=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,_=(i+1)*m+v;o.push(S,M,_),o.push(M,g,_)}this.setIndex(o),this.setAttribute("position",new Tt(a,3)),this.setAttribute("normal",new Tt(l,3)),this.setAttribute("uv",new Tt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wM(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class bM extends en{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],h=[],d=new ie,p=new ie,m=new ie,v=new ie,S=new ie,M=new ie,g=new ie;for(let A=0;A<=r;++A){const w=A/r*s*Math.PI*2;_(w,s,o,e,m),_(w+.01,s,o,e,v),M.subVectors(v,m),g.addVectors(v,m),S.crossVectors(M,g),g.crossVectors(S,M),S.normalize(),g.normalize();for(let C=0;C<=i;++C){const R=C/i*Math.PI*2,L=-t*Math.cos(R),I=t*Math.sin(R);d.x=m.x+(L*g.x+I*S.x),d.y=m.y+(L*g.y+I*S.y),d.z=m.z+(L*g.z+I*S.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),u.push(p.x,p.y,p.z),h.push(A/r),h.push(C/i)}}for(let A=1;A<=r;A++)for(let w=1;w<=i;w++){const C=(i+1)*(A-1)+(w-1),R=(i+1)*A+(w-1),L=(i+1)*A+w,I=(i+1)*(A-1)+w;a.push(C,R,I),a.push(R,L,I)}this.setIndex(a),this.setAttribute("position",new Tt(l,3)),this.setAttribute("normal",new Tt(u,3)),this.setAttribute("uv",new Tt(h,2));function _(A,w,C,R,L){const I=Math.cos(A),T=Math.sin(A),B=C/w*A,H=Math.cos(B);L.x=R*(2+H)*.5*I,L.y=R*(2+H)*T*.5,L.z=R*Math.sin(B)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bM(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class CM extends en{constructor(e=new Hk(new ie(-1,-1,0),new ie(-1,1,0),new ie(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ie,l=new ie,u=new ze;let h=new ie;const d=[],p=[],m=[],v=[];S(),this.setIndex(v),this.setAttribute("position",new Tt(d,3)),this.setAttribute("normal",new Tt(p,3)),this.setAttribute("uv",new Tt(m,2));function S(){for(let A=0;A<t;A++)M(A);M(s===!1?t:0),_(),g()}function M(A){h=e.getPointAt(A/t,h);const w=o.normals[A],C=o.binormals[A];for(let R=0;R<=i;R++){const L=R/i*Math.PI*2,I=Math.sin(L),T=-Math.cos(L);l.x=T*w.x+I*C.x,l.y=T*w.y+I*C.y,l.z=T*w.z+I*C.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+r*l.x,a.y=h.y+r*l.y,a.z=h.z+r*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let A=1;A<=t;A++)for(let w=1;w<=i;w++){const C=(i+1)*(A-1)+(w-1),R=(i+1)*A+(w-1),L=(i+1)*A+w,I=(i+1)*(A-1)+w;v.push(C,R,I),v.push(R,L,I)}}function _(){for(let A=0;A<=t;A++)for(let w=0;w<=i;w++)u.x=A/t,u.y=w/i,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new CM(new Vk[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class $$ extends en{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new ie,s=new ie;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const d=l[u],p=d.start,m=d.count;for(let v=p,S=p+m;v<S;v+=3)for(let M=0;M<3;M++){const g=a.getX(v+M),_=a.getX(v+(M+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),h8(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,d=3*a+(u+1)%3;i.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),h8(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Tt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function h8(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var d8=Object.freeze({__proto__:null,BoxGeometry:If,CapsuleGeometry:gM,CircleGeometry:vM,ConeGeometry:yM,CylinderGeometry:Ag,DodecahedronGeometry:xM,EdgesGeometry:Y$,ExtrudeGeometry:_M,IcosahedronGeometry:AM,LatheGeometry:Mx,OctahedronGeometry:Ex,PlaneGeometry:_x,PolyhedronGeometry:Rh,RingGeometry:SM,ShapeGeometry:MM,SphereGeometry:wx,TetrahedronGeometry:EM,TorusGeometry:wM,TorusKnotGeometry:bM,TubeGeometry:CM,WireframeGeometry:$$});class eee extends _i{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new yt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class tee extends jc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class TM extends _i{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new yt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ya extends TM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return kr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new yt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new yt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new yt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class nee extends _i{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new yt(16777215),this.specular=new yt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wk extends _i{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new yt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ree extends _i{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class iee extends _i{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class see extends _i{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new yt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lf,this.normalScale=new ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oee extends Cs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ba(n,e,t){return jk(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function xm(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function jk(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function aee(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function g3(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function Xk(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function GCe(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),d=[],p=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*i;if(!(v<t||v>=r)){d.push(u.times[m]);for(let S=0;S<h;++S)p.push(u.values[m*h+S])}}d.length!==0&&(u.times=xm(d,u.times.constructor),u.values=xm(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function HCe(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let S;if(s<=a.times[0]){const g=h,_=d-h;S=Ba(a.values,g,_)}else if(s>=a.times[v]){const g=v*d+h,_=g+d-h;S=Ba(a.values,g,_)}else{const g=a.createInterpolant(),_=h,A=d-h;g.evaluate(s),S=Ba(g.resultBuffer,_,A)}l==="quaternion"&&new is().fromArray(S).normalize().conjugate().toArray(S);const M=u.times.length;for(let g=0;g<M;++g){const _=g*m+p;if(l==="quaternion")is.multiplyQuaternionsFlat(u.values,_,S,0,u.values,_);else{const A=m-p*2;for(let w=0;w<A;++w)u.values[_+w]-=S[w]}}}return n.blendMode=yk,n}const zCe={arraySlice:Ba,convertArray:xm,isTypedArray:jk,getKeyframeOrder:aee,sortedArray:g3,flattenJSON:Xk,subclip:GCe,makeClipAdditive:HCe};class bx{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class lee extends bx{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:gm,endingEnd:gm}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case vm:s=e,a=2*t-r;break;case MS:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case vm:o=e,l=2*r-t;break;case MS:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),S=v*v,M=S*v,g=-p*M+2*p*S-p*v,_=(1+p)*M+(-1.5-2*p)*S+(-.5+p)*v+1,A=(-1-m)*M+(1.5+m)*S+.5*v,w=m*M-m*S;for(let C=0;C!==a;++C)s[C]=g*o[h+C]+_*o[u+C]+A*o[l+C]+w*o[d+C];return s}}class Jk extends bx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(r-t)/(i-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[u+p]*d+o[l+p]*h;return s}}class cee extends bx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class $l{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xm(t,this.TimeBufferType),this.values=xm(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:xm(e.times,Array),values:xm(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new cee(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jk(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new lee(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case $y:t=this.InterpolantFactoryMethodDiscrete;break;case sg:t=this.InterpolantFactoryMethodLinear;break;case dC:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return $y;case this.InterpolantFactoryMethodLinear:return sg;case this.InterpolantFactoryMethodSmooth:return dC}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Ba(r,s,o),this.values=Ba(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&jk(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Ba(this.times),t=Ba(this.values),r=this.getValueSize(),i=this.getInterpolation()===dC,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(i)l=!0;else{const d=a*r,p=d-r,m=d+r;for(let v=0;v!==r;++v){const S=t[d+v];if(S!==t[p+v]||S!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,p=o*r;for(let m=0;m!==r;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=Ba(e,0,o),this.values=Ba(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Ba(this.times,0),t=Ba(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}$l.prototype.TimeBufferType=Float32Array;$l.prototype.ValueBufferType=Float32Array;$l.prototype.DefaultInterpolation=sg;class Sg extends $l{}Sg.prototype.ValueTypeName="bool";Sg.prototype.ValueBufferType=Array;Sg.prototype.DefaultInterpolation=$y;Sg.prototype.InterpolantFactoryMethodLinear=void 0;Sg.prototype.InterpolantFactoryMethodSmooth=void 0;class Kk extends $l{}Kk.prototype.ValueTypeName="color";class lg extends $l{}lg.prototype.ValueTypeName="number";class uee extends bx{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let h=u+a;u!==h;u+=4)is.slerpFlat(s,0,o,u-a,o,u,l);return s}}class xf extends $l{InterpolantFactoryMethodLinear(e){return new uee(this.times,this.values,this.getValueSize(),e)}}xf.prototype.ValueTypeName="quaternion";xf.prototype.DefaultInterpolation=sg;xf.prototype.InterpolantFactoryMethodSmooth=void 0;class Mg extends $l{}Mg.prototype.ValueTypeName="string";Mg.prototype.ValueBufferType=Array;Mg.prototype.DefaultInterpolation=$y;Mg.prototype.InterpolantFactoryMethodLinear=void 0;Mg.prototype.InterpolantFactoryMethodSmooth=void 0;class cg extends $l{}cg.prototype.ValueTypeName="vector";class nx{constructor(e,t=-1,r,i=ZR){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Ko(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(WCe(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push($l.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=aee(l);l=g3(l,1,h),u=g3(u,1,h),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new lg(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const d=h[1];let p=i[d];p||(i[d]=p=[]),p.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,p,m,v,S){if(m.length!==0){const M=[],g=[];Xk(m,M,g,v),M.length!==0&&S.push(new d(p,M,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const p=u[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let S=0;S<p[v].morphTargets.length;S++)m[p[v].morphTargets[S]]=-1;for(const S in m){const M=[],g=[];for(let _=0;_!==p[v].morphTargets.length;++_){const A=p[v];M.push(A.time),g.push(A.morphTarget===S?1:0)}i.push(new lg(".morphTargetInfluence["+S+"]",M,g))}l=m.length*o}else{const m=".bones["+t[d].name+"]";r(cg,m+".position",p,"pos",i),r(xf,m+".quaternion",p,"rot",i),r(cg,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function VCe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lg;case"vector":case"vector2":case"vector3":case"vector4":return cg;case"color":return Kk;case"quaternion":return xf;case"bool":case"boolean":return Sg;case"string":return Mg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function WCe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=VCe(n.type);if(n.times===void 0){const t=[],r=[];Xk(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const ug={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Yk{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,s===!1&&i.onStart!==void 0&&i.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,i.onProgress!==void 0&&i.onProgress(h,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=u.length;d<p;d+=2){const m=u[d],v=u[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return v}return null}}}const ey=new Yk;let Js=class{constructor(e){this.manager=e!==void 0?e:ey,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const Iu={};class jCe extends Error{constructor(e,t){super(e),this.response=t}}class $o extends Js{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ug.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Iu[e]!==void 0){Iu[e].push({onLoad:t,onProgress:r,onError:i});return}Iu[e]=[],Iu[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=Iu[e],d=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let S=0;const M=new ReadableStream({start(g){_();function _(){d.read().then(({done:A,value:w})=>{if(A)g.close();else{S+=w.byteLength;const C=new ProgressEvent("progress",{lengthComputable:v,loaded:S,total:m});for(let R=0,L=h.length;R<L;R++){const I=h[R];I.onProgress&&I.onProgress(C)}g.enqueue(w),_()}})}}});return new Response(M)}else throw new jCe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(v=>m.decode(v))}}}).then(u=>{ug.add(e,u);const h=Iu[e];delete Iu[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const h=Iu[e];if(h===void 0)throw this.manager.itemError(e),u;delete Iu[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class XCe extends Js{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new $o(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=nx.parse(e[r]);t.push(i)}return t}}class JCe extends Js{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new Uk,l=new $o(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=yr),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let S=0;S<p.mipmapCount;S++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+S]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=yr),a.format=p.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class PS extends Js{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ug.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=wS("img");function l(){h(),ug.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(d){h(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class KCe extends Js{constructor(e){super(e)}load(e,t,r,i){const s=new fM,o=new PS(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class YCe extends Js{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new wy,a=new $o(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:es,o.wrapT=u.wrapT!==void 0?u.wrapT:es,o.magFilter=u.magFilter!==void 0?u.magFilter:yr,o.minFilter=u.minFilter!==void 0?u.minFilter:yr,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Wc),u.mipmapCount===1&&(o.minFilter=yr),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u))},r,i),o}}class hee extends Js{constructor(e){super(e)}load(e,t,r,i){const s=new br,o=new PS(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Df extends En{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new yt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class dee extends Df{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(En.DEFAULT_UP),this.updateMatrix(),this.groundColor=new yt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const u2=new jt,f8=new ie,p8=new ie;class qk{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ze(512,512),this.map=null,this.mapPass=null,this.matrix=new jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new eP,this._frameExtents=new ze(1,1),this._viewportCount=1,this._viewports=[new Un(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;f8.setFromMatrixPosition(e.matrixWorld),t.position.copy(f8),p8.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(p8),t.updateMatrixWorld(),u2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(u2),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(u2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class qCe extends qk{constructor(){super(new gi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=ex*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Qk extends Df{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(En.DEFAULT_UP),this.updateMatrix(),this.target=new En,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new qCe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const m8=new jt,v1=new ie,h2=new ie;class QCe extends qk{constructor(){super(new gi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ze(4,2),this._viewportCount=6,this._viewports=[new Un(2,1,1,1),new Un(0,1,1,1),new Un(3,1,1,1),new Un(1,1,1,1),new Un(3,0,1,1),new Un(1,0,1,1)],this._cubeDirections=[new ie(1,0,0),new ie(-1,0,0),new ie(0,0,1),new ie(0,0,-1),new ie(0,1,0),new ie(0,-1,0)],this._cubeUps=[new ie(0,1,0),new ie(0,1,0),new ie(0,1,0),new ie(0,1,0),new ie(0,0,1),new ie(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),v1.setFromMatrixPosition(e.matrixWorld),r.position.copy(v1),h2.copy(r.position),h2.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(h2),r.updateMatrixWorld(),i.makeTranslation(-v1.x,-v1.y,-v1.z),m8.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(m8)}}class Zk extends Df{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new QCe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class ZCe extends qk{constructor(){super(new Ax(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $k extends Df{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(En.DEFAULT_UP),this.updateMatrix(),this.target=new En,this.shadow=new ZCe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class fee extends Df{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class pee extends Df{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class mee{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ie)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class cP extends Df{constructor(e=new mee,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class uP extends Js{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new $o(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=uP.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new yt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new yt().setHex(o.value);break;case"v2":i.uniforms[s].value=new ze().fromArray(o.value);break;case"v3":i.uniforms[s].value=new ie().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Un().fromArray(o.value);break;case"m3":i.uniforms[s].value=new dn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new jt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new ze().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:eee,SpriteMaterial:Lk,RawShaderMaterial:tee,ShaderMaterial:jc,PointsMaterial:sP,MeshPhysicalMaterial:Ya,MeshStandardMaterial:TM,MeshPhongMaterial:nee,MeshToonMaterial:Wk,MeshNormalMaterial:ree,MeshLambertMaterial:iee,MeshDepthMaterial:Tk,MeshDistanceMaterial:Rk,MeshBasicMaterial:Wo,MeshMatcapMaterial:see,LineDashedMaterial:oee,LineBasicMaterial:Cs,Material:_i};return new t[e]}}class $d{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class gee extends en{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class vee extends Js{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new $o(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const M=m.interleavedBuffers[v],g=s(m,M.buffer),_=Qv(M.type,g),A=new pM(_,M.stride);return A.uuid=M.uuid,t[v]=A,A}function s(m,v){if(r[v]!==void 0)return r[v];const M=m.arrayBuffers[v],g=new Uint32Array(M).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new gee:new en,a=e.data.index;if(a!==void 0){const m=Qv(a.type,a.array);o.setIndex(new Tn(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let S;if(v.isInterleavedBufferAttribute){const M=i(e.data,v.data);S=new yf(M,v.itemSize,v.offset,v.normalized)}else{const M=Qv(v.type,v.array),g=v.isInstancedBufferAttribute?og:Tn;S=new g(M,v.itemSize,v.normalized)}v.name!==void 0&&(S.name=v.name),v.usage!==void 0&&S.setUsage(v.usage),v.updateRange!==void 0&&(S.updateRange.offset=v.updateRange.offset,S.updateRange.count=v.updateRange.count),o.setAttribute(m,S)}const u=e.data.morphAttributes;if(u)for(const m in u){const v=u[m],S=[];for(let M=0,g=v.length;M<g;M++){const _=v[M];let A;if(_.isInterleavedBufferAttribute){const w=i(e.data,_.data);A=new yf(w,_.itemSize,_.offset,_.normalized)}else{const w=Qv(_.type,_.array);A=new Tn(w,_.itemSize,_.normalized)}_.name!==void 0&&(A.name=_.name),S.push(A)}o.morphAttributes[m]=S}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,v=d.length;m!==v;++m){const S=d[m];o.addGroup(S.start,S.count,S.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new ie;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new ql(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class $Ce extends Js{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?$d.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new $o(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?$d.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new $o(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Om().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new mM().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new vee;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in d8?a=d8[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new uP;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=nx.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(h)}else return l.data?{data:Qv(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Yk(t);s=new PS(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const m=[];for(let v=0,S=p.length;v<S;v++){const M=p[v],g=a(M);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new wy(g.data,g.width,g.height)))}i[d.uuid]=new ym(m)}else{const m=a(d.url);i[d.uuid]=new ym(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Qv(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new PS(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],v=await s(m);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new wy(v.data,v.width,v.height)))}r[l.uuid]=new ym(h)}else{const h=await s(l.url);r[l.uuid]=new ym(h)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let h;Array.isArray(u)?(h=new fM,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new wy:h=new br,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=r(a.mapping,eTe)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=r(a.wrap[0],g8),h.wrapT=r(a.wrap[1],g8)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.encoding!==void 0&&(h.encoding=a.encoding),a.minFilter!==void 0&&(h.minFilter=r(a.minFilter,v8)),a.magFilter!==void 0&&(h.magFilter=r(a.magFilter,v8)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(h.userData=a.userData),i[a.uuid]=h}return i}parseObject(e,t,r,i,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,S=p.length;v<S;v++){const M=p[v];r[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),m.push(r[M])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function u(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let h,d;switch(e.type){case"Scene":o=new Bk,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new yt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new rP(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new nP(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new gi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ax(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new fee(e.color,e.intensity);break;case"DirectionalLight":o=new $k(e.color,e.intensity);break;case"PointLight":o=new Zk(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new pee(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Qk(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new dee(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new cP().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new Ik(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new Oi(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new Dk(h,d,p),o.instanceMatrix=new og(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new og(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new V$;break;case"Line":o=new Sh(a(e.geometry),l(e.material));break;case"LineLoop":o=new Fk(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ql(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Nk(a(e.geometry),l(e.material));break;case"Sprite":o=new z$(l(e.material));break;case"Group":o=new qu;break;case"Bone":o=new iP;break;default:o=new En}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],S=o.getObjectByProperty("uuid",v.object);S!==void 0&&o.addLevel(S,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const eTe={UVMapping:qR,CubeReflectionMapping:mf,CubeRefractionMapping:gf,EquirectangularReflectionMapping:_S,EquirectangularRefractionMapping:AS,CubeUVReflectionMapping:xx},g8={RepeatWrapping:vf,ClampToEdgeWrapping:es,MirroredRepeatWrapping:Qy},v8={NearestFilter:Ur,NearestMipmapNearestFilter:SS,NearestMipmapLinearFilter:My,LinearFilter:yr,LinearMipmapNearestFilter:QR,LinearMipmapLinearFilter:Wc};class yee extends Js{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ug.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){ug.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let cb;class eG{static getContext(){return cb===void 0&&(cb=new(window.AudioContext||window.webkitAudioContext)),cb}static setContext(e){cb=e}}class tTe extends Js{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new $o(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);eG.getContext().decodeAudioData(u,function(d){t(d)},a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class nTe extends cP{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new yt().set(e),s=new yt().set(t),o=new ie(i.r,i.g,i.b),a=new ie(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class rTe extends cP{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new yt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const y8=new jt,x8=new jt,Pp=new jt;class iTe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new gi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new gi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Pp.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Nm*t.fov*.5)/t.zoom;let a,l;x8.elements[12]=-i,y8.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Pp.elements[0]=2*t.near/(l-a),Pp.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Pp),a=-o*t.aspect-s,l=o*t.aspect-s,Pp.elements[0]=2*t.near/(l-a),Pp.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Pp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(x8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(y8)}}class tG{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_8(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_8();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _8(){return(typeof performance>"u"?Date:performance).now()}const Bp=new ie,A8=new is,sTe=new ie,Lp=new ie;class oTe extends En{constructor(){super(),this.type="AudioListener",this.context=eG.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new tG}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Bp,A8,sTe),Lp.set(0,0,-1).applyQuaternion(A8),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Bp.x,i),t.positionY.linearRampToValueAtTime(Bp.y,i),t.positionZ.linearRampToValueAtTime(Bp.z,i),t.forwardX.linearRampToValueAtTime(Lp.x,i),t.forwardY.linearRampToValueAtTime(Lp.y,i),t.forwardZ.linearRampToValueAtTime(Lp.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Bp.x,Bp.y,Bp.z),t.setOrientation(Lp.x,Lp.y,Lp.z,r.x,r.y,r.z)}}class xee extends En{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ip=new ie,S8=new is,aTe=new ie,Dp=new ie;class lTe extends xee{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ip,S8,aTe),Dp.set(0,0,1).applyQuaternion(S8);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ip.x,r),t.positionY.linearRampToValueAtTime(Ip.y,r),t.positionZ.linearRampToValueAtTime(Ip.z,r),t.orientationX.linearRampToValueAtTime(Dp.x,r),t.orientationY.linearRampToValueAtTime(Dp.y,r),t.orientationZ.linearRampToValueAtTime(Dp.z,r)}else t.setPosition(Ip.x,Ip.y,Ip.z),t.setOrientation(Dp.x,Dp.y,Dp.z)}}class cTe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class _ee{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){is.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;is.multiplyQuaternionsFlat(e,o,e,t,e,r),is.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const nG="\\[\\]\\.:\\/",uTe=new RegExp("["+nG+"]","g"),rG="[^"+nG+"]",hTe="[^"+nG.replace("\\.","")+"]",dTe=/((?:WC+[\/:])*)/.source.replace("WC",rG),fTe=/(WCOD+)?/.source.replace("WCOD",hTe),pTe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",rG),mTe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",rG),gTe=new RegExp("^"+dTe+fTe+pTe+mTe+"$"),vTe=["material","materials","bones","map"];class yTe{constructor(e,t,r){const i=r||Sn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Sn{constructor(e,t,r){this.path=t,this.parsedPath=r||Sn.parseTrackName(t),this.node=Sn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Sn.Composite(e,t,r):new Sn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(uTe,"")}static parseTrackName(e){const t=gTe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);vTe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Sn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Sn.Composite=yTe;Sn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Sn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Sn.prototype.GetterByBindingType=[Sn.prototype._getValue_direct,Sn.prototype._getValue_array,Sn.prototype._getValue_arrayElement,Sn.prototype._getValue_toArray];Sn.prototype.SetterByBindingTypeAndVersioning=[[Sn.prototype._setValue_direct,Sn.prototype._setValue_direct_setNeedsUpdate,Sn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_array,Sn.prototype._setValue_array_setNeedsUpdate,Sn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_arrayElement,Sn.prototype._setValue_arrayElement_setNeedsUpdate,Sn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Sn.prototype._setValue_fromArray,Sn.prototype._setValue_fromArray_setNeedsUpdate,Sn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class xTe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ko(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let S=0,M=o;S!==M;++S)s[S].push(new Sn(p,r[S],i[S]))}else if(v<u){a=e[v];const S=--u,M=e[S];t[M.uuid]=v,e[v]=M,t[m]=S,e[S]=p;for(let g=0,_=o;g!==_;++g){const A=s[g],w=A[S];let C=A[v];A[v]=w,C===void 0&&(C=new Sn(p,r[g],i[g])),A[S]=C}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[u]=d,e[d]=l;for(let m=0,v=i;m!==v;++m){const S=r[m],M=S[d],g=S[h];S[h]=M,S[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],v=--o,S=e[v];t[m.uuid]=d,e[d]=m,t[S.uuid]=p,e[p]=S,e.pop();for(let M=0,g=i;M!==g;++M){const _=r[M],A=_[p],w=_[v];_[d]=A,_[p]=w,_.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let v=0,S=i;v!==S;++v){const M=r[v];M[d]=M[p],M.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,d=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const v=l[p];d[p]=new Sn(v,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class Aee{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:gm,endingEnd:gm};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vk,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case yk:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case ZR:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===v$;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===g$){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=vm,i.endingEnd=vm):(e?i.endingStart=this.zeroSlopeAtStart?vm:gm:i.endingStart=MS,t?i.endingEnd=this.zeroSlopeAtEnd?vm:gm:i.endingEnd=MS)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const _Te=new Float32Array(1);class See extends Th{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let d=0;d!==s;++d){const p=i[d],m=p.name;let v=h[m];if(v!==void 0)++v.referenceCount,o[d]=v;else{if(v=o[d],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const S=t&&t._propertyBindings[d].binding.parsedPath;v=new _ee(Sn.create(r,m,S),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[d]=v}a[d].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new Jk(new Float32Array(2),new Float32Array(2),1,_Te),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?nx.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=ZR),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===r)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new Aee(this,o,t,r);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?nx.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class iG{constructor(e){this.value=e}clone(){return new iG(this.value.clone===void 0?this.value:this.value.clone())}}let ATe=0;class STe extends Th{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:ATe++}),this.name="",this.usage=ES,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class MTe extends pM{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class ETe{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Mee{constructor(e,t,r=0,i=1/0){this.ray=new uM(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Um,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return v3(e,this,r,t),r.sort(M8),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)v3(e[i],this,r,t);return r.sort(M8),r}}function M8(n,e){return n.distance-e.distance}function v3(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)v3(i[s],e,t,!0)}}class wTe{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(kr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class bTe{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const E8=new ze;class CTe{constructor(e=new ze(1/0,1/0),t=new ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=E8.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,E8).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const w8=new ie,ub=new ie;class TTe{constructor(e=new ie,t=new ie){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){w8.subVectors(e,this.start),ub.subVectors(this.end,this.start);const r=ub.dot(ub);let s=ub.dot(w8)/r;return t&&(s=kr(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const b8=new ie;class RTe extends En{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new en,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new Tt(i,3));const s=new Cs({fog:!1,toneMapped:!1});this.cone=new Ql(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),b8.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(b8),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const od=new ie,hb=new jt,d2=new jt;class PTe extends Ql{constructor(e){const t=Eee(e),r=new en,i=[],s=[],o=new yt(0,0,1),a=new yt(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Tt(i,3)),r.setAttribute("color",new Tt(s,3));const l=new Cs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");d2.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(hb.multiplyMatrices(d2,a.matrixWorld),od.setFromMatrixPosition(hb),i.setXYZ(o,od.x,od.y,od.z),hb.multiplyMatrices(d2,a.parent.matrixWorld),od.setFromMatrixPosition(hb),i.setXYZ(o+1,od.x,od.y,od.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Eee(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Eee(n.children[t]));return e}class BTe extends Oi{constructor(e,t,r){const i=new wx(t,4,2),s=new Wo({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const LTe=new ie,C8=new yt,T8=new yt;class ITe extends En{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Ex(t);i.rotateY(Math.PI*.5),this.material=new Wo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Tn(o,3)),this.add(new Oi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");C8.copy(this.light.color),T8.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?C8:T8;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(LTe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class DTe extends Ql{constructor(e=10,t=10,r=4473924,i=8947848){r=new yt(r),i=new yt(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const S=p===s?r:i;S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3,S.toArray(u,m),m+=3}const h=new en;h.setAttribute("position",new Tt(l,3)),h.setAttribute("color",new Tt(u,3));const d=new Cs({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class FTe extends Ql{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new yt(s),o=new yt(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const S=d&1?s:o;l.push(S.r,S.g,S.b),l.push(S.r,S.g,S.b)}for(let d=0;d<r;d++){const p=d&1?s:o,m=e-e/r*d;for(let v=0;v<i;v++){let S=v/i*(Math.PI*2),M=Math.sin(S)*m,g=Math.cos(S)*m;a.push(M,0,g),l.push(p.r,p.g,p.b),S=(v+1)/i*(Math.PI*2),M=Math.sin(S)*m,g=Math.cos(S)*m,a.push(M,0,g),l.push(p.r,p.g,p.b)}}const u=new en;u.setAttribute("position",new Tt(a,3)),u.setAttribute("color",new Tt(l,3));const h=new Cs({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const R8=new ie,db=new ie,P8=new ie;class NTe extends En{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new en;i.setAttribute("position",new Tt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Cs({fog:!1,toneMapped:!1});this.lightPlane=new Sh(i,s),this.add(this.lightPlane),i=new en,i.setAttribute("position",new Tt([0,0,0,0,0,1],3)),this.targetLine=new Sh(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),R8.setFromMatrixPosition(this.light.matrixWorld),db.setFromMatrixPosition(this.light.target.matrixWorld),P8.subVectors(db,R8),this.lightPlane.lookAt(db),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(db),this.targetLine.scale.z=P8.length()}}const fb=new ie,Ir=new dM;class UTe extends Ql{constructor(e){const t=new en,r=new Cs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,S){l(v),l(S)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new Tt(i,3)),t.setAttribute("color",new Tt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new yt(16755200),h=new yt(16711680),d=new yt(43775),p=new yt(16777215),m=new yt(3355443);this.setColors(u,h,d,p,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Ir.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Wr("c",t,e,Ir,0,0,-1),Wr("t",t,e,Ir,0,0,1),Wr("n1",t,e,Ir,-r,-i,-1),Wr("n2",t,e,Ir,r,-i,-1),Wr("n3",t,e,Ir,-r,i,-1),Wr("n4",t,e,Ir,r,i,-1),Wr("f1",t,e,Ir,-r,-i,1),Wr("f2",t,e,Ir,r,-i,1),Wr("f3",t,e,Ir,-r,i,1),Wr("f4",t,e,Ir,r,i,1),Wr("u1",t,e,Ir,r*.7,i*1.1,-1),Wr("u2",t,e,Ir,-r*.7,i*1.1,-1),Wr("u3",t,e,Ir,0,i*2,-1),Wr("cf1",t,e,Ir,-r,0,1),Wr("cf2",t,e,Ir,r,0,1),Wr("cf3",t,e,Ir,0,-i,1),Wr("cf4",t,e,Ir,0,i,1),Wr("cn1",t,e,Ir,-r,0,-1),Wr("cn2",t,e,Ir,r,0,-1),Wr("cn3",t,e,Ir,0,-i,-1),Wr("cn4",t,e,Ir,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Wr(n,e,t,r,i,s,o){fb.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],fb.x,fb.y,fb.z)}}const pb=new Yl;class OTe extends Ql{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new en;s.setIndex(new Tn(r,1)),s.setAttribute("position",new Tn(i,3)),super(s,new Cs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&pb.setFromObject(this.object),pb.isEmpty())return;const t=pb.min,r=pb.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kTe extends Ql{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new en;s.setIndex(new Tn(r,1)),s.setAttribute("position",new Tt(i,3)),super(s,new Cs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class GTe extends Sh{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new en;o.setAttribute("position",new Tt(s,3)),o.computeBoundingSphere(),super(o,new Cs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new en;l.setAttribute("position",new Tt(a,3)),l.computeBoundingSphere(),this.add(new Oi(l,new Wo({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const B8=new ie;let mb,f2;class HTe extends En{constructor(e=new ie(0,0,1),t=new ie(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",mb===void 0&&(mb=new en,mb.setAttribute("position",new Tt([0,0,0,0,1,0],3)),f2=new Ag(0,.5,1,5,1),f2.translate(0,-.5,0)),this.position.copy(t),this.line=new Sh(mb,new Cs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Oi(f2,new Wo({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{B8.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(B8,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class zTe extends Ql{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new en;i.setAttribute("position",new Tt(t,3)),i.setAttribute("color",new Tt(r,3));const s=new Cs({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new yt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class VTe{constructor(){this.type="ShapePath",this.color=new yt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new bS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const _=[];for(let A=0,w=g.length;A<w;A++){const C=g[A],R=new Om;R.curves=C.curves,_.push(R)}return _}function r(g,_){const A=_.length;let w=!1;for(let C=A-1,R=0;R<A;C=R++){let L=_[C],I=_[R],T=I.x-L.x,B=I.y-L.y;if(Math.abs(B)>Number.EPSILON){if(B<0&&(L=_[R],T=-T,I=_[C],B=-B),g.y<L.y||g.y>I.y)continue;if(g.y===L.y){if(g.x===L.x)return!0}else{const H=B*(g.x-L.x)-T*(g.y-L.y);if(H===0)return!0;if(H<0)continue;w=!w}}else{if(g.y!==L.y)continue;if(I.x<=g.x&&g.x<=L.x||L.x<=g.x&&g.x<=I.x)return!0}}return w}const i=Oc.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Om,l.curves=a.curves,u.push(l),u;let h=!i(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],v=0,S;p[v]=void 0,m[v]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],S=a.getPoints(),o=i(S),o=e?!o:o,o?(!h&&p[v]&&v++,p[v]={s:new Om,p:S},p[v].s.curves=a.curves,h&&v++,m[v]=[]):m[v].push({h:a,p:S[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,_=0;for(let A=0,w=p.length;A<w;A++)d[A]=[];for(let A=0,w=p.length;A<w;A++){const C=m[A];for(let R=0;R<C.length;R++){const L=C[R];let I=!0;for(let T=0;T<p.length;T++)r(L.p,p[T].p)&&(A!==T&&_++,I?(I=!1,d[T].push(L)):g=!0);I&&d[A].push(L)}}_>0&&g===!1&&(m=d)}let M;for(let g=0,_=p.length;g<_;g++){l=p[g].s,u.push(l),M=m[g];for(let A=0,w=M.length;A<w;A++)l.holes.push(M[A].h)}return u}}class WTe extends If{constructor(e,t,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,r,i,s,o)}}class jTe extends gM{constructor(e,t,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,r,i)}}class XTe extends vM{constructor(e,t,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,r,i)}}class JTe extends yM{constructor(e,t,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,r,i,s,o,a)}}class KTe extends Ag{constructor(e,t,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,r,i,s,o,a,l)}}class YTe extends xM{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class qTe extends _M{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class QTe extends AM{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class ZTe extends Mx{constructor(e,t,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,r,i)}}class $Te extends Ex{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class eRe extends _x{constructor(e,t,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,r,i)}}class tRe extends Rh{constructor(e,t,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,r,i)}}class nRe extends SM{constructor(e,t,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,r,i,s,o)}}class rRe extends MM{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class iRe extends wx{constructor(e,t,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,r,i,s,o,a)}}class sRe extends EM{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class oRe extends wM{constructor(e,t,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,r,i,s)}}class aRe extends bM{constructor(e,t,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,r,i,s,o)}}class lRe extends CM{constructor(e,t,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:lM}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=lM);const cRe=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:mk,AddEquation:em,AddOperation:QZ,AdditiveAnimationBlendMode:yk,AdditiveBlending:FF,AlphaFormat:o$,AlwaysDepth:WZ,AlwaysStencilFunc:S$,AmbientLight:fee,AmbientLightProbe:rTe,AnimationAction:Aee,AnimationClip:nx,AnimationLoader:XCe,AnimationMixer:See,AnimationObjectGroup:xTe,AnimationUtils:zCe,ArcCurve:W$,ArrayCamera:O$,ArrowHelper:HTe,Audio:xee,AudioAnalyser:cTe,AudioContext:eG,AudioListener:oTe,AudioLoader:tTe,AxesHelper:zTe,BackSide:Hs,BasicDepthPacking:x$,BasicShadowMap:PZ,Bone:iP,BooleanKeyframeTrack:Sg,Box2:CTe,Box3:Yl,Box3Helper:kTe,BoxBufferGeometry:WTe,BoxGeometry:If,BoxHelper:OTe,BufferAttribute:Tn,BufferGeometry:en,BufferGeometryLoader:vee,ByteType:t$,Cache:ug,Camera:dM,CameraHelper:UTe,CanvasTexture:dCe,CapsuleBufferGeometry:jTe,CapsuleGeometry:gM,CatmullRomCurve3:j$,CineonToneMapping:$Z,CircleBufferGeometry:XTe,CircleGeometry:vM,ClampToEdgeWrapping:es,Clock:tG,Color:yt,ColorKeyframeTrack:Kk,ColorManagement:wa,CompressedArrayTexture:hCe,CompressedTexture:Uk,CompressedTextureLoader:JCe,ConeBufferGeometry:JTe,ConeGeometry:yM,CubeCamera:P$,CubeReflectionMapping:mf,CubeRefractionMapping:gf,CubeTexture:fM,CubeTextureLoader:KCe,CubeUVReflectionMapping:xx,CubicBezierCurve:kk,CubicBezierCurve3:X$,CubicInterpolant:lee,CullFaceBack:DF,CullFaceFront:RZ,CullFaceFrontBack:fAe,CullFaceNone:TZ,Curve:Zl,CurvePath:K$,CustomBlending:BZ,CustomToneMapping:e$,CylinderBufferGeometry:KTe,CylinderGeometry:Ag,Cylindrical:bTe,Data3DTexture:Ek,DataArrayTexture:$R,DataTexture:wy,DataTextureLoader:YCe,DataUtils:ASe,DecrementStencilOp:SAe,DecrementWrapStencilOp:EAe,DefaultLoadingManager:ey,DepthFormat:Qd,DepthStencilFormat:ig,DepthTexture:k$,DirectionalLight:$k,DirectionalLightHelper:NTe,DiscreteInterpolant:cee,DisplayP3ColorSpace:Ak,DodecahedronBufferGeometry:YTe,DodecahedronGeometry:xM,DoubleSide:Cl,DstAlphaFactor:OZ,DstColorFactor:GZ,DynamicCopyUsage:kAe,DynamicDrawUsage:IAe,DynamicReadUsage:NAe,EdgesGeometry:Y$,EllipseCurve:oP,EqualDepth:XZ,EqualStencilFunc:TAe,EquirectangularReflectionMapping:_S,EquirectangularRefractionMapping:AS,Euler:hM,EventDispatcher:Th,ExtrudeBufferGeometry:qTe,ExtrudeGeometry:_M,FileLoader:$o,Float16BufferAttribute:CSe,Float32BufferAttribute:Tt,Float64BufferAttribute:TSe,FloatType:Yu,Fog:rP,FogExp2:nP,FramebufferTexture:uCe,FrontSide:Vc,Frustum:eP,GLBufferAttribute:ETe,GLSL1:HAe,GLSL3:c3,GreaterDepth:KZ,GreaterEqualDepth:JZ,GreaterEqualStencilFunc:LAe,GreaterStencilFunc:PAe,GridHelper:DTe,Group:qu,HalfFloatType:Zy,HemisphereLight:dee,HemisphereLightHelper:ITe,HemisphereLightProbe:nTe,IcosahedronBufferGeometry:QTe,IcosahedronGeometry:AM,ImageBitmapLoader:yee,ImageLoader:PS,ImageUtils:Mk,IncrementStencilOp:AAe,IncrementWrapStencilOp:MAe,InstancedBufferAttribute:og,InstancedBufferGeometry:gee,InstancedInterleavedBuffer:MTe,InstancedMesh:Dk,Int16BufferAttribute:wSe,Int32BufferAttribute:bSe,Int8BufferAttribute:SSe,IntType:r$,InterleavedBuffer:pM,InterleavedBufferAttribute:yf,Interpolant:bx,InterpolateDiscrete:$y,InterpolateLinear:sg,InterpolateSmooth:dC,InvertStencilOp:wAe,KeepStencilOp:fC,KeyframeTrack:$l,LOD:V$,LatheBufferGeometry:ZTe,LatheGeometry:Mx,Layers:Um,LessDepth:jZ,LessEqualDepth:TT,LessEqualStencilFunc:RAe,LessStencilFunc:CAe,Light:Df,LightProbe:cP,Line:Sh,Line3:TTe,LineBasicMaterial:Cs,LineCurve:aP,LineCurve3:J$,LineDashedMaterial:oee,LineLoop:Fk,LineSegments:Ql,LinearEncoding:_k,LinearFilter:yr,LinearInterpolant:Jk,LinearMipMapLinearFilter:yAe,LinearMipMapNearestFilter:vAe,LinearMipmapLinearFilter:Wc,LinearMipmapNearestFilter:QR,LinearSRGBColorSpace:Gl,LinearToneMapping:pk,Loader:Js,LoaderUtils:$d,LoadingManager:Yk,LoopOnce:g$,LoopPingPong:v$,LoopRepeat:vk,LuminanceAlphaFormat:l$,LuminanceFormat:a$,MOUSE:hAe,Material:_i,MaterialLoader:uP,MathUtils:w$,Matrix3:dn,Matrix4:jt,MaxEquation:kF,Mesh:Oi,MeshBasicMaterial:Wo,MeshDepthMaterial:Tk,MeshDistanceMaterial:Rk,MeshLambertMaterial:iee,MeshMatcapMaterial:see,MeshNormalMaterial:ree,MeshPhongMaterial:nee,MeshPhysicalMaterial:Ya,MeshStandardMaterial:TM,MeshToonMaterial:Wk,MinEquation:OF,MirroredRepeatWrapping:Qy,MixOperation:qZ,MultiplyBlending:UF,MultiplyOperation:cM,NearestFilter:Ur,NearestMipMapLinearFilter:gAe,NearestMipMapNearestFilter:mAe,NearestMipmapLinearFilter:My,NearestMipmapNearestFilter:SS,NeverDepth:VZ,NeverStencilFunc:bAe,NoBlending:sh,NoColorSpace:Zd,NoToneMapping:Dl,NormalAnimationBlendMode:ZR,NormalBlending:Dm,NotEqualDepth:YZ,NotEqualStencilFunc:BAe,NumberKeyframeTrack:lg,Object3D:En,ObjectLoader:$Ce,ObjectSpaceNormalMap:A$,OctahedronBufferGeometry:$Te,OctahedronGeometry:Ex,OneFactor:FZ,OneMinusDstAlphaFactor:kZ,OneMinusDstColorFactor:HZ,OneMinusSrcAlphaFactor:fk,OneMinusSrcColorFactor:UZ,OrthographicCamera:Ax,PCFShadowMap:YR,PCFSoftShadowMap:fA,PMREMGenerator:h3,Path:bS,PerspectiveCamera:gi,Plane:gd,PlaneBufferGeometry:eRe,PlaneGeometry:_x,PlaneHelper:GTe,PointLight:Zk,PointLightHelper:BTe,Points:Nk,PointsMaterial:sP,PolarGridHelper:FTe,PolyhedronBufferGeometry:tRe,PolyhedronGeometry:Rh,PositionalAudio:lTe,PropertyBinding:Sn,PropertyMixer:_ee,QuadraticBezierCurve:Gk,QuadraticBezierCurve3:Hk,Quaternion:is,QuaternionKeyframeTrack:xf,QuaternionLinearInterpolant:uee,RED_GREEN_RGTC2_Format:a3,RED_RGTC1_Format:m$,REVISION:lM,RGBADepthPacking:_$,RGBAFormat:so,RGBAIntegerFormat:f$,RGBA_ASTC_10x10_Format:r3,RGBA_ASTC_10x5_Format:e3,RGBA_ASTC_10x6_Format:t3,RGBA_ASTC_10x8_Format:n3,RGBA_ASTC_12x10_Format:i3,RGBA_ASTC_12x12_Format:s3,RGBA_ASTC_4x4_Format:XF,RGBA_ASTC_5x4_Format:JF,RGBA_ASTC_5x5_Format:KF,RGBA_ASTC_6x5_Format:YF,RGBA_ASTC_6x6_Format:qF,RGBA_ASTC_8x5_Format:QF,RGBA_ASTC_8x6_Format:ZF,RGBA_ASTC_8x8_Format:$F,RGBA_BPTC_Format:hC,RGBA_ETC2_EAC_Format:jF,RGBA_PVRTC_2BPPV1_Format:VF,RGBA_PVRTC_4BPPV1_Format:zF,RGBA_S3TC_DXT1_Format:lC,RGBA_S3TC_DXT3_Format:cC,RGBA_S3TC_DXT5_Format:uC,RGB_ETC1_Format:p$,RGB_ETC2_Format:WF,RGB_PVRTC_2BPPV1_Format:HF,RGB_PVRTC_4BPPV1_Format:GF,RGB_S3TC_DXT1_Format:aC,RGFormat:h$,RGIntegerFormat:d$,RawShaderMaterial:tee,Ray:uM,Raycaster:Mee,RectAreaLight:pee,RedFormat:c$,RedIntegerFormat:u$,ReinhardToneMapping:ZZ,RepeatWrapping:vf,ReplaceStencilOp:_Ae,ReverseSubtractEquation:IZ,RingBufferGeometry:nRe,RingGeometry:SM,SIGNED_RED_GREEN_RGTC2_Format:l3,SIGNED_RED_RGTC1_Format:o3,SRGBColorSpace:Zt,Scene:Bk,ShaderChunk:nn,ShaderLib:wl,ShaderMaterial:jc,ShadowMaterial:eee,Shape:Om,ShapeBufferGeometry:rRe,ShapeGeometry:MM,ShapePath:VTe,ShapeUtils:Oc,ShortType:n$,Skeleton:mM,SkeletonHelper:PTe,SkinnedMesh:Ik,Source:ym,Sphere:ql,SphereBufferGeometry:iRe,SphereGeometry:wx,Spherical:wTe,SphericalHarmonics3:mee,SplineCurve:zk,SpotLight:Qk,SpotLightHelper:RTe,Sprite:z$,SpriteMaterial:Lk,SrcAlphaFactor:dk,SrcAlphaSaturateFactor:zZ,SrcColorFactor:NZ,StaticCopyUsage:OAe,StaticDrawUsage:ES,StaticReadUsage:FAe,StereoCamera:iTe,StreamCopyUsage:GAe,StreamDrawUsage:DAe,StreamReadUsage:UAe,StringKeyframeTrack:Mg,SubtractEquation:LZ,SubtractiveBlending:NF,TOUCH:dAe,TangentSpaceNormalMap:Lf,TetrahedronBufferGeometry:sRe,TetrahedronGeometry:EM,Texture:br,TextureLoader:hee,TorusBufferGeometry:oRe,TorusGeometry:wM,TorusKnotBufferGeometry:aRe,TorusKnotGeometry:bM,Triangle:ro,TriangleFanDrawMode:RT,TriangleStripDrawMode:xk,TrianglesDrawMode:y$,TubeBufferGeometry:lRe,TubeGeometry:CM,TwoPassDoubleSide:pAe,UVMapping:qR,Uint16BufferAttribute:wk,Uint32BufferAttribute:bk,Uint8BufferAttribute:MSe,Uint8ClampedBufferAttribute:ESe,Uniform:iG,UniformsGroup:STe,UniformsLib:lt,UniformsUtils:R$,UnsignedByteType:Ah,UnsignedInt248Type:Fm,UnsignedIntType:Td,UnsignedShort4444Type:i$,UnsignedShort5551Type:s$,UnsignedShortType:gk,VSMShadowMap:yl,Vector2:ze,Vector3:ie,Vector4:Un,VectorKeyframeTrack:cg,VideoTexture:cCe,WebGL1Renderer:G$,WebGL3DRenderTarget:uSe,WebGLArrayRenderTarget:cSe,WebGLCubeRenderTarget:B$,WebGLMultipleRenderTargets:hSe,WebGLRenderTarget:Hl,WebGLRenderer:Pk,WebGLUtils:U$,WireframeGeometry:$$,WrapAroundEnding:MS,ZeroCurvatureEnding:gm,ZeroFactor:DZ,ZeroSlopeEnding:vm,ZeroStencilOp:xAe,_SRGBAFormat:PT,sRGBEncoding:oh},Symbol.toStringTag,{value:"Module"}));var wee={exports:{}},Eg={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Eg.ConcurrentRoot=1;Eg.ContinuousEventPriority=4;Eg.DefaultEventPriority=16;Eg.DiscreteEventPriority=1;Eg.IdleEventPriority=536870912;Eg.LegacyRoot=0;wee.exports=Eg;var ty=wee.exports;function uRe(n){let e;const t=new Set,r=(u,h)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,s=(u,h=i,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const v=h(e);if(!d(p,v)){const S=p;u(p=v,S)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(u,h,d)=>h||d?s(u,h,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const hRe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),L8=hRe?be.useEffect:be.useLayoutEffect;function dRe(n){const e=typeof n=="function"?uRe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=be.useReducer(M=>M+1,0),o=e.getState(),a=be.useRef(o),l=be.useRef(r),u=be.useRef(i),h=be.useRef(!1),d=be.useRef();d.current===void 0&&(d.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||u.current!==i||h.current)&&(p=r(o),m=!i(d.current,p)),L8(()=>{m&&(d.current=p),a.current=o,l.current=r,u.current=i,h.current=!1});const v=be.useRef(o);L8(()=>{const M=()=>{try{const _=e.getState(),A=l.current(_);u.current(d.current,A)||(a.current=_,d.current=A,s())}catch{h.current=!0,s()}},g=e.subscribe(M);return e.getState()!==v.current&&M(),g},[]);const S=m?p:d.current;return be.useDebugValue(S),S};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const fRe=n=>typeof n=="object"&&typeof n.then=="function",_m=[];function bee(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function Cee(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of _m)if(bee(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=_m.indexOf(i);s!==-1&&_m.splice(s,1)},promise:(fRe(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(_m.push(i),!t)throw i.promise}const pRe=(n,e,t)=>Cee(n,e,!1,t),mRe=(n,e,t)=>void Cee(n,e,!0,t),gRe=n=>{if(n===void 0||n.length===0)_m.splice(0,_m.length);else{const e=_m.find(t=>bee(n,t.keys,t.equal));e&&e.remove()}};var Tee={exports:{}},Ree={exports:{}},Pee={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,V){var G=D.length;D.push(V);e:for(;0<G;){var q=G-1>>>1,re=D[q];if(0<i(re,V))D[q]=V,D[G]=re,G=q;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var V=D[0],G=D.pop();if(G!==V){D[0]=G;e:for(var q=0,re=D.length,Y=re>>>1;q<Y;){var ae=2*(q+1)-1,Se=D[ae],ve=ae+1,W=D[ve];if(0>i(Se,G))ve<re&&0>i(W,Se)?(D[q]=W,D[ve]=G,q=ve):(D[q]=Se,D[ae]=G,q=ae);else if(ve<re&&0>i(W,G))D[q]=W,D[ve]=G,q=ve;else break e}}return V}function i(D,V){var G=D.sortIndex-V.sortIndex;return G!==0?G:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,v=!1,S=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(D){for(var V=t(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=D)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(u)}}function w(D){if(S=!1,A(D),!v)if(t(l)!==null)v=!0,te(C);else{var V=t(u);V!==null&&O(w,V.startTime-D)}}function C(D,V){v=!1,S&&(S=!1,g(I),I=-1),m=!0;var G=p;try{for(A(V),d=t(l);d!==null&&(!(d.expirationTime>V)||D&&!H());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var re=q(d.expirationTime<=V);V=n.unstable_now(),typeof re=="function"?d.callback=re:d===t(l)&&r(l),A(V)}else r(l);d=t(l)}if(d!==null)var Y=!0;else{var ae=t(u);ae!==null&&O(w,ae.startTime-V),Y=!1}return Y}finally{d=null,p=G,m=!1}}var R=!1,L=null,I=-1,T=5,B=-1;function H(){return!(n.unstable_now()-B<T)}function K(){if(L!==null){var D=n.unstable_now();B=D;var V=!0;try{V=L(!0,D)}finally{V?j():(R=!1,L=null)}}else R=!1}var j;if(typeof _=="function")j=function(){_(K)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,X=z.port2;z.port1.onmessage=K,j=function(){X.postMessage(null)}}else j=function(){M(K,0)};function te(D){L=D,R||(R=!0,j())}function O(D,V){I=M(function(){D(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,te(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var G=p;p=V;try{return D()}finally{p=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=p;p=D;try{return V()}finally{p=G}},n.unstable_scheduleCallback=function(D,V,G){var q=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,D){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,D={id:h++,callback:V,priorityLevel:D,startTime:G,expirationTime:re,sortIndex:-1},G>q?(D.sortIndex=G,e(u,D),t(l)===null&&D===t(u)&&(S?(g(I),I=-1):S=!0,O(w,G-q))):(D.sortIndex=re,e(l,D),v||m||(v=!0,te(C))),D},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(D){var V=p;return function(){var G=p;p=V;try{return D.apply(this,arguments)}finally{p=G}}}})(Pee);Ree.exports=Pee;var y3=Ree.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vRe=function(e){var t={},r=be,i=y3,s=Object.assign;function o(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,x=1;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),C=Symbol.iterator;function R(c){return c===null||typeof c!="object"?null:(c=C&&c[C]||c["@@iterator"],typeof c=="function"?c:null)}function L(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case u:return"Portal";case p:return"Profiler";case d:return"StrictMode";case M:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case v:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case S:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case _:return f=c.displayName||null,f!==null?f:L(c.type)||"Memo";case A:f=c._payload,c=c._init;try{return L(c(f))}catch{}}return null}function I(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(f);case 8:return f===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function T(c){var f=c,x=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(x=f.return),c=f.return;while(c)}return f.tag===3?x:null}function B(c){if(T(c)!==c)throw Error(o(188))}function H(c){var f=c.alternate;if(!f){if(f=T(c),f===null)throw Error(o(188));return f!==c?null:c}for(var x=c,E=f;;){var b=x.return;if(b===null)break;var P=b.alternate;if(P===null){if(E=b.return,E!==null){x=E;continue}break}if(b.child===P.child){for(P=b.child;P;){if(P===x)return B(b),c;if(P===E)return B(b),f;P=P.sibling}throw Error(o(188))}if(x.return!==E.return)x=b,E=P;else{for(var k=!1,$=b.child;$;){if($===x){k=!0,x=b,E=P;break}if($===E){k=!0,E=b,x=P;break}$=$.sibling}if(!k){for($=P.child;$;){if($===x){k=!0,x=P,E=b;break}if($===E){k=!0,E=P,x=b;break}$=$.sibling}if(!k)throw Error(o(189))}}if(x.alternate!==E)throw Error(o(190))}if(x.tag!==3)throw Error(o(188));return x.stateNode.current===x?c:f}function K(c){return c=H(c),c!==null?j(c):null}function j(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=j(c);if(f!==null)return f;c=c.sibling}return null}function z(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=z(c);if(f!==null)return f}c=c.sibling}return null}var X=Array.isArray,te=e.getPublicInstance,O=e.getRootHostContext,D=e.getChildHostContext,V=e.prepareForCommit,G=e.resetAfterCommit,q=e.createInstance,re=e.appendInitialChild,Y=e.finalizeInitialChildren,ae=e.prepareUpdate,Se=e.shouldSetTextContent,ve=e.createTextInstance,W=e.scheduleTimeout,Xe=e.cancelTimeout,Ne=e.noTimeout,ye=e.isPrimaryRenderer,me=e.supportsMutation,pe=e.supportsPersistence,le=e.supportsHydration,Ae=e.getInstanceFromNode,Re=e.preparePortalMount,De=e.getCurrentEventPriority,Je=e.detachDeletedInstance,Qe=e.supportsMicrotasks,Ve=e.scheduleMicrotask,nt=e.supportsTestSelectors,It=e.findFiberRoot,U=e.getBoundingRect,F=e.getTextContent,oe=e.isHiddenSubtree,_e=e.matchAccessibilityRole,Me=e.setFocusIfFocusable,Te=e.setupIntersectionObserver,Ke=e.appendChild,Be=e.appendChildToContainer,he=e.commitTextUpdate,Ue=e.commitMount,Ge=e.commitUpdate,je=e.insertBefore,Le=e.insertInContainerBefore,Oe=e.removeChild,xt=e.removeChildFromContainer,wt=e.resetTextContent,zt=e.hideInstance,J=e.hideTextInstance,ce=e.unhideInstance,xe=e.unhideTextInstance,Pe=e.clearContainer,ke=e.cloneInstance,Lt=e.createContainerChildSet,Rt=e.appendChildToContainerChildSet,ln=e.finalizeContainerChildren,dr=e.replaceContainerChildren,kt=e.cloneHiddenInstance,Pn=e.cloneHiddenTextInstance,Zn=e.canHydrateInstance,xo=e.canHydrateTextInstance,nc=e.canHydrateSuspenseInstance,rc=e.isSuspenseInstancePending,Xc=e.isSuspenseInstanceFallback,qa=e.registerSuspenseInstanceRetry,N=e.getNextHydratableSibling,ne=e.getFirstHydratableChild,ue=e.getFirstHydratableChildWithinContainer,Z=e.getFirstHydratableChildWithinSuspenseInstance,de=e.hydrateInstance,Fe=e.hydrateTextInstance,Ye=e.hydrateSuspenseInstance,$e=e.getNextHydratableInstanceAfterSuspenseInstance,st=e.commitHydratedContainer,_t=e.commitHydratedSuspenseInstance,ct=e.clearSuspenseBoundary,ut=e.clearSuspenseBoundaryFromContainer,Dt=e.shouldDeleteUnhydratedTailInstances,yn=e.didNotMatchHydratedContainerTextInstance,Ln=e.didNotMatchHydratedTextInstance,$n;function Ft(c){if($n===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);$n=f&&f[1]||""}return`
`+$n+c}var ht=!1;function _o(c,f){if(!c||ht)return"";ht=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ce){var E=Ce}Reflect.construct(c,[],f)}else{try{f.call()}catch(Ce){E=Ce}c.call(f.prototype)}else{try{throw Error()}catch(Ce){E=Ce}c()}}catch(Ce){if(Ce&&E&&typeof Ce.stack=="string"){for(var b=Ce.stack.split(`
`),P=E.stack.split(`
`),k=b.length-1,$=P.length-1;1<=k&&0<=$&&b[k]!==P[$];)$--;for(;1<=k&&0<=$;k--,$--)if(b[k]!==P[$]){if(k!==1||$!==1)do if(k--,$--,0>$||b[k]!==P[$]){var fe=`
`+b[k].replace(" at new "," at ");return c.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",c.displayName)),fe}while(1<=k&&0<=$);break}}}finally{ht=!1,Error.prepareStackTrace=x}return(c=c?c.displayName||c.name:"")?Ft(c):""}var Gn=Object.prototype.hasOwnProperty,Wn=[],Hr=-1;function Vt(c){return{current:c}}function Pt(c){0>Hr||(c.current=Wn[Hr],Wn[Hr]=null,Hr--)}function St(c,f){Hr++,Wn[Hr]=c.current,c.current=f}var Kt={},on=Vt(Kt),Ot=Vt(!1),Rr=Kt;function er(c,f){var x=c.type.contextTypes;if(!x)return Kt;var E=c.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===f)return E.__reactInternalMemoizedMaskedChildContext;var b={},P;for(P in x)b[P]=f[P];return E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=b),b}function tr(c){return c=c.childContextTypes,c!=null}function Nf(){Pt(Ot),Pt(on)}function Rx(c,f,x){if(on.current!==Kt)throw Error(o(168));St(on,f),St(Ot,x)}function Uf(c,f,x){var E=c.stateNode;if(f=f.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var b in E)if(!(b in f))throw Error(o(108,I(c)||"Unknown",b));return s({},x,E)}function Of(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Kt,Rr=on.current,St(on,c),St(Ot,Ot.current),!0}function Ks(c,f,x){var E=c.stateNode;if(!E)throw Error(o(169));x?(c=Uf(c,f,Rr),E.__reactInternalMemoizedMergedChildContext=c,Pt(Ot),Pt(on),St(on,c)):Pt(Ot),St(Ot,x)}var Ao=Math.clz32?Math.clz32:Cg,AP=Math.log,SP=Math.LN2;function Cg(c){return c>>>=0,c===0?32:31-(AP(c)/SP|0)|0}var Jc=64,ic=4194304;function sc(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Tg(c,f){var x=c.pendingLanes;if(x===0)return 0;var E=0,b=c.suspendedLanes,P=c.pingedLanes,k=x&268435455;if(k!==0){var $=k&~b;$!==0?E=sc($):(P&=k,P!==0&&(E=sc(P)))}else k=x&~b,k!==0?E=sc(k):P!==0&&(E=sc(P));if(E===0)return 0;if(f!==0&&f!==E&&!(f&b)&&(b=E&-E,P=f&-f,b>=P||b===16&&(P&4194240)!==0))return f;if(E&4&&(E|=x&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=E;0<f;)x=31-Ao(f),b=1<<x,E|=c[x],f&=~b;return E}function MP(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Px(c,f){for(var x=c.suspendedLanes,E=c.pingedLanes,b=c.expirationTimes,P=c.pendingLanes;0<P;){var k=31-Ao(P),$=1<<k,fe=b[k];fe===-1?(!($&x)||$&E)&&(b[k]=MP($,f)):fe<=f&&(c.expiredLanes|=$),P&=~$}}function kf(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Kc(c){for(var f=[],x=0;31>x;x++)f.push(c);return f}function Gf(c,f,x){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Ao(f),c[f]=x}function Bx(c,f){var x=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var E=c.eventTimes;for(c=c.expirationTimes;0<x;){var b=31-Ao(x),P=1<<b;f[b]=0,E[b]=-1,c[b]=-1,x&=~P}}function vn(c,f){var x=c.entangledLanes|=f;for(c=c.entanglements;x;){var E=31-Ao(x),b=1<<E;b&f|c[E]&f&&(c[E]|=f),x&=~b}}var xn=0;function Rg(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Pg=i.unstable_scheduleCallback,UM=i.unstable_cancelCallback,EP=i.unstable_shouldYield,Kr=i.unstable_requestPaint,Pr=i.unstable_now,Lx=i.unstable_ImmediatePriority,Ix=i.unstable_UserBlockingPriority,Dx=i.unstable_NormalPriority,Bg=i.unstable_IdlePriority,Ts=null,sa=null;function wP(c){if(sa&&typeof sa.onCommitFiberRoot=="function")try{sa.onCommitFiberRoot(Ts,c,void 0,(c.current.flags&128)===128)}catch{}}function oa(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Yr=typeof Object.is=="function"?Object.is:oa,Ys=null,Ph=!1,Lg=!1;function OM(c){Ys===null?Ys=[c]:Ys.push(c)}function aa(c){Ph=!0,OM(c)}function la(){if(!Lg&&Ys!==null){Lg=!0;var c=0,f=xn;try{var x=Ys;for(xn=1;c<x.length;c++){var E=x[c];do E=E(!0);while(E!==null)}Ys=null,Ph=!1}catch(b){throw Ys!==null&&(Ys=Ys.slice(c+1)),Pg(Lx,la),b}finally{xn=f,Lg=!1}}return null}var Ig=a.ReactCurrentBatchConfig;function Dg(c,f){if(Yr(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var x=Object.keys(c),E=Object.keys(f);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var b=x[E];if(!Gn.call(f,b)||!Yr(c[b],f[b]))return!1}return!0}function So(c){switch(c.tag){case 5:return Ft(c.type);case 16:return Ft("Lazy");case 13:return Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 2:case 15:return c=_o(c.type,!1),c;case 11:return c=_o(c.type.render,!1),c;case 1:return c=_o(c.type,!0),c;default:return""}}function as(c,f){if(c&&c.defaultProps){f=s({},f),c=c.defaultProps;for(var x in c)f[x]===void 0&&(f[x]=c[x]);return f}return f}var Yc=Vt(null),Qa=null,oc=null,Hf=null;function Fg(){Hf=oc=Qa=null}function Ng(c,f,x){ye?(St(Yc,f._currentValue),f._currentValue=x):(St(Yc,f._currentValue2),f._currentValue2=x)}function zf(c){var f=Yc.current;Pt(Yc),ye?c._currentValue=f:c._currentValue2=f}function ac(c,f,x){for(;c!==null;){var E=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,E!==null&&(E.childLanes|=f)):E!==null&&(E.childLanes&f)!==f&&(E.childLanes|=f),c===x)break;c=c.return}}function li(c,f){Qa=c,Hf=oc=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(Dn=!0),c.firstContext=null)}function fr(c){var f=ye?c._currentValue:c._currentValue2;if(Hf!==c)if(c={context:c,memoizedValue:f,next:null},oc===null){if(Qa===null)throw Error(o(308));oc=c,Qa.dependencies={lanes:0,firstContext:c}}else oc=oc.next=c;return f}var ci=null,ca=!1;function Ug(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ua(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function wi(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function Mo(c,f){var x=c.updateQueue;x!==null&&(x=x.shared,Yt!==null&&c.mode&1&&!(Bt&2)?(c=x.interleaved,c===null?(f.next=f,ci===null?ci=[x]:ci.push(x)):(f.next=c.next,c.next=f),x.interleaved=f):(c=x.pending,c===null?f.next=f:(f.next=c.next,c.next=f),x.pending=f))}function Vf(c,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194240)!==0)){var E=f.lanes;E&=c.pendingLanes,x|=E,f.lanes=x,vn(c,x)}}function Wf(c,f){var x=c.updateQueue,E=c.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var b=null,P=null;if(x=x.firstBaseUpdate,x!==null){do{var k={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};P===null?b=P=k:P=P.next=k,x=x.next}while(x!==null);P===null?b=P=f:P=P.next=f}else b=P=f;x={baseState:E.baseState,firstBaseUpdate:b,lastBaseUpdate:P,shared:E.shared,effects:E.effects},c.updateQueue=x;return}c=x.lastBaseUpdate,c===null?x.firstBaseUpdate=f:c.next=f,x.lastBaseUpdate=f}function jf(c,f,x,E){var b=c.updateQueue;ca=!1;var P=b.firstBaseUpdate,k=b.lastBaseUpdate,$=b.shared.pending;if($!==null){b.shared.pending=null;var fe=$,Ce=fe.next;fe.next=null,k===null?P=Ce:k.next=Ce,k=fe;var He=c.alternate;He!==null&&(He=He.updateQueue,$=He.lastBaseUpdate,$!==k&&($===null?He.firstBaseUpdate=Ce:$.next=Ce,He.lastBaseUpdate=fe))}if(P!==null){var Ze=b.baseState;k=0,He=Ce=fe=null,$=P;do{var ot=$.lane,rt=$.eventTime;if((E&ot)===ot){He!==null&&(He=He.next={eventTime:rt,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var At=c,Fn=$;switch(ot=f,rt=x,Fn.tag){case 1:if(At=Fn.payload,typeof At=="function"){Ze=At.call(rt,Ze,ot);break e}Ze=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Fn.payload,ot=typeof At=="function"?At.call(rt,Ze,ot):At,ot==null)break e;Ze=s({},Ze,ot);break e;case 2:ca=!0}}$.callback!==null&&$.lane!==0&&(c.flags|=64,ot=b.effects,ot===null?b.effects=[$]:ot.push($))}else rt={eventTime:rt,lane:ot,tag:$.tag,payload:$.payload,callback:$.callback,next:null},He===null?(Ce=He=rt,fe=Ze):He=He.next=rt,k|=ot;if($=$.next,$===null){if($=b.shared.pending,$===null)break;ot=$,$=ot.next,ot.next=null,b.lastBaseUpdate=ot,b.shared.pending=null}}while(1);if(He===null&&(fe=Ze),b.baseState=fe,b.firstBaseUpdate=Ce,b.lastBaseUpdate=He,f=b.shared.interleaved,f!==null){b=f;do k|=b.lane,b=b.next;while(b!==f)}else P===null&&(b.shared.lanes=0);nl|=k,c.lanes=k,c.memoizedState=Ze}}function Fx(c,f,x){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var E=c[f],b=E.callback;if(b!==null){if(E.callback=null,E=x,typeof b!="function")throw Error(o(191,b));b.call(E)}}}var Og=new r.Component().refs;function Bh(c,f,x,E){f=c.memoizedState,x=x(E,f),x=x==null?f:s({},f,x),c.memoizedState=x,c.lanes===0&&(c.updateQueue.baseState=x)}var Xf={isMounted:function(c){return(c=c._reactInternals)?T(c)===c:!1},enqueueSetState:function(c,f,x){c=c._reactInternals;var E=cr(),b=zr(c),P=wi(E,b);P.payload=f,x!=null&&(P.callback=x),Mo(c,P),f=Ki(c,b,E),f!==null&&Vf(f,c,b)},enqueueReplaceState:function(c,f,x){c=c._reactInternals;var E=cr(),b=zr(c),P=wi(E,b);P.tag=1,P.payload=f,x!=null&&(P.callback=x),Mo(c,P),f=Ki(c,b,E),f!==null&&Vf(f,c,b)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var x=cr(),E=zr(c),b=wi(x,E);b.tag=2,f!=null&&(b.callback=f),Mo(c,b),f=Ki(c,E,x),f!==null&&Vf(f,c,E)}};function Nx(c,f,x,E,b,P,k){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(E,P,k):f.prototype&&f.prototype.isPureReactComponent?!Dg(x,E)||!Dg(b,P):!0}function Ux(c,f,x){var E=!1,b=Kt,P=f.contextType;return typeof P=="object"&&P!==null?P=fr(P):(b=tr(f)?Rr:on.current,E=f.contextTypes,P=(E=E!=null)?er(c,b):Kt),f=new f(x,P),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Xf,c.stateNode=f,f._reactInternals=c,E&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=b,c.__reactInternalMemoizedMaskedChildContext=P),f}function kg(c,f,x,E){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,E),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,E),f.state!==c&&Xf.enqueueReplaceState(f,f.state,null)}function lc(c,f,x,E){var b=c.stateNode;b.props=x,b.state=c.memoizedState,b.refs=Og,Ug(c);var P=f.contextType;typeof P=="object"&&P!==null?b.context=fr(P):(P=tr(f)?Rr:on.current,b.context=er(c,P)),b.state=c.memoizedState,P=f.getDerivedStateFromProps,typeof P=="function"&&(Bh(c,f,P,x),b.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(f=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),f!==b.state&&Xf.enqueueReplaceState(b,b.state,null),jf(c,x,b,E),b.state=c.memoizedState),typeof b.componentDidMount=="function"&&(c.flags|=4194308)}var Eo=[],Za=0,qc=null,Hi=0,nr=[],qr=0,zi=null,ui=1,Vi="";function cc(c,f){Eo[Za++]=Hi,Eo[Za++]=qc,qc=c,Hi=f}function Gg(c,f,x){nr[qr++]=ui,nr[qr++]=Vi,nr[qr++]=zi,zi=c;var E=ui;c=Vi;var b=32-Ao(E)-1;E&=~(1<<b),x+=1;var P=32-Ao(f)+b;if(30<P){var k=b-b%5;P=(E&(1<<k)-1).toString(32),E>>=k,b-=k,ui=1<<32-Ao(f)+b|x<<b|E,Vi=P+c}else ui=1<<P|x<<b|E,Vi=c}function Jf(c){c.return!==null&&(cc(c,1),Gg(c,1,0))}function Wi(c){for(;c===qc;)qc=Eo[--Za],Eo[Za]=null,Hi=Eo[--Za],Eo[Za]=null;for(;c===zi;)zi=nr[--qr],nr[qr]=null,Vi=nr[--qr],nr[qr]=null,ui=nr[--qr],nr[qr]=null}var zn=null,cn=null,Bn=!1,ji=!1,qs=null;function Ox(c,f){var x=cs(5,null,null,0);x.elementType="DELETED",x.stateNode=f,x.return=c,f=c.deletions,f===null?(c.deletions=[x],c.flags|=16):f.push(x)}function Hg(c,f){switch(c.tag){case 5:return f=Zn(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,zn=c,cn=ne(f),!0):!1;case 6:return f=xo(f,c.pendingProps),f!==null?(c.stateNode=f,zn=c,cn=null,!0):!1;case 13:if(f=nc(f),f!==null){var x=zi!==null?{id:ui,overflow:Vi}:null;return c.memoizedState={dehydrated:f,treeContext:x,retryLane:1073741824},x=cs(18,null,null,0),x.stateNode=f,x.return=c,c.child=x,zn=c,cn=null,!0}return!1;default:return!1}}function Kf(c){return(c.mode&1)!==0&&(c.flags&128)===0}function zg(c){if(Bn){var f=cn;if(f){var x=f;if(!Hg(c,f)){if(Kf(c))throw Error(o(418));f=N(x);var E=zn;f&&Hg(c,f)?Ox(E,x):(c.flags=c.flags&-4097|2,Bn=!1,zn=c)}}else{if(Kf(c))throw Error(o(418));c.flags=c.flags&-4097|2,Bn=!1,zn=c}}}function Lh(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;zn=c}function ha(c){if(!le||c!==zn)return!1;if(!Bn)return Lh(c),Bn=!0,!1;if(c.tag!==3&&(c.tag!==5||Dt(c.type)&&!Se(c.type,c.memoizedProps))){var f=cn;if(f){if(Kf(c)){for(c=cn;c;)c=N(c);throw Error(o(418))}for(;f;)Ox(c,f),f=N(f)}}if(Lh(c),c.tag===13){if(!le)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));cn=$e(c)}else cn=zn?N(c.stateNode):null;return!0}function uc(){le&&(cn=zn=null,ji=Bn=!1)}function Qc(c){qs===null?qs=[c]:qs.push(c)}function hc(c,f,x){if(c=x.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(o(309));var E=x.stateNode}if(!E)throw Error(o(147,c));var b=E,P=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===P?f.ref:(f=function(k){var $=b.refs;$===Og&&($=b.refs={}),k===null?delete $[P]:$[P]=k},f._stringRef=P,f)}if(typeof c!="string")throw Error(o(284));if(!x._owner)throw Error(o(290,c))}return c}function Yf(c,f){throw c=Object.prototype.toString.call(f),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function kx(c){var f=c._init;return f(c._payload)}function Zc(c){function f(Q,ee){if(c){var ge=Q.deletions;ge===null?(Q.deletions=[ee],Q.flags|=16):ge.push(ee)}}function x(Q,ee){if(!c)return null;for(;ee!==null;)f(Q,ee),ee=ee.sibling;return null}function E(Q,ee){for(Q=new Map;ee!==null;)ee.key!==null?Q.set(ee.key,ee):Q.set(ee.index,ee),ee=ee.sibling;return Q}function b(Q,ee){return Q=Lo(Q,ee),Q.index=0,Q.sibling=null,Q}function P(Q,ee,ge){return Q.index=ge,c?(ge=Q.alternate,ge!==null?(ge=ge.index,ge<ee?(Q.flags|=2,ee):ge):(Q.flags|=2,ee)):(Q.flags|=1048576,ee)}function k(Q){return c&&Q.alternate===null&&(Q.flags|=2),Q}function $(Q,ee,ge,Ie){return ee===null||ee.tag!==6?(ee=gp(ge,Q.mode,Ie),ee.return=Q,ee):(ee=b(ee,ge),ee.return=Q,ee)}function fe(Q,ee,ge,Ie){var qe=ge.type;return qe===h?He(Q,ee,ge.props.children,Ie,ge.key):ee!==null&&(ee.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&kx(qe)===ee.type)?(Ie=b(ee,ge.props),Ie.ref=hc(Q,ee,ge),Ie.return=Q,Ie):(Ie=ya(ge.type,ge.key,ge.props,null,Q.mode,Ie),Ie.ref=hc(Q,ee,ge),Ie.return=Q,Ie)}function Ce(Q,ee,ge,Ie){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ge.containerInfo||ee.stateNode.implementation!==ge.implementation?(ee=w_(ge,Q.mode,Ie),ee.return=Q,ee):(ee=b(ee,ge.children||[]),ee.return=Q,ee)}function He(Q,ee,ge,Ie,qe){return ee===null||ee.tag!==7?(ee=xa(ge,Q.mode,Ie,qe),ee.return=Q,ee):(ee=b(ee,ge),ee.return=Q,ee)}function Ze(Q,ee,ge){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=gp(""+ee,Q.mode,ge),ee.return=Q,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return ge=ya(ee.type,ee.key,ee.props,null,Q.mode,ge),ge.ref=hc(Q,null,ee),ge.return=Q,ge;case u:return ee=w_(ee,Q.mode,ge),ee.return=Q,ee;case A:var Ie=ee._init;return Ze(Q,Ie(ee._payload),ge)}if(X(ee)||R(ee))return ee=xa(ee,Q.mode,ge,null),ee.return=Q,ee;Yf(Q,ee)}return null}function ot(Q,ee,ge,Ie){var qe=ee!==null?ee.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return qe!==null?null:$(Q,ee,""+ge,Ie);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:return ge.key===qe?fe(Q,ee,ge,Ie):null;case u:return ge.key===qe?Ce(Q,ee,ge,Ie):null;case A:return qe=ge._init,ot(Q,ee,qe(ge._payload),Ie)}if(X(ge)||R(ge))return qe!==null?null:He(Q,ee,ge,Ie,null);Yf(Q,ge)}return null}function rt(Q,ee,ge,Ie,qe){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Q=Q.get(ge)||null,$(ee,Q,""+Ie,qe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:return Q=Q.get(Ie.key===null?ge:Ie.key)||null,fe(ee,Q,Ie,qe);case u:return Q=Q.get(Ie.key===null?ge:Ie.key)||null,Ce(ee,Q,Ie,qe);case A:var it=Ie._init;return rt(Q,ee,ge,it(Ie._payload),qe)}if(X(Ie)||R(Ie))return Q=Q.get(ge)||null,He(ee,Q,Ie,qe,null);Yf(ee,Ie)}return null}function At(Q,ee,ge,Ie){for(var qe=null,it=null,ft=ee,Nt=ee=0,Ut=null;ft!==null&&Nt<ge.length;Nt++){ft.index>Nt?(Ut=ft,ft=null):Ut=ft.sibling;var qt=ot(Q,ft,ge[Nt],Ie);if(qt===null){ft===null&&(ft=Ut);break}c&&ft&&qt.alternate===null&&f(Q,ft),ee=P(qt,ee,Nt),it===null?qe=qt:it.sibling=qt,it=qt,ft=Ut}if(Nt===ge.length)return x(Q,ft),Bn&&cc(Q,Nt),qe;if(ft===null){for(;Nt<ge.length;Nt++)ft=Ze(Q,ge[Nt],Ie),ft!==null&&(ee=P(ft,ee,Nt),it===null?qe=ft:it.sibling=ft,it=ft);return Bn&&cc(Q,Nt),qe}for(ft=E(Q,ft);Nt<ge.length;Nt++)Ut=rt(ft,Q,Nt,ge[Nt],Ie),Ut!==null&&(c&&Ut.alternate!==null&&ft.delete(Ut.key===null?Nt:Ut.key),ee=P(Ut,ee,Nt),it===null?qe=Ut:it.sibling=Ut,it=Ut);return c&&ft.forEach(function(Mc){return f(Q,Mc)}),Bn&&cc(Q,Nt),qe}function Fn(Q,ee,ge,Ie){var qe=R(ge);if(typeof qe!="function")throw Error(o(150));if(ge=qe.call(ge),ge==null)throw Error(o(151));for(var it=qe=null,ft=ee,Nt=ee=0,Ut=null,qt=ge.next();ft!==null&&!qt.done;Nt++,qt=ge.next()){ft.index>Nt?(Ut=ft,ft=null):Ut=ft.sibling;var Mc=ot(Q,ft,qt.value,Ie);if(Mc===null){ft===null&&(ft=Ut);break}c&&ft&&Mc.alternate===null&&f(Q,ft),ee=P(Mc,ee,Nt),it===null?qe=Mc:it.sibling=Mc,it=Mc,ft=Ut}if(qt.done)return x(Q,ft),Bn&&cc(Q,Nt),qe;if(ft===null){for(;!qt.done;Nt++,qt=ge.next())qt=Ze(Q,qt.value,Ie),qt!==null&&(ee=P(qt,ee,Nt),it===null?qe=qt:it.sibling=qt,it=qt);return Bn&&cc(Q,Nt),qe}for(ft=E(Q,ft);!qt.done;Nt++,qt=ge.next())qt=rt(ft,Q,Nt,qt.value,Ie),qt!==null&&(c&&qt.alternate!==null&&ft.delete(qt.key===null?Nt:qt.key),ee=P(qt,ee,Nt),it===null?qe=qt:it.sibling=qt,it=qt);return c&&ft.forEach(function(Une){return f(Q,Une)}),Bn&&cc(Q,Nt),qe}function Ee(Q,ee,ge,Ie){if(typeof ge=="object"&&ge!==null&&ge.type===h&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:e:{for(var qe=ge.key,it=ee;it!==null;){if(it.key===qe){if(qe=ge.type,qe===h){if(it.tag===7){x(Q,it.sibling),ee=b(it,ge.props.children),ee.return=Q,Q=ee;break e}}else if(it.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&kx(qe)===it.type){x(Q,it.sibling),ee=b(it,ge.props),ee.ref=hc(Q,it,ge),ee.return=Q,Q=ee;break e}x(Q,it);break}else f(Q,it);it=it.sibling}ge.type===h?(ee=xa(ge.props.children,Q.mode,Ie,ge.key),ee.return=Q,Q=ee):(Ie=ya(ge.type,ge.key,ge.props,null,Q.mode,Ie),Ie.ref=hc(Q,ee,ge),Ie.return=Q,Q=Ie)}return k(Q);case u:e:{for(it=ge.key;ee!==null;){if(ee.key===it)if(ee.tag===4&&ee.stateNode.containerInfo===ge.containerInfo&&ee.stateNode.implementation===ge.implementation){x(Q,ee.sibling),ee=b(ee,ge.children||[]),ee.return=Q,Q=ee;break e}else{x(Q,ee);break}else f(Q,ee);ee=ee.sibling}ee=w_(ge,Q.mode,Ie),ee.return=Q,Q=ee}return k(Q);case A:return it=ge._init,Ee(Q,ee,it(ge._payload),Ie)}if(X(ge))return At(Q,ee,ge,Ie);if(R(ge))return Fn(Q,ee,ge,Ie);Yf(Q,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,ee!==null&&ee.tag===6?(x(Q,ee.sibling),ee=b(ee,ge),ee.return=Q,Q=ee):(x(Q,ee),ee=gp(ge,Q.mode,Ie),ee.return=Q,Q=ee),k(Q)):x(Q,ee)}return Ee}var $c=Zc(!0),Ih=Zc(!1),bi={},Ci=Vt(bi),da=Vt(bi),Xi=Vt(bi);function Qs(c){if(c===bi)throw Error(o(174));return c}function dc(c,f){St(Xi,f),St(da,c),St(Ci,bi),c=O(f),Pt(Ci),St(Ci,c)}function eu(){Pt(Ci),Pt(da),Pt(Xi)}function Vg(c){var f=Qs(Xi.current),x=Qs(Ci.current);f=D(x,c.type,f),x!==f&&(St(da,c),St(Ci,f))}function Vn(c){da.current===c&&(Pt(Ci),Pt(da))}var Hn=Vt(0);function Dh(c){for(var f=c;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||rc(x)||Xc(x)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var qf=[];function Fh(){for(var c=0;c<qf.length;c++){var f=qf[c];ye?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}qf.length=0}var Ji=a.ReactCurrentDispatcher,hi=a.ReactCurrentBatchConfig,In=0,an=null,_n=null,pr=null,fc=!1,$a=!1,Qf=0,Ti=0;function Qr(){throw Error(o(321))}function Zf(c,f){if(f===null)return!1;for(var x=0;x<f.length&&x<c.length;x++)if(!Yr(c[x],f[x]))return!1;return!0}function $f(c,f,x,E,b,P){if(In=P,an=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Ji.current=c===null||c.memoizedState===null?CP:TP,c=x(E,b),$a){P=0;do{if($a=!1,Qf=0,25<=P)throw Error(o(301));P+=1,pr=_n=null,f.updateQueue=null,Ji.current=Zx,c=x(E,b)}while($a)}if(Ji.current=Jg,f=_n!==null&&_n.next!==null,In=0,pr=_n=an=null,fc=!1,f)throw Error(o(300));return c}function wo(){var c=Qf!==0;return Qf=0,c}function Zr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?an.memoizedState=pr=c:pr=pr.next=c,pr}function Ri(){if(_n===null){var c=an.alternate;c=c!==null?c.memoizedState:null}else c=_n.next;var f=pr===null?an.memoizedState:pr.next;if(f!==null)pr=f,_n=c;else{if(c===null)throw Error(o(310));_n=c,c={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},pr===null?an.memoizedState=pr=c:pr=pr.next=c}return pr}function fa(c,f){return typeof f=="function"?f(c):f}function tu(c){var f=Ri(),x=f.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=c;var E=_n,b=E.baseQueue,P=x.pending;if(P!==null){if(b!==null){var k=b.next;b.next=P.next,P.next=k}E.baseQueue=b=P,x.pending=null}if(b!==null){P=b.next,E=E.baseState;var $=k=null,fe=null,Ce=P;do{var He=Ce.lane;if((In&He)===He)fe!==null&&(fe=fe.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),E=Ce.hasEagerState?Ce.eagerState:c(E,Ce.action);else{var Ze={lane:He,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};fe===null?($=fe=Ze,k=E):fe=fe.next=Ze,an.lanes|=He,nl|=He}Ce=Ce.next}while(Ce!==null&&Ce!==P);fe===null?k=E:fe.next=$,Yr(E,f.memoizedState)||(Dn=!0),f.memoizedState=E,f.baseState=k,f.baseQueue=fe,x.lastRenderedState=E}if(c=x.interleaved,c!==null){b=c;do P=b.lane,an.lanes|=P,nl|=P,b=b.next;while(b!==c)}else b===null&&(x.lanes=0);return[f.memoizedState,x.dispatch]}function ep(c){var f=Ri(),x=f.queue;if(x===null)throw Error(o(311));x.lastRenderedReducer=c;var E=x.dispatch,b=x.pending,P=f.memoizedState;if(b!==null){x.pending=null;var k=b=b.next;do P=c(P,k.action),k=k.next;while(k!==b);Yr(P,f.memoizedState)||(Dn=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),x.lastRenderedState=P}return[P,E]}function Gx(){}function Hx(c,f){var x=an,E=Ri(),b=f(),P=!Yr(E.memoizedState,b);if(P&&(E.memoizedState=b,Dn=!0),E=E.queue,Oh(Wx.bind(null,x,E,c),[c]),E.getSnapshot!==f||P||pr!==null&&pr.memoizedState.tag&1){if(x.flags|=2048,Nh(9,Vx.bind(null,x,E,b,f),void 0,null),Yt===null)throw Error(o(349));In&30||zx(x,f,b)}return b}function zx(c,f,x){c.flags|=16384,c={getSnapshot:f,value:x},f=an.updateQueue,f===null?(f={lastEffect:null,stores:null},an.updateQueue=f,f.stores=[c]):(x=f.stores,x===null?f.stores=[c]:x.push(c))}function Vx(c,f,x,E){f.value=x,f.getSnapshot=E,Wg(f)&&Ki(c,1,-1)}function Wx(c,f,x){return x(function(){Wg(f)&&Ki(c,1,-1)})}function Wg(c){var f=c.getSnapshot;c=c.value;try{var x=f();return!Yr(c,x)}catch{return!0}}function nu(c){var f=Zr();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:c},f.queue=c,c=c.dispatch=zM.bind(null,an,c),[f.memoizedState,c]}function Nh(c,f,x,E){return c={tag:c,create:f,destroy:x,deps:E,next:null},f=an.updateQueue,f===null?(f={lastEffect:null,stores:null},an.updateQueue=f,f.lastEffect=c.next=c):(x=f.lastEffect,x===null?f.lastEffect=c.next=c:(E=x.next,x.next=c,c.next=E,f.lastEffect=c)),c}function tp(){return Ri().memoizedState}function ru(c,f,x,E){var b=Zr();an.flags|=c,b.memoizedState=Nh(1|f,x,void 0,E===void 0?null:E)}function Uh(c,f,x,E){var b=Ri();E=E===void 0?null:E;var P=void 0;if(_n!==null){var k=_n.memoizedState;if(P=k.destroy,E!==null&&Zf(E,k.deps)){b.memoizedState=Nh(f,x,P,E);return}}an.flags|=c,b.memoizedState=Nh(1|f,x,P,E)}function iu(c,f){return ru(8390656,8,c,f)}function Oh(c,f){return Uh(2048,8,c,f)}function jx(c,f){return Uh(4,2,c,f)}function Xx(c,f){return Uh(4,4,c,f)}function Jx(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function jg(c,f,x){return x=x!=null?x.concat([c]):null,Uh(4,4,Jx.bind(null,f,c),x)}function Xg(){}function Kx(c,f){var x=Ri();f=f===void 0?null:f;var E=x.memoizedState;return E!==null&&f!==null&&Zf(f,E[1])?E[0]:(x.memoizedState=[c,f],c)}function kM(c,f){var x=Ri();f=f===void 0?null:f;var E=x.memoizedState;return E!==null&&f!==null&&Zf(f,E[1])?E[0]:(c=c(),x.memoizedState=[c,f],c)}function GM(c,f){var x=xn;xn=x!==0&&4>x?x:4,c(!0);var E=hi.transition;hi.transition={};try{c(!1),f()}finally{xn=x,hi.transition=E}}function HM(){return Ri().memoizedState}function bP(c,f,x){var E=zr(c);x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},Yx(c)?qx(f,x):(Qx(c,f,x),x=cr(),c=Ki(c,E,x),c!==null&&np(c,f,E))}function zM(c,f,x){var E=zr(c),b={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(Yx(c))qx(f,b);else{Qx(c,f,b);var P=c.alternate;if(c.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var k=f.lastRenderedState,$=P(k,x);if(b.hasEagerState=!0,b.eagerState=$,Yr($,k))return}catch{}finally{}x=cr(),c=Ki(c,E,x),c!==null&&np(c,f,E)}}function Yx(c){var f=c.alternate;return c===an||f!==null&&f===an}function qx(c,f){$a=fc=!0;var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}function Qx(c,f,x){Yt!==null&&c.mode&1&&!(Bt&2)?(c=f.interleaved,c===null?(x.next=x,ci===null?ci=[f]:ci.push(f)):(x.next=c.next,c.next=x),f.interleaved=x):(c=f.pending,c===null?x.next=x:(x.next=c.next,c.next=x),f.pending=x)}function np(c,f,x){if(x&4194240){var E=f.lanes;E&=c.pendingLanes,x|=E,f.lanes=x,vn(c,x)}}var Jg={readContext:fr,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useInsertionEffect:Qr,useLayoutEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useMutableSource:Qr,useSyncExternalStore:Qr,useId:Qr,unstable_isNewReconciler:!1},CP={readContext:fr,useCallback:function(c,f){return Zr().memoizedState=[c,f===void 0?null:f],c},useContext:fr,useEffect:iu,useImperativeHandle:function(c,f,x){return x=x!=null?x.concat([c]):null,ru(4194308,4,Jx.bind(null,f,c),x)},useLayoutEffect:function(c,f){return ru(4194308,4,c,f)},useInsertionEffect:function(c,f){return ru(4,2,c,f)},useMemo:function(c,f){var x=Zr();return f=f===void 0?null:f,c=c(),x.memoizedState=[c,f],c},useReducer:function(c,f,x){var E=Zr();return f=x!==void 0?x(f):f,E.memoizedState=E.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},E.queue=c,c=c.dispatch=bP.bind(null,an,c),[E.memoizedState,c]},useRef:function(c){var f=Zr();return c={current:c},f.memoizedState=c},useState:nu,useDebugValue:Xg,useDeferredValue:function(c){var f=nu(c),x=f[0],E=f[1];return iu(function(){var b=hi.transition;hi.transition={};try{E(c)}finally{hi.transition=b}},[c]),x},useTransition:function(){var c=nu(!1),f=c[0];return c=GM.bind(null,c[1]),Zr().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,x){var E=an,b=Zr();if(Bn){if(x===void 0)throw Error(o(407));x=x()}else{if(x=f(),Yt===null)throw Error(o(349));In&30||zx(E,f,x)}b.memoizedState=x;var P={value:x,getSnapshot:f};return b.queue=P,iu(Wx.bind(null,E,P,c),[c]),E.flags|=2048,Nh(9,Vx.bind(null,E,P,x,f),void 0,null),x},useId:function(){var c=Zr(),f=Yt.identifierPrefix;if(Bn){var x=Vi,E=ui;x=(E&~(1<<32-Ao(E)-1)).toString(32)+x,f=":"+f+"R"+x,x=Qf++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=Ti++,f=":"+f+"r"+x.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},TP={readContext:fr,useCallback:Kx,useContext:fr,useEffect:Oh,useImperativeHandle:jg,useInsertionEffect:jx,useLayoutEffect:Xx,useMemo:kM,useReducer:tu,useRef:tp,useState:function(){return tu(fa)},useDebugValue:Xg,useDeferredValue:function(c){var f=tu(fa),x=f[0],E=f[1];return Oh(function(){var b=hi.transition;hi.transition={};try{E(c)}finally{hi.transition=b}},[c]),x},useTransition:function(){var c=tu(fa)[0],f=Ri().memoizedState;return[c,f]},useMutableSource:Gx,useSyncExternalStore:Hx,useId:HM,unstable_isNewReconciler:!1},Zx={readContext:fr,useCallback:Kx,useContext:fr,useEffect:Oh,useImperativeHandle:jg,useInsertionEffect:jx,useLayoutEffect:Xx,useMemo:kM,useReducer:ep,useRef:tp,useState:function(){return ep(fa)},useDebugValue:Xg,useDeferredValue:function(c){var f=ep(fa),x=f[0],E=f[1];return Oh(function(){var b=hi.transition;hi.transition={};try{E(c)}finally{hi.transition=b}},[c]),x},useTransition:function(){var c=ep(fa)[0],f=Ri().memoizedState;return[c,f]},useMutableSource:Gx,useSyncExternalStore:Hx,useId:HM,unstable_isNewReconciler:!1};function rp(c,f){try{var x="",E=f;do x+=So(E),E=E.return;while(E);var b=x}catch(P){b=`
Error generating stack: `+P.message+`
`+P.stack}return{value:c,source:f,stack:b}}function $x(c,f){try{console.error(f.value)}catch(x){setTimeout(function(){throw x})}}var VM=typeof WeakMap=="function"?WeakMap:Map;function e_(c,f,x){x=wi(-1,x),x.tag=3,x.payload={element:null};var E=f.value;return x.callback=function(){Wh||(Wh=!0,va=E),$x(c,f)},x}function t_(c,f,x){x=wi(-1,x),x.tag=3;var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var b=f.value;x.payload=function(){return E(b)},x.callback=function(){$x(c,f)}}var P=c.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(x.callback=function(){$x(c,f),typeof E!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this));var k=f.stack;this.componentDidCatch(f.value,{componentStack:k!==null?k:""})}),x}function n_(c,f,x){var E=c.pingCache;if(E===null){E=c.pingCache=new VM;var b=new Set;E.set(f,b)}else b=E.get(f),b===void 0&&(b=new Set,E.set(f,b));b.has(x)||(b.add(x),c=JM.bind(null,c,f,x),f.then(c,c))}function r_(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function bo(c,f,x,E,b){return c.mode&1?(c.flags|=65536,c.lanes=b,c):(c===f?c.flags|=65536:(c.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(f=wi(-1,1),f.tag=2,Mo(x,f))),x.lanes|=1),c)}function Co(c){c.flags|=4}function kh(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var el,pc,su,ip;if(me)el=function(c,f){for(var x=f.child;x!==null;){if(x.tag===5||x.tag===6)re(c,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},pc=function(){},su=function(c,f,x,E,b){if(c=c.memoizedProps,c!==E){var P=f.stateNode,k=Qs(Ci.current);x=ae(P,x,c,E,b,k),(f.updateQueue=x)&&Co(f)}},ip=function(c,f,x,E){x!==E&&Co(f)};else if(pe){el=function(c,f,x,E){for(var b=f.child;b!==null;){if(b.tag===5){var P=b.stateNode;x&&E&&(P=kt(P,b.type,b.memoizedProps,b)),re(c,P)}else if(b.tag===6)P=b.stateNode,x&&E&&(P=Pn(P,b.memoizedProps,b)),re(c,P);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)P=b.child,P!==null&&(P.return=b),el(c,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};var Gh=function(c,f,x,E){for(var b=f.child;b!==null;){if(b.tag===5){var P=b.stateNode;x&&E&&(P=kt(P,b.type,b.memoizedProps,b)),Rt(c,P)}else if(b.tag===6)P=b.stateNode,x&&E&&(P=Pn(P,b.memoizedProps,b)),Rt(c,P);else if(b.tag!==4){if(b.tag===22&&b.memoizedState!==null)P=b.child,P!==null&&(P.return=b),Gh(c,b,!0,!0);else if(b.child!==null){b.child.return=b,b=b.child;continue}}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};pc=function(c,f){var x=f.stateNode;if(!kh(c,f)){c=x.containerInfo;var E=Lt(c);Gh(E,f,!1,!1),x.pendingChildren=E,Co(f),ln(c,E)}},su=function(c,f,x,E,b){var P=c.stateNode,k=c.memoizedProps;if((c=kh(c,f))&&k===E)f.stateNode=P;else{var $=f.stateNode,fe=Qs(Ci.current),Ce=null;k!==E&&(Ce=ae($,x,k,E,b,fe)),c&&Ce===null?f.stateNode=P:(P=ke(P,Ce,x,k,E,f,c,$),Y(P,x,E,b,fe)&&Co(f),f.stateNode=P,c?Co(f):el(P,f,!1,!1))}},ip=function(c,f,x,E){x!==E?(c=Qs(Xi.current),x=Qs(Ci.current),f.stateNode=ve(E,c,x,f),Co(f)):f.stateNode=c.stateNode}}else pc=function(){},su=function(){},ip=function(){};function Br(c,f){if(!Bn)switch(c.tailMode){case"hidden":f=c.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c.tail=null:x.sibling=null;break;case"collapsed":x=c.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:E.sibling=null}}function Pi(c){var f=c.alternate!==null&&c.alternate.child===c.child,x=0,E=0;if(f)for(var b=c.child;b!==null;)x|=b.lanes|b.childLanes,E|=b.subtreeFlags&14680064,E|=b.flags&14680064,b.return=c,b=b.sibling;else for(b=c.child;b!==null;)x|=b.lanes|b.childLanes,E|=b.subtreeFlags,E|=b.flags,b.return=c,b=b.sibling;return c.subtreeFlags|=E,c.childLanes=x,f}function RP(c,f,x){var E=f.pendingProps;switch(Wi(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(f),null;case 1:return tr(f.type)&&Nf(),Pi(f),null;case 3:return E=f.stateNode,eu(),Pt(Ot),Pt(on),Fh(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(c===null||c.child===null)&&(ha(f)?Co(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,qs!==null&&(x_(qs),qs=null))),pc(c,f),Pi(f),null;case 5:Vn(f),x=Qs(Xi.current);var b=f.type;if(c!==null&&f.stateNode!=null)su(c,f,b,E,x),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!E){if(f.stateNode===null)throw Error(o(166));return Pi(f),null}if(c=Qs(Ci.current),ha(f)){if(!le)throw Error(o(175));c=de(f.stateNode,f.type,f.memoizedProps,x,c,f,!ji),f.updateQueue=c,c!==null&&Co(f)}else{var P=q(b,E,x,c,f);el(P,f,!1,!1),f.stateNode=P,Y(P,b,E,x,c)&&Co(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Pi(f),null;case 6:if(c&&f.stateNode!=null)ip(c,f,c.memoizedProps,E);else{if(typeof E!="string"&&f.stateNode===null)throw Error(o(166));if(c=Qs(Xi.current),x=Qs(Ci.current),ha(f)){if(!le)throw Error(o(176));if(c=f.stateNode,E=f.memoizedProps,(x=Fe(c,E,f,!ji))&&(b=zn,b!==null))switch(P=(b.mode&1)!==0,b.tag){case 3:yn(b.stateNode.containerInfo,c,E,P);break;case 5:Ln(b.type,b.memoizedProps,b.stateNode,c,E,P)}x&&Co(f)}else f.stateNode=ve(E,c,x,f)}return Pi(f),null;case 13:if(Pt(Hn),E=f.memoizedState,Bn&&cn!==null&&f.mode&1&&!(f.flags&128)){for(c=cn;c;)c=N(c);return uc(),f.flags|=98560,f}if(E!==null&&E.dehydrated!==null){if(E=ha(f),c===null){if(!E)throw Error(o(318));if(!le)throw Error(o(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Ye(c,f)}else uc(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Pi(f),null}return qs!==null&&(x_(qs),qs=null),f.flags&128?(f.lanes=x,f):(E=E!==null,x=!1,c===null?ha(f):x=c.memoizedState!==null,E&&!x&&(f.child.flags|=8192,f.mode&1&&(c===null||Hn.current&1?ir===0&&(ir=3):Xh())),f.updateQueue!==null&&(f.flags|=4),Pi(f),null);case 4:return eu(),pc(c,f),c===null&&Re(f.stateNode.containerInfo),Pi(f),null;case 10:return zf(f.type._context),Pi(f),null;case 17:return tr(f.type)&&Nf(),Pi(f),null;case 19:if(Pt(Hn),b=f.memoizedState,b===null)return Pi(f),null;if(E=(f.flags&128)!==0,P=b.rendering,P===null)if(E)Br(b,!1);else{if(ir!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(P=Dh(c),P!==null){for(f.flags|=128,Br(b,!1),c=P.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=x,E=f.child;E!==null;)x=E,b=c,x.flags&=14680066,P=x.alternate,P===null?(x.childLanes=0,x.lanes=b,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=P.childLanes,x.lanes=P.lanes,x.child=P.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=P.memoizedProps,x.memoizedState=P.memoizedState,x.updateQueue=P.updateQueue,x.type=P.type,b=P.dependencies,x.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),E=E.sibling;return St(Hn,Hn.current&1|2),f.child}c=c.sibling}b.tail!==null&&Pr()>gc&&(f.flags|=128,E=!0,Br(b,!1),f.lanes=4194304)}else{if(!E)if(c=Dh(P),c!==null){if(f.flags|=128,E=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),Br(b,!0),b.tail===null&&b.tailMode==="hidden"&&!P.alternate&&!Bn)return Pi(f),null}else 2*Pr()-b.renderingStartTime>gc&&x!==1073741824&&(f.flags|=128,E=!0,Br(b,!1),f.lanes=4194304);b.isBackwards?(P.sibling=f.child,f.child=P):(c=b.last,c!==null?c.sibling=P:f.child=P,b.last=P)}return b.tail!==null?(f=b.tail,b.rendering=f,b.tail=f.sibling,b.renderingStartTime=Pr(),f.sibling=null,c=Hn.current,St(Hn,E?c&1|2:c&1),f):(Pi(f),null);case 22:case 23:return sl(),E=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==E&&(f.flags|=8192),E&&f.mode&1?$r&1073741824&&(Pi(f),me&&f.subtreeFlags&6&&(f.flags|=8192)):Pi(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var Rs=a.ReactCurrentOwner,Dn=!1;function Bi(c,f,x,E){f.child=c===null?Ih(f,null,x,E):$c(f,c.child,x,E)}function i_(c,f,x,E,b){x=x.render;var P=f.ref;return li(f,b),E=$f(c,f,x,E,P,b),x=wo(),c!==null&&!Dn?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~b,tl(c,f,b)):(Bn&&x&&Jf(f),f.flags|=1,Bi(c,f,E,b),f.child)}function s_(c,f,x,E,b){if(c===null){var P=x.type;return typeof P=="function"&&!E_(P)&&P.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(f.tag=15,f.type=P,o_(c,f,P,E,b)):(c=ya(x.type,null,E,f,f.mode,b),c.ref=f.ref,c.return=f,f.child=c)}if(P=c.child,!(c.lanes&b)){var k=P.memoizedProps;if(x=x.compare,x=x!==null?x:Dg,x(k,E)&&c.ref===f.ref)return tl(c,f,b)}return f.flags|=1,c=Lo(P,E),c.ref=f.ref,c.return=f,f.child=c}function o_(c,f,x,E,b){if(c!==null&&Dg(c.memoizedProps,E)&&c.ref===f.ref)if(Dn=!1,(c.lanes&b)!==0)c.flags&131072&&(Dn=!0);else return f.lanes=c.lanes,tl(c,f,b);return Yg(c,f,x,E,b)}function a_(c,f,x){var E=f.pendingProps,b=E.children,P=c!==null?c.memoizedState:null;if(E.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},St(jn,$r),$r|=x;else if(x&1073741824)f.memoizedState={baseLanes:0,cachePool:null},E=P!==null?P.baseLanes:x,St(jn,$r),$r|=E;else return c=P!==null?P.baseLanes|x:x,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,St(jn,$r),$r|=c,null;else P!==null?(E=P.baseLanes|x,f.memoizedState=null):E=x,St(jn,$r),$r|=E;return Bi(c,f,b,x),f.child}function Kg(c,f){var x=f.ref;(c===null&&x!==null||c!==null&&c.ref!==x)&&(f.flags|=512,f.flags|=2097152)}function Yg(c,f,x,E,b){var P=tr(x)?Rr:on.current;return P=er(f,P),li(f,b),x=$f(c,f,x,E,P,b),E=wo(),c!==null&&!Dn?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~b,tl(c,f,b)):(Bn&&E&&Jf(f),f.flags|=1,Bi(c,f,x,b),f.child)}function qg(c,f,x,E,b){if(tr(x)){var P=!0;Of(f)}else P=!1;if(li(f,b),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),Ux(f,x,E),lc(f,x,E,b),E=!0;else if(c===null){var k=f.stateNode,$=f.memoizedProps;k.props=$;var fe=k.context,Ce=x.contextType;typeof Ce=="object"&&Ce!==null?Ce=fr(Ce):(Ce=tr(x)?Rr:on.current,Ce=er(f,Ce));var He=x.getDerivedStateFromProps,Ze=typeof He=="function"||typeof k.getSnapshotBeforeUpdate=="function";Ze||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||($!==E||fe!==Ce)&&kg(f,k,E,Ce),ca=!1;var ot=f.memoizedState;k.state=ot,jf(f,E,k,b),fe=f.memoizedState,$!==E||ot!==fe||Ot.current||ca?(typeof He=="function"&&(Bh(f,x,He,E),fe=f.memoizedState),($=ca||Nx(f,x,$,E,ot,fe,Ce))?(Ze||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(f.flags|=4194308)):(typeof k.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=E,f.memoizedState=fe),k.props=E,k.state=fe,k.context=Ce,E=$):(typeof k.componentDidMount=="function"&&(f.flags|=4194308),E=!1)}else{k=f.stateNode,ua(c,f),$=f.memoizedProps,Ce=f.type===f.elementType?$:as(f.type,$),k.props=Ce,Ze=f.pendingProps,ot=k.context,fe=x.contextType,typeof fe=="object"&&fe!==null?fe=fr(fe):(fe=tr(x)?Rr:on.current,fe=er(f,fe));var rt=x.getDerivedStateFromProps;(He=typeof rt=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||($!==Ze||ot!==fe)&&kg(f,k,E,fe),ca=!1,ot=f.memoizedState,k.state=ot,jf(f,E,k,b);var At=f.memoizedState;$!==Ze||ot!==At||Ot.current||ca?(typeof rt=="function"&&(Bh(f,x,rt,E),At=f.memoizedState),(Ce=ca||Nx(f,x,Ce,E,ot,At,fe)||!1)?(He||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(E,At,fe),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(E,At,fe)),typeof k.componentDidUpdate=="function"&&(f.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof k.componentDidUpdate!="function"||$===c.memoizedProps&&ot===c.memoizedState||(f.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||$===c.memoizedProps&&ot===c.memoizedState||(f.flags|=1024),f.memoizedProps=E,f.memoizedState=At),k.props=E,k.state=At,k.context=fe,E=Ce):(typeof k.componentDidUpdate!="function"||$===c.memoizedProps&&ot===c.memoizedState||(f.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||$===c.memoizedProps&&ot===c.memoizedState||(f.flags|=1024),E=!1)}return Qg(c,f,x,E,P,b)}function Qg(c,f,x,E,b,P){Kg(c,f);var k=(f.flags&128)!==0;if(!E&&!k)return b&&Ks(f,x,!1),tl(c,f,P);E=f.stateNode,Rs.current=f;var $=k&&typeof x.getDerivedStateFromError!="function"?null:E.render();return f.flags|=1,c!==null&&k?(f.child=$c(f,c.child,null,P),f.child=$c(f,null,$,P)):Bi(c,f,$,P),f.memoizedState=E.state,b&&Ks(f,x,!0),f.child}function l_(c){var f=c.stateNode;f.pendingContext?Rx(c,f.pendingContext,f.pendingContext!==f.context):f.context&&Rx(c,f.context,!1),dc(c,f.containerInfo)}function sp(c,f,x,E,b){return uc(),Qc(b),f.flags|=256,Bi(c,f,x,E),f.child}var ou={dehydrated:null,treeContext:null,retryLane:0};function op(c){return{baseLanes:c,cachePool:null}}function Zg(c,f,x){var E=f.pendingProps,b=Hn.current,P=!1,k=(f.flags&128)!==0,$;if(($=k)||($=c!==null&&c.memoizedState===null?!1:(b&2)!==0),$?(P=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(b|=1),St(Hn,b&1),c===null)return zg(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?Xc(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(b=E.children,c=E.fallback,P?(E=f.mode,P=f.child,b={mode:"hidden",children:b},!(E&1)&&P!==null?(P.childLanes=0,P.pendingProps=b):P=Jh(b,E,0,null),c=xa(c,E,x,null),P.return=f,c.return=f,P.sibling=c,f.child=P,f.child.memoizedState=op(x),f.memoizedState=ou,c):$g(f,b));if(b=c.memoizedState,b!==null){if($=b.dehydrated,$!==null){if(k)return f.flags&256?(f.flags&=-257,lp(c,f,x,Error(o(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(P=E.fallback,b=f.mode,E=Jh({mode:"visible",children:E.children},b,0,null),P=xa(P,b,x,null),P.flags|=2,E.return=f,P.return=f,E.sibling=P,f.child=E,f.mode&1&&$c(f,c.child,null,x),f.child.memoizedState=op(x),f.memoizedState=ou,P);if(!(f.mode&1))f=lp(c,f,x,null);else if(Xc($))f=lp(c,f,x,Error(o(419)));else if(E=(x&c.childLanes)!==0,Dn||E){if(E=Yt,E!==null){switch(x&-x){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}E=P&(E.suspendedLanes|x)?0:P,E!==0&&E!==b.retryLane&&(b.retryLane=E,Ki(c,E,-1))}Xh(),f=lp(c,f,x,Error(o(421)))}else rc($)?(f.flags|=128,f.child=c.child,f=IP.bind(null,c),qa($,f),f=null):(x=b.treeContext,le&&(cn=Z($),zn=f,Bn=!0,qs=null,ji=!1,x!==null&&(nr[qr++]=ui,nr[qr++]=Vi,nr[qr++]=zi,ui=x.id,Vi=x.overflow,zi=f)),f=$g(f,f.pendingProps.children),f.flags|=4096);return f}return P?(E=ap(c,f,E.children,E.fallback,x),P=f.child,b=c.child.memoizedState,P.memoizedState=b===null?op(x):{baseLanes:b.baseLanes|x,cachePool:null},P.childLanes=c.childLanes&~x,f.memoizedState=ou,E):(x=c_(c,f,E.children,x),f.memoizedState=null,x)}return P?(E=ap(c,f,E.children,E.fallback,x),P=f.child,b=c.child.memoizedState,P.memoizedState=b===null?op(x):{baseLanes:b.baseLanes|x,cachePool:null},P.childLanes=c.childLanes&~x,f.memoizedState=ou,E):(x=c_(c,f,E.children,x),f.memoizedState=null,x)}function $g(c,f){return f=Jh({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function c_(c,f,x,E){var b=c.child;return c=b.sibling,x=Lo(b,{mode:"visible",children:x}),!(f.mode&1)&&(x.lanes=E),x.return=f,x.sibling=null,c!==null&&(E=f.deletions,E===null?(f.deletions=[c],f.flags|=16):E.push(c)),f.child=x}function ap(c,f,x,E,b){var P=f.mode;c=c.child;var k=c.sibling,$={mode:"hidden",children:x};return!(P&1)&&f.child!==c?(x=f.child,x.childLanes=0,x.pendingProps=$,f.deletions=null):(x=Lo(c,$),x.subtreeFlags=c.subtreeFlags&14680064),k!==null?E=Lo(k,E):(E=xa(E,P,b,null),E.flags|=2),E.return=f,x.return=f,x.sibling=E,f.child=x,E}function lp(c,f,x,E){return E!==null&&Qc(E),$c(f,c.child,null,x),c=$g(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function e0(c,f,x){c.lanes|=f;var E=c.alternate;E!==null&&(E.lanes|=f),ac(c.return,f,x)}function t0(c,f,x,E,b){var P=c.memoizedState;P===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:b}:(P.isBackwards=f,P.rendering=null,P.renderingStartTime=0,P.last=E,P.tail=x,P.tailMode=b)}function pa(c,f,x){var E=f.pendingProps,b=E.revealOrder,P=E.tail;if(Bi(c,f,E.children,x),E=Hn.current,E&2)E=E&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&e0(c,x,f);else if(c.tag===19)e0(c,x,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}E&=1}if(St(Hn,E),!(f.mode&1))f.memoizedState=null;else switch(b){case"forwards":for(x=f.child,b=null;x!==null;)c=x.alternate,c!==null&&Dh(c)===null&&(b=x),x=x.sibling;x=b,x===null?(b=f.child,f.child=null):(b=x.sibling,x.sibling=null),t0(f,!1,b,x,P);break;case"backwards":for(x=null,b=f.child,f.child=null;b!==null;){if(c=b.alternate,c!==null&&Dh(c)===null){f.child=b;break}c=b.sibling,b.sibling=x,x=b,b=c}t0(f,!0,x,null,P);break;case"together":t0(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function tl(c,f,x){if(c!==null&&(f.dependencies=c.dependencies),nl|=f.lanes,!(x&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(o(153));if(f.child!==null){for(c=f.child,x=Lo(c,c.pendingProps),f.child=x,x.return=f;c.sibling!==null;)c=c.sibling,x=x.sibling=Lo(c,c.pendingProps),x.return=f;x.sibling=null}return f.child}function PP(c,f,x){switch(f.tag){case 3:l_(f),uc();break;case 5:Vg(f);break;case 1:tr(f.type)&&Of(f);break;case 4:dc(f,f.stateNode.containerInfo);break;case 10:Ng(f,f.type._context,f.memoizedProps.value);break;case 13:var E=f.memoizedState;if(E!==null)return E.dehydrated!==null?(St(Hn,Hn.current&1),f.flags|=128,null):x&f.child.childLanes?Zg(c,f,x):(St(Hn,Hn.current&1),c=tl(c,f,x),c!==null?c.sibling:null);St(Hn,Hn.current&1);break;case 19:if(E=(x&f.childLanes)!==0,c.flags&128){if(E)return pa(c,f,x);f.flags|=128}var b=f.memoizedState;if(b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),St(Hn,Hn.current),E)break;return null;case 22:case 23:return f.lanes=0,a_(c,f,x)}return tl(c,f,x)}function n0(c,f){switch(Wi(f),f.tag){case 1:return tr(f.type)&&Nf(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return eu(),Pt(Ot),Pt(on),Fh(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return Vn(f),null;case 13:if(Pt(Hn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(o(340));uc()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Pt(Hn),null;case 4:return eu(),null;case 10:return zf(f.type._context),null;case 22:case 23:return sl(),null;case 24:return null;default:return null}}var ma=!1,au=!1,dt=typeof WeakSet=="function"?WeakSet:Set,at=null;function cp(c,f){var x=c.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){ls(c,f,E)}else x.current=null}function r0(c,f,x){try{x()}catch(E){ls(c,f,E)}}var WM=!1;function lu(c,f){for(V(c.containerInfo),at=f;at!==null;)if(c=at,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,at=f;else for(;at!==null;){c=at;try{var x=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,b=x.memoizedState,P=c.stateNode,k=P.getSnapshotBeforeUpdate(c.elementType===c.type?E:as(c.type,E),b);P.__reactInternalSnapshotBeforeUpdate=k}break;case 3:me&&Pe(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch($){ls(c,c.return,$)}if(f=c.sibling,f!==null){f.return=c.return,at=f;break}at=c.return}return x=WM,WM=!1,x}function To(c,f,x){var E=f.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var b=E=E.next;do{if((b.tag&c)===c){var P=b.destroy;b.destroy=void 0,P!==void 0&&r0(f,x,P)}b=b.next}while(b!==E)}}function cu(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var x=f=f.next;do{if((x.tag&c)===c){var E=x.create;x.destroy=E()}x=x.next}while(x!==f)}}function i0(c){var f=c.ref;if(f!==null){var x=c.stateNode;switch(c.tag){case 5:c=te(x);break;default:c=x}typeof f=="function"?f(c):f.current=c}}function u_(c,f,x){if(sa&&typeof sa.onCommitFiberUnmount=="function")try{sa.onCommitFiberUnmount(Ts,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var E=c=c.next;do{var b=E,P=b.destroy;b=b.tag,P!==void 0&&(b&2||b&4)&&r0(f,x,P),E=E.next}while(E!==c)}break;case 1:if(cp(f,x),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(k){ls(f,x,k)}break;case 5:cp(f,x);break;case 4:me?a0(c,f,x):pe&&pe&&(f=f.stateNode.containerInfo,x=Lt(f),dr(f,x))}}function h_(c,f,x){for(var E=f;;)if(u_(c,E,x),E.child===null||me&&E.tag===4){if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function d_(c){var f=c.alternate;f!==null&&(c.alternate=null,d_(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Je(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function f_(c){return c.tag===5||c.tag===3||c.tag===4}function p_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||f_(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function s0(c){if(me){e:{for(var f=c.return;f!==null;){if(f_(f))break e;f=f.return}throw Error(o(160))}var x=f;switch(x.tag){case 5:f=x.stateNode,x.flags&32&&(wt(f),x.flags&=-33),x=p_(c),o0(c,x,f);break;case 3:case 4:f=x.stateNode.containerInfo,x=p_(c),up(c,x,f);break;default:throw Error(o(161))}}}function up(c,f,x){var E=c.tag;if(E===5||E===6)c=c.stateNode,f?Le(x,c,f):Be(x,c);else if(E!==4&&(c=c.child,c!==null))for(up(c,f,x),c=c.sibling;c!==null;)up(c,f,x),c=c.sibling}function o0(c,f,x){var E=c.tag;if(E===5||E===6)c=c.stateNode,f?je(x,c,f):Ke(x,c);else if(E!==4&&(c=c.child,c!==null))for(o0(c,f,x),c=c.sibling;c!==null;)o0(c,f,x),c=c.sibling}function a0(c,f,x){for(var E=f,b=!1,P,k;;){if(!b){b=E.return;e:for(;;){if(b===null)throw Error(o(160));switch(P=b.stateNode,b.tag){case 5:k=!1;break e;case 3:P=P.containerInfo,k=!0;break e;case 4:P=P.containerInfo,k=!0;break e}b=b.return}b=!0}if(E.tag===5||E.tag===6)h_(c,E,x),k?xt(P,E.stateNode):Oe(P,E.stateNode);else if(E.tag===18)k?ut(P,E.stateNode):ct(P,E.stateNode);else if(E.tag===4){if(E.child!==null){P=E.stateNode.containerInfo,k=!0,E.child.return=E,E=E.child;continue}}else if(u_(c,E,x),E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return,E.tag===4&&(b=!1)}E.sibling.return=E.return,E=E.sibling}}function Hh(c,f){if(me){switch(f.tag){case 0:case 11:case 14:case 15:To(3,f,f.return),cu(3,f),To(5,f,f.return);return;case 1:return;case 5:var x=f.stateNode;if(x!=null){var E=f.memoizedProps;c=c!==null?c.memoizedProps:E;var b=f.type,P=f.updateQueue;f.updateQueue=null,P!==null&&Ge(x,P,b,c,E,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));x=f.memoizedProps,he(f.stateNode,c!==null?c.memoizedProps:x,x);return;case 3:le&&c!==null&&c.memoizedState.isDehydrated&&st(f.stateNode.containerInfo);return;case 12:return;case 13:l0(f);return;case 19:l0(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:To(3,f,f.return),cu(3,f),To(5,f,f.return);return;case 12:return;case 13:l0(f);return;case 19:l0(f);return;case 3:le&&c!==null&&c.memoizedState.isDehydrated&&st(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(pe){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,dr(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function l0(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var x=c.stateNode;x===null&&(x=c.stateNode=new dt),f.forEach(function(E){var b=YM.bind(null,c,E);x.has(E)||(x.add(E),E.then(b,b))})}}function BP(c,f){for(at=f;at!==null;){f=at;var x=f.deletions;if(x!==null)for(var E=0;E<x.length;E++){var b=x[E];try{var P=c;me?a0(P,b,f):h_(P,b,f);var k=b.alternate;k!==null&&(k.return=null),b.return=null}catch(qe){ls(b,f,qe)}}if(x=f.child,f.subtreeFlags&12854&&x!==null)x.return=f,at=x;else for(;at!==null;){f=at;try{var $=f.flags;if($&32&&me&&wt(f.stateNode),$&512){var fe=f.alternate;if(fe!==null){var Ce=fe.ref;Ce!==null&&(typeof Ce=="function"?Ce(null):Ce.current=null)}}if($&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var He=f.alternate;(He===null||He.memoizedState===null)&&(pp=Pr())}break;case 22:var Ze=f.memoizedState!==null,ot=f.alternate,rt=ot!==null&&ot.memoizedState!==null;if(x=f,me){e:if(E=x,b=Ze,P=null,me)for(var At=E;;){if(At.tag===5){if(P===null){P=At;var Fn=At.stateNode;b?zt(Fn):ce(At.stateNode,At.memoizedProps)}}else if(At.tag===6){if(P===null){var Ee=At.stateNode;b?J(Ee):xe(Ee,At.memoizedProps)}}else if((At.tag!==22&&At.tag!==23||At.memoizedState===null||At===E)&&At.child!==null){At.child.return=At,At=At.child;continue}if(At===E)break;for(;At.sibling===null;){if(At.return===null||At.return===E)break e;P===At&&(P=null),At=At.return}P===At&&(P=null),At.sibling.return=At.return,At=At.sibling}}if(Ze&&!rt&&x.mode&1){at=x;for(var Q=x.child;Q!==null;){for(x=at=Q;at!==null;){E=at;var ee=E.child;switch(E.tag){case 0:case 11:case 14:case 15:To(4,E,E.return);break;case 1:cp(E,E.return);var ge=E.stateNode;if(typeof ge.componentWillUnmount=="function"){var Ie=E.return;try{ge.props=E.memoizedProps,ge.state=E.memoizedState,ge.componentWillUnmount()}catch(qe){ls(E,Ie,qe)}}break;case 5:cp(E,E.return);break;case 22:if(E.memoizedState!==null){v_(x);continue}}ee!==null?(ee.return=E,at=ee):v_(x)}Q=Q.sibling}}}switch($&4102){case 2:s0(f),f.flags&=-3;break;case 6:s0(f),f.flags&=-3,Hh(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Hh(f.alternate,f);break;case 4:Hh(f.alternate,f)}}catch(qe){ls(f,f.return,qe)}if(x=f.sibling,x!==null){x.return=f.return,at=x;break}at=f.return}}}function jM(c,f,x){at=c,m_(c)}function m_(c,f,x){for(var E=(c.mode&1)!==0;at!==null;){var b=at,P=b.child;if(b.tag===22&&E){var k=b.memoizedState!==null||ma;if(!k){var $=b.alternate,fe=$!==null&&$.memoizedState!==null||au;$=ma;var Ce=au;if(ma=k,(au=fe)&&!Ce)for(at=b;at!==null;)k=at,fe=k.child,k.tag===22&&k.memoizedState!==null?hp(b):fe!==null?(fe.return=k,at=fe):hp(b);for(;P!==null;)at=P,m_(P),P=P.sibling;at=b,ma=$,au=Ce}g_(c)}else b.subtreeFlags&8772&&P!==null?(P.return=b,at=P):g_(c)}}function g_(c){for(;at!==null;){var f=at;if(f.flags&8772){var x=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:au||cu(5,f);break;case 1:var E=f.stateNode;if(f.flags&4&&!au)if(x===null)E.componentDidMount();else{var b=f.elementType===f.type?x.memoizedProps:as(f.type,x.memoizedProps);E.componentDidUpdate(b,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var P=f.updateQueue;P!==null&&Fx(f,P,E);break;case 3:var k=f.updateQueue;if(k!==null){if(x=null,f.child!==null)switch(f.child.tag){case 5:x=te(f.child.stateNode);break;case 1:x=f.child.stateNode}Fx(f,k,x)}break;case 5:var $=f.stateNode;x===null&&f.flags&4&&Ue($,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(le&&f.memoizedState===null){var fe=f.alternate;if(fe!==null){var Ce=fe.memoizedState;if(Ce!==null){var He=Ce.dehydrated;He!==null&&_t(He)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}au||f.flags&512&&i0(f)}catch(Ze){ls(f,f.return,Ze)}}if(f===c){at=null;break}if(x=f.sibling,x!==null){x.return=f.return,at=x;break}at=f.return}}function v_(c){for(;at!==null;){var f=at;if(f===c){at=null;break}var x=f.sibling;if(x!==null){x.return=f.return,at=x;break}at=f.return}}function hp(c){for(;at!==null;){var f=at;try{switch(f.tag){case 0:case 11:case 15:var x=f.return;try{cu(4,f)}catch(fe){ls(f,x,fe)}break;case 1:var E=f.stateNode;if(typeof E.componentDidMount=="function"){var b=f.return;try{E.componentDidMount()}catch(fe){ls(f,b,fe)}}var P=f.return;try{i0(f)}catch(fe){ls(f,P,fe)}break;case 5:var k=f.return;try{i0(f)}catch(fe){ls(f,k,fe)}}}catch(fe){ls(f,f.return,fe)}if(f===c){at=null;break}var $=f.sibling;if($!==null){$.return=f.return,at=$;break}at=f.return}}var uu=0,hu=1,du=2,fu=3,mc=4;if(typeof Symbol=="function"&&Symbol.for){var pu=Symbol.for;uu=pu("selector.component"),hu=pu("selector.has_pseudo_class"),du=pu("selector.role"),fu=pu("selector.test_id"),mc=pu("selector.text")}function dp(c){var f=Ae(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(c=It(c),c===null)throw Error(o(362));return c.stateNode.current}function fp(c,f){switch(f.$$typeof){case uu:if(c.type===f.value)return!0;break;case hu:e:{f=f.value,c=[c,0];for(var x=0;x<c.length;){var E=c[x++],b=c[x++],P=f[b];if(E.tag!==5||!oe(E)){for(;P!=null&&fp(E,P);)b++,P=f[b];if(b===f.length){f=!0;break e}else for(E=E.child;E!==null;)c.push(E,b),E=E.sibling}}f=!1}return f;case du:if(c.tag===5&&_e(c.stateNode,f.value))return!0;break;case mc:if((c.tag===5||c.tag===6)&&(c=F(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case fu:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function c0(c){switch(c.$$typeof){case uu:return"<"+(L(c.value)||"Unknown")+">";case hu:return":has("+(c0(c)||"")+")";case du:return'[role="'+c.value+'"]';case mc:return'"'+c.value+'"';case fu:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function u0(c,f){var x=[];c=[c,0];for(var E=0;E<c.length;){var b=c[E++],P=c[E++],k=f[P];if(b.tag!==5||!oe(b)){for(;k!=null&&fp(b,k);)P++,k=f[P];if(P===f.length)x.push(b);else for(b=b.child;b!==null;)c.push(b,P),b=b.sibling}}return x}function y_(c,f){if(!nt)throw Error(o(363));c=dp(c),c=u0(c,f),f=[],c=Array.from(c);for(var x=0;x<c.length;){var E=c[x++];if(E.tag===5)oe(E)||f.push(E.stateNode);else for(E=E.child;E!==null;)c.push(E),E=E.sibling}return f}var h0=Math.ceil,zh=a.ReactCurrentDispatcher,rr=a.ReactCurrentOwner,bt=a.ReactCurrentBatchConfig,Bt=0,Yt=null,un=null,Rn=0,$r=0,jn=Vt(0),ir=0,ga=null,nl=0,Vh=0,mu=0,ei=null,Li=null,pp=0,gc=1/0;function rl(){gc=Pr()+500}var Wh=!1,va=null,Ro=null,Po=!1,Bo=null,vc=0,gu=0,jh=null,vu=-1,ti=0;function cr(){return Bt&6?Pr():vu!==-1?vu:vu=Pr()}function zr(c){return c.mode&1?Bt&2&&Rn!==0?Rn&-Rn:Ig.transition!==null?(ti===0&&(c=Jc,Jc<<=1,!(Jc&4194240)&&(Jc=64),ti=c),ti):(c=xn,c!==0?c:De()):1}function Ki(c,f,x){if(50<gu)throw gu=0,jh=null,Error(o(185));var E=di(c,f);return E===null?null:(Gf(E,f,x),(!(Bt&2)||E!==Yt)&&(E===Yt&&(!(Bt&2)&&(Vh|=f),ir===4&&il(E,Rn)),Yi(E,x),f===1&&Bt===0&&!(c.mode&1)&&(rl(),Ph&&la())),E)}function di(c,f){c.lanes|=f;var x=c.alternate;for(x!==null&&(x.lanes|=f),x=c,c=c.return;c!==null;)c.childLanes|=f,x=c.alternate,x!==null&&(x.childLanes|=f),x=c,c=c.return;return x.tag===3?x.stateNode:null}function Yi(c,f){var x=c.callbackNode;Px(c,f);var E=Tg(c,c===Yt?Rn:0);if(E===0)x!==null&&UM(x),c.callbackNode=null,c.callbackPriority=0;else if(f=E&-E,c.callbackPriority!==f){if(x!=null&&UM(x),f===1)c.tag===0?aa(__.bind(null,c)):OM(__.bind(null,c)),Qe?Ve(function(){Bt===0&&la()}):Pg(Lx,la),x=null;else{switch(Rg(E)){case 1:x=Lx;break;case 4:x=Ix;break;case 16:x=Dx;break;case 536870912:x=Bg;break;default:x=Dx}x=qM(x,d0.bind(null,c))}c.callbackPriority=f,c.callbackNode=x}}function d0(c,f){if(vu=-1,ti=0,Bt&6)throw Error(o(327));var x=c.callbackNode;if(Ac()&&c.callbackNode!==x)return null;var E=Tg(c,c===Yt?Rn:0);if(E===0)return null;if(E&30||E&c.expiredLanes||f)f=m0(c,E);else{f=E;var b=Bt;Bt|=2;var P=p0();(Yt!==c||Rn!==f)&&(rl(),xc(c,f));do try{XM();break}catch($){A_(c,$)}while(1);Fg(),zh.current=P,Bt=b,un!==null?f=0:(Yt=null,Rn=0,f=ir)}if(f!==0){if(f===2&&(b=kf(c),b!==0&&(E=b,f=mp(c,b))),f===1)throw x=ga,xc(c,0),il(c,E),Yi(c,Pr()),x;if(f===6)il(c,E);else{if(b=c.current.alternate,!(E&30)&&!yc(b)&&(f=m0(c,E),f===2&&(P=kf(c),P!==0&&(E=P,f=mp(c,P))),f===1))throw x=ga,xc(c,0),il(c,E),Yi(c,Pr()),x;switch(c.finishedWork=b,c.finishedLanes=E,f){case 0:case 1:throw Error(o(345));case 2:yu(c,Li);break;case 3:if(il(c,E),(E&130023424)===E&&(f=pp+500-Pr(),10<f)){if(Tg(c,0)!==0)break;if(b=c.suspendedLanes,(b&E)!==E){cr(),c.pingedLanes|=c.suspendedLanes&b;break}c.timeoutHandle=W(yu.bind(null,c,Li),f);break}yu(c,Li);break;case 4:if(il(c,E),(E&4194240)===E)break;for(f=c.eventTimes,b=-1;0<E;){var k=31-Ao(E);P=1<<k,k=f[k],k>b&&(b=k),E&=~P}if(E=b,E=Pr()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*h0(E/1960))-E,10<E){c.timeoutHandle=W(yu.bind(null,c,Li),E);break}yu(c,Li);break;case 5:yu(c,Li);break;default:throw Error(o(329))}}}return Yi(c,Pr()),c.callbackNode===x?d0.bind(null,c):null}function mp(c,f){var x=ei;return c.current.memoizedState.isDehydrated&&(xc(c,f).flags|=256),c=m0(c,f),c!==2&&(f=Li,Li=x,f!==null&&x_(f)),c}function x_(c){Li===null?Li=c:Li.push.apply(Li,c)}function yc(c){for(var f=c;;){if(f.flags&16384){var x=f.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var E=0;E<x.length;E++){var b=x[E],P=b.getSnapshot;b=b.value;try{if(!Yr(P(),b))return!1}catch{return!1}}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function il(c,f){for(f&=~mu,f&=~Vh,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var x=31-Ao(f),E=1<<x;c[x]=-1,f&=~E}}function __(c){if(Bt&6)throw Error(o(327));Ac();var f=Tg(c,0);if(!(f&1))return Yi(c,Pr()),null;var x=m0(c,f);if(c.tag!==0&&x===2){var E=kf(c);E!==0&&(f=E,x=mp(c,E))}if(x===1)throw x=ga,xc(c,0),il(c,f),Yi(c,Pr()),x;if(x===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,yu(c,Li),Yi(c,Pr()),null}function f0(c){Bo!==null&&Bo.tag===0&&!(Bt&6)&&Ac();var f=Bt;Bt|=1;var x=bt.transition,E=xn;try{if(bt.transition=null,xn=1,c)return c()}finally{xn=E,bt.transition=x,Bt=f,!(Bt&6)&&la()}}function sl(){$r=jn.current,Pt(jn)}function xc(c,f){c.finishedWork=null,c.finishedLanes=0;var x=c.timeoutHandle;if(x!==Ne&&(c.timeoutHandle=Ne,Xe(x)),un!==null)for(x=un.return;x!==null;){var E=x;switch(Wi(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Nf();break;case 3:eu(),Pt(Ot),Pt(on),Fh();break;case 5:Vn(E);break;case 4:eu();break;case 13:Pt(Hn);break;case 19:Pt(Hn);break;case 10:zf(E.type._context);break;case 22:case 23:sl()}x=x.return}if(Yt=c,un=c=Lo(c.current,null),Rn=$r=f,ir=0,ga=null,mu=Vh=nl=0,Li=ei=null,ci!==null){for(f=0;f<ci.length;f++)if(x=ci[f],E=x.interleaved,E!==null){x.interleaved=null;var b=E.next,P=x.pending;if(P!==null){var k=P.next;P.next=b,E.next=k}x.pending=E}ci=null}return c}function A_(c,f){do{var x=un;try{if(Fg(),Ji.current=Jg,fc){for(var E=an.memoizedState;E!==null;){var b=E.queue;b!==null&&(b.pending=null),E=E.next}fc=!1}if(In=0,pr=_n=an=null,$a=!1,Qf=0,rr.current=null,x===null||x.return===null){ir=1,ga=f,un=null;break}e:{var P=c,k=x.return,$=x,fe=f;if(f=Rn,$.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Ce=fe,He=$,Ze=He.tag;if(!(He.mode&1)&&(Ze===0||Ze===11||Ze===15)){var ot=He.alternate;ot?(He.updateQueue=ot.updateQueue,He.memoizedState=ot.memoizedState,He.lanes=ot.lanes):(He.updateQueue=null,He.memoizedState=null)}var rt=r_(k);if(rt!==null){rt.flags&=-257,bo(rt,k,$,P,f),rt.mode&1&&n_(P,Ce,f),f=rt,fe=Ce;var At=f.updateQueue;if(At===null){var Fn=new Set;Fn.add(fe),f.updateQueue=Fn}else At.add(fe);break e}else{if(!(f&1)){n_(P,Ce,f),Xh();break e}fe=Error(o(426))}}else if(Bn&&$.mode&1){var Ee=r_(k);if(Ee!==null){!(Ee.flags&65536)&&(Ee.flags|=256),bo(Ee,k,$,P,f),Qc(fe);break e}}P=fe,ir!==4&&(ir=2),ei===null?ei=[P]:ei.push(P),fe=rp(fe,$),$=k;do{switch($.tag){case 3:$.flags|=65536,f&=-f,$.lanes|=f;var Q=e_($,fe,f);Wf($,Q);break e;case 1:P=fe;var ee=$.type,ge=$.stateNode;if(!($.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Ro===null||!Ro.has(ge)))){$.flags|=65536,f&=-f,$.lanes|=f;var Ie=t_($,P,f);Wf($,Ie);break e}}$=$.return}while($!==null)}_c(x)}catch(qe){f=qe,un===x&&x!==null&&(un=x=x.return);continue}break}while(1)}function p0(){var c=zh.current;return zh.current=Jg,c===null?Jg:c}function Xh(){(ir===0||ir===3||ir===2)&&(ir=4),Yt===null||!(nl&268435455)&&!(Vh&268435455)||il(Yt,Rn)}function m0(c,f){var x=Bt;Bt|=2;var E=p0();Yt===c&&Rn===f||xc(c,f);do try{LP();break}catch(b){A_(c,b)}while(1);if(Fg(),Bt=x,zh.current=E,un!==null)throw Error(o(261));return Yt=null,Rn=0,ir}function LP(){for(;un!==null;)S_(un)}function XM(){for(;un!==null&&!EP();)S_(un)}function S_(c){var f=M_(c.alternate,c,$r);c.memoizedProps=c.pendingProps,f===null?_c(c):un=f,rr.current=null}function _c(c){var f=c;do{var x=f.alternate;if(c=f.return,f.flags&32768){if(x=n0(x,f),x!==null){x.flags&=32767,un=x;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{ir=6,un=null;return}}else if(x=RP(x,f,$r),x!==null){un=x;return}if(f=f.sibling,f!==null){un=f;return}un=f=c}while(f!==null);ir===0&&(ir=5)}function yu(c,f){var x=xn,E=bt.transition;try{bt.transition=null,xn=1,xu(c,f,x)}finally{bt.transition=E,xn=x}return null}function xu(c,f,x){do Ac();while(Bo!==null);if(Bt&6)throw Error(o(327));var E=c.finishedWork,b=c.finishedLanes;if(E===null)return null;if(c.finishedWork=null,c.finishedLanes=0,E===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var P=E.lanes|E.childLanes;if(Bx(c,P),c===Yt&&(un=Yt=null,Rn=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||Po||(Po=!0,qM(Dx,function(){return Ac(),null})),P=(E.flags&15990)!==0,E.subtreeFlags&15990||P){P=bt.transition,bt.transition=null;var k=xn;xn=1;var $=Bt;Bt|=4,rr.current=null,lu(c,E),BP(c,E),G(c.containerInfo),c.current=E,jM(E),Kr(),Bt=$,xn=k,bt.transition=P}else c.current=E;if(Po&&(Po=!1,Bo=c,vc=b),P=c.pendingLanes,P===0&&(Ro=null),wP(E.stateNode),Yi(c,Pr()),f!==null)for(x=c.onRecoverableError,E=0;E<f.length;E++)x(f[E]);if(Wh)throw Wh=!1,c=va,va=null,c;return vc&1&&c.tag!==0&&Ac(),P=c.pendingLanes,P&1?c===jh?gu++:(gu=0,jh=c):gu=0,la(),null}function Ac(){if(Bo!==null){var c=Rg(vc),f=bt.transition,x=xn;try{if(bt.transition=null,xn=16>c?16:c,Bo===null)var E=!1;else{if(c=Bo,Bo=null,vc=0,Bt&6)throw Error(o(331));var b=Bt;for(Bt|=4,at=c.current;at!==null;){var P=at,k=P.child;if(at.flags&16){var $=P.deletions;if($!==null){for(var fe=0;fe<$.length;fe++){var Ce=$[fe];for(at=Ce;at!==null;){var He=at;switch(He.tag){case 0:case 11:case 15:To(8,He,P)}var Ze=He.child;if(Ze!==null)Ze.return=He,at=Ze;else for(;at!==null;){He=at;var ot=He.sibling,rt=He.return;if(d_(He),He===Ce){at=null;break}if(ot!==null){ot.return=rt,at=ot;break}at=rt}}}var At=P.alternate;if(At!==null){var Fn=At.child;if(Fn!==null){At.child=null;do{var Ee=Fn.sibling;Fn.sibling=null,Fn=Ee}while(Fn!==null)}}at=P}}if(P.subtreeFlags&2064&&k!==null)k.return=P,at=k;else e:for(;at!==null;){if(P=at,P.flags&2048)switch(P.tag){case 0:case 11:case 15:To(9,P,P.return)}var Q=P.sibling;if(Q!==null){Q.return=P.return,at=Q;break e}at=P.return}}var ee=c.current;for(at=ee;at!==null;){k=at;var ge=k.child;if(k.subtreeFlags&2064&&ge!==null)ge.return=k,at=ge;else e:for(k=ee;at!==null;){if($=at,$.flags&2048)try{switch($.tag){case 0:case 11:case 15:cu(9,$)}}catch(qe){ls($,$.return,qe)}if($===k){at=null;break e}var Ie=$.sibling;if(Ie!==null){Ie.return=$.return,at=Ie;break e}at=$.return}}if(Bt=b,la(),sa&&typeof sa.onPostCommitFiberRoot=="function")try{sa.onPostCommitFiberRoot(Ts,c)}catch{}E=!0}return E}finally{xn=x,bt.transition=f}}return!1}function qi(c,f,x){f=rp(x,f),f=e_(c,f,1),Mo(c,f),f=cr(),c=di(c,1),c!==null&&(Gf(c,1,f),Yi(c,f))}function ls(c,f,x){if(c.tag===3)qi(c,c,x);else for(;f!==null;){if(f.tag===3){qi(f,c,x);break}else if(f.tag===1){var E=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ro===null||!Ro.has(E))){c=rp(x,c),c=t_(f,c,1),Mo(f,c),c=cr(),f=di(f,1),f!==null&&(Gf(f,1,c),Yi(f,c));break}}f=f.return}}function JM(c,f,x){var E=c.pingCache;E!==null&&E.delete(f),f=cr(),c.pingedLanes|=c.suspendedLanes&x,Yt===c&&(Rn&x)===x&&(ir===4||ir===3&&(Rn&130023424)===Rn&&500>Pr()-pp?xc(c,0):mu|=x),Yi(c,f)}function KM(c,f){f===0&&(c.mode&1?(f=ic,ic<<=1,!(ic&130023424)&&(ic=4194304)):f=1);var x=cr();c=di(c,f),c!==null&&(Gf(c,f,x),Yi(c,x))}function IP(c){var f=c.memoizedState,x=0;f!==null&&(x=f.retryLane),KM(c,x)}function YM(c,f){var x=0;switch(c.tag){case 13:var E=c.stateNode,b=c.memoizedState;b!==null&&(x=b.retryLane);break;case 19:E=c.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(f),KM(c,x)}var M_;M_=function(c,f,x){if(c!==null)if(c.memoizedProps!==f.pendingProps||Ot.current)Dn=!0;else{if(!(c.lanes&x)&&!(f.flags&128))return Dn=!1,PP(c,f,x);Dn=!!(c.flags&131072)}else Dn=!1,Bn&&f.flags&1048576&&Gg(f,Hi,f.index);switch(f.lanes=0,f.tag){case 2:var E=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var b=er(f,on.current);li(f,x),b=$f(null,f,E,c,b,x);var P=wo();return f.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,tr(E)?(P=!0,Of(f)):P=!1,f.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,Ug(f),b.updater=Xf,f.stateNode=b,b._reactInternals=f,lc(f,E,c,x),f=Qg(null,f,E,!0,P,x)):(f.tag=0,Bn&&P&&Jf(f),Bi(null,f,b,x),f=f.child),f;case 16:E=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,b=E._init,E=b(E._payload),f.type=E,b=f.tag=Sc(E),c=as(E,c),b){case 0:f=Yg(null,f,E,c,x);break e;case 1:f=qg(null,f,E,c,x);break e;case 11:f=i_(null,f,E,c,x);break e;case 14:f=s_(null,f,E,as(E.type,c),x);break e}throw Error(o(306,E,""))}return f;case 0:return E=f.type,b=f.pendingProps,b=f.elementType===E?b:as(E,b),Yg(c,f,E,b,x);case 1:return E=f.type,b=f.pendingProps,b=f.elementType===E?b:as(E,b),qg(c,f,E,b,x);case 3:e:{if(l_(f),c===null)throw Error(o(387));E=f.pendingProps,P=f.memoizedState,b=P.element,ua(c,f),jf(f,E,null,x);var k=f.memoizedState;if(E=k.element,le&&P.isDehydrated)if(P={element:E,isDehydrated:!1,cache:k.cache,transitions:k.transitions},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){b=Error(o(423)),f=sp(c,f,E,x,b);break e}else if(E!==b){b=Error(o(424)),f=sp(c,f,E,x,b);break e}else for(le&&(cn=ue(f.stateNode.containerInfo),zn=f,Bn=!0,qs=null,ji=!1),x=Ih(f,null,E,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(uc(),E===b){f=tl(c,f,x);break e}Bi(c,f,E,x)}f=f.child}return f;case 5:return Vg(f),c===null&&zg(f),E=f.type,b=f.pendingProps,P=c!==null?c.memoizedProps:null,k=b.children,Se(E,b)?k=null:P!==null&&Se(E,P)&&(f.flags|=32),Kg(c,f),Bi(c,f,k,x),f.child;case 6:return c===null&&zg(f),null;case 13:return Zg(c,f,x);case 4:return dc(f,f.stateNode.containerInfo),E=f.pendingProps,c===null?f.child=$c(f,null,E,x):Bi(c,f,E,x),f.child;case 11:return E=f.type,b=f.pendingProps,b=f.elementType===E?b:as(E,b),i_(c,f,E,b,x);case 7:return Bi(c,f,f.pendingProps,x),f.child;case 8:return Bi(c,f,f.pendingProps.children,x),f.child;case 12:return Bi(c,f,f.pendingProps.children,x),f.child;case 10:e:{if(E=f.type._context,b=f.pendingProps,P=f.memoizedProps,k=b.value,Ng(f,E,k),P!==null)if(Yr(P.value,k)){if(P.children===b.children&&!Ot.current){f=tl(c,f,x);break e}}else for(P=f.child,P!==null&&(P.return=f);P!==null;){var $=P.dependencies;if($!==null){k=P.child;for(var fe=$.firstContext;fe!==null;){if(fe.context===E){if(P.tag===1){fe=wi(-1,x&-x),fe.tag=2;var Ce=P.updateQueue;if(Ce!==null){Ce=Ce.shared;var He=Ce.pending;He===null?fe.next=fe:(fe.next=He.next,He.next=fe),Ce.pending=fe}}P.lanes|=x,fe=P.alternate,fe!==null&&(fe.lanes|=x),ac(P.return,x,f),$.lanes|=x;break}fe=fe.next}}else if(P.tag===10)k=P.type===f.type?null:P.child;else if(P.tag===18){if(k=P.return,k===null)throw Error(o(341));k.lanes|=x,$=k.alternate,$!==null&&($.lanes|=x),ac(k,x,f),k=P.sibling}else k=P.child;if(k!==null)k.return=P;else for(k=P;k!==null;){if(k===f){k=null;break}if(P=k.sibling,P!==null){P.return=k.return,k=P;break}k=k.return}P=k}Bi(c,f,b.children,x),f=f.child}return f;case 9:return b=f.type,E=f.pendingProps.children,li(f,x),b=fr(b),E=E(b),f.flags|=1,Bi(c,f,E,x),f.child;case 14:return E=f.type,b=as(E,f.pendingProps),b=as(E.type,b),s_(c,f,E,b,x);case 15:return o_(c,f,f.type,f.pendingProps,x);case 17:return E=f.type,b=f.pendingProps,b=f.elementType===E?b:as(E,b),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,tr(E)?(c=!0,Of(f)):c=!1,li(f,x),Ux(f,E,b),lc(f,E,b,x),Qg(null,f,E,!0,c,x);case 19:return pa(c,f,x);case 22:return a_(c,f,x)}throw Error(o(156,f.tag))};function qM(c,f){return Pg(c,f)}function Zs(c,f,x,E){this.tag=c,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(c,f,x,E){return new Zs(c,f,x,E)}function E_(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Sc(c){if(typeof c=="function")return E_(c)?1:0;if(c!=null){if(c=c.$$typeof,c===S)return 11;if(c===_)return 14}return 2}function Lo(c,f){var x=c.alternate;return x===null?(x=cs(c.tag,f,c.key,c.mode),x.elementType=c.elementType,x.type=c.type,x.stateNode=c.stateNode,x.alternate=c,c.alternate=x):(x.pendingProps=f,x.type=c.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=c.flags&14680064,x.childLanes=c.childLanes,x.lanes=c.lanes,x.child=c.child,x.memoizedProps=c.memoizedProps,x.memoizedState=c.memoizedState,x.updateQueue=c.updateQueue,f=c.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=c.sibling,x.index=c.index,x.ref=c.ref,x}function ya(c,f,x,E,b,P){var k=2;if(E=c,typeof c=="function")E_(c)&&(k=1);else if(typeof c=="string")k=5;else e:switch(c){case h:return xa(x.children,b,P,f);case d:k=8,b|=8;break;case p:return c=cs(12,x,f,b|2),c.elementType=p,c.lanes=P,c;case M:return c=cs(13,x,f,b),c.elementType=M,c.lanes=P,c;case g:return c=cs(19,x,f,b),c.elementType=g,c.lanes=P,c;case w:return Jh(x,b,P,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:k=10;break e;case v:k=9;break e;case S:k=11;break e;case _:k=14;break e;case A:k=16,E=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return f=cs(k,x,f,b),f.elementType=c,f.type=E,f.lanes=P,f}function xa(c,f,x,E){return c=cs(7,c,E,f),c.lanes=x,c}function Jh(c,f,x,E){return c=cs(22,c,E,f),c.elementType=w,c.lanes=x,c.stateNode={},c}function gp(c,f,x){return c=cs(6,c,null,f),c.lanes=x,c}function w_(c,f,x){return f=cs(4,c.children!==null?c.children:[],c.key,f),f.lanes=x,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function QM(c,f,x,E,b){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ne,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kc(0),this.expirationTimes=Kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kc(0),this.identifierPrefix=E,this.onRecoverableError=b,le&&(this.mutableSourceEagerHydrationData=null)}function b_(c,f,x,E,b,P,k,$,fe){return c=new QM(c,f,x,$,fe),f===1?(f=1,P===!0&&(f|=8)):f=0,P=cs(3,null,null,f),c.current=P,P.stateNode=c,P.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null},Ug(P),c}function C_(c){if(!c)return Kt;c=c._reactInternals;e:{if(T(c)!==c||c.tag!==1)throw Error(o(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(tr(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(c.tag===1){var x=c.type;if(tr(x))return Uf(c,x,f)}return f}function T_(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=K(f),c===null?null:c.stateNode}function g0(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var x=c.retryLane;c.retryLane=x!==0&&x<f?x:f}}function R_(c,f){g0(c,f),(c=c.alternate)&&g0(c,f)}function DP(c){return c=K(c),c===null?null:c.stateNode}function y(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=cr();Ki(c,134217728,f),R_(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=cr(),x=zr(c);Ki(c,x,f),R_(c,x)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var x=sc(f.pendingLanes);x!==0&&(vn(f,x|1),Yi(f,Pr()),!(Bt&6)&&(rl(),la()))}break;case 13:var E=cr();f0(function(){return Ki(c,1,E)}),R_(c,1)}},t.batchedUpdates=function(c,f){var x=Bt;Bt|=1;try{return c(f)}finally{Bt=x,Bt===0&&(rl(),Ph&&la())}},t.createComponentSelector=function(c){return{$$typeof:uu,value:c}},t.createContainer=function(c,f,x,E,b,P,k){return b_(c,f,!1,null,x,E,b,P,k)},t.createHasPseudoClassSelector=function(c){return{$$typeof:hu,value:c}},t.createHydrationContainer=function(c,f,x,E,b,P,k,$,fe){return c=b_(x,E,!0,c,b,P,k,$,fe),c.context=C_(null),x=c.current,E=cr(),b=zr(x),P=wi(E,b),P.callback=f??null,Mo(x,P),c.current.lanes=b,Gf(c,b,E),Yi(c,E),c},t.createPortal=function(c,f,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:E==null?null:""+E,children:c,containerInfo:f,implementation:x}},t.createRoleSelector=function(c){return{$$typeof:du,value:c}},t.createTestNameSelector=function(c){return{$$typeof:fu,value:c}},t.createTextSelector=function(c){return{$$typeof:mc,value:c}},t.deferredUpdates=function(c){var f=xn,x=bt.transition;try{return bt.transition=null,xn=16,c()}finally{xn=f,bt.transition=x}},t.discreteUpdates=function(c,f,x,E,b){var P=xn,k=bt.transition;try{return bt.transition=null,xn=1,c(f,x,E,b)}finally{xn=P,bt.transition=k,Bt===0&&rl()}},t.findAllNodes=y_,t.findBoundingRects=function(c,f){if(!nt)throw Error(o(363));f=y_(c,f),c=[];for(var x=0;x<f.length;x++)c.push(U(f[x]));for(f=c.length-1;0<f;f--){x=c[f];for(var E=x.x,b=E+x.width,P=x.y,k=P+x.height,$=f-1;0<=$;$--)if(f!==$){var fe=c[$],Ce=fe.x,He=Ce+fe.width,Ze=fe.y,ot=Ze+fe.height;if(E>=Ce&&P>=Ze&&b<=He&&k<=ot){c.splice(f,1);break}else if(E!==Ce||x.width!==fe.width||ot<P||Ze>k){if(!(P!==Ze||x.height!==fe.height||He<E||Ce>b)){Ce>E&&(fe.width+=Ce-E,fe.x=E),He<b&&(fe.width=b-Ce),c.splice(f,1);break}}else{Ze>P&&(fe.height+=Ze-P,fe.y=P),ot<k&&(fe.height=k-Ze),c.splice(f,1);break}}}return c},t.findHostInstance=T_,t.findHostInstanceWithNoPortals=function(c){return c=H(c),c=c!==null?z(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return T_(c)},t.flushControlled=function(c){var f=Bt;Bt|=1;var x=bt.transition,E=xn;try{bt.transition=null,xn=1,c()}finally{xn=E,bt.transition=x,Bt=f,Bt===0&&(rl(),la())}},t.flushPassiveEffects=Ac,t.flushSync=f0,t.focusWithin=function(c,f){if(!nt)throw Error(o(363));for(c=dp(c),f=u0(c,f),f=Array.from(f),c=0;c<f.length;){var x=f[c++];if(!oe(x)){if(x.tag===5&&Me(x.stateNode))return!0;for(x=x.child;x!==null;)f.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return xn},t.getFindAllNodesFailureDescription=function(c,f){if(!nt)throw Error(o(363));var x=0,E=[];c=[dp(c),0];for(var b=0;b<c.length;){var P=c[b++],k=c[b++],$=f[k];if((P.tag!==5||!oe(P))&&(fp(P,$)&&(E.push(c0($)),k++,k>x&&(x=k)),k<f.length))for(P=P.child;P!==null;)c.push(P,k),P=P.sibling}if(x<f.length){for(c=[];x<f.length;x++)c.push(c0(f[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return te(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:DP,findFiberByHostInstance:c.findFiberByHostInstance||y,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Ts=f.inject(c),sa=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,x,E){if(!nt)throw Error(o(363));c=y_(c,f);var b=Te(c,x,E).disconnect;return{disconnect:function(){b()}}},t.registerMutableSourceForHydration=function(c,f){var x=f._getVersion;x=x(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,x]:c.mutableSourceEagerHydrationData.push(f,x)},t.runWithPriority=function(c,f){var x=xn;try{return xn=c,f()}finally{xn=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,x,E){var b=f.current,P=cr(),k=zr(b);return x=C_(x),f.context===null?f.context=x:f.pendingContext=x,f=wi(P,k),f.payload={element:c},E=E===void 0?null:E,E!==null&&(f.callback=E),Mo(b,f),c=Ki(b,k,P),c!==null&&Vf(c,b,k),k},t};Tee.exports=vRe;var yRe=Tee.exports;const xRe=vO(yRe),sG={},_Re=n=>void Object.assign(sG,n);function ARe(n,e){function t(h,{args:d=[],attach:p,...m},v){let S=`${h[0].toUpperCase()}${h.slice(1)}`,M;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;M=mv(g,{type:h,root:v,attach:p,primitive:!0})}else{const g=sG[S];if(!g)throw new Error(`R3F: ${S} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");M=mv(new g(...d),{type:h,root:v,attach:p,memoizedProps:{args:d}})}return M.__r3f.attach===void 0&&(M.isBufferGeometry?M.__r3f.attach="geometry":M.isMaterial&&(M.__r3f.attach="material")),S!=="inject"&&g2(M,m),M}function r(h,d){let p=!1;if(d){var m,v;(m=d.__r3f)!=null&&m.attach?m2(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(v=h.__r3f)==null||v.objects.push(d),d.__r3f||mv(d,{}),d.__r3f.parent=h,_3(d),gv(d)}}function i(h,d,p){let m=!1;if(d){var v,S;if((v=d.__r3f)!=null&&v.attach)m2(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:d});const M=h.children.filter(_=>_!==d),g=M.indexOf(p);h.children=[...M.slice(0,g),d,...M.slice(g)],m=!0}m||(S=h.__r3f)==null||S.objects.push(d),d.__r3f||mv(d,{}),d.__r3f.parent=h,_3(d),gv(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,v,S;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(w=>w!==d)),(v=d.__r3f)!=null&&v.attach)U8(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var M;h.remove(d),(M=d.__r3f)!=null&&M.root&&PRe(mC(d),d)}const _=(S=d.__r3f)==null?void 0:S.primitive,A=!_&&(p===void 0?d.dispose!==null:p);if(!_){var g;s((g=d.__r3f)==null?void 0:g.objects,d,A),s(d.children,d,A)}if(delete d.__r3f,A&&d.dispose&&d.type!=="Scene"){const w=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?y3.unstable_scheduleCallback(y3.unstable_IdlePriority,w):w()}gv(h)}}function a(h,d,p,m){var v;const S=(v=h.__r3f)==null?void 0:v.parent;if(!S)return;const M=t(d,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&r(M,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>r(M,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(S,h),M.parent&&(M.__r3f.autoRemovedBeforeAppend=!0),r(S,M),M.raycast&&M.__r3f.eventCount&&mC(M).getState().internal.interaction.push(M),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=M,g.ref&&(typeof g.ref=="function"?g.ref(M):g.ref.current=M))})}const l=()=>{};return{reconciler:xRe({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,r(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&i(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,p,m){var v;if(((v=h==null?void 0:h.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:M=[],children:g,..._}=m,{args:A=[],children:w,...C}=p;if(!Array.isArray(M))throw new Error("R3F: the args prop must be an array!");if(M.some((L,I)=>L!==A[I]))return[!0];const R=Uee(h,_,C,!0);return R.changes.length?[!1,R]:null}},commitUpdate(h,[d,p],m,v,S,M){d?a(h,m,S,M):g2(h,p)},commitMount(h,d,p,m){var v;const S=(v=h.__r3f)!=null?v:{};h.raycast&&S.handlers&&S.eventCount&&mC(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>mv(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&U8(m,h,p),h.isObject3D&&(h.visible=!1),gv(h)},unhideInstance(h,d){var p;const{attach:m,parent:v}=(p=h.__r3f)!=null?p:{};m&&v&&m2(v,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),gv(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():ty.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Jn.fun(performance.now)?performance.now:Jn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Jn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Jn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:g2}}var I8,D8;const p2=n=>"colorSpace"in n||"outputColorSpace"in n,Bee=()=>{var n;return(n=sG.ColorManagement)!=null?n:null},Lee=n=>n&&n.isOrthographicCamera,SRe=n=>n&&n.hasOwnProperty("current"),RM=typeof window<"u"&&((I8=window.document)!=null&&I8.createElement||((D8=window.navigator)==null?void 0:D8.product)==="ReactNative")?be.useLayoutEffect:be.useEffect;function Iee(n){const e=be.useRef(n);return RM(()=>void(e.current=n),[n]),e}function MRe({set:n}){return RM(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class Dee extends be.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Dee.getDerivedStateFromError=()=>({error:!0});const Fee="__default",F8=new Map,ERe=n=>n&&!!n.memoized&&!!n.changes;function Nee(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const y1=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function mC(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Jn={obj:n=>n===Object(n)&&!Jn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Jn.str(n)||Jn.num(n)||Jn.boo(n))return n===e;const s=Jn.obj(n);if(s&&r==="reference")return n===e;const o=Jn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Jn.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Jn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function wRe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function bRe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function mv(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function x3(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const N8=/-\d+$/;function m2(n,e,t){if(Jn.str(t)){if(N8.test(t)){const s=t.replace(N8,""),{target:o,key:a}=x3(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=x3(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function U8(n,e,t){var r,i;if(Jn.str(t)){const{target:s,key:o}=x3(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function Uee(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){const h=n.__r3f,d=Object.entries(i),p=[];if(u){const v=Object.keys(l);for(let S=0;S<v.length;S++)i.hasOwnProperty(v[S])||d.unshift([v[S],Fee+"remove"])}d.forEach(([v,S])=>{var M;if((M=n.__r3f)!=null&&M.primitive&&v==="object"||Jn.equ(S,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,S,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,S,!1,g]);for(const _ in i){const A=i[_];_.startsWith(`${v}-`)&&p.push([_,A,!1,_.split("-")])}});const m={...i};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const CRe=typeof process<"u"&&!1;function g2(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=ERe(e)?e:Uee(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,v,S,M]=a[p];if(p2(n)){const w="srgb",C="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?w:C):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?w:C)}let g=n,_=g[m];if(M.length&&(_=M.reduce((A,w)=>A[w],n),!(_&&_.set))){const[A,...w]=M.reverse();g=w.reverse().reduce((C,R)=>C[R],n),m=A}if(v===Fee+"remove")if(g.constructor){let A=F8.get(g.constructor);A||(A=new g.constructor,F8.set(g.constructor,A)),v=A[m]}else v=0;if(S&&r)v?r.handlers[m]=v:delete r.handlers[m],r.eventCount=Object.keys(r.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof Um)){if(Array.isArray(v))_.fromArray?_.fromArray(v):_.set(...v);else if(_.copy&&v&&v.constructor&&(CRe?_.constructor.name===v.constructor.name:_.constructor===v.constructor))_.copy(v);else if(v!==void 0){var u;const A=(u=_)==null?void 0:u.isColor;!A&&_.setScalar?_.setScalar(v):_ instanceof Um&&v instanceof Um?_.mask=v.mask:_.set(v),!Bee()&&s&&!s.linear&&A&&_.convertSRGBToLinear()}}else{var h;if(g[m]=v,(h=g[m])!=null&&h.isTexture&&g[m].format===so&&g[m].type===Ah&&s){const A=g[m];p2(A)&&p2(s.gl)?A.colorSpace=s.gl.outputColorSpace:A.encoding=s.gl.outputEncoding}}gv(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const p=mC(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),r.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&_3(n),n}function gv(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function _3(n){n.onUpdate==null||n.onUpdate(n)}function TRe(n,e){n.manual||(Lee(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function gb(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function RRe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ty.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ty.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ty.ContinuousEventPriority;default:return ty.DefaultEventPriority}}function Oee(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function PRe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{Oee(t.capturedMap,e,r,i)})}function BRe(n){function e(l){const{internal:u}=n.getState(),h=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function r(l,u){const h=n.getState(),d=new Set,p=[],m=u?u(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const _=y1(m[g]);_&&(_.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function v(g){const _=y1(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var A;_.events.compute==null||_.events.compute(l,_,(A=_.previousRoot)==null?void 0:A.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let S=m.flatMap(v).sort((g,_)=>{const A=y1(g.object),w=y1(_.object);return!A||!w?g.distance-_.distance:w.events.priority-A.events.priority||g.distance-_.distance}).filter(g=>{const _=gb(g);return d.has(_)?!1:(d.add(_),!0)});h.events.filter&&(S=h.events.filter(S,h));for(const g of S){let _=g.object;for(;_;){var M;(M=_.__r3f)!=null&&M.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())d.has(gb(g.intersection))||p.push(g.intersection);return p}function i(l,u,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const S=y1(v.object)||p,{raycaster:M,pointer:g,camera:_,internal:A}=S,w=new ie(g.x,g.y,0).unproject(_),C=B=>{var H,K;return(H=(K=A.capturedMap.get(B))==null?void 0:K.has(v.eventObject))!=null?H:!1},R=B=>{const H={intersection:v,target:u.target};A.capturedMap.has(B)?A.capturedMap.get(B).set(v.eventObject,H):A.capturedMap.set(B,new Map([[v.eventObject,H]])),u.target.setPointerCapture(B)},L=B=>{const H=A.capturedMap.get(B);H&&Oee(A.capturedMap,v.eventObject,H,B)};let I={};for(let B in u){let H=u[B];typeof H!="function"&&(I[B]=H)}let T={...v,...I,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:w,ray:M.ray,camera:_,stopPropagation(){const B="pointerId"in u&&A.capturedMap.get(u.pointerId);if((!B||B.has(v.eventObject))&&(T.stopped=m.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(H=>H.eventObject===v.eventObject))){const H=l.slice(0,l.indexOf(v));s([...H,v])}},target:{hasPointerCapture:C,setPointerCapture:R,releasePointerCapture:L},currentTarget:{hasPointerCapture:C,setPointerCapture:R,releasePointerCapture:L},nativeEvent:u};if(d(T),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(gb(h)),p!=null&&p.eventCount){const v={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,u){for(let h=0;h<u.length;h++){const d=u[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",M=r(h,m?t:void 0),g=v?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=M.map(A=>A.eventObject)),v&&!M.length&&g<=2&&(o(h,p.interaction),d&&d(h)),m&&s(M);function _(A){const w=A.eventObject,C=w.__r3f,R=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(m){if(R.onPointerOver||R.onPointerEnter||R.onPointerOut||R.onPointerLeave){const L=gb(A),I=p.hovered.get(L);I?I.stopped&&A.stopPropagation():(p.hovered.set(L,A),R.onPointerOver==null||R.onPointerOver(A),R.onPointerEnter==null||R.onPointerEnter(A))}R.onPointerMove==null||R.onPointerMove(A)}else{const L=R[l];L?(!v||p.initialHits.includes(w))&&(o(h,p.interaction.filter(I=>!p.initialHits.includes(I))),L(A)):v&&p.initialHits.includes(w)&&o(h,p.interaction.filter(I=>!p.initialHits.includes(I)))}}i(M,h,g,_)}}return{handlePointer:a}}const kee=n=>!!(n!=null&&n.render),Gee=be.createContext(null),LRe=(n,e)=>{const t=dRe((a,l)=>{const u=new ie,h=new ie,d=new ie;function p(g=l().camera,_=h,A=l().size){const{width:w,height:C,top:R,left:L}=A,I=w/C;_.isVector3?d.copy(_):d.set(..._);const T=g.getWorldPosition(u).distanceTo(d);if(Lee(g))return{width:w/g.zoom,height:C/g.zoom,top:R,left:L,factor:1,distance:T,aspect:I};{const B=g.fov*Math.PI/180,H=2*Math.tan(B/2)*T,K=H*(w/C);return{width:K,height:H,top:R,left:L,factor:w/K,distance:T,aspect:I}}}let m;const v=g=>a(_=>({performance:{..._.performance,current:g}})),S=new ze;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,_)=>e(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new tG,pointer:S,mouse:S,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,A,w,C)=>{const R=l().camera,L={width:g,height:_,top:w||0,left:C||0,updateStyle:A};a(I=>({size:L,viewport:{...I.viewport,...p(R,h,L)}}))},setDpr:g=>a(_=>{const A=Nee(g);return{viewport:{..._.viewport,dpr:A,initialDpr:_.viewport.initialDpr||A}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:be.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,A)=>{const w=l().internal;return w.priority=w.priority+(_>0?1:0),w.subscribers.push({ref:g,priority:_,store:A}),w.subscribers=w.subscribers.sort((C,R)=>C.priority-R.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(_>0?1:0),C.subscribers=C.subscribers.filter(R=>R.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:d}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==s){var p;i=l,s=u.dpr,TRe(a,l),h.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let vb,IRe=new Set,DRe=new Set,FRe=new Set;function v2(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function x1(n,e){switch(n){case"before":return v2(IRe,e);case"after":return v2(DRe,e);case"tail":return v2(FRe,e)}}let y2,x2;function _2(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),y2=e.internal.subscribers,vb=0;vb<y2.length;vb++)x2=y2[vb],x2.ref.current(x2.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function NRe(n){let e=!1,t=!1,r,i,s;function o(u){i=requestAnimationFrame(o),e=!0,r=0,x1("before",u),t=!0;for(const d of n.values()){var h;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(r+=_2(u,s))}if(t=!1,x1("after",u),r===0)return x1("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,h=1){var d;if(!u)return n.forEach(p=>a(p.store.getState(),h));(d=u.gl.xr)!=null&&d.isPresenting||!u.internal.active||u.frameloop==="never"||(h>1?u.internal.frames=Math.min(60,u.internal.frames+h):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,h=!0,d,p){if(h&&x1("before",u),d)_2(u,d,p);else for(const m of n.values())_2(u,m.store.getState());h&&x1("after",u)}return{loop:o,invalidate:a,advance:l}}function Hee(){const n=be.useContext(Gee);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function URe(n=t=>t,e){return Hee()(n,e)}function ORe(n,e=0){const t=Hee(),r=t.getState().internal.subscribe,i=Iee(n);return RM(()=>r(i,e,t),[e,r,t]),null}const O8=new WeakMap;function zee(n,e){return function(t,...r){let i=O8.get(t);return i||(i=new t,O8.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,wRe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function PM(n,e,t,r){const i=Array.isArray(e)?e:[e],s=pRe(zee(t,r),[n,...i],{equal:Jn.equ});return Array.isArray(e)?s:s[0]}PM.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return mRe(zee(t),[n,...r])};PM.clear=function(n,e){const t=Array.isArray(e)?e:[e];return gRe([n,...t])};const rx=new Map,{invalidate:k8,advance:G8}=NRe(rx),{reconciler:BT,applyProps:hv}=ARe(rx,RRe),dv={objects:"shallow",strict:!1},kRe=(n,e)=>{const t=typeof n=="function"?n(e):n;return kee(t)?t:new Pk({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function GRe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function HRe(n){const e=rx.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||LRe(k8,G8),o=t||BT.createContainer(s,ty.ConcurrentRoot,null,!1,null,"",i,null);e||rx.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:d,size:p,scene:m,events:v,onCreated:S,shadows:M=!1,linear:g=!1,flat:_=!1,legacy:A=!1,orthographic:w=!1,frameloop:C="always",dpr:R=[1,2],performance:L,raycaster:I,camera:T,onPointerMissed:B}=h,H=s.getState(),K=H.gl;H.gl||H.set({gl:K=kRe(d,n)});let j=H.raycaster;j||H.set({raycaster:j=new Mee});const{params:z,...X}=I||{};if(Jn.equ(X,j,dv)||hv(j,{...X}),Jn.equ(z,j.params,dv)||hv(j,{params:{...j.params,...z}}),!H.camera||H.camera===u&&!Jn.equ(u,T,dv)){u=T;const G=T instanceof dM,q=G?T:w?new Ax(0,0,0,0,.1,1e3):new gi(75,0,.1,1e3);G||(q.position.z=5,T&&(hv(q,T),("aspect"in T||"left"in T||"right"in T||"bottom"in T||"top"in T)&&(q.manual=!0,q.updateProjectionMatrix())),!H.camera&&!(T!=null&&T.rotation)&&q.lookAt(0,0,0)),H.set({camera:q}),j.camera=q}if(!H.scene){let G;m!=null&&m.isScene?G=m:(G=new Bk,m&&hv(G,m)),H.set({scene:mv(G)})}if(!H.xr){var te;const G=(Y,ae)=>{const Se=s.getState();Se.frameloop!=="never"&&G8(Y,!0,Se,ae)},q=()=>{const Y=s.getState();Y.gl.xr.enabled=Y.gl.xr.isPresenting,Y.gl.xr.setAnimationLoop(Y.gl.xr.isPresenting?G:null),Y.gl.xr.isPresenting||k8(Y)},re={connect(){const Y=s.getState().gl;Y.xr.addEventListener("sessionstart",q),Y.xr.addEventListener("sessionend",q)},disconnect(){const Y=s.getState().gl;Y.xr.removeEventListener("sessionstart",q),Y.xr.removeEventListener("sessionend",q)}};typeof((te=K.xr)==null?void 0:te.addEventListener)=="function"&&re.connect(),H.set({xr:re})}if(K.shadowMap){const G=K.shadowMap.enabled,q=K.shadowMap.type;if(K.shadowMap.enabled=!!M,Jn.boo(M))K.shadowMap.type=fA;else if(Jn.str(M)){var O;const re={basic:PZ,percentage:YR,soft:fA,variance:yl};K.shadowMap.type=(O=re[M])!=null?O:fA}else Jn.obj(M)&&Object.assign(K.shadowMap,M);(G!==K.shadowMap.enabled||q!==K.shadowMap.type)&&(K.shadowMap.needsUpdate=!0)}const D=Bee();D&&("enabled"in D?D.enabled=!A:"legacyMode"in D&&(D.legacyMode=A)),l||hv(K,{outputEncoding:g?3e3:3001,toneMapping:_?Dl:mk}),H.legacy!==A&&H.set(()=>({legacy:A})),H.linear!==g&&H.set(()=>({linear:g})),H.flat!==_&&H.set(()=>({flat:_})),d&&!Jn.fun(d)&&!kee(d)&&!Jn.equ(d,K,dv)&&hv(K,d),v&&!H.events.handlers&&H.set({events:v(s)});const V=GRe(n,p);return Jn.equ(V,H.size,dv)||H.setSize(V.width,V.height,V.updateStyle,V.top,V.left),R&&H.viewport.dpr!==Nee(R)&&H.setDpr(R),H.frameloop!==C&&H.setFrameloop(C),H.onPointerMissed||H.set({onPointerMissed:B}),L&&!Jn.equ(L,H.performance,dv)&&H.set(G=>({performance:{...G.performance,...L}})),a=S,l=!0,this},render(h){return l||this.configure(),BT.updateContainer(gt.jsx(zRe,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){Vee(n)}}}function zRe({store:n,children:e,onCreated:t,rootElement:r}){return RM(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),gt.jsx(Gee.Provider,{value:n,children:e})}function Vee(n,e){const t=rx.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),BT.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),bRe(i),rx.delete(n),e&&e(n)}catch{}},500)})}}BT.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:be.version});const A2={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function VRe(n){const{handlePointer:e}=BRe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(A2).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=A2[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=A2[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function H8(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function WRe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=be.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=be.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,h=be.useRef(!1);be.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,p,m]=be.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:_,top:A,width:w,height:C,bottom:R,right:L,x:I,y:T}=a.current.element.getBoundingClientRect(),B={left:_,top:A,width:w,height:C,bottom:R,right:L,x:I,y:T};a.current.element instanceof HTMLElement&&r&&(B.height=a.current.element.offsetHeight,B.width=a.current.element.offsetWidth),Object.freeze(B),h.current&&!KRe(a.current.lastBounds,B)&&o(a.current.lastBounds=B)};return[g,u?H8(g,u):g,l?H8(g,l):g]},[o,r,l,u]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function S(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const M=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=Wee(g),S())};return XRe(m,!!e),jRe(p),be.useEffect(()=>{v(),S()},[e,m,p]),be.useEffect(()=>v,[]),[M,s,d]}function jRe(n){be.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function XRe(n,e){be.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Wee(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Wee(n.parentElement)]}const JRe=["x","y","top","bottom","left","right","width","height"],KRe=(n,e)=>JRe.every(t=>n[t]===e[t]);var YRe=Object.defineProperty,qRe=Object.defineProperties,QRe=Object.getOwnPropertyDescriptors,z8=Object.getOwnPropertySymbols,ZRe=Object.prototype.hasOwnProperty,$Re=Object.prototype.propertyIsEnumerable,V8=(n,e,t)=>e in n?YRe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,W8=(n,e)=>{for(var t in e||(e={}))ZRe.call(e,t)&&V8(n,t,e[t]);if(z8)for(var t of z8(e))$Re.call(e,t)&&V8(n,t,e[t]);return n},ePe=(n,e)=>qRe(n,QRe(e)),j8,X8;typeof window<"u"&&((j8=window.document)!=null&&j8.createElement||((X8=window.navigator)==null?void 0:X8.product)==="ReactNative")?be.useLayoutEffect:be.useEffect;function jee(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=jee(r,e,t);if(i)return i;r=e?null:r.sibling}}function Xee(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const J8=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=J8;return}return J8.apply(this,arguments)};const oG=Xee(be.createContext(null));class Jee extends be.Component{render(){return be.createElement(oG.Provider,{value:this._reactInternals},this.props.children)}}function tPe(){const n=be.useContext(oG);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=be.useId();return be.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=jee(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function nPe(){const n=tPe(),[e]=be.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==oG&&!e.has(i)&&e.set(i,be.useContext(Xee(i)))}t=t.return}return e}function rPe(){const n=nPe();return be.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>be.createElement(e,null,be.createElement(t.Provider,ePe(W8({},r),{value:n.get(t)}))),e=>be.createElement(Jee,W8({},e))),[n])}const iPe=be.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=VRe,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:S,performance:M,raycaster:g,camera:_,scene:A,onPointerMissed:w,onCreated:C,...R},L){be.useMemo(()=>_Re(cRe),[]);const I=rPe(),[T,B]=WRe({scroll:!0,debounce:{scroll:50,resize:0},...r}),H=be.useRef(null),K=be.useRef(null);be.useImperativeHandle(L,()=>H.current);const j=Iee(w),[z,X]=be.useState(!1),[te,O]=be.useState(!1);if(z)throw z;if(te)throw te;const D=be.useRef(null);RM(()=>{const G=H.current;B.width>0&&B.height>0&&G&&(D.current||(D.current=HRe(G)),D.current.configure({gl:s,events:o,shadows:u,linear:h,flat:d,legacy:p,orthographic:m,frameloop:v,dpr:S,performance:M,raycaster:g,camera:_,scene:A,size:B,onPointerMissed:(...q)=>j.current==null?void 0:j.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(a?SRe(a)?a.current:a:K.current),l&&q.setEvents({compute:(re,Y)=>{const ae=re[l+"X"],Se=re[l+"Y"];Y.pointer.set(ae/Y.size.width*2-1,-(Se/Y.size.height)*2+1),Y.raycaster.setFromCamera(Y.pointer,Y.camera)}}),C==null||C(q)}}),D.current.render(gt.jsx(I,{children:gt.jsx(Dee,{set:O,children:gt.jsx(be.Suspense,{fallback:gt.jsx(MRe,{set:X}),children:e??null})})})))}),be.useEffect(()=>{const G=H.current;if(G)return()=>Vee(G)},[]);const V=a?"none":"auto";return gt.jsx("div",{ref:K,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...i},...R,children:gt.jsx("div",{ref:T,style:{width:"100%",height:"100%"},children:gt.jsx("canvas",{ref:H,style:{display:"block"},children:t})})})}),sPe=be.forwardRef(function(e,t){return gt.jsx(Jee,{children:gt.jsx(iPe,{...e,ref:t})})}),K8=n=>{let e;const t=new Set,r=(u,h)=>{const d=typeof u=="function"?u(e):u;if(!Object.is(d,e)){const p=e;e=h??(typeof d!="object"||d===null)?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>l,subscribe:u=>(t.add(u),()=>t.delete(u))},l=e=n(r,i,a);return a},oPe=n=>n?K8(n):K8,aPe=n=>n;function lPe(n,e=aPe){const t=za.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return za.useDebugValue(t),t}const Y8=n=>{const e=oPe(n),t=r=>lPe(e,r);return Object.assign(t,e),t},cPe=n=>n?Y8(n):Y8;let _1=0;const uPe=cPe(n=>(ey.onStart=(e,t,r)=>{n({active:!0,item:e,loaded:t,total:r,progress:(t-_1)/(r-_1)*100})},ey.onLoad=()=>{n({active:!1})},ey.onError=e=>n(t=>({errors:[...t.errors,e]})),ey.onProgress=(e,t,r)=>{t===r&&(_1=r),n({active:!0,item:e,loaded:t,total:r,progress:(t-_1)/(r-_1)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),hPe=n=>`Loading ${n.toFixed(2)}%`;function dPe({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:r,dataInterpolation:i=hPe,initialState:s=o=>o}){const{active:o,progress:a}=uPe(),l=be.useRef(0),u=be.useRef(0),h=be.useRef(null),[d,p]=be.useState(s(o));be.useEffect(()=>{let v;return o!==d&&(v=setTimeout(()=>p(o),300)),()=>clearTimeout(v)},[d,o]);const m=be.useCallback(()=>{h.current&&(l.current+=(a-l.current)/2,(l.current>.95*a||a===100)&&(l.current=a),h.current.innerText=i(l.current),l.current<a&&(u.current=requestAnimationFrame(m)))},[i,a]);return be.useEffect(()=>(m(),()=>cancelAnimationFrame(u.current)),[m]),d?be.createElement("div",{style:{...yb.container,opacity:o?1:0,...n}},be.createElement("div",null,be.createElement("div",{style:{...yb.inner,...e}},be.createElement("div",{style:{...yb.bar,transform:`scaleX(${a/100})`,...t}}),be.createElement("span",{ref:h,style:{...yb.data,...r}})))):null}const yb={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}},fPe=(()=>parseInt(lM.replace(/\D+/g,"")))();function q8(n,e){if(e===y$)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===RT||e===xk){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===RT)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function LT(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Am="srgb",ah="srgb-linear",Q8=3001,pPe=3e3;class aG extends Js{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new xPe(t)}),this.register(function(t){return new _Pe(t)}),this.register(function(t){return new RPe(t)}),this.register(function(t){return new PPe(t)}),this.register(function(t){return new BPe(t)}),this.register(function(t){return new SPe(t)}),this.register(function(t){return new MPe(t)}),this.register(function(t){return new EPe(t)}),this.register(function(t){return new wPe(t)}),this.register(function(t){return new yPe(t)}),this.register(function(t){return new bPe(t)}),this.register(function(t){return new APe(t)}),this.register(function(t){return new TPe(t)}),this.register(function(t){return new CPe(t)}),this.register(function(t){return new gPe(t)}),this.register(function(t){return new LPe(t)}),this.register(function(t){return new IPe(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=$d.extractUrlBase(e);o=$d.resolveURL(u,this.path)}else o=$d.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new $o(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(LT(new Uint8Array(e.slice(0,4)))===Kee){try{o[pn.KHR_BINARY_GLTF]=new DPe(e)}catch(h){i&&i(h);return}s=JSON.parse(o[pn.KHR_BINARY_GLTF].content)}else s=JSON.parse(LT(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new JPe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(h){case pn.KHR_MATERIALS_UNLIT:o[h]=new vPe;break;case pn.KHR_DRACO_MESH_COMPRESSION:o[h]=new FPe(s,this.dracoLoader);break;case pn.KHR_TEXTURE_TRANSFORM:o[h]=new NPe;break;case pn.KHR_MESH_QUANTIZATION:o[h]=new UPe;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function mPe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const pn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class gPe{constructor(e){this.parser=e,this.name=pn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const h=new yt(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],ah);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new $k(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Zk(h),u.distance=d;break;case"spot":u=new Qk(h),u.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Uu(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class vPe{constructor(){this.name=pn.KHR_MATERIALS_UNLIT}getMaterialType(){return Wo}extendParams(e,t,r){const i=[];e.color=new yt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],ah),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,Am))}return Promise.all(i)}}class yPe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class xPe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ze(a,a)}return Promise.all(s)}}class _Pe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class APe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class SPe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new yt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],ah)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Am)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class MPe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class EPe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new yt().setRGB(a[0],a[1],a[2],ah),Promise.all(s)}}class wPe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class bPe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new yt().setRGB(a[0],a[1],a[2],ah),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,Am)),Promise.all(s)}}class CPe{constructor(e){this.parser=e,this.name=pn.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class TPe{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Ya}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class RPe{constructor(e){this.parser=e,this.name=pn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class PPe{constructor(e){this.parser=e,this.name=pn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class BPe{constructor(e){this.parser=e,this.name=pn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class LPe{constructor(e){this.name=pn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,h=i.count,d=i.byteStride,p=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,i.mode,i.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(m),h,d,p,i.mode,i.filter),m})})}else return null}}class IPe{constructor(e){this.name=pn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const u of i.primitives)if(u.mode!==Ra.TRIANGLES&&u.mode!==Ra.TRIANGLE_STRIP&&u.mode!==Ra.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(h=>(l[u]=h,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const h=u.pop(),d=h.isGroup?h.children:[h],p=u[0].count,m=[];for(const v of d){const S=new jt,M=new ie,g=new is,_=new ie(1,1,1),A=new Dk(v.geometry,v.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&M.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&_.fromBufferAttribute(l.SCALE,w),A.setMatrixAt(w,S.compose(M,g,_));for(const w in l)if(w==="_COLOR_0"){const C=l[w];A.instanceColor=new og(C.array,C.itemSize,C.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&v.geometry.setAttribute(w,l[w]);En.prototype.copy.call(A,v),this.parser.assignFinalMaterial(A),m.push(A)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const Kee="glTF",A1=12,Z8={JSON:1313821514,BIN:5130562};class DPe{constructor(e){this.name=pn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,A1);if(this.header={magic:LT(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Kee)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-A1,i=new DataView(e,A1);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===Z8.JSON){const l=new Uint8Array(e,A1+s,o);this.content=LT(l)}else if(a===Z8.BIN){const l=A1+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class FPe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=pn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const h in o){const d=A3[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=A3[h]||h.toLowerCase();if(o[h]!==void 0){const p=r.accessors[e.attributes[h]],m=by[p.componentType];u[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(d,p){i.decodeDracoFile(h,function(m){for(const v in m.attributes){const S=m.attributes[v],M=l[v];M!==void 0&&(S.normalized=M)}d(m)},a,u,ah,p)})})}}class NPe{constructor(){this.name=pn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class UPe{constructor(){this.name=pn.KHR_MESH_QUANTIZATION}}class Yee extends bx{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,h=i-t,d=(r-t)/h,p=d*d,m=p*d,v=e*u,S=v-u,M=-2*m+3*p,g=m-p,_=1-M,A=g-p+d;for(let w=0;w!==a;w++){const C=o[S+w+a],R=o[S+w+l]*h,L=o[v+w+a],I=o[v+w]*h;s[w]=_*C+A*R+M*L+g*I}return s}}const OPe=new is;class kPe extends Yee{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return OPe.fromArray(s).normalize().toArray(s),s}}const Ra={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},by={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$8={9728:Ur,9729:yr,9984:SS,9985:QR,9986:My,9987:Wc},e6={33071:es,33648:Qy,10497:vf},S2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},A3={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...fPe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ad={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},GPe={CUBICSPLINE:void 0,LINEAR:sg,STEP:$y},M2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function HPe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new TM({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Vc})),n.DefaultMaterial}function Fp(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function Uu(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function zPe(n,e,t){let r=!1,i=!1,s=!1;for(let u=0,h=e.length;u<h;u++){const d=e[u];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];if(r){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(i){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],d=u[1],p=u[2];return r&&(n.morphAttributes.position=h),i&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function VPe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function WPe(n){let e;const t=n.extensions&&n.extensions[pn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+E2(t.attributes):e=n.indices+":"+E2(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+E2(n.targets[r]);return e}function E2(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function S3(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function jPe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const XPe=new jt;class JPe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new mPe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new hee(this.options.manager):this.textureLoader=new yee(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new $o(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return Fp(s,a,i),Uu(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,h]of o.children.entries())s(h,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[pn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load($d.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=S2[i.type],a=by[i.componentType],l=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new Tn(u,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=S2[i.type],u=by[i.componentType],h=u.BYTES_PER_ELEMENT,d=h*l,p=i.byteOffset||0,m=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,v=i.normalized===!0;let S,M;if(m&&m!==d){const g=Math.floor(p/m),_="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let A=t.cache.get(_);A||(S=new u(a,g*m,i.count*m/h),A=new pM(S,m/h),t.cache.add(_,A)),M=new yf(A,l,p%m/h,v)}else a===null?S=new u(i.count*l):S=new u(a,p,i.count*l),M=new Tn(S,l,v);if(i.sparse!==void 0){const g=S2.SCALAR,_=by[i.sparse.indices.componentType],A=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,C=new _(o[1],A,i.sparse.count*g),R=new u(o[2],w,i.sparse.count*l);a!==null&&(M=new Tn(M.array.slice(),M.itemSize,M.normalized));for(let L=0,I=C.length;L<I;L++){const T=C[L];if(M.setX(T,R[L*l]),l>=2&&M.setY(T,R[L*l+1]),l>=3&&M.setZ(T,R[L*l+2]),l>=4&&M.setW(T,R[L*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,r).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=$8[p.magFilter]||yr,h.minFilter=$8[p.minFilter]||Wc,h.wrapS=e6[p.wrapS]||vf,h.wrapT=e6[p.wrapT]||vf,i.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(d){u=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let v=p;t.isImageBitmapLoader===!0&&(v=function(S){const M=new br(S);M.needsUpdate=!0,p(M)}),t.load($d.resolveURL(d,s.path),v,void 0,m)})}).then(function(d){return u===!0&&a.revokeObjectURL(l),Uu(d,o),d.userData.mimeType=o.mimeType||jPe(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[pn.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[pn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[pn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===Q8?Am:ah),"colorSpace"in o?o.colorSpace=i:o.encoding=i===Am?Q8:pPe),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new sP,_i.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Cs,_i.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return TM}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[pn.KHR_MATERIALS_UNLIT]){const d=i[pn.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),u.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new yt(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],ah),a.opacity=p[3]}d.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",d.baseColorTexture,Am)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Cl);const h=s.alphaMode||M2.OPAQUE;if(h===M2.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===M2.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Wo&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new ze(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==Wo&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Wo){const d=s.emissiveFactor;a.emissive=new yt().setRGB(d[0],d[1],d[2],ah)}return s.emissiveTexture!==void 0&&o!==Wo&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Am)),Promise.all(u).then(function(){const d=new o(a);return s.name&&(d.name=s.name),Uu(d,s),t.associations.set(d,{materials:e}),s.extensions&&Fp(i,d,s),d})}createUniqueName(e){const t=Sn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[pn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return t6(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],h=WPe(u),d=i[h];if(d)o.push(d.promise);else{let p;u.extensions&&u.extensions[pn.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=t6(new en,u,t),i[h]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?HPe(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,v=h.length;m<v;m++){const S=h[m],M=o[m];let g;const _=u[m];if(M.mode===Ra.TRIANGLES||M.mode===Ra.TRIANGLE_STRIP||M.mode===Ra.TRIANGLE_FAN||M.mode===void 0)g=s.isSkinnedMesh===!0?new Ik(S,_):new Oi(S,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),M.mode===Ra.TRIANGLE_STRIP?g.geometry=q8(g.geometry,xk):M.mode===Ra.TRIANGLE_FAN&&(g.geometry=q8(g.geometry,RT));else if(M.mode===Ra.LINES)g=new Ql(S,_);else if(M.mode===Ra.LINE_STRIP)g=new Sh(S,_);else if(M.mode===Ra.LINE_LOOP)g=new Fk(S,_);else if(M.mode===Ra.POINTS)g=new Nk(S,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(g.geometry.morphAttributes).length>0&&VPe(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Uu(g,s),M.extensions&&Fp(i,g,M),t.assignFinalMaterial(g),d.push(g)}for(let m=0,v=d.length;m<v;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&Fp(i,d[0],s),d[0];const p=new qu;s.extensions&&Fp(i,p,s),t.associations.set(p,{meshes:e});for(let m=0,v=d.length;m<v;m++)p.add(d[m]);return p})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new gi(w$.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Ax(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),Uu(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let u=0,h=o.length;u<h;u++){const d=o[u];if(d){a.push(d);const p=new jt;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new mM(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],u=[],h=[];for(let d=0,p=i.channels.length;d<p;d++){const m=i.channels[d],v=i.samplers[m.sampler],S=m.target,M=S.node,g=i.parameters!==void 0?i.parameters[v.input]:v.input,_=i.parameters!==void 0?i.parameters[v.output]:v.output;S.node!==void 0&&(o.push(this.getDependency("node",M)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",_)),u.push(v),h.push(S))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(d){const p=d[0],m=d[1],v=d[2],S=d[3],M=d[4],g=[];for(let _=0,A=p.length;_<A;_++){const w=p[_],C=m[_],R=v[_],L=S[_],I=M[_];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const T=r._createAnimationTracks(w,C,R,L,I);if(T)for(let B=0;B<T.length;B++)g.push(T[B])}return new nx(s,void 0,g)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,h=a.length;u<h;u++)o.push(r.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const h=u[0],d=u[1],p=u[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,XPe)});for(let m=0,v=d.length;m<v;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let h;if(s.isBone===!0?h=new iP:u.length>1?h=new qu:u.length===1?h=u[0]:h=new En,h!==u[0])for(let d=0,p=u.length;d<p;d++)h.add(u[d]);if(s.name&&(h.userData.name=s.name,h.name=o),Uu(h,s),s.extensions&&Fp(r,h,s),s.matrix!==void 0){const d=new jt;d.fromArray(s.matrix),h.applyMatrix4(d)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return i.associations.has(h)||i.associations.set(h,{}),i.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new qu;r.name&&(s.name=i.createUniqueName(r.name)),Uu(s,r),r.extensions&&Fp(t,s,r);const o=r.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,d=l.length;h<d;h++)s.add(l[h]);const u=h=>{const d=new Map;for(const[p,m]of i.associations)(p instanceof _i||p instanceof br)&&d.set(p,m);return h.traverse(p=>{const m=i.associations.get(p);m!=null&&d.set(p,m)}),d};return i.associations=u(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];ad[s.path]===ad.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let u;switch(ad[s.path]){case ad.weights:u=lg;break;case ad.rotation:u=xf;break;case ad.position:case ad.scale:u=cg;break;default:switch(r.itemSize){case 1:u=lg;break;case 2:case 3:default:u=cg;break}break}const h=i.interpolation!==void 0?GPe[i.interpolation]:sg,d=this._getArrayFromAccessor(r);for(let p=0,m=l.length;p<m;p++){const v=new u(l[p]+"."+ad[s.path],t.array,d,h);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(v),o.push(v)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=S3(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof xf?kPe:Yee;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function KPe(n,e,t){const r=e.attributes,i=new Yl;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new ie(l[0],l[1],l[2]),new ie(u[0],u[1],u[2])),a.normalized){const h=S3(by[a.componentType]);i.min.multiplyScalar(h),i.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new ie,l=new ie;for(let u=0,h=s.length;u<h;u++){const d=s[u];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,v=p.max;if(m!==void 0&&v!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(v[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(v[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(v[2]))),p.normalized){const S=S3(by[p.componentType]);l.multiplyScalar(S)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new ql;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function t6(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=A3[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return Uu(n,e),KPe(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?zPe(n,e.targets,t):n})}const w2=new WeakMap;class YPe extends Js{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new $o(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const r=JSON.stringify(t);if(w2.has(e)){const l=w2.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,h)=>{i._callbacks[s]={resolve:u,reject:h},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),w2.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new en;e.index&&t.setIndex(new Tn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Tn(o,a))}return t}_loadLibrary(e,t){const r=new $o(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=qPe.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function qPe(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(d){h({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(h=>{const d=h.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const v=t(d,p,m,u),S=v.attributes.map(M=>M.array.buffer);v.index&&S.push(v.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:v},S)}catch(v){console.error(v),self.postMessage({type:"error",id:a.id,error:v.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,u){const h=u.attributeIDs,d=u.attributeTypes;let p,m;const v=a.GetEncodedGeometryType(l);if(v===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(v===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const S={index:null,attributes:[]};for(const M in h){const g=self[d[M]];let _,A;if(u.useUniqueIDs)A=h[M],_=a.GetAttributeByUniqueId(p,A);else{if(A=a.GetAttributeId(p,o[h[M]]),A===-1)continue;_=a.GetAttribute(p,A)}S.attributes.push(i(o,a,p,M,g,_))}return v===o.TRIANGULAR_MESH&&(S.index=r(o,a,p)),o.destroy(p),S}function r(o,a,l){const h=l.num_faces()*3,d=h*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function i(o,a,l,u,h,d){const p=d.num_components(),v=l.num_points()*p,S=v*h.BYTES_PER_ELEMENT,M=s(o,h),g=o._malloc(S);a.GetAttributeDataArrayForAllPoints(l,d,M,S,g);const _=new h(o.HEAPF32.buffer,g,v).slice();return o._free(g),{name:u,array:_,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let xb;const b2=()=>{if(xb)return xb;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let v=0;v<d.length;++v){const S=d.charCodeAt(v);p[v]=S>96?S-71:S>64?S-65:S>47?S+4:S>46?63:62}let m=0;for(let v=0;v<d.length;++v)p[m++]=p[v]<60?r[p[v]]:(p[v]-60)*64+p[++v];return p.buffer.slice(0,m)}function l(d,p,m,v,S,M){const g=s.exports.sbrk,_=m+3&-4,A=g(_*v),w=g(S.length),C=new Uint8Array(s.exports.memory.buffer);C.set(S,w);const R=d(A,m,v,w,S.length);if(R===0&&M&&M(A,_,v),p.set(C.subarray(A,A+m*v)),g(A-g(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return xb={ready:o,supported:!0,decodeVertexBuffer(d,p,m,v,S){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,v,s.exports[u[S]])},decodeIndexBuffer(d,p,m,v){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,v)},decodeIndexSequence(d,p,m,v){l(s.exports.meshopt_decodeIndexSequence,d,p,m,v)},decodeGltfBuffer(d,p,m,v,S,M){l(s.exports[h[S]],d,p,m,v,s.exports[u[M]])}},xb};let _b=null,qee="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Qee(n=!0,e=!0,t){return r=>{t&&t(r),n&&(_b||(_b=new YPe),_b.setDecoderPath(typeof n=="string"?n:qee),r.setDRACOLoader(_b)),e&&r.setMeshoptDecoder(typeof b2=="function"?b2():b2)}}const hP=(n,e,t,r)=>PM(aG,n,Qee(e,t,r));hP.preload=(n,e,t,r)=>PM.preload(aG,n,Qee(e,t,r));hP.clear=n=>PM.clear(aG,n);hP.setDecoderPath=n=>{qee=n};var Zee={exports:{}},QPe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ZPe=QPe,$Pe=ZPe;function $ee(){}function ete(){}ete.resetWarningCache=$ee;var eBe=function(){function n(r,i,s,o,a,l){if(l!==$Pe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ete,resetWarningCache:$ee};return t.PropTypes=t,t};Zee.exports=eBe();var tte=Zee.exports,nte={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n6=za.createContext&&za.createContext(nte),ef=globalThis&&globalThis.__assign||function(){return ef=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},ef.apply(this,arguments)},tBe=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};function rte(n){return n&&n.map(function(e,t){return za.createElement(e.tag,ef({key:t},e.attr),rte(e.child))})}function ite(n){return function(e){return za.createElement(nBe,ef({attr:ef({},n.attr)},e),rte(n.child))}}function nBe(n){var e=function(t){var r=n.attr,i=n.size,s=n.title,o=tBe(n,["attr","size","title"]),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),za.createElement("svg",ef({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:ef(ef({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&za.createElement("title",null,s),n.children)};return n6!==void 0?za.createElement(n6.Consumer,null,function(t){return e(t)}):e(nte)}function rBe(n){return ite({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(n)}function ste(n){return ite({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(n)}const ote=be.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),dP=be.createContext({}),fP=be.createContext(null),pP=typeof document<"u",lG=pP?be.useLayoutEffect:be.useEffect,ate=be.createContext({strict:!1}),cG=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),iBe="framerAppearId",lte="data-"+cG(iBe);function sBe(n,e,t,r){const{visualElement:i}=be.useContext(dP),s=be.useContext(ate),o=be.useContext(fP),a=be.useContext(ote).reducedMotion,l=be.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(n,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;be.useInsertionEffect(()=>{u&&u.update(t,o)});const h=be.useRef(!!(t[lte]&&!window.HandoffComplete));return lG(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),be.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function ny(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function oBe(n,e,t){return be.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ny(t)&&(t.current=r))},[e])}function BS(n){return typeof n=="string"||Array.isArray(n)}function mP(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const uG=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hG=["initial",...uG];function gP(n){return mP(n.animate)||hG.some(e=>BS(n[e]))}function cte(n){return!!(gP(n)||n.variants)}function aBe(n,e){if(gP(n)){const{initial:t,animate:r}=n;return{initial:t===!1||BS(t)?t:void 0,animate:BS(r)?r:void 0}}return n.inherit!==!1?e:{}}function lBe(n){const{initial:e,animate:t}=aBe(n,be.useContext(dP));return be.useMemo(()=>({initial:e,animate:t}),[r6(e),r6(t)])}function r6(n){return Array.isArray(n)?n.join(" "):n}const i6={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},LS={};for(const n in i6)LS[n]={isEnabled:e=>i6[n].some(t=>!!e[t])};function cBe(n){for(const e in n)LS[e]={...LS[e],...n[e]}}const dG=be.createContext({}),ute=be.createContext({}),uBe=Symbol.for("motionComponentSymbol");function hBe({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&cBe(n);function s(a,l){let u;const h={...be.useContext(ote),...a,layoutId:dBe(a)},{isStatic:d}=h,p=lBe(a),m=r(a,d);if(!d&&pP){p.visualElement=sBe(i,m,h,e);const v=be.useContext(ute),S=be.useContext(ate).strict;p.visualElement&&(u=p.visualElement.loadFeatures(h,S,n,v))}return be.createElement(dP.Provider,{value:p},u&&p.visualElement?be.createElement(u,{visualElement:p.visualElement,...h}):null,t(i,a,oBe(m,p.visualElement,l),m,d,p.visualElement))}const o=be.forwardRef(s);return o[uBe]=i,o}function dBe({layoutId:n}){const e=be.useContext(dG).id;return e&&n!==void 0?e+"-"+n:n}function fBe(n){function e(r,i={}){return hBe(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const pBe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fG(n){return typeof n!="string"||n.includes("-")?!1:!!(pBe.indexOf(n)>-1||/[A-Z]/.test(n))}const IT={};function mBe(n){Object.assign(IT,n)}const BM=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wg=new Set(BM);function hte(n,{layout:e,layoutId:t}){return wg.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!IT[n]||n==="opacity")}const yo=n=>!!(n&&n.getVelocity),gBe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vBe=BM.length;function yBe(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let o=0;o<vBe;o++){const a=BM[o];if(n[a]!==void 0){const l=gBe[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const dte=n=>e=>typeof e=="string"&&e.startsWith(n),fte=dte("--"),M3=dte("var(--"),xBe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,_Be=(n,e)=>e&&typeof n=="number"?e.transform(n):n,_f=(n,e,t)=>Math.min(Math.max(t,n),e),bg={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},yA={...bg,transform:n=>_f(0,1,n)},Ab={...bg,default:1},xA=n=>Math.round(n*1e5)/1e5,vP=/(-)?([\d]*\.?[\d])+/g,pte=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ABe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function LM(n){return typeof n=="string"}const IM=n=>({test:e=>LM(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),cd=IM("deg"),kc=IM("%"),Ht=IM("px"),SBe=IM("vh"),MBe=IM("vw"),s6={...kc,parse:n=>kc.parse(n)/100,transform:n=>kc.transform(n*100)},o6={...bg,transform:Math.round},mte={borderWidth:Ht,borderTopWidth:Ht,borderRightWidth:Ht,borderBottomWidth:Ht,borderLeftWidth:Ht,borderRadius:Ht,radius:Ht,borderTopLeftRadius:Ht,borderTopRightRadius:Ht,borderBottomRightRadius:Ht,borderBottomLeftRadius:Ht,width:Ht,maxWidth:Ht,height:Ht,maxHeight:Ht,size:Ht,top:Ht,right:Ht,bottom:Ht,left:Ht,padding:Ht,paddingTop:Ht,paddingRight:Ht,paddingBottom:Ht,paddingLeft:Ht,margin:Ht,marginTop:Ht,marginRight:Ht,marginBottom:Ht,marginLeft:Ht,rotate:cd,rotateX:cd,rotateY:cd,rotateZ:cd,scale:Ab,scaleX:Ab,scaleY:Ab,scaleZ:Ab,skew:cd,skewX:cd,skewY:cd,distance:Ht,translateX:Ht,translateY:Ht,translateZ:Ht,x:Ht,y:Ht,z:Ht,perspective:Ht,transformPerspective:Ht,opacity:yA,originX:s6,originY:s6,originZ:Ht,zIndex:o6,fillOpacity:yA,strokeOpacity:yA,numOctaves:o6};function pG(n,e,t,r){const{style:i,vars:s,transform:o,transformOrigin:a}=n;let l=!1,u=!1,h=!0;for(const d in e){const p=e[d];if(fte(d)){s[d]=p;continue}const m=mte[d],v=_Be(p,m);if(wg.has(d)){if(l=!0,o[d]=v,!h)continue;p!==(m.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=v):i[d]=v}if(e.transform||(l||r?i.transform=yBe(n.transform,t,h,r):i.transform&&(i.transform="none")),u){const{originX:d="50%",originY:p="50%",originZ:m=0}=a;i.transformOrigin=`${d} ${p} ${m}`}}const mG=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gte(n,e,t){for(const r in e)!yo(e[r])&&!hte(r,t)&&(n[r]=e[r])}function EBe({transformTemplate:n},e,t){return be.useMemo(()=>{const r=mG();return pG(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function wBe(n,e,t){const r=n.style||{},i={};return gte(i,r,n),Object.assign(i,EBe(n,e,t)),n.transformValues?n.transformValues(i):i}function bBe(n,e,t){const r={},i=wBe(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const CBe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function DT(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||CBe.has(n)}let vte=n=>!DT(n);function TBe(n){n&&(vte=e=>e.startsWith("on")?!DT(e):n(e))}try{TBe(require("@emotion/is-prop-valid").default)}catch{}function RBe(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(vte(i)||t===!0&&DT(i)||!e&&!DT(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function a6(n,e,t){return typeof n=="string"?n:Ht.transform(e+t*n)}function PBe(n,e,t){const r=a6(e,n.x,n.width),i=a6(t,n.y,n.height);return`${r} ${i}`}const BBe={offset:"stroke-dashoffset",array:"stroke-dasharray"},LBe={offset:"strokeDashoffset",array:"strokeDasharray"};function IBe(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?BBe:LBe;n[s.offset]=Ht.transform(-r);const o=Ht.transform(e),a=Ht.transform(t);n[s.array]=`${o} ${a}`}function gG(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,d,p){if(pG(n,u,h,p),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:v,dimensions:S}=n;m.transform&&(S&&(v.transform=m.transform),delete m.transform),S&&(i!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=PBe(S,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),o!==void 0&&IBe(m,o,a,l,!1)}const yte=()=>({...mG(),attrs:{}}),vG=n=>typeof n=="string"&&n.toLowerCase()==="svg";function DBe(n,e,t,r){const i=be.useMemo(()=>{const s=yte();return gG(s,e,{enableHardwareAcceleration:!1},vG(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};gte(s,n.style,n),i.style={...s,...i.style}}return i}function FBe(n=!1){return(t,r,i,{latestValues:s},o)=>{const l=(fG(t)?DBe:bBe)(r,s,o,t),h={...RBe(r,typeof t=="string",n),...l,ref:i},{children:d}=r,p=be.useMemo(()=>yo(d)?d.get():d,[d]);return be.createElement(t,{...h,children:p})}}function xte(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const _te=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ate(n,e,t,r){xte(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(_te.has(i)?i:cG(i),e.attrs[i])}function yG(n,e){const{style:t}=n,r={};for(const i in t)(yo(t[i])||e.style&&yo(e.style[i])||hte(i,n))&&(r[i]=t[i]);return r}function Ste(n,e){const t=yG(n,e);for(const r in n)if(yo(n[r])||yo(e[r])){const i=BM.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function xG(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function Mte(n){const e=be.useRef(null);return e.current===null&&(e.current=n()),e.current}const FT=n=>Array.isArray(n),NBe=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),UBe=n=>FT(n)?n[n.length-1]||0:n;function gC(n){const e=yo(n)?n.get():n;return NBe(e)?e.toValue():e}function OBe({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const o={latestValues:kBe(r,i,s,n),renderState:e()};return t&&(o.mount=a=>t(r,a,o)),o}const Ete=n=>(e,t)=>{const r=be.useContext(dP),i=be.useContext(fP),s=()=>OBe(n,e,r,i);return t?s():Mte(s)};function kBe(n,e,t,r){const i={},s=r(n,{});for(const p in s)i[p]=gC(s[p]);let{initial:o,animate:a}=n;const l=gP(n),u=cte(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=t?t.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!mP(d)&&(Array.isArray(d)?d:[d]).forEach(m=>{const v=xG(n,m);if(!v)return;const{transitionEnd:S,transition:M,...g}=v;for(const _ in g){let A=g[_];if(Array.isArray(A)){const w=h?A.length-1:0;A=A[w]}A!==null&&(i[_]=A)}for(const _ in S)i[_]=S[_]}),i}const Gr=n=>n;class l6{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function GBe(n){let e=new l6,t=new l6,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,h=!1)=>{const d=h&&i,p=d?e:t;return u&&o.add(l),p.add(l)&&d&&i&&(r=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const h=e.order[u];h(l),o.has(h)&&(a.schedule(h),n())}i=!1,s&&(s=!1,a.process(l))}};return a}const Sb=["prepare","read","update","preRender","render","postRender"],HBe=40;function zBe(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Sb.reduce((d,p)=>(d[p]=GBe(()=>t=!0),d),{}),o=d=>s[d].process(i),a=()=>{const d=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(d-i.timestamp,HBe),1),i.timestamp=d,i.isProcessing=!0,Sb.forEach(o),i.isProcessing=!1,t&&e&&(r=!1,n(a))},l=()=>{t=!0,r=!0,i.isProcessing||n(a)};return{schedule:Sb.reduce((d,p)=>{const m=s[p];return d[p]=(v,S=!1,M=!1)=>(t||l(),m.schedule(v,S,M)),d},{}),cancel:d=>Sb.forEach(p=>s[p].cancel(d)),state:i,steps:s}}const{schedule:Qn,cancel:Mh,state:As,steps:C2}=zBe(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gr,!0),VBe={useVisualState:Ete({scrapeMotionValuesFromProps:Ste,createRenderState:yte,onMount:(n,e,{renderState:t,latestValues:r})=>{Qn.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Qn.render(()=>{gG(t,r,{enableHardwareAcceleration:!1},vG(e.tagName),n.transformTemplate),Ate(e,t)})}})},WBe={useVisualState:Ete({scrapeMotionValuesFromProps:yG,createRenderState:mG})};function jBe(n,{forwardMotionProps:e=!1},t,r){return{...fG(n)?VBe:WBe,preloadedFeatures:t,useRender:FBe(e),createVisualElement:r,Component:n}}function Qu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const wte=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function yP(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const XBe=n=>e=>wte(e)&&n(e,yP(e));function lh(n,e,t,r){return Qu(n,e,XBe(t),r)}const JBe=(n,e)=>t=>e(n(t)),tf=(...n)=>n.reduce(JBe);function bte(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const c6=bte("dragHorizontal"),u6=bte("dragVertical");function Cte(n){let e=!1;if(n==="y")e=u6();else if(n==="x")e=c6();else{const t=c6(),r=u6();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function Tte(){const n=Cte(!0);return n?(n(),!1):!0}class Ff{constructor(e){this.isMounted=!1,this.node=e}update(){}}function h6(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||Tte())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[r]&&Qn.update(()=>a[r](s,o))};return lh(n.current,t,i,{passive:!n.getProps()[r]})}class KBe extends Ff{mount(){this.unmount=tf(h6(this.node,!0),h6(this.node,!1))}unmount(){}}class YBe extends Ff{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tf(Qu(this.node.current,"focus",()=>this.onFocus()),Qu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Rte=(n,e)=>e?n===e?!0:Rte(n,e.parentElement):!1;function T2(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,yP(t))}class qBe extends Ff{constructor(){super(...arguments),this.removeStartListeners=Gr,this.removeEndListeners=Gr,this.removeAccessibleListeners=Gr,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=lh(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();Qn.update(()=>{!d&&!Rte(this.node.current,a.target)?h&&h(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=lh(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=tf(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||T2("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&Qn.update(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=Qu(this.node.current,"keyup",o),T2("down",(a,l)=>{this.startPress(a,l)})},t=Qu(this.node.current,"keydown",e),r=()=>{this.isPressing&&T2("cancel",(s,o)=>this.cancelPress(s,o))},i=Qu(this.node.current,"blur",r);this.removeAccessibleListeners=tf(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Qn.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Tte()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Qn.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=lh(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Qu(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=tf(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const E3=new WeakMap,R2=new WeakMap,QBe=n=>{const e=E3.get(n.target);e&&e(n)},ZBe=n=>{n.forEach(QBe)};function $Be({root:n,...e}){const t=n||document;R2.has(t)||R2.set(t,{});const r=R2.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(ZBe,{root:n,...e})),r[i]}function eLe(n,e,t){const r=$Be(e);return E3.set(n,t),r.observe(n),()=>{E3.delete(n),r.unobserve(n)}}const tLe={some:0,all:1};class nLe extends Ff{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:tLe[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=u?h:d;p&&p(l)};return eLe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(rLe(e,t))&&this.startObserver()}unmount(){}}function rLe({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const iLe={inView:{Feature:nLe},tap:{Feature:qBe},focus:{Feature:YBe},hover:{Feature:KBe}};function Pte(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function sLe(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function oLe(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function xP(n,e,t){const r=n.getProps();return xG(r,e,t!==void 0?t:r.custom,sLe(n),oLe(n))}let aLe=Gr,_G=Gr;const nf=n=>n*1e3,ch=n=>n/1e3,lLe={current:!1},Bte=n=>Array.isArray(n)&&typeof n[0]=="number";function Lte(n){return!!(!n||typeof n=="string"&&Ite[n]||Bte(n)||Array.isArray(n)&&n.every(Lte))}const U1=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Ite={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:U1([0,.65,.55,1]),circOut:U1([.55,0,1,.45]),backIn:U1([.31,.01,.66,-.59]),backOut:U1([.33,1.53,.69,.99])};function Dte(n){if(n)return Bte(n)?U1(n):Array.isArray(n)?n.map(Dte):Ite[n]}function cLe(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:t};l&&(u.offset=l);const h=Dte(a);return Array.isArray(h)&&(u.easing=h),n.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function uLe(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const Fte=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,hLe=1e-7,dLe=12;function fLe(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=Fte(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>hLe&&++a<dLe);return o}function DM(n,e,t,r){if(n===e&&t===r)return Gr;const i=s=>fLe(s,0,1,n,t);return s=>s===0||s===1?s:Fte(i(s),e,r)}const pLe=DM(.42,0,1,1),mLe=DM(0,0,.58,1),Nte=DM(.42,0,.58,1),gLe=n=>Array.isArray(n)&&typeof n[0]!="number",Ute=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Ote=n=>e=>1-n(1-e),AG=n=>1-Math.sin(Math.acos(n)),kte=Ote(AG),vLe=Ute(AG),Gte=DM(.33,1.53,.69,.99),SG=Ote(Gte),yLe=Ute(SG),xLe=n=>(n*=2)<1?.5*SG(n):.5*(2-Math.pow(2,-10*(n-1))),_Le={linear:Gr,easeIn:pLe,easeInOut:Nte,easeOut:mLe,circIn:AG,circInOut:vLe,circOut:kte,backIn:SG,backInOut:yLe,backOut:Gte,anticipate:xLe},d6=n=>{if(Array.isArray(n)){_G(n.length===4);const[e,t,r,i]=n;return DM(e,t,r,i)}else if(typeof n=="string")return _Le[n];return n},MG=(n,e)=>t=>!!(LM(t)&&ABe.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),Hte=(n,e,t)=>r=>{if(!LM(r))return r;const[i,s,o,a]=r.match(vP);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},ALe=n=>_f(0,255,n),P2={...bg,transform:n=>Math.round(ALe(n))},Sm={test:MG("rgb","red"),parse:Hte("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+P2.transform(n)+", "+P2.transform(e)+", "+P2.transform(t)+", "+xA(yA.transform(r))+")"};function SLe(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const w3={test:MG("#"),parse:SLe,transform:Sm.transform},ry={test:MG("hsl","hue"),parse:Hte("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+kc.transform(xA(e))+", "+kc.transform(xA(t))+", "+xA(yA.transform(r))+")"},Fs={test:n=>Sm.test(n)||w3.test(n)||ry.test(n),parse:n=>Sm.test(n)?Sm.parse(n):ry.test(n)?ry.parse(n):w3.parse(n),transform:n=>LM(n)?n:n.hasOwnProperty("red")?Sm.transform(n):ry.transform(n)},Sr=(n,e,t)=>-t*n+t*e+n;function B2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function MLe({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=B2(l,a,n+1/3),s=B2(l,a,n),o=B2(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const L2=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},ELe=[w3,Sm,ry],wLe=n=>ELe.find(e=>e.test(n));function f6(n){const e=wLe(n);let t=e.parse(n);return e===ry&&(t=MLe(t)),t}const zte=(n,e)=>{const t=f6(n),r=f6(e),i={...t};return s=>(i.red=L2(t.red,r.red,s),i.green=L2(t.green,r.green,s),i.blue=L2(t.blue,r.blue,s),i.alpha=Sr(t.alpha,r.alpha,s),Sm.transform(i))};function bLe(n){var e,t;return isNaN(n)&&LM(n)&&(((e=n.match(vP))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(pte))===null||t===void 0?void 0:t.length)||0)>0}const Vte={regex:xBe,countKey:"Vars",token:"${v}",parse:Gr},Wte={regex:pte,countKey:"Colors",token:"${c}",parse:Fs.parse},jte={regex:vP,countKey:"Numbers",token:"${n}",parse:bg.parse};function I2(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function NT(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&I2(t,Vte),I2(t,Wte),I2(t,jte),t}function Xte(n){return NT(n).values}function Jte(n){const{values:e,numColors:t,numVars:r,tokenised:i}=NT(n),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(Vte.token,o[l]):l<r+t?a=a.replace(Wte.token,Fs.transform(o[l])):a=a.replace(jte.token,xA(o[l]));return a}}const CLe=n=>typeof n=="number"?0:n;function TLe(n){const e=Xte(n);return Jte(n)(e.map(CLe))}const Af={test:bLe,parse:Xte,createTransformer:Jte,getAnimatableNone:TLe},Kte=(n,e)=>t=>`${t>0?e:n}`;function Yte(n,e){return typeof n=="number"?t=>Sr(n,e,t):Fs.test(n)?zte(n,e):n.startsWith("var(")?Kte(n,e):Qte(n,e)}const qte=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,o)=>Yte(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}},RLe=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=Yte(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},Qte=(n,e)=>{const t=Af.createTransformer(e),r=NT(n),i=NT(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?tf(qte(r.values,i.values),t):Kte(n,e)},IS=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},p6=(n,e)=>t=>Sr(n,e,t);function PLe(n){return typeof n=="number"?p6:typeof n=="string"?Fs.test(n)?zte:Qte:Array.isArray(n)?qte:typeof n=="object"?RLe:p6}function BLe(n,e,t){const r=[],i=t||PLe(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Gr:e;a=tf(l,a)}r.push(a)}return r}function Zte(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(_G(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=BLe(e,r,i),a=o.length,l=u=>{let h=0;if(a>1)for(;h<n.length-2&&!(u<n[h+1]);h++);const d=IS(n[h],n[h+1],u);return o[h](d)};return t?u=>l(_f(n[0],n[s-1],u)):l}function LLe(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=IS(0,e,r);n.push(Sr(t,1,i))}}function ILe(n){const e=[0];return LLe(e,n.length-1),e}function DLe(n,e){return n.map(t=>t*e)}function FLe(n,e){return n.map(()=>e||Nte).splice(0,n.length-1)}function UT({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=gLe(r)?r.map(d6):d6(r),s={done:!1,value:e[0]},o=DLe(t&&t.length===e.length?t:ILe(e),n),a=Zte(o,e,{ease:Array.isArray(i)?i:FLe(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function $te(n,e){return e?n*(1e3/e):0}const NLe=5;function ene(n,e,t){const r=Math.max(e-NLe,0);return $te(t-n(r),e-r)}const D2=.001,ULe=.01,m6=10,OLe=.05,kLe=1;function GLe({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s;aLe(n<=nf(m6));let o=1-e;o=_f(OLe,kLe,o),n=_f(ULe,m6,ch(n)),o<1?(i=u=>{const h=u*o,d=h*n,p=h-t,m=b3(u,o),v=Math.exp(-d);return D2-p/m*v},s=u=>{const d=u*o*n,p=d*t+t,m=Math.pow(o,2)*Math.pow(u,2)*n,v=Math.exp(-d),S=b3(Math.pow(u,2),o);return(-i(u)+D2>0?-1:1)*((p-m)*v)/S}):(i=u=>{const h=Math.exp(-u*n),d=(u-t)*n+1;return-D2+h*d},s=u=>{const h=Math.exp(-u*n),d=(t-u)*(n*n);return h*d});const a=5/n,l=zLe(i,s,a);if(n=nf(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:n}}}const HLe=12;function zLe(n,e,t){let r=t;for(let i=1;i<HLe;i++)r=r-n(r)/e(r);return r}function b3(n,e){return n*Math.sqrt(1-e*e)}const VLe=["duration","bounce"],WLe=["stiffness","damping","mass"];function g6(n,e){return e.some(t=>n[t]!==void 0)}function jLe(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!g6(n,WLe)&&g6(n,VLe)){const t=GLe(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function tne({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:p}=jLe({...r,velocity:-ch(r.velocity||0)}),m=d||0,v=l/(2*Math.sqrt(a*u)),S=s-i,M=ch(Math.sqrt(a/u)),g=Math.abs(S)<5;t||(t=g?.01:2),e||(e=g?.005:.5);let _;if(v<1){const A=b3(M,v);_=w=>{const C=Math.exp(-v*M*w);return s-C*((m+v*M*S)/A*Math.sin(A*w)+S*Math.cos(A*w))}}else if(v===1)_=A=>s-Math.exp(-M*A)*(S+(m+M*S)*A);else{const A=M*Math.sqrt(v*v-1);_=w=>{const C=Math.exp(-v*M*w),R=Math.min(A*w,300);return s-C*((m+v*M*S)*Math.sinh(R)+A*S*Math.cosh(R))/A}}return{calculatedDuration:p&&h||null,next:A=>{const w=_(A);if(p)o.done=A>=h;else{let C=m;A!==0&&(v<1?C=ene(_,A,w):C=0);const R=Math.abs(C)<=t,L=Math.abs(s-w)<=e;o.done=R&&L}return o.value=o.done?s:w,o}}}function v6({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=n[0],p={done:!1,value:d},m=I=>a!==void 0&&I<a||l!==void 0&&I>l,v=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let S=t*e;const M=d+S,g=o===void 0?M:o(M);g!==M&&(S=g-d);const _=I=>-S*Math.exp(-I/r),A=I=>g+_(I),w=I=>{const T=_(I),B=A(I);p.done=Math.abs(T)<=u,p.value=p.done?g:B};let C,R;const L=I=>{m(p.value)&&(C=I,R=tne({keyframes:[p.value,v(p.value)],velocity:ene(A,I,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return L(0),{calculatedDuration:null,next:I=>{let T=!1;return!R&&C===void 0&&(T=!0,w(I),L(I)),C!==void 0&&I>C?R.next(I-C):(!T&&w(I),p)}}}const XLe=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Qn.update(e,!0),stop:()=>Mh(e),now:()=>As.isProcessing?As.timestamp:performance.now()}},y6=2e4;function x6(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<y6;)e+=t,r=n.next(e);return e>=y6?1/0:e}const JLe={decay:v6,inertia:v6,tween:UT,keyframes:UT,spring:tne};function OT({autoplay:n=!0,delay:e=0,driver:t=XLe,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:h,onUpdate:d,...p}){let m=1,v=!1,S,M;const g=()=>{M=new Promise(q=>{S=q})};g();let _;const A=JLe[i]||UT;let w;A!==UT&&typeof r[0]!="number"&&(w=Zte([0,100],r,{clamp:!1}),r=[0,100]);const C=A({...p,keyframes:r});let R;a==="mirror"&&(R=A({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let L="idle",I=null,T=null,B=null;C.calculatedDuration===null&&s&&(C.calculatedDuration=x6(C));const{calculatedDuration:H}=C;let K=1/0,j=1/0;H!==null&&(K=H+o,j=K*(s+1)-o);let z=0;const X=q=>{if(T===null)return;m>0&&(T=Math.min(T,q)),m<0&&(T=Math.min(q-j/m,T)),I!==null?z=I:z=Math.round(q-T)*m;const re=z-e*(m>=0?1:-1),Y=m>=0?re<0:re>j;z=Math.max(re,0),L==="finished"&&I===null&&(z=j);let ae=z,Se=C;if(s){const Ne=Math.min(z,j)/K;let ye=Math.floor(Ne),me=Ne%1;!me&&Ne>=1&&(me=1),me===1&&ye--,ye=Math.min(ye,s+1),!!(ye%2)&&(a==="reverse"?(me=1-me,o&&(me-=o/K)):a==="mirror"&&(Se=R)),ae=_f(0,1,me)*K}const ve=Y?{done:!1,value:r[0]}:Se.next(ae);w&&(ve.value=w(ve.value));let{done:W}=ve;!Y&&H!==null&&(W=m>=0?z>=j:z<=0);const Xe=I===null&&(L==="finished"||L==="running"&&W);return d&&d(ve.value),Xe&&D(),ve},te=()=>{_&&_.stop(),_=void 0},O=()=>{L="idle",te(),S(),g(),T=B=null},D=()=>{L="finished",h&&h(),te(),S()},V=()=>{if(v)return;_||(_=t(X));const q=_.now();l&&l(),I!==null?T=q-I:(!T||L==="finished")&&(T=q),L==="finished"&&g(),B=T,I=null,L="running",_.start()};n&&V();const G={then(q,re){return M.then(q,re)},get time(){return ch(z)},set time(q){q=nf(q),z=q,I!==null||!_||m===0?I=q:T=_.now()-q/m},get duration(){const q=C.calculatedDuration===null?x6(C):C.calculatedDuration;return ch(q)},get speed(){return m},set speed(q){q===m||!_||(m=q,G.time=ch(z))},get state(){return L},play:V,pause:()=>{L="paused",I=z},stop:()=>{v=!0,L!=="idle"&&(L="idle",u&&u(),O())},cancel:()=>{B!==null&&X(B),O()},complete:()=>{L="finished"},sample:q=>(T=0,X(q))};return G}function KLe(n){let e;return()=>(e===void 0&&(e=n()),e)}const YLe=KLe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),qLe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Mb=10,QLe=2e4,ZLe=(n,e)=>e.type==="spring"||n==="backgroundColor"||!Lte(e.ease);function $Le(n,e,{onUpdate:t,onComplete:r,...i}){if(!(YLe()&&qLe.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const h=()=>{l=new Promise(A=>{a=A})};h();let{keyframes:d,duration:p=300,ease:m,times:v}=i;if(ZLe(e,i)){const A=OT({...i,repeat:0,delay:0});let w={done:!1,value:d[0]};const C=[];let R=0;for(;!w.done&&R<QLe;)w=A.sample(R),C.push(w.value),R+=Mb;v=void 0,d=C,p=R-Mb,m="linear"}const S=cLe(n.owner.current,e,d,{...i,duration:p,ease:m,times:v}),M=()=>{u=!1,S.cancel()},g=()=>{u=!0,Qn.update(M),a(),h()};return S.onfinish=()=>{u||(n.set(uLe(d,i)),r&&r(),g())},{then(A,w){return l.then(A,w)},attachTimeline(A){return S.timeline=A,S.onfinish=null,Gr},get time(){return ch(S.currentTime||0)},set time(A){S.currentTime=nf(A)},get speed(){return S.playbackRate},set speed(A){S.playbackRate=A},get duration(){return ch(p)},play:()=>{o||(S.play(),Mh(M))},pause:()=>S.pause(),stop:()=>{if(o=!0,S.playState==="idle")return;const{currentTime:A}=S;if(A){const w=OT({...i,autoplay:!1});n.setWithVelocity(w.sample(A-Mb).value,w.sample(A).value,Mb)}g()},complete:()=>{u||S.finish()},cancel:g}}function e2e({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Gr,pause:Gr,stop:Gr,then:s=>(s(),Promise.resolve()),cancel:Gr,complete:Gr});return e?OT({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const t2e={type:"spring",stiffness:500,damping:25,restSpeed:10},n2e=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),r2e={type:"keyframes",duration:.8},i2e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},s2e=(n,{keyframes:e})=>e.length>2?r2e:wg.has(n)?n.startsWith("scale")?n2e(e[1]):t2e:i2e,C3=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Af.test(e)||e==="0")&&!e.startsWith("url(")),o2e=new Set(["brightness","contrast","saturate","opacity"]);function a2e(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(vP)||[];if(!r)return n;const i=t.replace(r,"");let s=o2e.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const l2e=/([a-z-]*)\(.*?\)/g,T3={...Af,getAnimatableNone:n=>{const e=n.match(l2e);return e?e.map(a2e).join(" "):n}},c2e={...mte,color:Fs,backgroundColor:Fs,outlineColor:Fs,fill:Fs,stroke:Fs,borderColor:Fs,borderTopColor:Fs,borderRightColor:Fs,borderBottomColor:Fs,borderLeftColor:Fs,filter:T3,WebkitFilter:T3},EG=n=>c2e[n];function nne(n,e){let t=EG(n);return t!==T3&&(t=Af),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const rne=n=>/^0[^.\s]+$/.test(n);function u2e(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||rne(n)}function h2e(n,e,t,r){const i=C3(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=r.from!==void 0?r.from:n.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),u2e(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const h=l[u];s[h]=nne(e,a)}return s}function d2e({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}function wG(n,e){return n[e]||n.default||n}const f2e={skipAnimations:!1},bG=(n,e,t,r={})=>i=>{const s=wG(r,n)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-nf(o);const l=h2e(e,n,t,s),u=l[0],h=l[l.length-1],d=C3(n,u),p=C3(n,h);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:v=>{e.set(v),s.onUpdate&&s.onUpdate(v)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(d2e(s)||(m={...m,...s2e(n,m)}),m.duration&&(m.duration=nf(m.duration)),m.repeatDelay&&(m.repeatDelay=nf(m.repeatDelay)),!d||!p||lLe.current||s.type===!1||f2e.skipAnimations)return e2e(m);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=$Le(e,n,m);if(v)return v}return OT(m)};function kT(n){return!!(yo(n)&&n.add)}const ine=n=>/^\-?\d*\.?\d+$/.test(n);function CG(n,e){n.indexOf(e)===-1&&n.push(e)}function TG(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class RG{constructor(){this.subscriptions=[]}add(e){return CG(this.subscriptions,e),()=>TG(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const p2e=n=>!isNaN(parseFloat(n));class m2e{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=As;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Qn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Qn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=p2e(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new RG);const r=this.events[e].add(t);return e==="change"?()=>{r(),Qn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?$te(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ix(n,e){return new m2e(n,e)}const sne=n=>e=>e.test(n),g2e={test:n=>n==="auto",parse:n=>n},one=[bg,Ht,kc,cd,MBe,SBe,g2e],S1=n=>one.find(sne(n)),v2e=[...one,Fs,Af],y2e=n=>v2e.find(sne(n));function x2e(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ix(t))}function _2e(n,e){const t=xP(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const o in s){const a=UBe(s[o]);x2e(n,o,a)}}function A2e(n,e,t){var r,i;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(i=(r=t[l])!==null&&r!==void 0?r:n.readValue(l))!==null&&i!==void 0?i:e[l]),h!=null&&(typeof h=="string"&&(ine(h)||rne(h))?h=parseFloat(h):!y2e(h)&&Af.test(u)&&(h=nne(l,u)),n.addValue(l,ix(h,{owner:n})),t[l]===void 0&&(t[l]=h),h!==null&&n.setBaseTarget(l,h))}}function S2e(n,e){return e?(e[n]||e.default||e).from:void 0}function M2e(n,e,t){const r={};for(const i in n){const s=S2e(i,e);if(s!==void 0)r[i]=s;else{const o=t.getValue(i);o&&(r[i]=o.get())}}return r}function E2e({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function w2e(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function ane(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");r&&(s=r);const u=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const d in a){const p=n.getValue(d),m=a[d];if(!p||m===void 0||h&&E2e(h,d))continue;const v={delay:t,elapsed:0,...wG(s||{},d)};if(window.HandoffAppearAnimations){const g=n.getProps()[lte];if(g){const _=window.HandoffAppearAnimations(g,d,p,Qn);_!==null&&(v.elapsed=_,v.isHandoff=!0)}}let S=!v.isHandoff&&!w2e(p,m);if(v.type==="spring"&&(p.getVelocity()||v.velocity)&&(S=!1),p.animation&&(S=!1),S)continue;p.start(bG(d,p,m,n.shouldReduceMotion&&wg.has(d)?{type:!1}:v));const M=p.animation;kT(l)&&(l.add(d),M.then(()=>l.remove(d))),u.push(M)}return o&&Promise.all(u).then(()=>{o&&_2e(n,o)}),u}function R3(n,e,t={}){const r=xP(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(ane(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=i;return b2e(n,e,u+l,h,d,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function b2e(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(n.variantChildren).sort(C2e).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(R3(u,e,{...s,delay:t+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function C2e(n,e){return n.sortNodePosition(e)}function T2e(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>R3(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=R3(n,e,t);else{const i=typeof e=="function"?xP(n,e,t.custom):e;r=Promise.all(ane(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const R2e=[...uG].reverse(),P2e=uG.length;function B2e(n){return e=>Promise.all(e.map(({animation:t,options:r})=>T2e(n,t,r)))}function L2e(n){let e=B2e(n);const t=D2e();let r=!0;const i=(l,u)=>{const h=xP(n,u);if(h){const{transition:d,transitionEnd:p,...m}=h;l={...l,...m,...p}}return l};function s(l){e=l(n)}function o(l,u){const h=n.getProps(),d=n.getVariantContext(!0)||{},p=[],m=new Set;let v={},S=1/0;for(let g=0;g<P2e;g++){const _=R2e[g],A=t[_],w=h[_]!==void 0?h[_]:d[_],C=BS(w),R=_===u?A.isActive:null;R===!1&&(S=g);let L=w===d[_]&&w!==h[_]&&C;if(L&&r&&n.manuallyAnimateOnMount&&(L=!1),A.protectedKeys={...v},!A.isActive&&R===null||!w&&!A.prevProp||mP(w)||typeof w=="boolean")continue;let T=I2e(A.prevProp,w)||_===u&&A.isActive&&!L&&C||g>S&&C,B=!1;const H=Array.isArray(w)?w:[w];let K=H.reduce(i,{});R===!1&&(K={});const{prevResolvedValues:j={}}=A,z={...j,...K},X=te=>{T=!0,m.has(te)&&(B=!0,m.delete(te)),A.needsAnimating[te]=!0};for(const te in z){const O=K[te],D=j[te];if(v.hasOwnProperty(te))continue;let V=!1;FT(O)&&FT(D)?V=!Pte(O,D):V=O!==D,V?O!==void 0?X(te):m.add(te):O!==void 0&&m.has(te)?X(te):A.protectedKeys[te]=!0}A.prevProp=w,A.prevResolvedValues=K,A.isActive&&(v={...v,...K}),r&&n.blockInitialAnimation&&(T=!1),T&&(!L||B)&&p.push(...H.map(te=>({animation:te,options:{type:_,...l}})))}if(m.size){const g={};m.forEach(_=>{const A=n.getBaseTarget(_);A!==void 0&&(g[_]=A)}),p.push({animation:g})}let M=!!p.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(M=!1),r=!1,M?e(p):Promise.resolve()}function a(l,u,h){var d;if(t[l].isActive===u)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(m=>{var v;return(v=m.animationState)===null||v===void 0?void 0:v.setActive(l,u)}),t[l].isActive=u;const p=o(h,l);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function I2e(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Pte(e,n):!1}function Np(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function D2e(){return{animate:Np(!0),whileInView:Np(),whileHover:Np(),whileTap:Np(),whileDrag:Np(),whileFocus:Np(),exit:Np()}}class F2e extends Ff{constructor(e){super(e),e.animationState||(e.animationState=L2e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),mP(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let N2e=0;class U2e extends Ff{constructor(){super(...arguments),this.id=N2e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const O2e={animation:{Feature:F2e},exit:{Feature:U2e}},_6=(n,e)=>Math.abs(n-e);function k2e(n,e){const t=_6(n.x,e.x),r=_6(n.y,e.y);return Math.sqrt(t**2+r**2)}class lne{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=N2(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=k2e(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:v}=d,{timestamp:S}=As;this.history.push({...v,timestamp:S});const{onStart:M,onMove:g}=this.handlers;p||(M&&M(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=F2(p,this.transformPagePoint),Qn.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=N2(d.type==="pointercancel"?this.lastMoveEventInfo:F2(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,M),v&&v(d,M)},!wte(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=yP(e),a=F2(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=As;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=t;h&&h(e,N2(a,this.history)),this.removeListeners=tf(lh(this.contextWindow,"pointermove",this.handlePointerMove),lh(this.contextWindow,"pointerup",this.handlePointerUp),lh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Mh(this.updatePoint)}}function F2(n,e){return e?{point:e(n.point)}:n}function A6(n,e){return{x:n.x-e.x,y:n.y-e.y}}function N2({point:n},e){return{point:n,delta:A6(n,cne(e)),offset:A6(n,G2e(e)),velocity:H2e(e,.1)}}function G2e(n){return n[0]}function cne(n){return n[n.length-1]}function H2e(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=cne(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>nf(e)));)t--;if(!r)return{x:0,y:0};const s=ch(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ea(n){return n.max-n.min}function P3(n,e=0,t=.01){return Math.abs(n-e)<=t}function S6(n,e,t,r=.5){n.origin=r,n.originPoint=Sr(e.min,e.max,n.origin),n.scale=ea(t)/ea(e),(P3(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Sr(t.min,t.max,n.origin)-n.originPoint,(P3(n.translate)||isNaN(n.translate))&&(n.translate=0)}function _A(n,e,t,r){S6(n.x,e.x,t.x,r?r.originX:void 0),S6(n.y,e.y,t.y,r?r.originY:void 0)}function M6(n,e,t){n.min=t.min+e.min,n.max=n.min+ea(e)}function z2e(n,e,t){M6(n.x,e.x,t.x),M6(n.y,e.y,t.y)}function E6(n,e,t){n.min=e.min-t.min,n.max=n.min+ea(e)}function AA(n,e,t){E6(n.x,e.x,t.x),E6(n.y,e.y,t.y)}function V2e(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Sr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Sr(t,n,r.max):Math.min(n,t)),n}function w6(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function W2e(n,{top:e,left:t,bottom:r,right:i}){return{x:w6(n.x,t,i),y:w6(n.y,e,r)}}function b6(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function j2e(n,e){return{x:b6(n.x,e.x),y:b6(n.y,e.y)}}function X2e(n,e){let t=.5;const r=ea(n),i=ea(e);return i>r?t=IS(e.min,e.max-r,n.min):r>i&&(t=IS(n.min,n.max-i,e.min)),_f(0,1,t)}function J2e(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const B3=.35;function K2e(n=B3){return n===!1?n=0:n===!0&&(n=B3),{x:C6(n,"left","right"),y:C6(n,"top","bottom")}}function C6(n,e,t){return{min:T6(n,e),max:T6(n,t)}}function T6(n,e){return typeof n=="number"?n:n[e]||0}const R6=()=>({translate:0,scale:1,origin:0,originPoint:0}),iy=()=>({x:R6(),y:R6()}),P6=()=>({min:0,max:0}),si=()=>({x:P6(),y:P6()});function Ca(n){return[n("x"),n("y")]}function une({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Y2e({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function q2e(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function U2(n){return n===void 0||n===1}function L3({scale:n,scaleX:e,scaleY:t}){return!U2(n)||!U2(e)||!U2(t)}function Kp(n){return L3(n)||hne(n)||n.z||n.rotate||n.rotateX||n.rotateY}function hne(n){return B6(n.x)||B6(n.y)}function B6(n){return n&&n!=="0%"}function GT(n,e,t){const r=n-t,i=e*r;return t+i}function L6(n,e,t,r,i){return i!==void 0&&(n=GT(n,i,r)),GT(n,t,r)+e}function I3(n,e=0,t=1,r,i){n.min=L6(n.min,e,t,r,i),n.max=L6(n.max,e,t,r,i)}function dne(n,{x:e,y:t}){I3(n.x,e.translate,e.scale,e.originPoint),I3(n.y,t.translate,t.scale,t.originPoint)}function Q2e(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&sy(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,dne(n,o)),r&&Kp(s.latestValues)&&sy(n,s.latestValues))}e.x=I6(e.x),e.y=I6(e.y)}function I6(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function vd(n,e){n.min=n.min+e,n.max=n.max+e}function D6(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Sr(n.min,n.max,s);I3(n,e[t],e[r],o,e.scale)}const Z2e=["x","scaleX","originX"],$2e=["y","scaleY","originY"];function sy(n,e){D6(n.x,e,Z2e),D6(n.y,e,$2e)}function fne(n,e){return une(q2e(n.getBoundingClientRect(),e))}function eIe(n,e,t){const r=fne(n,t),{scroll:i}=e;return i&&(vd(r.x,i.offset.x),vd(r.y,i.offset.y)),r}const pne=({current:n})=>n?n.ownerDocument.defaultView:null,tIe=new WeakMap;class nIe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=si(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(yP(h,"page").point)},s=(h,d)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Cte(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ca(M=>{let g=this.getAxisMotionValue(M).get()||0;if(kc.test(g)){const{projection:_}=this.visualElement;if(_&&_.layout){const A=_.layout.layoutBox[M];A&&(g=ea(A)*(parseFloat(g)/100))}}this.originPoint[M]=g}),v&&Qn.update(()=>v(h,d),!1,!0);const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:S}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:M}=d;if(m&&this.currentDirection===null){this.currentDirection=rIe(M),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,M),this.updateAxis("y",d.point,M),this.visualElement.render(),S&&S(h,d)},a=(h,d)=>this.stop(h,d),l=()=>Ca(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new lne(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:pne(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Qn.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Eb(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=V2e(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&ny(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=W2e(i.layoutBox,t):this.constraints=!1,this.elastic=K2e(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ca(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=J2e(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ny(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=eIe(r,i.root,this.visualElement.getTransformPagePoint());let o=j2e(i.layout.layoutBox,s);if(t){const a=t(Y2e(o));this.hasMutatedConstraints=!!a,a&&(o=une(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Ca(h=>{if(!Eb(h,t,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,v)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(bG(e,r,0,t))}stopAnimation(){Ca(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ca(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ca(t=>{const{drag:r}=this.getProps();if(!Eb(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-Sr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ny(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ca(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=X2e({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ca(o=>{if(!Eb(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Sr(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;tIe.set(this.visualElement,this);const e=this.visualElement.current,t=lh(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ny(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Qu(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ca(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=B3,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Eb(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function rIe(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class iIe extends Ff{constructor(e){super(e),this.removeGroupControls=Gr,this.removeListeners=Gr,this.controls=new nIe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gr}unmount(){this.removeGroupControls(),this.removeListeners()}}const F6=n=>(e,t)=>{n&&Qn.update(()=>n(e,t))};class sIe extends Ff{constructor(){super(...arguments),this.removePointerDownListener=Gr}onPointerDown(e){this.session=new lne(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pne(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:F6(e),onStart:F6(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Qn.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=lh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function oIe(){const n=be.useContext(fP);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=be.useId();return be.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const vC={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function N6(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const M1={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ht.test(n))n=parseFloat(n);else return n;const t=N6(n,e.target.x),r=N6(n,e.target.y);return`${t}% ${r}%`}},aIe={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Af.parse(n);if(i.length>5)return r;const s=Af.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Sr(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class lIe extends za.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;mBe(cIe),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),vC.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Qn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function mne(n){const[e,t]=oIe(),r=be.useContext(dG);return za.createElement(lIe,{...n,layoutGroup:r,switchLayoutGroup:be.useContext(ute),isPresent:e,safeToRemove:t})}const cIe={borderRadius:{...M1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:M1,borderTopRightRadius:M1,borderBottomLeftRadius:M1,borderBottomRightRadius:M1,boxShadow:aIe},gne=["TopLeft","TopRight","BottomLeft","BottomRight"],uIe=gne.length,U6=n=>typeof n=="string"?parseFloat(n):n,O6=n=>typeof n=="number"||Ht.test(n);function hIe(n,e,t,r,i,s){i?(n.opacity=Sr(0,t.opacity!==void 0?t.opacity:1,dIe(r)),n.opacityExit=Sr(e.opacity!==void 0?e.opacity:1,0,fIe(r))):s&&(n.opacity=Sr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<uIe;o++){const a=`border${gne[o]}Radius`;let l=k6(e,a),u=k6(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||O6(l)===O6(u)?(n[a]=Math.max(Sr(U6(l),U6(u),r),0),(kc.test(u)||kc.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=Sr(e.rotate||0,t.rotate||0,r))}function k6(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const dIe=vne(0,.5,kte),fIe=vne(.5,.95,Gr);function vne(n,e,t){return r=>r<n?0:r>e?1:t(IS(n,e,r))}function G6(n,e){n.min=e.min,n.max=e.max}function Ma(n,e){G6(n.x,e.x),G6(n.y,e.y)}function H6(n,e,t,r,i){return n-=e,n=GT(n,1/t,r),i!==void 0&&(n=GT(n,1/i,r)),n}function pIe(n,e=0,t=1,r=.5,i,s=n,o=n){if(kc.test(e)&&(e=parseFloat(e),e=Sr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Sr(s.min,s.max,r);n===s&&(a-=e),n.min=H6(n.min,e,t,a,i),n.max=H6(n.max,e,t,a,i)}function z6(n,e,[t,r,i],s,o){pIe(n,e[t],e[r],e[i],e.scale,s,o)}const mIe=["x","scaleX","originX"],gIe=["y","scaleY","originY"];function V6(n,e,t,r){z6(n.x,e,mIe,t?t.x:void 0,r?r.x:void 0),z6(n.y,e,gIe,t?t.y:void 0,r?r.y:void 0)}function W6(n){return n.translate===0&&n.scale===1}function yne(n){return W6(n.x)&&W6(n.y)}function vIe(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function xne(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function j6(n){return ea(n.x)/ea(n.y)}class yIe{constructor(){this.members=[]}add(e){CG(this.members,e),e.scheduleRender()}remove(e){if(TG(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function X6(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:u,rotateY:h}=t;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const xIe=(n,e)=>n.depth-e.depth;class _Ie{constructor(){this.children=[],this.isDirty=!1}add(e){CG(this.children,e),this.isDirty=!0}remove(e){TG(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(xIe),this.isDirty=!1,this.children.forEach(e)}}function AIe(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Mh(r),n(s-e))};return Qn.read(r,!0),()=>Mh(r)}function SIe(n){window.MotionDebug&&window.MotionDebug.record(n)}function MIe(n){return n instanceof SVGElement&&n.tagName!=="svg"}function EIe(n,e,t){const r=yo(n)?n:ix(n);return r.start(bG("",r,e,t)),r.animation}const J6=["","X","Y","Z"],wIe={visibility:"hidden"},K6=1e3;let bIe=0;const Yp={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function _ne({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=bIe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yp.totalNodes=Yp.resolvedTargetDeltas=Yp.recalculatedProjection=0,this.nodes.forEach(RIe),this.nodes.forEach(DIe),this.nodes.forEach(FIe),this.nodes.forEach(PIe),SIe(Yp)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _Ie)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new RG),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=MIe(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=AIe(p,250),vC.hasAnimatedSinceResize&&(vC.hasAnimatedSinceResize=!1,this.nodes.forEach(q6))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||GIe,{onLayoutAnimationStart:M,onLayoutAnimationComplete:g}=h.getProps(),_=!this.targetLayout||!xne(this.targetLayout,v)||m,A=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,A);const w={...wG(S,"layout"),onPlay:M,onComplete:g};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else p||q6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Mh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NIe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Y6);return}this.isUpdating||this.nodes.forEach(LIe),this.isUpdating=!1,this.nodes.forEach(IIe),this.nodes.forEach(CIe),this.nodes.forEach(TIe),this.clearAllSnapshots();const a=performance.now();As.delta=_f(0,1e3/60,a-As.timestamp),As.timestamp=a,As.isProcessing=!0,C2.update.process(As),C2.preRender.process(As),C2.render.process(As),As.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(BIe),this.sharedNodes.forEach(UIe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=si(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!yne(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Kp(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),HIe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return si();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(vd(a.x,l.offset.x),vd(a.y,l.offset.y)),a}removeElementScroll(o){const a=si();Ma(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){Ma(a,o);const{scroll:p}=this.root;p&&(vd(a.x,-p.offset.x),vd(a.y,-p.offset.y))}vd(a.x,h.offset.x),vd(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=si();Ma(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&sy(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Kp(h.latestValues)&&sy(l,h.latestValues)}return Kp(this.latestValues)&&sy(l,this.latestValues),l}removeTransform(o){const a=si();Ma(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Kp(u.latestValues))continue;L3(u.latestValues)&&u.updateSnapshot();const h=si(),d=u.measurePageBox();Ma(h,d),V6(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Kp(this.latestValues)&&V6(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==As.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=As.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=si(),this.relativeTargetOrigin=si(),AA(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ma(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=si(),this.targetWithTransforms=si()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),z2e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ma(this.target,this.layout.layoutBox),dne(this.target,this.targetDelta)):Ma(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=si(),this.relativeTargetOrigin=si(),AA(this.relativeTargetOrigin,this.target,m.target),Ma(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yp.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||L3(this.parent.latestValues)||hne(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===As.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Ma(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;Q2e(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=iy(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=iy(),this.projectionDeltaWithTransform=iy());const S=this.projectionTransform;_A(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=X6(this.projectionDelta,this.treeScale),(this.projectionTransform!==S||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Yp.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},d=iy();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=si(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,S=m!==v,M=this.getStack(),g=!M||M.members.length<=1,_=!!(S&&!g&&this.options.crossfade===!0&&!this.path.some(kIe));this.animationProgress=0;let A;this.mixTargetDelta=w=>{const C=w/1e3;Q6(d.x,o.x,C),Q6(d.y,o.y,C),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(AA(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OIe(this.relativeTarget,this.relativeTargetOrigin,p,C),A&&vIe(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=si()),Ma(A,this.relativeTarget)),S&&(this.animationValues=h,hIe(h,u,this.latestValues,C,_,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Mh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qn.update(()=>{vC.hasAnimatedSinceResize=!0,this.currentAnimation=EIe(0,K6,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(K6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&Ane(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||si();const d=ea(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=ea(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Ma(a,l),sy(a,h),_A(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new yIe),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<J6.length;h++){const d="rotate"+J6[h];l[d]&&(u[d]=l[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wIe;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=gC(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=gC(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Kp(this.latestValues)&&(S.transform=h?h({},""):"none",this.hasProjected=!1),S}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=X6(this.projectionDeltaWithTransform,this.treeScale,p),h&&(u.transform=h(p,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in IT){if(p[S]===void 0)continue;const{correct:M,applyTo:g}=IT[S],_=u.transform==="none"?p[S]:M(p[S],d);if(g){const A=g.length;for(let w=0;w<A;w++)u[g[w]]=_}else u[S]=_}return this.options.layoutId&&(u.pointerEvents=d===this?gC(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Y6),this.root.sharedNodes.clear()}}}function CIe(n){n.updateLayout()}function TIe(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Ca(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=ea(p);p.min=r[d].min,p.max=p.min+m}):Ane(s,t.layoutBox,r)&&Ca(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=ea(r[d]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+m)});const a=iy();_A(a,r,t.layoutBox);const l=iy();o?_A(l,n.applyTransform(i,!0),t.measuredBox):_A(l,r,t.layoutBox);const u=!yne(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const v=si();AA(v,t.layoutBox,p.layoutBox);const S=si();AA(S,r,m.layoutBox),xne(v,S)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=S,n.relativeTargetOrigin=v,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function RIe(n){Yp.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function PIe(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function BIe(n){n.clearSnapshot()}function Y6(n){n.clearMeasurements()}function LIe(n){n.isLayoutDirty=!1}function IIe(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function q6(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function DIe(n){n.resolveTargetDelta()}function FIe(n){n.calcProjection()}function NIe(n){n.resetRotation()}function UIe(n){n.removeLeadSnapshot()}function Q6(n,e,t){n.translate=Sr(e.translate,0,t),n.scale=Sr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Z6(n,e,t,r){n.min=Sr(e.min,t.min,r),n.max=Sr(e.max,t.max,r)}function OIe(n,e,t,r){Z6(n.x,e.x,t.x,r),Z6(n.y,e.y,t.y,r)}function kIe(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const GIe={duration:.45,ease:[.4,0,.1,1]},$6=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),eW=$6("applewebkit/")&&!$6("chrome/")?Math.round:Gr;function tW(n){n.min=eW(n.min),n.max=eW(n.max)}function HIe(n){tW(n.x),tW(n.y)}function Ane(n,e,t){return n==="position"||n==="preserve-aspect"&&!P3(j6(e),j6(t),.2)}const zIe=_ne({attachResizeListener:(n,e)=>Qu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),O2={current:void 0},Sne=_ne({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!O2.current){const n=new zIe({});n.mount(window),n.setOptions({layoutScroll:!0}),O2.current=n}return O2.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),VIe={pan:{Feature:sIe},drag:{Feature:iIe,ProjectionNode:Sne,MeasureLayout:mne}},WIe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function jIe(n){const e=WIe.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function D3(n,e,t=1){const[r,i]=jIe(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return ine(o)?parseFloat(o):o}else return M3(i)?D3(i,e,t+1):i}function XIe(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!M3(s))return;const o=D3(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!M3(s))continue;const o=D3(s,r);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const JIe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Mne=n=>JIe.has(n),KIe=n=>Object.keys(n).some(Mne),nW=n=>n===bg||n===Ht,rW=(n,e)=>parseFloat(n.split(", ")[e]),iW=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return rW(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?rW(s[1],n):0}},YIe=new Set(["x","y","z"]),qIe=BM.filter(n=>!YIe.has(n));function QIe(n){const e=[];return qIe.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const sx={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:iW(4,13),y:iW(5,14)};sx.translateX=sx.x;sx.translateY=sx.y;const ZIe=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=sx[u](r,s)}),e.render();const l=e.measureViewportBox();return t.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),n[u]=sx[u](l,s)}),n},$Ie=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(Mne);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=n.getValue(l);if(!n.hasValue(l))return;let h=t[l],d=S1(h);const p=e[l];let m;if(FT(p)){const v=p.length,S=p[0]===null?1:0;h=p[S],d=S1(h);for(let M=S;M<v&&p[M]!==null;M++)m?_G(S1(p[M])===m):m=S1(p[M])}else m=S1(p);if(d!==m)if(nW(d)&&nW(m)){const v=u.get();typeof v=="string"&&u.set(parseFloat(v)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===Ht&&(e[l]=p.map(parseFloat))}else d!=null&&d.transform&&(m!=null&&m.transform)&&(h===0||p===0)?h===0?u.set(m.transform(h)):e[l]=d.transform(p):(o||(s=QIe(n),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=ZIe(e,n,a);return s.length&&s.forEach(([h,d])=>{n.getValue(h).set(d)}),n.render(),pP&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function eDe(n,e,t,r){return KIe(e)?$Ie(n,e,t,r):{target:e,transitionEnd:r}}const tDe=(n,e,t,r)=>{const i=XIe(n,e,r);return e=i.target,r=i.transitionEnd,eDe(n,e,t,r)},F3={current:null},Ene={current:!1};function nDe(){if(Ene.current=!0,!!pP)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>F3.current=n.matches;n.addListener(e),e()}else F3.current=!1}function rDe(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],o=t[i];if(yo(s))n.addValue(i,s),kT(r)&&r.add(i);else if(yo(o))n.addValue(i,ix(s,{owner:n})),kT(r)&&r.remove(i);else if(o!==s)if(n.hasValue(i)){const a=n.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,ix(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const sW=new WeakMap,wne=Object.keys(LS),iDe=wne.length,oW=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],sDe=hG.length;class oDe{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Qn.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=gP(t),this.isVariantNode=cte(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(t,{});for(const d in h){const p=h[d];a[d]!==void 0&&yo(p)&&(p.set(a[d],!1),kT(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,sW.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Ene.current||nDe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:F3.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){sW.delete(this.current),this.projection&&this.projection.unmount(),Mh(this.notifyUpdate),Mh(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=wg.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Qn.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let o,a;for(let l=0;l<iDe;l++){const u=wne[l],{isEnabled:h,Feature:d,ProjectionNode:p,MeasureLayout:m}=LS[u];p&&(o=p),h(t)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:h,dragConstraints:d,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!h||d&&ny(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):si()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<oW.length;r++){const i=oW[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=rDe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<sDe;r++){const i=hG[r],s=this.props[i];(BS(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=ix(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=xG(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!yo(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new RG),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class bne extends oDe{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let o=M2e(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),o&&(o=i(o))),s){A2e(this,r,o);const a=tDe(this,r,o,t);t=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:t,...r}}}function aDe(n){return window.getComputedStyle(n)}class lDe extends bne{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(wg.has(t)){const r=EG(t);return r&&r.default||0}else{const r=aDe(e),i=(fte(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return fne(e,t)}build(e,t,r,i){pG(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return yG(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;yo(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){xte(e,t,r,i)}}class cDe extends bne{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(wg.has(t)){const r=EG(t);return r&&r.default||0}return t=_te.has(t)?t:cG(t),e.getAttribute(t)}measureInstanceViewportBox(){return si()}scrapeMotionValuesFromProps(e,t){return Ste(e,t)}build(e,t,r,i){gG(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){Ate(e,t,r,i)}mount(e){this.isSVGTag=vG(e.tagName),super.mount(e)}}const uDe=(n,e)=>fG(n)?new cDe(e,{enableHardwareAcceleration:!1}):new lDe(e,{enableHardwareAcceleration:!0}),hDe={layout:{ProjectionNode:Sne,MeasureLayout:mne}},dDe={...O2e,...iLe,...VIe,...hDe},co=fBe((n,e)=>jBe(n,e,dDe,uDe));function Cne(){const n=be.useRef(!1);return lG(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function fDe(){const n=Cne(),[e,t]=be.useState(0),r=be.useCallback(()=>{n.current&&t(e+1)},[e]);return[be.useCallback(()=>Qn.postRender(r),[r]),e]}class pDe extends be.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function mDe({children:n,isPresent:e}){const t=be.useId(),r=be.useRef(null),i=be.useRef({width:0,height:0,top:0,left:0});return be.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=t;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),be.createElement(pDe,{isPresent:e,childRef:r,sizeRef:i},be.cloneElement(n,{ref:r}))}const k2=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=Mte(gDe),l=be.useId(),u=be.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),s?void 0:[t]);return be.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[t]),be.useEffect(()=>{!t&&!a.size&&r&&r()},[t]),o==="popLayout"&&(n=be.createElement(mDe,{isPresent:t},n)),be.createElement(fP.Provider,{value:u},n)};function gDe(){return new Map}function vDe(n){return be.useEffect(()=>()=>n(),[])}const qp=n=>n.key||"";function yDe(n,e){n.forEach(t=>{const r=qp(t);e.set(r,t)})}function xDe(n){const e=[];return be.Children.forEach(n,t=>{be.isValidElement(t)&&e.push(t)}),e}const N3=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=be.useContext(dG).forceRender||fDe()[0],l=Cne(),u=xDe(n);let h=u;const d=be.useRef(new Map).current,p=be.useRef(h),m=be.useRef(new Map).current,v=be.useRef(!0);if(lG(()=>{v.current=!1,yDe(u,m),p.current=h}),vDe(()=>{v.current=!0,m.clear(),d.clear()}),v.current)return be.createElement(be.Fragment,null,h.map(_=>be.createElement(k2,{key:qp(_),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},_)));h=[...h];const S=p.current.map(qp),M=u.map(qp),g=S.length;for(let _=0;_<g;_++){const A=S[_];M.indexOf(A)===-1&&!d.has(A)&&d.set(A,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((_,A)=>{if(M.indexOf(A)!==-1)return;const w=m.get(A);if(!w)return;const C=S.indexOf(A);let R=_;if(!R){const L=()=>{d.delete(A);const I=Array.from(m.keys()).filter(T=>!M.includes(T));if(I.forEach(T=>m.delete(T)),p.current=u.filter(T=>{const B=qp(T);return B===A||I.includes(B)}),!d.size){if(l.current===!1)return;a(),r&&r()}};R=be.createElement(k2,{key:qp(w),isPresent:!1,onExitComplete:L,custom:e,presenceAffectsLayout:s,mode:o},w),d.set(A,R)}h.splice(C,0,R)}),h=h.map(_=>{const A=_.key;return d.has(A)?_:be.createElement(k2,{key:qp(_),isPresent:!0,presenceAffectsLayout:s,mode:o},_)}),be.createElement(be.Fragment,null,d.size?h:h.map(_=>be.cloneElement(_)))},aW=800;function Tne(n){const e=document.getElementById(n);if(!e)return;const t=e.offsetTop,r=window.scrollY,i=t-r;let s=null;function o(l,u,h,d){return l/=d/2,l<1?h/2*l*l*l+u:(l-=2,h/2*(l*l*l+2)+u)}function a(l){s||(s=l);const u=l-s,h=o(u,r,i,aW);window.scrollTo(0,h),u<aW&&requestAnimationFrame(a)}requestAnimationFrame(a)}const lW=[{id:"story",label:"ストーリー"},{id:"profile",label:"プロフィール"},{id:"content",label:"コンテンツ"},{id:"link",label:"リンク"}];function _De({onSelect:n,isFirst:e,setMenuOpen:t}){const[r,i]=be.useState(!1),s=()=>i(l=>!l);be.useEffect(()=>(document.body.style.overflow=r?"hidden":"",t==null||t(r),()=>document.body.style.overflow=""),[r,t]);const o=l=>{i(!1),n(l),Tne(l)},a={hidden:{y:-80,opacity:0},visible:{y:0,opacity:1}};return gt.jsx(N3,{children:gt.jsxs(co.header,{className:`header ${e?"full":"minimal"}`,initial:"hidden",animate:"visible",exit:"hidden",variants:a,transition:{duration:.4},children:[gt.jsx("img",{src:"./mokomoko-pastel/img/logo.png",alt:"logo",className:`logo ${e?"logo-large":""}`,onClick:()=>o("first")}),e&&gt.jsx("nav",{className:"nav desktop-only",children:lW.map(l=>gt.jsx("span",{className:"nav-link",onClick:()=>o(l.id),children:l.label},l.id))}),!e&&!r&&gt.jsx("div",{className:"hamburger",onClick:s,children:gt.jsx(rBe,{})}),gt.jsx(N3,{children:r&&gt.jsxs(co.div,{className:"nav-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[gt.jsx("button",{className:"overlay-close",onClick:s,children:gt.jsx(ste,{size:24})}),lW.map(l=>gt.jsx("span",{className:"overlay-link",onClick:()=>o(l.id),children:l.label},l.id))]})})]},e?"full":"minimal")})}function ADe({id:n,title:e,children:t,motion:{variants:r,transition:i}={},styles:s={}}){return gt.jsx(co.section,{id:n,className:"section",variants:r,transition:i,initial:"hidden",animate:"visible",style:s,children:gt.jsx(t,{})})}function SDe(){return gt.jsx("div",{className:"first-content"})}const cW={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:20,duration:.4}}},MDe={hidden:{},visible:{transition:{staggerChildren:.05}}};function EDe(){const n="ストーリー",e=`ここにストーリーの内容を入力します。これはダミーテキストです。
物語ははるか昔、静かな村で始まりました。村人たちは毎朝
陽光のもとで作物を育て、家族とともに穏やかな日々を送りました。
しかしある日、空が暗く覆われ、遠くの山から恐ろしい影が現れて…

このダミーテキストは物語のサンプルとして表示しています。
必要に応じて内容を差し替えてください。`,t=r=>r.split("");return gt.jsx("div",{className:"story-content-container",children:gt.jsxs(co.div,{className:"story-text-wrapper",variants:MDe,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.8},children:[gt.jsx("h3",{className:"story-heading",children:t(n).map((r,i)=>gt.jsx(co.span,{variants:cW,style:{display:"inline-block"},children:r},`heading-char-${i}`))}),gt.jsx("p",{className:"story-body",children:t(e).map((r,i)=>r===`
`?gt.jsx("br",{},`body-br-${i}`):gt.jsx(co.span,{variants:cW,style:{display:"inline-block",whiteSpace:"pre-wrap"},children:r},`body-char-${i}`))})]})})}const wDe=[{title:"スキル",content:"プログラミング、デザイン、プロジェクト管理などを行います。",color:"#EBADAD"},{title:"経歴",content:"2020年〜現在: Webエンジニアとして多様なプロジェクトに参加。",color:"#EBEBAD"},{title:"趣味",content:"写真撮影、旅行、読書を楽しんでいます。",color:"#ADEBAD"},{title:"好きな言語",content:"JavaScript, Python, Rust など。",color:"#ADEBEB"},{title:"目標",content:"フルスタックエンジニアとして活躍し、社会に貢献すること。",color:"#ADADEB"},{title:"連絡先",content:`メール: example@example.com
Twitter: @example`,color:"#EBADEB"}];function bDe(){const[n,e]=be.useState(null),t=r=>{e(n===r?null:r)};return gt.jsx("div",{className:"profile-container",children:wDe.map((r,i)=>{const o=(i*60-90)*Math.PI/180,a=30,l=50+a*Math.cos(o),u=50+a*Math.sin(o),h=n===i;return gt.jsxs(co.div,{className:"circle-panel",onClick:()=>t(i),style:{position:"absolute",backgroundColor:r.color,opacity:.8,cursor:"pointer"},animate:{left:h?"50%":`${l}%`,top:h?"50%":`${u}%`,x:"-50%",y:"-50%",width:h?400:200,height:h?400:200},transition:{type:"spring",stiffness:260,damping:20},children:[gt.jsx(co.div,{className:"panel-title",animate:{fontSize:h?18:14},transition:{duration:.3},children:r.title}),h&&gt.jsx(co.div,{className:"panel-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:r.content.split(`
`).map((d,p)=>d===""?gt.jsx("br",{},p):gt.jsx("p",{children:d},p))})]},i)})})}var U3={exports:{}},hg={},O3={exports:{}},ec={},k3={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var t="none",r="contents",i=/^(input|select|textarea|button|object|iframe)$/;function s(d,p){return p.getPropertyValue("overflow")!=="visible"||d.scrollWidth<=0&&d.scrollHeight<=0}function o(d){var p=d.offsetWidth<=0&&d.offsetHeight<=0;if(p&&!d.innerHTML)return!0;try{var m=window.getComputedStyle(d),v=m.getPropertyValue("display");return p?v!==r&&s(d,m):v===t}catch{return console.warn("Failed to inspect element style"),!1}}function a(d){for(var p=d,m=d.getRootNode&&d.getRootNode();p&&p!==document.body;){if(m&&p===m&&(p=m.host.parentNode),o(p))return!1;p=p.parentNode}return!0}function l(d,p){var m=d.nodeName.toLowerCase(),v=i.test(m)&&!d.disabled||m==="a"&&d.href||p;return v&&a(d)}function u(d){var p=d.getAttribute("tabindex");p===null&&(p=void 0);var m=isNaN(p);return(m||p>=0)&&l(d,!m)}function h(d){var p=[].slice.call(d.querySelectorAll("*"),0).reduce(function(m,v){return m.concat(v.shadowRoot?h(v.shadowRoot):[v])},[]);return p.filter(u)}n.exports=e.default})(k3,k3.exports);var Rne=k3.exports;Object.defineProperty(ec,"__esModule",{value:!0});ec.resetState=PDe;ec.log=BDe;ec.handleBlur=DS;ec.handleFocus=FS;ec.markForFocusLater=LDe;ec.returnFocus=IDe;ec.popWithoutFocus=DDe;ec.setupScopedFocus=FDe;ec.teardownScopedFocus=NDe;var CDe=Rne,TDe=RDe(CDe);function RDe(n){return n&&n.__esModule?n:{default:n}}var ox=[],oy=null,G3=!1;function PDe(){ox=[]}function BDe(){}function DS(){G3=!0}function FS(){if(G3){if(G3=!1,!oy)return;setTimeout(function(){if(!oy.contains(document.activeElement)){var n=(0,TDe.default)(oy)[0]||oy;n.focus()}},0)}}function LDe(){ox.push(document.activeElement)}function IDe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{ox.length!==0&&(e=ox.pop(),e.focus({preventScroll:n}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function DDe(){ox.length>0&&ox.pop()}function FDe(n){oy=n,window.addEventListener?(window.addEventListener("blur",DS,!1),document.addEventListener("focus",FS,!0)):(window.attachEvent("onBlur",DS),document.attachEvent("onFocus",FS))}function NDe(){oy=null,window.addEventListener?(window.removeEventListener("blur",DS),document.removeEventListener("focus",FS)):(window.detachEvent("onBlur",DS),document.detachEvent("onFocus",FS))}var H3={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=Rne,r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return a.activeElement.shadowRoot?s(a.activeElement.shadowRoot):a.activeElement}function o(a,l){var u=(0,r.default)(a);if(!u.length){l.preventDefault();return}var h=void 0,d=l.shiftKey,p=u[0],m=u[u.length-1],v=s();if(a===v){if(!d)return;h=m}if(m===v&&!d&&(h=p),p===v&&d&&(h=m),h){l.preventDefault(),h.focus();return}var S=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),M=S!=null&&S[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(M){var g=u.indexOf(v);if(g>-1&&(g+=d?-1:1),h=u[g],typeof h>"u"){l.preventDefault(),h=d?m:p,h.focus();return}l.preventDefault(),h.focus()}}n.exports=e.default})(H3,H3.exports);var UDe=H3.exports,tc={},ODe=function(){},kDe=ODe,Fl={},Pne={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(n){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),t={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};n.exports?n.exports=t:window.ExecutionEnvironment=t})()})(Pne);var GDe=Pne.exports;Object.defineProperty(Fl,"__esModule",{value:!0});Fl.canUseDOM=Fl.SafeNodeList=Fl.SafeHTMLCollection=void 0;var HDe=GDe,zDe=VDe(HDe);function VDe(n){return n&&n.__esModule?n:{default:n}}var _P=zDe.default,WDe=_P.canUseDOM?window.HTMLElement:{};Fl.SafeHTMLCollection=_P.canUseDOM?window.HTMLCollection:{};Fl.SafeNodeList=_P.canUseDOM?window.NodeList:{};Fl.canUseDOM=_P.canUseDOM;Fl.default=WDe;Object.defineProperty(tc,"__esModule",{value:!0});tc.resetState=YDe;tc.log=qDe;tc.assertNodeList=Bne;tc.setElement=QDe;tc.validateElement=PG;tc.hide=ZDe;tc.show=$De;tc.documentNotReadyOrSSRTesting=eFe;var jDe=kDe,XDe=KDe(jDe),JDe=Fl;function KDe(n){return n&&n.__esModule?n:{default:n}}var Ia=null;function YDe(){Ia&&(Ia.removeAttribute?Ia.removeAttribute("aria-hidden"):Ia.length!=null?Ia.forEach(function(n){return n.removeAttribute("aria-hidden")}):document.querySelectorAll(Ia).forEach(function(n){return n.removeAttribute("aria-hidden")})),Ia=null}function qDe(){}function Bne(n,e){if(!n||!n.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function QDe(n){var e=n;if(typeof e=="string"&&JDe.canUseDOM){var t=document.querySelectorAll(e);Bne(t,e),e=t}return Ia=e||Ia,Ia}function PG(n){var e=n||Ia;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,XDe.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function ZDe(n){var e=!0,t=!1,r=void 0;try{for(var i=PG(n)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.setAttribute("aria-hidden","true")}}catch(a){t=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}function $De(n){var e=!0,t=!1,r=void 0;try{for(var i=PG(n)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.removeAttribute("aria-hidden")}}catch(a){t=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}function eFe(){Ia=null}var Cx={};Object.defineProperty(Cx,"__esModule",{value:!0});Cx.resetState=tFe;Cx.log=nFe;var SA={},MA={};function uW(n,e){n.classList.remove(e)}function tFe(){var n=document.getElementsByTagName("html")[0];for(var e in SA)uW(n,SA[e]);var t=document.body;for(var r in MA)uW(t,MA[r]);SA={},MA={}}function nFe(){}var rFe=function(e,t){return e[t]||(e[t]=0),e[t]+=1,t},iFe=function(e,t){return e[t]&&(e[t]-=1),t},sFe=function(e,t,r){r.forEach(function(i){rFe(t,i),e.add(i)})},oFe=function(e,t,r){r.forEach(function(i){iFe(t,i),t[i]===0&&e.remove(i)})};Cx.add=function(e,t){return sFe(e.classList,e.nodeName.toLowerCase()=="html"?SA:MA,t.split(" "))};Cx.remove=function(e,t){return oFe(e.classList,e.nodeName.toLowerCase()=="html"?SA:MA,t.split(" "))};var Tx={};Object.defineProperty(Tx,"__esModule",{value:!0});Tx.log=lFe;Tx.resetState=cFe;function aFe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Lne=function n(){var e=this;aFe(this,n),this.register=function(t){e.openInstances.indexOf(t)===-1&&(e.openInstances.push(t),e.emit("register"))},this.deregister=function(t){var r=e.openInstances.indexOf(t);r!==-1&&(e.openInstances.splice(r,1),e.emit("deregister"))},this.subscribe=function(t){e.subscribers.push(t)},this.emit=function(t){e.subscribers.forEach(function(r){return r(t,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},HT=new Lne;function lFe(){console.log("portalOpenInstances ----------"),console.log(HT.openInstances.length),HT.openInstances.forEach(function(n){return console.log(n)}),console.log("end portalOpenInstances ----------")}function cFe(){HT=new Lne}Tx.default=HT;var BG={};Object.defineProperty(BG,"__esModule",{value:!0});BG.resetState=fFe;BG.log=pFe;var uFe=Tx,hFe=dFe(uFe);function dFe(n){return n&&n.__esModule?n:{default:n}}var xs=void 0,xl=void 0,km=[];function fFe(){for(var n=[xs,xl],e=0;e<n.length;e++){var t=n[e];t&&t.parentNode&&t.parentNode.removeChild(t)}xs=xl=null,km=[]}function pFe(){console.log("bodyTrap ----------"),console.log(km.length);for(var n=[xs,xl],e=0;e<n.length;e++){var t=n[e],r=t||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function hW(){km.length!==0&&km[km.length-1].focusContent()}function mFe(n,e){!xs&&!xl&&(xs=document.createElement("div"),xs.setAttribute("data-react-modal-body-trap",""),xs.style.position="absolute",xs.style.opacity="0",xs.setAttribute("tabindex","0"),xs.addEventListener("focus",hW),xl=xs.cloneNode(),xl.addEventListener("focus",hW)),km=e,km.length>0?(document.body.firstChild!==xs&&document.body.insertBefore(xs,document.body.firstChild),document.body.lastChild!==xl&&document.body.appendChild(xl)):(xs.parentElement&&xs.parentElement.removeChild(xs),xl.parentElement&&xl.parentElement.removeChild(xl))}hFe.default.subscribe(mFe);(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(z){for(var X=1;X<arguments.length;X++){var te=arguments[X];for(var O in te)Object.prototype.hasOwnProperty.call(te,O)&&(z[O]=te[O])}return z},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},i=function(){function z(X,te){for(var O=0;O<te.length;O++){var D=te[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(X,D.key,D)}}return function(X,te,O){return te&&z(X.prototype,te),O&&z(X,O),X}}(),s=be,o=tte,a=C(o),l=ec,u=w(l),h=UDe,d=C(h),p=tc,m=w(p),v=Cx,S=w(v),M=Fl,g=C(M),_=Tx,A=C(_);function w(z){if(z&&z.__esModule)return z;var X={};if(z!=null)for(var te in z)Object.prototype.hasOwnProperty.call(z,te)&&(X[te]=z[te]);return X.default=z,X}function C(z){return z&&z.__esModule?z:{default:z}}function R(z,X){if(!(z instanceof X))throw new TypeError("Cannot call a class as a function")}function L(z,X){if(!z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:z}function I(z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);z.prototype=Object.create(X&&X.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(z,X):z.__proto__=X)}var T={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},B=function(X){return X.code==="Tab"||X.keyCode===9},H=function(X){return X.code==="Escape"||X.keyCode===27},K=0,j=function(z){I(X,z);function X(te){R(this,X);var O=L(this,(X.__proto__||Object.getPrototypeOf(X)).call(this,te));return O.setOverlayRef=function(D){O.overlay=D,O.props.overlayRef&&O.props.overlayRef(D)},O.setContentRef=function(D){O.content=D,O.props.contentRef&&O.props.contentRef(D)},O.afterClose=function(){var D=O.props,V=D.appElement,G=D.ariaHideApp,q=D.htmlOpenClassName,re=D.bodyOpenClassName,Y=D.parentSelector,ae=Y&&Y().ownerDocument||document;re&&S.remove(ae.body,re),q&&S.remove(ae.getElementsByTagName("html")[0],q),G&&K>0&&(K-=1,K===0&&m.show(V)),O.props.shouldFocusAfterRender&&(O.props.shouldReturnFocusAfterClose?(u.returnFocus(O.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),O.props.onAfterClose&&O.props.onAfterClose(),A.default.deregister(O)},O.open=function(){O.beforeOpen(),O.state.afterOpen&&O.state.beforeClose?(clearTimeout(O.closeTimer),O.setState({beforeClose:!1})):(O.props.shouldFocusAfterRender&&(u.setupScopedFocus(O.node),u.markForFocusLater()),O.setState({isOpen:!0},function(){O.openAnimationFrame=requestAnimationFrame(function(){O.setState({afterOpen:!0}),O.props.isOpen&&O.props.onAfterOpen&&O.props.onAfterOpen({overlayEl:O.overlay,contentEl:O.content})})}))},O.close=function(){O.props.closeTimeoutMS>0?O.closeWithTimeout():O.closeWithoutTimeout()},O.focusContent=function(){return O.content&&!O.contentHasFocus()&&O.content.focus({preventScroll:!0})},O.closeWithTimeout=function(){var D=Date.now()+O.props.closeTimeoutMS;O.setState({beforeClose:!0,closesAt:D},function(){O.closeTimer=setTimeout(O.closeWithoutTimeout,O.state.closesAt-Date.now())})},O.closeWithoutTimeout=function(){O.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},O.afterClose)},O.handleKeyDown=function(D){B(D)&&(0,d.default)(O.content,D),O.props.shouldCloseOnEsc&&H(D)&&(D.stopPropagation(),O.requestClose(D))},O.handleOverlayOnClick=function(D){O.shouldClose===null&&(O.shouldClose=!0),O.shouldClose&&O.props.shouldCloseOnOverlayClick&&(O.ownerHandlesClose()?O.requestClose(D):O.focusContent()),O.shouldClose=null},O.handleContentOnMouseUp=function(){O.shouldClose=!1},O.handleOverlayOnMouseDown=function(D){!O.props.shouldCloseOnOverlayClick&&D.target==O.overlay&&D.preventDefault()},O.handleContentOnClick=function(){O.shouldClose=!1},O.handleContentOnMouseDown=function(){O.shouldClose=!1},O.requestClose=function(D){return O.ownerHandlesClose()&&O.props.onRequestClose(D)},O.ownerHandlesClose=function(){return O.props.onRequestClose},O.shouldBeClosed=function(){return!O.state.isOpen&&!O.state.beforeClose},O.contentHasFocus=function(){return document.activeElement===O.content||O.content.contains(document.activeElement)},O.buildClassName=function(D,V){var G=(typeof V>"u"?"undefined":r(V))==="object"?V:{base:T[D],afterOpen:T[D]+"--after-open",beforeClose:T[D]+"--before-close"},q=G.base;return O.state.afterOpen&&(q=q+" "+G.afterOpen),O.state.beforeClose&&(q=q+" "+G.beforeClose),typeof V=="string"&&V?q+" "+V:q},O.attributesFromObject=function(D,V){return Object.keys(V).reduce(function(G,q){return G[D+"-"+q]=V[q],G},{})},O.state={afterOpen:!1,beforeClose:!1},O.shouldClose=null,O.moveFromContentToOverlay=null,O}return i(X,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(O,D){this.props.isOpen&&!O.isOpen?this.open():!this.props.isOpen&&O.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!D.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var O=this.props,D=O.appElement,V=O.ariaHideApp,G=O.htmlOpenClassName,q=O.bodyOpenClassName,re=O.parentSelector,Y=re&&re().ownerDocument||document;q&&S.add(Y.body,q),G&&S.add(Y.getElementsByTagName("html")[0],G),V&&(K+=1,m.hide(D)),A.default.register(this)}},{key:"render",value:function(){var O=this.props,D=O.id,V=O.className,G=O.overlayClassName,q=O.defaultStyles,re=O.children,Y=V?{}:q.content,ae=G?{}:q.overlay;if(this.shouldBeClosed())return null;var Se={ref:this.setOverlayRef,className:this.buildClassName("overlay",G),style:t({},ae,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},ve=t({id:D,ref:this.setContentRef,style:t({},Y,this.props.style.content),className:this.buildClassName("content",V),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",t({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),W=this.props.contentElement(ve,re);return this.props.overlayElement(Se,W)}}]),X}(s.Component);j.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},j.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(g.default),a.default.instanceOf(M.SafeHTMLCollection),a.default.instanceOf(M.SafeNodeList),a.default.arrayOf(a.default.instanceOf(g.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},e.default=j,n.exports=e.default})(O3,O3.exports);var gFe=O3.exports;function Ine(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function Dne(n){function e(t){var r=this.constructor.getDerivedStateFromProps(n,t);return r??null}this.setState(e.bind(this))}function Fne(n,e){try{var t=this.props,r=this.state;this.props=n,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,r)}finally{this.props=t,this.state=r}}Ine.__suppressDeprecationWarning=!0;Dne.__suppressDeprecationWarning=!0;Fne.__suppressDeprecationWarning=!0;function vFe(n){var e=n.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return n;var t=null,r=null,i=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),t!==null||r!==null||i!==null){var s=n.displayName||n.name,o=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(e.componentWillMount=Ine,e.componentWillReceiveProps=Dne),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=Fne;var a=e.componentDidUpdate;e.componentDidUpdate=function(u,h,d){var p=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;a.call(this,u,h,p)}}return n}const yFe=Object.freeze(Object.defineProperty({__proto__:null,polyfill:vFe},Symbol.toStringTag,{value:"Module"})),xFe=kxe(yFe);Object.defineProperty(hg,"__esModule",{value:!0});hg.bodyOpenClassName=hg.portalClassName=void 0;var dW=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_Fe=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),Nne=be,zT=FM(Nne),AFe=CZ,VT=FM(AFe),SFe=tte,Jt=FM(SFe),MFe=gFe,fW=FM(MFe),EFe=tc,wFe=CFe(EFe),Rd=Fl,pW=FM(Rd),bFe=xFe;function CFe(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function FM(n){return n&&n.__esModule?n:{default:n}}function TFe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function mW(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function RFe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var PFe=hg.portalClassName="ReactModalPortal",BFe=hg.bodyOpenClassName="ReactModal__Body--open",Qp=Rd.canUseDOM&&VT.default.createPortal!==void 0,gW=function(e){return document.createElement(e)},vW=function(){return Qp?VT.default.createPortal:VT.default.unstable_renderSubtreeIntoContainer};function wb(n){return n()}var NM=function(n){RFe(e,n);function e(){var t,r,i,s;TFe(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=mW(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.removePortal=function(){!Qp&&VT.default.unmountComponentAtNode(i.node);var u=wb(i.props.parentSelector);u&&u.contains(i.node)?u.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(u){i.portal=u},i.renderPortal=function(u){var h=vW(),d=h(i,zT.default.createElement(fW.default,dW({defaultStyles:e.defaultStyles},u)),i.node);i.portalRef(d)},r),mW(i,s)}return _Fe(e,[{key:"componentDidMount",value:function(){if(Rd.canUseDOM){Qp||(this.node=gW("div")),this.node.className=this.props.portalClassName;var r=wb(this.props.parentSelector);r.appendChild(this.node),!Qp&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(r){var i=wb(r.parentSelector),s=wb(this.props.parentSelector);return{prevParent:i,nextParent:s}}},{key:"componentDidUpdate",value:function(r,i,s){if(Rd.canUseDOM){var o=this.props,a=o.isOpen,l=o.portalClassName;r.portalClassName!==l&&(this.node.className=l);var u=s.prevParent,h=s.nextParent;h!==u&&(u.removeChild(this.node),h.appendChild(this.node)),!(!r.isOpen&&!a)&&!Qp&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!Rd.canUseDOM||!this.node||!this.portal)){var r=this.portal.state,i=Date.now(),s=r.isOpen&&this.props.closeTimeoutMS&&(r.closesAt||i+this.props.closeTimeoutMS);s?(r.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,s-i)):this.removePortal()}}},{key:"render",value:function(){if(!Rd.canUseDOM||!Qp)return null;!this.node&&Qp&&(this.node=gW("div"));var r=vW();return r(zT.default.createElement(fW.default,dW({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(r){wFe.setElement(r)}}]),e}(Nne.Component);NM.propTypes={isOpen:Jt.default.bool.isRequired,style:Jt.default.shape({content:Jt.default.object,overlay:Jt.default.object}),portalClassName:Jt.default.string,bodyOpenClassName:Jt.default.string,htmlOpenClassName:Jt.default.string,className:Jt.default.oneOfType([Jt.default.string,Jt.default.shape({base:Jt.default.string.isRequired,afterOpen:Jt.default.string.isRequired,beforeClose:Jt.default.string.isRequired})]),overlayClassName:Jt.default.oneOfType([Jt.default.string,Jt.default.shape({base:Jt.default.string.isRequired,afterOpen:Jt.default.string.isRequired,beforeClose:Jt.default.string.isRequired})]),appElement:Jt.default.oneOfType([Jt.default.instanceOf(pW.default),Jt.default.instanceOf(Rd.SafeHTMLCollection),Jt.default.instanceOf(Rd.SafeNodeList),Jt.default.arrayOf(Jt.default.instanceOf(pW.default))]),onAfterOpen:Jt.default.func,onRequestClose:Jt.default.func,closeTimeoutMS:Jt.default.number,ariaHideApp:Jt.default.bool,shouldFocusAfterRender:Jt.default.bool,shouldCloseOnOverlayClick:Jt.default.bool,shouldReturnFocusAfterClose:Jt.default.bool,preventScroll:Jt.default.bool,parentSelector:Jt.default.func,aria:Jt.default.object,data:Jt.default.object,role:Jt.default.string,contentLabel:Jt.default.string,shouldCloseOnEsc:Jt.default.bool,overlayRef:Jt.default.func,contentRef:Jt.default.func,id:Jt.default.string,overlayElement:Jt.default.func,contentElement:Jt.default.func};NM.defaultProps={isOpen:!1,portalClassName:PFe,bodyOpenClassName:BFe,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return zT.default.createElement("div",e,t)},contentElement:function(e,t){return zT.default.createElement("div",e,t)}};NM.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,bFe.polyfill)(NM);hg.default=NM;(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=hg,r=i(t);function i(s){return s&&s.__esModule?s:{default:s}}e.default=r.default,n.exports=e.default})(U3,U3.exports);var LFe=U3.exports;const IFe=vO(LFe);IFe.setAppElement("#root");const DFe=[];function FFe(){const[n,e]=be.useState(!1),[t,r]=be.useState(""),i=be.useRef(null);function s(d){r(d),e(!0)}function o(){i.current&&(i.current.pause(),i.current.currentTime=0),e(!1),r("")}const a={hidden:{},visible:{transition:{staggerChildren:.1}}},l={hidden:{opacity:0,rotateY:90,transformOrigin:"center"},visible:{opacity:1,rotateY:0,transformOrigin:"center",transition:{duration:.5,ease:"easeOut"}}},u={hidden:{opacity:0},visible:{opacity:1}},h={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1}};return gt.jsxs(gt.Fragment,{children:[gt.jsx("div",{className:"content-section-wrapper",children:gt.jsx(co.div,{className:"video-grid",variants:a,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.3},children:DFe.map((d,p)=>gt.jsx(co.div,{className:"video-thumb",onClick:()=>s(d.videoUrl),variants:l,whileHover:{scale:1.05},children:gt.jsx("img",{src:d.thumbnail,alt:`thumb-${p}`,style:{width:"100%",height:"100%",objectFit:"cover"}})},p))})}),gt.jsx(N3,{children:n&&gt.jsx(co.div,{className:"video-overlay",variants:u,initial:"hidden",animate:"visible",exit:"hidden",onClick:o,children:gt.jsxs(co.div,{className:"video-modal",variants:h,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.3},onClick:d=>d.stopPropagation(),children:[gt.jsx("button",{className:"modal-close-btn",onClick:o,children:gt.jsx(ste,{})}),gt.jsx("video",{ref:i,src:t,controls:!0,className:"modal-video"})]})})})]})}function NFe(){const n=[{icon:"/img/icons/x_icon.png",url:"https://github.com/your-username",qr:"/img/icons/x_qr.png",alt:"X",buttonText:"X",buttonIcon:"/img/icons/link_icon.png"},{icon:"/img/icons/instagram_icon.png",url:"https://twitter.com/your-username",qr:"/img/icons/instagram_qr.png",alt:"Instagram",buttonText:"Instagram",buttonIcon:"/img/icons/link_icon.png"},{icon:"/img/icons/line_stamp.png",url:"https://www.linkedin.com/in/your-username",qr:"/img/icons/stamp_qr.png",alt:"LINEスタンプ",buttonText:"LINEスタンプ",buttonIcon:"/img/icons/link_icon.png"}],[e,t]=be.useState(n.map(()=>({flipped:!1,showButton:!1}))),r=a=>{t(l=>l.map((u,h)=>h===a?{flipped:!0,showButton:!0}:u))},i=a=>{t(l=>l.map((u,h)=>h===a?{flipped:!1,showButton:!1}:u))},s=a=>{window.open(a,"_blank","noopener,noreferrer")},o={y:-10,transition:{type:"spring",stiffness:300,damping:20}};return gt.jsx("div",{className:"link-section-wrapper",children:n.map((a,l)=>{const{flipped:u,showButton:h}=e[l];return gt.jsxs("div",{className:"link-item",children:[gt.jsxs(co.div,{className:"card-container",animate:{rotateY:u?180:0},transition:{duration:.6,ease:"easeInOut"},whileHover:o,children:[gt.jsx("div",{className:"card-face card-front",onClick:()=>r(l),children:gt.jsx("img",{src:a.icon,alt:a.alt})}),gt.jsx("div",{className:"card-face card-back",onClick:()=>i(l),children:gt.jsx("img",{src:a.qr,alt:`${a.alt} QR`})})]}),h&&gt.jsxs("button",{className:"access-button",onClick:()=>s(a.url),children:[gt.jsx("span",{className:"button-text",children:a.buttonText}),gt.jsx("img",{className:"button-icon",src:a.buttonIcon,alt:"外部リンク"})]})]},l)})})}const G2=[{id:"first",title:"ファーストビュー",component:SDe,motion:{},styles:{},camera:"camera1"},{id:"story",title:"ストーリー",component:EDe,motion:{},camera:"camera2"},{id:"profile",title:"プロフィール",component:bDe,motion:{},camera:"camera3"},{id:"content",title:"コンテンツ",component:FFe,motion:{},camera:"camera4"},{id:"link",title:"リンク",component:NFe,motion:{},camera:"camera5"}],UFe="/model.glb";function OFe({activeCamera:n}){const{camera:e,scene:t,gl:r,size:i}=URe(),s=be.useRef(),o=be.useRef({}),a=be.useRef(new ie),l=be.useRef(new is),u=hP(UFe);return be.useEffect(()=>{r.toneMapping=pk,r.outputEncoding=oh,r.toneMappingExposure=1.5},[r,t]),be.useEffect(()=>{e.setFocalLength(50),e.updateProjectionMatrix(),t.add(u.scene),s.current=new See(u.scene),u.animations.forEach(d=>{s.current.clipAction(d).play().setLoop(vk)}),u.cameras.forEach(d=>{o.current[d.name]=d});const h=o.current[n];return h&&(e.position.copy(h.position),e.quaternion.copy(h.quaternion),a.current.copy(h.position),l.current.copy(h.quaternion)),u.scene.traverse(d=>{if(d.isMesh){const p=d.material,m=p.map||null,v=new Wk({color:p.color||new yt(16777215),map:m});v.envMapIntensity=10,d.material=v}}),()=>{var d;(d=s.current)==null||d.stopAllAction(),s.current=null}},[u,e,t]),be.useEffect(()=>{const h=o.current[n];h&&(a.current.copy(h.position),l.current.copy(h.quaternion))},[n]),ORe((h,d)=>{var p;(p=s.current)==null||p.update(d),e.aspect=i.width/i.height,e.updateProjectionMatrix(),e.position.lerp(a.current,.05),e.quaternion.slerp(l.current,.05),r.render(t,e)}),null}const yW=[{id:"first",camera:"camera1",title:"ファーストビュー",dummy:"ここはファーストビュー用のテキストです。"},{id:"story",camera:"camera2",title:"ストーリー",dummy:`ここはストーリー用の説明文を入れます。
改行も可能です。`},{id:"profile",camera:"camera3",title:"プロフィール",dummy:"プロフィールのダミー情報です。"},{id:"content",camera:"camera4",title:"コンテンツ",dummy:""},{id:"link",camera:"camera5",title:"リンク",dummy:"こちらはリンクセクションのテキストです。"}];function kFe(){const[n,e]=be.useState(0),[t,r]=be.useState(!1),i=be.useRef(!1),s=be.useCallback(o=>{i.current||(o.deltaY>50&&n<yW.length-1?(i.current=!0,e(a=>a+1)):o.deltaY<-50&&n>0&&(i.current=!0,e(a=>a-1)))},[n]);return be.useEffect(()=>{Tne(yW[n].id);const o=setTimeout(()=>i.current=!1,1e3);return()=>clearTimeout(o)},[n]),gt.jsxs(gt.Fragment,{children:[gt.jsx(_De,{onSelect:o=>e(G2.findIndex(a=>a.id===o)),isFirst:n===0,setMenuOpen:r}),gt.jsx("div",{className:"canvas-container",children:gt.jsxs(sPe,{camera:{fov:38.6,near:.1,far:1e3},children:[gt.jsx("ambientLight",{intensity:.3}),gt.jsx("directionalLight",{intensity:.5,position:[25,40,50]}),gt.jsx(be.Suspense,{fallback:null,children:gt.jsx(OFe,{activeCamera:G2[n].camera})})]})}),gt.jsx(dPe,{containerStyles:{backgroundColor:"#000",height:"5px"},innerStyles:{backgroundColor:"#fff"},dataStyles:{color:"#fff",fontSize:"0.8rem"},dataInterpolation:o=>`${o.toFixed(0)}%`}),gt.jsx("div",{className:`sections-container${t?" disabled":""}`,onWheel:s,children:G2.map(({id:o,title:a,component:l,motion:u,styles:h})=>gt.jsx(ADe,{id:o,title:a,motion:u,styles:h,children:l},o))}),gt.jsx("img",{src:"/img/return.png",alt:"return",className:"return-button",onClick:()=>e(0)})]})}HD.createRoot(document.getElementById("root")).render(gt.jsx(za.StrictMode,{children:gt.jsx(kFe,{})}));
